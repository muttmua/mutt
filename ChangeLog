2018-12-01 11:27:20 -0800  Kevin McCarthy  <kevin@8t8.us> (bf2f59d4)

        * Document Sender header as a default in $imap_headers.

M	init.h

2018-11-29 12:36:08 -0800  Kevin McCarthy  <kevin@8t8.us> (42983686)

        * Add SENDER to default list of IMAP headers.
        
        This header is matched by the ~e and ~L patterns.  Those patterns
        should work without the user having to know to add Sender to the list
        of $imap_headers.  This was probably just an oversight.

M	imap/message.c

2018-11-28 00:19:38 +0100  Adam Golebiowski  <adamg@agmk.net> (b4ade8a7)

        * Updated Polish translation.

M	po/pl.po

2018-11-27 13:55:04 -0800  Kevin McCarthy  <kevin@8t8.us> (41816374)

        * Fix QRESYNC crash after a large number of VANISHED messages.
        
        When handling QRESYNC vanished, imap_expunge_mailbox() was called to
        empty out the messages.  Various counters, including vcount are
        updated by the mx_update_tables() after the expunge.
        
        These counters need to be reset, because mx_update_context() will do
        so once again at the end of reading new headers.  This can cause an
        out of bounds access in v2r.

M	imap/message.c

2018-11-25 09:50:23 -0800  Kevin McCarthy  <kevin@8t8.us> (3b75515c)

        * automatic post-release commit for mutt-1.11.0

M	ChangeLog
M	VERSION
M	po/bg.po
M	po/ca.po
M	po/cs.po
M	po/da.po
M	po/de.po
M	po/el.po
M	po/eo.po
M	po/es.po
M	po/et.po
M	po/eu.po
M	po/fi.po
M	po/fr.po
M	po/ga.po
M	po/gl.po
M	po/hu.po
M	po/id.po
M	po/it.po
M	po/ja.po
M	po/ko.po
M	po/lt.po
M	po/nl.po
M	po/pl.po
M	po/pt_BR.po
M	po/ru.po
M	po/sk.po
M	po/sv.po
M	po/tr.po
M	po/uk.po
M	po/zh_CN.po
M	po/zh_TW.po
2018-11-25 09:33:53 -0800  Kevin McCarthy  <kevin@8t8.us> (6de8a20e)

        * Bump release date.

M	UPDATING

2018-11-24 10:10:24 -0800  Morten Bo Johansen  <listmail@mbjnet.dk> (69035fa3)

        * Updated Danish translation.

M	po/da.po

2018-11-24 10:06:55 -0800  Vsevolod Volkov  <vvv@mutt.org.ua> (8b99eb9c)

        * Updated Russian translation.

M	po/ru.po

2018-11-24 10:04:00 -0800  Vsevolod Volkov  <vvv@mutt.org.ua> (ff51ac67)

        * Updated Ukrainian translation.

M	po/uk.po

2018-11-23 09:05:49 +0100  Olaf Hering  <olaf@aepfle.de> (a287a1c4)

        * Update de.po
        
        Unwrap lines, because it is almost 2019.
        
        Signed-off-by: Olaf Hering <olaf@aepfle.de>

M	po/de.po

2018-11-22 09:10:48 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp> (edd749b9)

        * Updated Japanese translation.

M	po/ja.po

2018-11-18 10:05:30 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp> (2a919856)

        * Add L10N comments to several unclear messages.
        
        Updating Japanese translation, I found that some of the updated messages
        were a little hard to understand without reading the code.
        
        Add comments to some messages I nearly translated in a wrong way.

M	account.c
M	crypt-gpgme.c
M	pgp.c
M	recvcmd.c

2018-11-17 14:55:58 +0100  Petr Písař  <petr.pisar@atlas.cz> (5c1af7a4)

        * Czech translation update for Mutt 1.11.0

M	po/cs.po

2018-11-17 02:28:01 +0100  Vincent Lefevre  <vincent@vinc17.net> (e9846f41)

        * Updated fr.po for Mutt 1.11.0.

M	po/fr.po

2018-11-15 09:29:15 -0800  Kevin McCarthy  <kevin@8t8.us> (78a60fc9)

        * Minor fixes to UPDATING.

M	UPDATING

2018-11-14 14:13:47 -0800  Kevin McCarthy  <kevin@8t8.us> (1b5caef3)

        * Update $index_format cross-references in manual.
        
        Add index-format-hook to the list of hooks.
        
        Add the list of configuration variables that use the expandos.
        
        Add a note to $post_index_string that it uses the expandos.

M	init.h

2018-11-13 15:01:53 -0800  Kevin McCarthy  <kevin@8t8.us> (eb69b2ed)

        * Update the UPDATING file for 1.11.0 release.

M	UPDATING

2018-11-10 06:51:34 -0800  lilydjwg  <lilydjwg@gmail.com> (1fd77395)

        * Updated Simplified Chinese translation.

M	po/zh_CN.po

2018-11-07 14:19:25 -0800  Kevin McCarthy  <kevin@8t8.us> (39444350)

        * Minor edits to the README.

M	README

2018-11-07 13:38:53 -0800  Kevin McCarthy  <kevin@8t8.us> (f8153009)

        * Add some brief documentation on OAUTH support.
        
        These are just pulled from Brandon's commit message.

M	doc/manual.xml.head
M	init.h

2018-11-06 15:54:45 -0800  Kevin McCarthy  <kevin@8t8.us> (c9ab8553)

        * Add monitor.h to extra_sources list.

M	Makefile.am

2018-11-06 13:21:20 -0800  Kevin McCarthy  <kevin@8t8.us> (762c0c43)

        * Allow relative date hour/min/sec offsets.
        
        These might be useful for index-format-hook pattern matching for some
        people.

M	doc/manual.xml.head
M	pattern.c

2018-11-06 11:02:01 -0800  Kevin McCarthy  <kevin@8t8.us> (79741a49)

        * Fix a few memory leaks for idna conversion.

M	alias.c
M	init.c
M	sendlib.c

2018-11-05 17:44:20 -0800  Kevin McCarthy  <kevin@8t8.us> (fec121b2)

        * Document send-hooks are not executed for resumed messages.

M	doc/manual.xml.head

2018-11-05 16:19:03 -0800  Kevin McCarthy  <kevin@8t8.us> (1681a2ab)

        * Prevent $charset from having multiple values.
        
        Mutt relies on it being a single character set, but failed to make
        sure of that in check_charset().
        
        Thanks to Hans-Peter Jansen for reporting the problem, and to Mel
        Gorman for working with me to track down the issue in his
        configuration.

M	init.c

2018-10-31 12:19:56 -0700  Kevin McCarthy  <kevin@8t8.us> (e6059484)

        * Always print mutt_buffer_pool_free() size debug output.
        
        So I can easily see the resulting size of the pool at the end of a
        run.

M	buffer.c

2018-10-30 11:53:37 -0700  Kevin McCarthy  <kevin@8t8.us> (5de55f85)

        * Add a flag for dynamic date range evaluation in patterns.
        
        By default, Mutt evaluates relative date patterns, such as "~d<1d"
        against the date when the pattern is compiled.
        
        For index-format-hook, we need to pattern match against a message
        based on the current date/time, so that for example, conditional date
        format patterns correctly match after Mutt has been open for many
        days/weeks.
        
        Add a flag, MUTT_PATTERN_DYNAMIC, that changes ~d and ~r evaluation to
        reevaluate the min/max range with each match.
        
        This will of course be slower, but for the index, where a screenful of
        messages at a time are evaluated, is an acceptable tradeoff against
        accurate pattern matching.

M	hook.c
M	mutt.h
M	pattern.c

2018-10-29 13:45:02 -0700  Kevin McCarthy  <kevin@8t8.us> (7ebb6205)

        * Add index-format-hook and expando.
        
        index-format-hook is used to allow dynamic insertion/evaluation of
        format strings into $index_format.
        
        It can be used, for example, to implement date formatting based on the
        age of the message.
        
        Add a new %@name@ expando to $index_format, which evaluates the
        matching index-format-hooks with "name".

M	doc/manual.xml.head
M	hdrline.c
M	hook.c
M	init.c
M	init.h
M	mutt.h
M	protos.h

2018-10-30 08:55:52 -0700  Kevin McCarthy  <kevin@8t8.us> (5cfbcf52)

        * Fix memory leak on error in eat_regexp() and eat_date().

M	pattern.c

2018-10-23 12:29:26 +0200  Peter Wu  <peter@lekensteyn.nl> (7c6d3851)

        * Fix memleaks of saslconn on error paths
        
        If mutt_sasl_client_new returns an error, the callers would ignore the
        allocated saslconn resource from sasl_client_new. Be sure to release
        these with sasl_dispose as documented in sasl.h. Likewise, let callers
        (POP/IMAP) dispose the resource on their error paths. SMTP was already
        taken care of. Found with LeakSanitizer in IMAP.

M	imap/auth_sasl.c
M	mutt_sasl.c
M	pop_auth.c

2018-10-16 17:42:35 -0700  Kevin McCarthy  <kevin@8t8.us> (420226ce)

        * Minor syntactic cleanup in mutt_print_attachment().
        
        Converting a return to a rc assignment accidentally left an extra
        parenthesis.

M	attach.c

2018-10-16 17:35:54 -0700  Kevin McCarthy  <kevin@8t8.us> (42481bda)

        * Ensure a resized empty buffer is null-terminated.
        
        The new buffer code is using the pool, which ensures its buffers are
        null-terminated.
        
        However, if a "new" buffer from another part of the code were passed
        to one of the temporary interfaces that resizes the buffer, it's
        possible a non-terminated string might end up being passed through.
        
        It's reasonable to expect mutt_b2s() for a "new" buffer should be the
        same as after it is resized larger.  So ensure the resulting buf->data
        is properly terminated to avoid surprises.

M	buffer.c

2018-10-16 16:04:57 -0700  Kevin McCarthy  <kevin@8t8.us> (dd1e0ea4)

        * Remove conversion of nbsp to space.
        
        Keep the behavior of it not line-breaking, but don't change it to a
        space character when displaying.  This is so copy-paste from the pager
        will preserve the nbsp, which is semantically important in some
        locales.

M	pager.c

2018-10-14 14:35:21 -0700  Kevin McCarthy  <kevin@8t8.us> (b02a9d75)

        * Convert mutt_print_attachment to use BUFFER.

M	attach.c

2018-10-14 14:02:20 -0700  Kevin McCarthy  <kevin@8t8.us> (fde5478c)

        * Convert mutt_view_attachment to use BUFFER.

M	attach.c
M	protos.h

2018-10-14 13:02:20 -0700  Kevin McCarthy  <kevin@8t8.us> (162e7cc6)

        * Convert mutt_edit_attachment to use BUFFER.

M	attach.c

2018-10-14 16:18:53 -0700  Kevin McCarthy  <kevin@8t8.us> (ffdf38d7)

        * Convert mutt_compose_attachment to use BUFFER.

M	attach.c
M	rfc1524.c
M	rfc1524.h

2018-10-14 12:52:30 -0700  Kevin McCarthy  <kevin@8t8.us> (c619d5cb)

        * Convert mutt_get_tmp_attachment to use BUFFER.

M	attach.c

2018-10-14 19:02:47 -0700  Kevin McCarthy  <kevin@8t8.us> (57caae48)

        * Add mutt_buffer_adv_mktemp() transition function.

M	muttlib.c
M	protos.h

2018-10-14 18:36:08 -0700  Kevin McCarthy  <kevin@8t8.us> (f6d9a980)

        * Add mutt_buffer_mktemp() transition function.
        
        This is self-contained and easy to translate, so instead just create
        an alternate implementation using BUFFER.

M	muttlib.c
M	protos.h

2018-10-14 15:48:07 -0700  Kevin McCarthy  <kevin@8t8.us> (4781461c)

        * Add rfc1524 buffer function interfaces for attach.c conversion.
        
        The rfc1524 functions call, and are called by, many functions that
        need to be converted.  But to keep the conversion manageable, install
        helper interface functions that pass the buffer->data and
        buffer->dsize in and adjust the buffer->dptr afterwards.

M	buffer.c
M	buffer.h
M	rfc1524.c
M	rfc1524.h

2018-10-10 13:08:27 -0700  Kevin McCarthy  <kevin@8t8.us> (b231f15a)

        * Convert the rest of mh.c to use BUFFER for file paths.
        
          * mh_read_sequences
          * mh_sequences_changed
          * mh_already_notified
          * mh_mkstemp
          * mh_update_sequences
          * mh_sequences_add_one
          * maildir_update_time
          * maildir_delayed_parsing
          * maildir_open_mailbox_append
          * mh_open_mailbox_append
          * maildir_mh_open_message
          * maildir_open_new_message
          * _mh_commit_message
          * mh_rewrite_message
          * mh_sync_mailbox
          * mh_check_mailbox
          * maildir_check_empty
          * mx_is_maildir
          * mx_is_mh()

M	mh.c

2018-10-10 12:50:15 -0700  Kevin McCarthy  <kevin@8t8.us> (14b0178d)

        * Add a comment about gnutls date bits in certstat.
        
        It's easy to miss the call disabling date checking and wonder why the
        certstat bits are not set.

M	mutt_ssl_gnutls.c

2018-10-09 14:39:09 -0700  Kevin McCarthy  <kevin@8t8.us> (d6581efc)

        * Change gnutls certificate_file processing and interactive prompts.
        
        Accept a saved cert at any point in the chain, except for those
        revoked or with invalid dates.
        
        The INSECUREALG processing was a bit goofed up.  It was skipping the
        prompt for every chain except the host, and was only displaying an
        error for entry 1 (the host being 0, root being len-1).  Instead
        prompt at any point, and display a warning as with the other errors.
        
        Add a CERTERR_OTHER type to capture other bits.  Recently GnuTLS has
        added additional certificate_status_t types.  We may want to improve
        the prompts in the future for those, but for now at least make sure
        it's recorded in certerr.

M	mutt_ssl_gnutls.c

2018-10-09 13:28:15 -0700  Kevin McCarthy  <kevin@8t8.us> (ea1ea1e5)

        * Fix gnutls (a)lways to properly save for all certerr values.
        
        For the case of SIGNERNOTCA, INSECUREALG, or a newer unhandled value,
        the "(a)ccept always" prompt was allowed, but the cert saving was
        prevented by a check only against NOTTRUSTED.  This ended up giving a
        strange error message saying the cert was not saved.
        
        Fix to save the cert for all errors except HOSTNAME (which is handled
        separately).

M	mutt_ssl_gnutls.c

2018-10-07 19:08:42 -0700  Kevin McCarthy  <kevin@8t8.us> (85ac2c1d)

        * Convert maildir_canon_filename() and callers to use BUFFER.
        
        Callers are maildir_check_mailbox(), _maildir_open_find_message(), and
        maildir_open_find_message().

M	mh.c

2018-10-07 16:17:36 -0700  Kevin McCarthy  <kevin@8t8.us> (112f81d8)

        * Convert maildir_sync_message to use BUFFERs.

M	mh.c

2018-10-07 15:48:17 -0700  Kevin McCarthy  <kevin@8t8.us> (766e76ee)

        * Convert _maildir_commit_message to use BUFFER.

M	mh.c

2018-10-07 15:31:40 -0700  Kevin McCarthy  <kevin@8t8.us> (de6d6180)

        * Convert maildir_parse_dir to use BUFFER.
        
        Note: the uses of buf and tmp don't overlap, so we only use a single
        BUFFER.

M	mh.c

2018-10-07 15:18:34 -0700  Kevin McCarthy  <kevin@8t8.us> (90a53062)

        * Convert buffy_maildir_check_dir to use BUFFER.

M	buffy.c

2018-10-08 10:36:13 -0700  Kevin McCarthy  <kevin@8t8.us> (3405aeee)

        * Convert mix_send_message to use buffer pool.

M	remailer.c

2018-10-08 10:48:29 -0700  Kevin McCarthy  <kevin@8t8.us> (1e1d7b7a)

        * Create mutt_buffer_add_printf().
        
        Change mutt_buffer_printf() to overwrite the buffer contents, like
        mutt_buffer_strcpy().
        
        mutt_buffer_add*() functions append to the buffer contents.

M	buffer.c
M	buffer.h
M	imap/command.c
M	imap/imap.c
M	imap/message.c
M	imap/util.c
M	pattern.c

2018-10-06 15:07:27 -0700  Kevin McCarthy  <kevin@8t8.us> (2d373eba)

        * Convert imap_rename and pgp_invoke_list_keys to use buffer pool.

M	imap/imap.c
M	pgpinvoke.c

2018-10-06 13:53:33 -0700  Kevin McCarthy  <kevin@8t8.us> (619fe069)

        * Add buffer pool functions.
        
        Also add a few helper functions: mutt_buffer_clear(),
        mutt_buffer_strcpy(), and a macro mutt_b2s to grab the buffer data as
        a const char *.

M	buffer.c
M	buffer.h
M	init.c
M	main.c

2018-10-06 13:08:13 -0700  Kevin McCarthy  <kevin@8t8.us> (563afcc1)

        * Rearrange and clean up buffer functions.

M	buffer.c
M	buffer.h

2018-10-06 12:43:17 -0700  Kevin McCarthy  <kevin@8t8.us> (f3c70b58)

        * Break buffer functions into separate source file.

M	Makefile.am
A	buffer.c
A	buffer.h
M	mutt.h
M	muttlib.c
M	protos.h

2018-10-05 10:04:27 -0700  Kevin McCarthy  <kevin@8t8.us> (caeda713)

        * Improve info install/uninstall checks.
        
        Make sure install-info exists before using it.
        
        Make sure target mutt.info exists before calling `install-info
        --delete`.  Add a few missing '-f' force flags to removals during
        uninstall.

M	doc/Makefile.am

2018-10-04 12:06:27 -0700  Kevin McCarthy  <kevin@8t8.us> (95c4c5c2)

        * Build info file documentation.
        
        If docbook2x-texi and makeinfo are installed, convert the docbook file
        to info and install as another source for the manual.

M	.gitignore
M	configure.ac
M	doc/Makefile.am
M	doc/manual.xml.head

2018-10-03 22:36:32 +0200  Max Görner  <max@familie-goerner.eu> (8a0d03d9)

        * Adapt translation of "Subject" in help text
        
        In the help text, "Subject" was not translated. Since it is translated
        by "Betreff" at other locations, this was adapted.

M	po/de.po

2018-10-03 22:32:44 +0200  Max Görner  <max@familie-goerner.eu> (17f58246)

        * Translate ERROR by FEHLER

M	po/de.po

2018-10-03 22:28:57 +0200  Max Görner  <max@familie-goerner.eu> (1fd2c85b)

        * Add several "Durchkopplungsbindestrich" to some German translations
        
        While up to personal taste to a certain extent, in general it is more
        appropriate to use dashes instead of spaces to to combine related but
        distinct terms.
        
        This commit introduces dashes, so called Durchkopplungsbindestriche, to
        some of the terms, were found more suiting.

M	po/de.po

2018-10-03 22:20:30 +0200  Max Görner  <max@familie-goerner.eu> (fb34e79c)

        * Fix typos in German translation
        
        There were some typos in the German translation. Those found by a brief
        inspection are fixed now.

M	po/de.po

2018-09-28 15:08:19 -0700  Kevin McCarthy  <kevin@8t8.us> (f3e0742a)

        * Convert pgp_invoke_list_keys and mix_send_message to use BUFFERs.
        
        Both repetitively perform a lot of copying back in forth, which is
        much cleaner with a BUFFER.
        
        Note that in pgp_invoke_list_keys, if there are no hints uids->data
        would be NULL.  However, the pgp_invoke() checks and wraps all the
        format substitutions with NONULL.

M	pgpinvoke.c
M	remailer.c

2018-09-28 14:22:09 -0700  Kevin McCarthy  <kevin@8t8.us> (a97543c3)

        * Change imap_rename_mailbox to use a BUFFER.

M	imap/imap.c

2018-09-27 17:29:16 -0700  Kevin McCarthy  <kevin@8t8.us> (51efb726)

        * Increase buffer sizes for some IMAP commands.
        
        Use to ensure assembled IMAP commands fit in the resultant buffer to
        be imap_exec()'ed.
        
        RFC2683 suggested a limit of 1000, but asked servers to accept up to
        8000.  Furthermore, RFC7162 bumped the client limit suggestion up to
        8192.  So I don't believe any issues will be caused by this.
        
        Most of these are increases are just to remove theoretical truncation
        warned about by the compiler; I don't believe we've had reports of
        actual command truncation due to a mailbox 1024 characters long.

M	imap/browse.c
M	imap/imap.c
M	imap/message.c
M	lib.h

2018-09-27 15:03:40 -0700  Kevin McCarthy  <kevin@8t8.us> (b181996c)

        * Add regfree to configure regex test.
        
        This allows to run the system regex lib even when compiling with
        ASAN.  Previously, ASAN would report the regex_t leak and change the
        exit code.

M	configure.ac

2018-09-25 19:03:56 -0700  Kevin McCarthy  <kevin@8t8.us> (999d85c6)

        * Fix non-threaded $sort_aux "reverse-" sorting.
        
        The secondary sort was looking at (Sort & SORT_REVERSE) instead
        of (SortAux & SORT_REVERSE), so wasn't even performing the reverse
        based on the correct flag.
        
        Additionally, afterwards, the primary sort was improperly applying a
        reverse when the secondary sort returned non-zero.
        
        Change SORTCODE() to look at SortAux when we are inside a secondary
        sort.
        
        Change AUXSORT() to return the result if the secondary sort returns
        non-zero.  It is ugly to put a return inside the macro, but the check
        for non-zero needs to be performed inside the AUXSORT if branch.
        
        If the secondary sort returns 0, then the primary sort can still
        compare index and apply a reverse as needed.

M	init.h
M	sort.c

2018-09-22 09:57:30 -0700  Kevin McCarthy  <kevin@8t8.us> (f8196e20)

        * Merge branch 'stable'

2018-09-22 09:53:55 -0700  Kevin McCarthy  <kevin@8t8.us> (f9293d64)

        * Increase user/pass field sizes in auth_login.
        
        account.pass was previously increased to 256 in cd421c13.  Also, the
        buf should be bigger than the user+pass+"LOGIN", so bump it up too.

M	imap/auth_login.c

2018-09-21 17:13:02 -0700  Kevin McCarthy  <kevin@8t8.us> (8ac10368)

        * Add output during smime_keys purpose flag checking.

M	smime_keys.pl

2018-09-17 19:40:22 -0700  Kevin McCarthy  <kevin@8t8.us> (4350694b)

        * Send imap keepalives for interactive filters.
        
        When viewing attachments externally with a (non-copiousoutput) mailcap
        entry missing %s, the command is invoked as a filter, with the
        attachment piped into stdin.  However, unlike a filter, the user
        interacts with the command, instead of just displaying the output in
        the pager.
        
        Just as with the mutt_system() command, Mutt needs to send imap
        keepalives to keep those connections from closing during the
        potentially extended invocation.
        
        Thanks to John Hawkinson for the bug report, and his suggested patch,
        which this commit is based upon.

M	attach.c
M	filter.c
M	protos.h

2018-09-14 14:23:04 -0700  Kevin McCarthy  <kevin@8t8.us> (668b76f2)

        * Remove purpose checks in smime_keys.pl verify step.
        
        The purpose checks are subsequently performed, and added as a field to
        the .index.  In any case, it turns out passing multiple '-purpose'
        arguments isn't even correct: openssl appears to just use the last
        one.
        
        Thanks to David J. Weller-Fahy for reporting the problem, and for
        including a possible patch.

M	smime_keys.pl

2018-09-14 14:21:04 -0700  Kevin McCarthy  <kevin@8t8.us> (2a0afe07)

        * Free queries and alias_queries before exiting.

M	main.c

2018-09-12 18:23:00 -0700  Kevin McCarthy  <kevin@8t8.us> (488e9cd7)

        * Change imap_conn_find() to always return an authenticated conn.
        
        With the flag MUTT_IMAP_CONN_NONEW, it was already ensured the
        connection would be authenticated.  However, without that flag, an
        error in opening the connection or authentication would still return
        an idata.
        
        The callers that didn't bother to check the state were still assuming
        authenticated, because they were all subseqeuently issuing an
        "authenticated state" command to the server.
        
        Rather than add state checks to every caller, just change the function
        to return NULL if the idata did not end up in an authenticated state.
        
        Remove the now redundant state checks in imap_open_mailbox() and
        imap_get_mailbox().

M	imap/imap.c

2018-09-02 14:43:04 -0700  Kevin McCarthy  <kevin@8t8.us> (9ed4bf53)

        * Change compress examples to type "example" rather than "sect4".

M	doc/manual.xml.head

2018-09-02 14:22:09 -0700  Kevin McCarthy  <kevin@8t8.us> (34ea7e4c)

        * Clean up documentation link targets.
        
        Move link targets for iconv-hook and sidebar_whitelist to the
        beginning of a section, rather than a link embedded inside a command.

M	doc/manual.xml.head

2018-09-02 20:53:41 +0200  Vincent Lefevre  <vincent@vinc17.net> (c8112503)

        * Updated French translation.

M	po/fr.po

2018-09-01 09:47:07 -0700  Cody Brownstein  <cbrownstein@liquidityllc.com> (daf66918)

        * Fix typo

M	init.h

2018-08-31 15:50:00 -0700  Kevin McCarthy  <kevin@8t8.us> (1b4860a5)

        * Convert certificate prompts to show sha-256 instead of md5.
        
        Due to the length of the sha-256 fingerprint, split the output into
        two lines.
        
        Note that this change now requires OpenSSL 0.9.8+ [2005-07-05], and
        GnuTLS 1.7.4+ [2007-02-05].

M	mutt_ssl.c
M	mutt_ssl_gnutls.c

2018-08-29 15:08:19 -0700  Kevin McCarthy  <kevin@8t8.us> (a2b28936)

        * Rename pgpring to mutt_pgpring.
        
        pgpring is used by another common package, signing-party.  At the
        request of ArchLinux, I am renaming our version to be prefixed by
        "mutt_" in order to remove a naming conflict.
        
        This is a minor inconvenience for pgp2, pgp5, and pgp6 users, but I
        believe this constitutes an extremely small number of users at this
        point.
        
        I am keeping pgpewrap as-is because it is also used by GnuPG, and has
        no such naming conflict.

M	.gitignore
M	Makefile.am
M	configure.ac
M	contrib/pgp2.rc
M	contrib/pgp5.rc
M	contrib/pgp6.rc
M	doc/Makefile.am
M	doc/PGP-Notes.txt
M	doc/mutt.man
M	doc/pgpring.man
M	init.h

2018-08-29 13:00:14 -0700  Kevin McCarthy  <kevin@8t8.us> (6216a753)

        * Remove extra lstats() in safe_rename() upon link success.
        
        I originally kept the lstat()'s in order to make as few changes as
        possible to the function.  However, Derek Martin argues correctly that
        if we are trusting the link() 0-retval, the lstats are unnecessary and
        in fact can cause a performance impact over NFS.

M	lib.c

2018-08-26 18:43:20 -0700  Kevin McCarthy  <kevin@8t8.us> (2d889227)

        * Add additional error handling to safe_rename().
        
        It is apparently possible for link() to return an error but the link
        to still be created.  Add a double check for that case.  If the files
        match, unlink the src and return success.

M	lib.c

2018-08-28 17:43:46 +0200  Tommi A Pirinen  <tommi.antero.pirinen@uni-hamburg.de> (462710bd)

        * new Finnish translation

M	configure.ac
A	po/fi.po

2018-08-28 14:07:31 +0200  Vincent Lefevre  <vincent@vinc17.net> (22d20f50)

        * Updated French translation.

M	po/fr.po

2018-08-28 13:59:40 +0200  Vincent Lefevre  <vincent@vinc17.net> (39e1eb86)

        * Updated French translation.

M	po/fr.po

2018-08-26 16:10:13 -0700  Kevin McCarthy  <kevin@8t8.us> (426a6c12)

        * Merge branch 'stable'

2018-08-26 16:08:06 -0700  Kevin McCarthy  <kevin@8t8.us> (c7695a40)

        * Fix alias documentation examples.
        
        Thanks to Cody Brownstein for pointing out the problem.

M	doc/manual.xml.head

2018-08-24 15:49:49 -0700  Kevin McCarthy  <kevin@8t8.us> (c041375c)

        * Change $query_format to use mutt_format_s.
        
        Use the character-cell width functions so that multibyte output is
        properly formatted.

M	query.c

2018-08-24 12:56:54 -0700  Kevin McCarthy  <kevin@8t8.us> (fa620776)

        * Display an error message if syncing fails.
        
        Ticket 36 reported an issue where a maildir was removed while the
        mailbox was opened.  Later, attempting to sync displayed the message
        "Writing xxx...", which remained on the screen.  The reporter actually
        thought mutt was frozen, but it was simply that on a sync error Mutt
        wasn't clearing or updating the message window.
        
        There is some error message handling for mbox.c check_mailbox, but I
        don't think that is the right place to further propogate messages.
        Instead, add an error to the same place the initial "Writing..."
        message is created.

M	mx.c

2018-08-22 15:07:45 -0700  Kevin McCarthy  <kevin@8t8.us> (32734a9f)

        * Add compose-to-sender functionality.
        
        This patch is loosely based on the NeoMutt feature, but adds in
        support for the attach menu, reuses functionality in send.c, and has
        proper mode checks.
        
        Thanks to Enno for the opening the ticket requesting the port.

M	OPS
M	attach.h
M	curs_main.c
M	functions.h
M	mutt.h
M	pager.c
M	recvattach.c
M	recvcmd.c
M	send.c

2018-08-21 15:51:09 -0700  Kevin McCarthy  <kevin@8t8.us> (1d3b82b7)

        * Fix nested macro warning.
        
        Pull the #if/#else outside of the snprintf in imap.c.  On some
        platforms, snprintf is a macro itself, which leads to a warning about
        undefined behavior.
        
        Thanks to Charles Diza for pointing out the problem.

M	imap/imap.c

2018-08-14 14:31:34 -0700  Kevin McCarthy  <kevin@8t8.us> (38647ab9)

        * Remove compare_stat() call in safe_rename().
        
        Some filesystems, such as sshfs, implement hard links strangely.  The
        hard link is created, but is represented by a different inode number
        by the sshfs layer.  The current maildir code goes into an infinite
        loop in this case.  Remove the compare_stat() and trust that a link()
        return code of 0 means the link really did get created.  Still, keep
        the stats just as a minor check.

M	lib.c

2018-08-21 15:18:24 -0700  Kevin McCarthy  <kevin@8t8.us> (ec9098a4)

        * Merge branch 'stable'

2018-08-21 15:00:23 -0700  Kevin McCarthy  <kevin@8t8.us> (78db40f2)

        * Add autoconf check for libunistring when checking for idn2.
        
        -lunistring is only explicitly needed when compiling statically, so
        add a AC_SEARCH_LIBS to add it to LIBS if it is found.
        
        Thanks to Fabrice Fontaine for the heads-up about the problem and the
        merge request.

M	configure.ac

2018-08-16 11:49:13 +0200  Vincent Lefevre  <vincent@vinc17.net> (b1a9ccad)

        * Updated French translation.

M	po/fr.po

2018-08-15 16:13:45 -0700  Kevin McCarthy  <kevin@8t8.us> (7ca3b14b)

        * Allow ctrl-c to interrupt initial IMAP header download.
        
        Once the mailbox is open, it is significantly more complicated to
        abort and keep Mutt from crashing.  But during the initial
        open/download Mutt is prepared to close the mailbox cleanly on
        failure.

M	imap/message.c

2018-08-14 14:04:05 -0700  Kevin McCarthy  <kevin@8t8.us> (5ce9030c)

        * Remove legacy trim_incomplete_mbyte() in the pager.
        
        Commit 4b1deb57 added the trim_incomplete_mbyte() call, but at
        that time, the function was using fgets() into a fixed-sized
        buffer.  The function was passing in "blen - 1" to the size
        parameter of fgets, so the check for blen-2 was to see if the
        buffer was completely filled by the fgets.
        
        Commit d39d9c0c converted to use a dynamic buffer, but the
        trim_incomplete_mbyte() was left in.  It now serves no purpose
        because the entire line will be read in.  Presumably the buggy
        regexp lib should have been fixed by now too.

M	pager.c

2018-08-13 19:02:32 -0700  Kevin McCarthy  <kevin@8t8.us> (e8b626bc)

        * Don't match $abort_noattach_regexp on quoted lines.

M	send.c

2018-08-13 18:56:37 -0700  Kevin McCarthy  <kevin@8t8.us> (a1cf2012)

        * Refactor out mutt_is_quote_line().
        
        This makes resolve_types() a tiny bit clearer, and will be usable by
        $abort_noattach.

M	pager.c
M	protos.h

2018-08-13 18:22:58 -0700  Kevin McCarthy  <kevin@8t8.us> (f721883d)

        * Convert abort_noattach scan to use mutt_read_line().
        
        I should have fixed this up before committing the patch.

M	send.c

2018-08-13 09:43:55 -0700  Kevin McCarthy  <kevin@8t8.us> (fe455d5f)

        * Only sync CONDSTORE and QRESYNC on the initial download.
        
        In the midst of the imap_read_headers() refactor, I forgot to put this
        guard on the /MODSEQ and /UIDSEQSET storage.
        
        Because we don't deal with flag sync issues while the mailbox is open,
        or when it closes, we only want to write those values to the header
        cache during the initial download.
        
        It makes no sense to perform all the header cache work if new messages
        come into an open empty mailbox, so add a parameter to flag the
        initial download, rather than check for msn_begin==1.

M	imap/command.c
M	imap/imap.c
M	imap/imap_private.h
M	imap/message.c

2018-08-12 22:02:38 +0200  Vincent Lefevre  <vincent@vinc17.net> (289e5c8e)

        * Updated French translation.

M	po/fr.po

2018-08-11 19:14:10 -0700  Kevin McCarthy  <kevin@8t8.us> (b88aaeb3)

        * Add more doc for the $imap_condstore and $imap_qresync options.

M	init.h

2018-08-11 17:59:54 -0700  Kevin McCarthy  <kevin@8t8.us> (a056404c)

        * Always check UID vs MSN when handling FETCH.
        
        Ensure the UID vs MSN check is always done before flags are processed,
        not just if the UID happened to appear before the FLAGS.
        
        Improve the debug messages to make it clearer why a fetch response is
        being skipped.

M	imap/command.c

2018-05-26 16:02:04 -0700  Kevin McCarthy  <kevin@8t8.us> (3865d043)

        * Add QRESYNC support.
        
        Refactor imap_read_headers() to break into functions for the different
        queries.
        
        Move uid_hash population to the same place msn_index is populated.
        
        Change the VANISHED handler to not decrement MSNs for EARLIER.
        FastMail, at least, does assume there are no gaps, and really it makes
        no sense for there to be.  Further testing will be needed.

M	imap/command.c
M	imap/imap.c
M	imap/imap_private.h
M	imap/message.c
M	imap/util.c
M	init.h
M	mutt.h

2018-05-24 13:26:35 -0700  Kevin McCarthy  <kevin@8t8.us> (868aaa48)

        * Add utility functions for QRESYNC support.
        
        * Add function to generate uid_seqset for header cache.
          This will be used by QREFRESH to reconstruct the msn_index state.
        
        * Add seqset data structure and iterator functions.
        
        * Add cmd_parse_vanished, for QRESYNC support.
        
        * Add and enable QRESYNC capability.
        
        * Create helper functions to store and retrieve the uid_seqset.

M	imap/command.c
M	imap/imap.c
M	imap/imap_private.h
M	imap/message.c
M	imap/util.c

2018-05-14 18:12:39 -0700  Kevin McCarthy  <kevin@8t8.us> (9079c2a8)

        * Add basic CONDSTORE support when fetching initial messages.
        
        Store MODSEQ in the header cache, and use that to perform a "FETCH
        CHANGEDSINCE" for header updates when initially downloading messages.
        
        Further improvements could be made to add support when syncing.
        Handling MODSEQ for FLAG updates while the mailbox is open would be
        complicated by the fact that Mutt supports locally modified headers,
        so we couldn't accept the new (or subsequent) MODSEQ.
        
        However, this initial step may at least provide some benefit when
        opening the mailbox, which is generally the most time and data
        intensive.

M	imap/command.c
M	imap/imap.c
M	imap/imap_private.h
M	imap/message.c
M	imap/message.h
M	init.h
M	lib.c
M	lib.h
M	mutt.h

2018-05-26 14:46:16 -0700  Kevin McCarthy  <kevin@8t8.us> (b13a4ba6)

        * Create mutt_buffer_increase_size() function.
        
        This will allow preallocating buffers that we know are going to be
        big for qresync support.
        
        This will also be useful for buffer pools later on.

M	muttlib.c
M	protos.h

2018-07-28 18:43:31 -0700  Kevin McCarthy  <kevin@8t8.us> (10c1ac4b)

        * Move exit cleanup in main() to end of function.
        
        Route exits to the same place to ensure uniform cleanup.
        
        Message printing is a bit of a mess, but for now, try to keep the
        exact same behavior.

M	main.c

2018-07-28 15:26:34 -0700  Kevin McCarthy  <kevin@8t8.us> (911df435)

        * Fix -z and -Z options to work with IMAP.
        
        -Z did not work if $imap_passive was set (the default).  I think using
        the option implies the desire to open a new connection and check
        buffy at startup, so temporarily turn it off during the buffy.
        
        -z was not hooked up for IMAP.  Change it to call imap_status().  This
        also requires $imap_passive be unset, so temporarily turn the option
        off too.

M	imap/imap.c
M	imap/imap.h
M	main.c
M	mx.c

2018-07-28 13:16:50 -0700  Kevin McCarthy  <kevin@8t8.us> (6db2f9d1)

        * Add a note about doc/manual.tex generation.
        
        The invocation doesn't work for me, but does work for Ken.  I'm
        reluctant to touch and break it for existing users, so instead
        add a note to the Makefile.am.  Perhaps someone with more knowledge of
        those tools can make it portable.

M	doc/Makefile.am

2018-07-28 12:59:35 -0700  Kevin McCarthy  <kevin@8t8.us> (8a81930d)

        * Fix AUXSORT usage in compare_spam.
        
        AUXSORT already checks if the first parameter is zero.
        
        Additionally, the macro expands into more than one statement, so
        putting inside an unbracketed if is misleading and generates a
        warning on the latest gcc.
        
        Fortunately, both statements checked if the first parameter was zero,
        so no actual bug resulted.

M	sort.c

2018-07-26 15:34:50 -0700  Ken Moffat  <zarniwhoop@ntlworld.com> (2af6caa1)

        * Fix manual.pdf toc page numbers.
        
        When TeX engines are not run sufficient times there are undefined
        references - for manual.tex the page numbers in the Table of
        Contents and the List of Tables render as '??'.  In this case:
        
        Then shalt thou count to three, no more, no less.

M	doc/Makefile.am

2018-07-25 18:16:34 -0700  Kevin McCarthy  <kevin@8t8.us> (5f5dc70f)

        * Add message padding to ctx->vsize computation.
        
        Use the mx_msg_padding_size() from the previous commit to be more
        precise about the correct vsize.
        
        This avoids strange situations where all the message are displayed in
        a limit, but the vsize is not equal to the size.

M	curs_main.c
M	mx.c
M	pattern.c
M	thread.c

2018-07-25 17:52:40 -0700  Kevin McCarthy  <kevin@8t8.us> (9806d249)

        * Add mx_ops.msg_padding_size to return the padding for a mx type.
        
        Mbox pads with a 1 byte, while mmdf pads with 10.  Because compress
        depends on the child type, we create a mx_ops, which allows compress.c
        to delegate to the child ops.

M	compress.c
M	mailbox.h
M	mbox.c
M	mutt.h
M	mx.c

2018-07-24 18:23:25 -0700  Kevin McCarthy  <kevin@8t8.us> (7b998416)

        * Skip sort in mbox_sync_mailbox() when new/reopen occurs.
        
        Callers of mx_sync_mailbox() and mx_close_mailbox() already check for
        those cases and call update_index().  So remove the need_sort flag
        setting when mbox_check_mailbox() returns new/reopen inside
        mbox_sync_mailbox().

M	mbox.c

2018-07-24 18:12:20 -0700  Kevin McCarthy  <kevin@8t8.us> (1147aed6)

        * Handle reopen/new_mail when closing mailbox in <imap-logout-all>.
        
        Other callers, such as OP_QUIT, OP_MAIN_CHANGE_FOLDER, and
        OP_MAIN_SYNC_FOLDER handle the case where a sync or close_mailbox
        fails due to new mail or a reopen.
        
        OP_MAIN_LOGOUT_ALL appears to have been accidentally missed.  Add a
        call to update_index() to properly sort and update vcounts.

M	curs_main.c

2018-07-24 03:52:41 +0200  Vincent Lefevre  <vincent@vinc17.net> (2030998e)

        * Add ctx->vsize = 0 in a couple of places.
        
        It is not clear whether this is needed, but in both cases, the old value
        (if not 0) is obsolete. If there is a bug somewhere else about vsize, it
        will be easier to notice it.

M	mbox.c
M	sort.c

2018-07-22 02:57:32 +0200  Vincent Lefevre  <vincent@vinc17.net> (1f3a9df8)

        * Improved limit-to-all detection by skipping leading spaces of the pattern.
        
        There are many equivalent limit-to-all patterns, but in practice, one
        may want to limit to " ~A" in order to prevent the pattern from being
        recorded in the history. Thus it is important to detect at least this
        pattern and similar ones.

M	pattern.c

2018-07-22 01:46:03 +0200  Vincent Lefevre  <vincent@vinc17.net> (9a314f02)

        * Bug fix: reset ctx->vsize in update_index_unthreaded on reopened mailbox.
        
        This fixes a bug observed when doing the following:
        1. Start Mutt on some mailbox.
        2. Limit the view.
        3. Set sort by date (thus unthreaded).
        4. Set $status_format to display the size of the messages shown (%L).
        5. Copy a message matching the limit pattern to this mailbox.
        6. With another Mutt instance, remove this message from this mailbox.
        7. Move the cursor to update the view.
        Result: one was getting a value equal to twice the initial size.

M	curs_main.c

2018-07-22 01:35:32 +0200  Vincent Lefevre  <vincent@vinc17.net> (b9eddeab)

        * Cleanup: avoid an ugly local preprocessor macro.
        
        Note: This macro was also hiding the use of a variable, making the code
        difficult to read.

M	curs_main.c
M	pattern.c

2018-07-19 20:28:38 -0700  Kevin McCarthy  <kevin@8t8.us> (1d41321a)

        * Display matching new messages in a thread-limited index.
        
        Previously, the index performed pattern matching first, and then
        resorted new mail.  The problem was that thread-limiting patterns,
        e.g. ~(pattern), require threading data to properly match against the
        new messages.
        
        We already save new messages for the purposes of uncollapsing threads.
        To keep the code cleaner, split off update_index() into
        update_index_threaded()/unthreaded().  Then for threaded mode, save
        the new messages first.  We can then sort (before pattern matching),
        and use the save_new array to pattern match the new messages
        afterwards.
        
        The $uncollapse_new loop was unnecessarily performing a n^2 search.
        Simplify to just iteratate over the save_new instead.

M	curs_main.c

2018-07-17 10:04:24 -0700  Kevin McCarthy  <kevin@8t8.us> (f0772c95)

        * Minor documentation fix.

M	doc/manual.xml.head

2018-07-17 17:06:45 +0200  Vincent Lefevre  <vincent@vinc17.net> (644699c8)

        * Updated French translation.

M	po/fr.po

2018-06-26 15:42:08 -0700  Brandon Long  <blong@fiction.net> (98cc4236)

        * Improve OAUTHBEARER support.
        
        Move token refresh commands to their own config variables. Consolidate
        code for refreshing tokens and generating the SASL OAUTHBEARER
        argument in account.c. Add support for OAUTHBEARER to pop.
        
        Fix pop_auth_oauth() mutt_from_base64() call from 1.10.1 release.

M	account.c
M	account.h
M	globals.h
M	imap/auth_oauth.c
M	init.h
M	pop_auth.c
M	smtp.c

2018-07-16 09:58:43 -0700  Kevin McCarthy  <kevin@8t8.us> (363c3a95)

        * Merge branch 'stable'

2018-07-16 09:52:23 -0700  Kevin McCarthy  <kevin@8t8.us> (ed9d7727)

        * automatic post-release commit for mutt-1.10.1

M	ChangeLog
M	UPDATING
M	VERSION

2018-07-07 19:34:32 -0700  Kevin McCarthy  <kevin@8t8.us> (594f111b)

        * Merge branch 'stable'

2018-07-07 19:18:55 -0700  Kevin McCarthy  <kevin@8t8.us> (97e5c358)

        * Merge branch 'stable'

2018-07-02 12:39:14 +0200  Vincent Lefevre  <vincent@vinc17.net> (686fb81e)

        * Updated French translation.

M	po/fr.po

2018-07-02 12:25:13 +0200  Vincent Lefevre  <vincent@vinc17.net> (b3e41194)

        * Add dependencies for keymap_alldefs.h in po/Makefile.in.in
        
        These dependencies are based on those from Makefile.am and are needed
        so that "make update-po" gets the new strings from OPS, etc.

M	po/Makefile.in.in

2018-07-01 20:43:24 -0700  Kevin McCarthy  <kevin@8t8.us> (f472eebd)

        * smime_handle_entity() cleanup.
        
        Remove redundant NULL assignments after safe_fclose() calls.
        
        Remove some trailing spaces.
        
        smimeout can't be NULL, so remove the check around the output
        translation block.

M	smime.c

2018-07-01 20:13:11 -0700  Kevin McCarthy  <kevin@8t8.us> (099f4dd4)

        * Void passphrase on s/mime decryption error.
        
        Model this after pgp's pgp_decrypt_part(), which checks if fpout is
        empty.

M	smime.c

2018-06-28 20:17:23 -0700  Anton Lindqvist  <anton@basename.se> (ac7e2890)

        * Add check-stats function to calculate mailbox statistics.
        
        This allows the statistics to be updated without setting
        $mail_check_stats or before $mail_check_stats_interval has passed.

M	OPS
M	buffy.c
M	buffy.h
M	commands.c
M	curs_main.c
M	doc/manual.xml.head
M	functions.h
M	init.h
M	menu.c
M	pager.c
M	protos.h

2018-06-27 09:45:10 -0700  Kevin McCarthy  <kevin@8t8.us> (0e34a489)

        * Add a reference to $copy in the $record documentation.

M	init.h

2018-06-27 09:27:05 -0700  Kevin McCarthy  <kevin@8t8.us> (68d0e90f)

        * Reset all MonitorContext state on context removal.
        
        Reset both the descriptor and changed flag when the current context is
        removed.  Don't make this dependent on the context being valid or
        being found by monitor_resolve(), in case the context was closed due
        to some type of error condition.

M	monitor.c

2018-06-26 19:48:25 -0700  Kevin McCarthy  <kevin@8t8.us> (d28fe351)

        * Fix MonitorContextDescriptor update on removal.
        
        Reset the context descriptor before checking for the monitor being
        shared by another mailbox.  Technically, it would be set properly
        during the next add, but it shouldn't be left incorrect.

M	monitor.c

2018-06-25 17:54:43 -0700  Kevin McCarthy  <kevin@8t8.us> (550771fd)

        * Work around open mailbox monitor code check issue.
        
        The monitor code is too fast, and can result in all the changes for a
        single directory stat update being missed.
        
        Work around this issue by not recording stat time updates when the
        check_mailbox() is triggered by the monitor.  This will cause the next
        subsequent check to take another look.

M	mh.c
M	monitor.c
M	monitor.h

2018-06-25 13:13:55 -0700  Kevin McCarthy  <kevin@8t8.us> (fc040a5b)

        * Generate error if makedoc is missing a type.
        
        Add a comment in init.h to remind devs to update makedoc.c when adding
        a new type.
        
        Change makedoc to fail on a missing type.  Otherwise it's too easy to
        miss the resulting problem in the documentation.
        
        Credit goes to Eike Rathke for noting that it was too easy to forget
        to do this, and something should be fixed.  I found his solution a bit
        too complicated though, and opted for just adding comment and program
        failure.

M	doc/makedoc.c
M	init.h

2018-06-23 10:25:15 +0200  Eike Rathke  <erack@erack.de> (f24a1bca)

        * Make make ctags actually work
        
        make ctags broke with
        
        Making ctags in po
        make[1]: Entering directory '.../mutt/po'
        make[1]: *** No rule to make target 'ctags'.  Stop.
        make[1]: Leaving directory '.../mutt/po'
        Makefile:867: recipe for target 'ctags-recursive' failed
        make: *** [ctags-recursive] Error 1
        
        and once fixed the same in intl/
        
        Note that this ctags target scatters tags files over directories.
        If you use exuberant ctags then simply run
        ctags -R
        once in mutt's root dir instead.

M	intl/Makefile.in
M	po/Makefile.in.in

2018-06-21 20:42:55 -0700  Kevin McCarthy  <kevin@8t8.us> (6e113ba7)

        * Remove uninitialized warning for mutt_get_stat_timespec().
        
        The switch covers all the types, but in some cases the compiler still
        complains.  Explicitly set tv_sec = 0 to silence the warning.

M	muttlib.c

2018-06-19 15:16:33 +0000  Zero King  <l2dy@icloud.com> (ef19f486)

        * Updated Simplified Chinese translation.

M	po/zh_CN.po

2018-06-19 09:45:29 +0200  Vincent Lefevre  <vincent@vinc17.net> (9cdd8847)

        * mutt_atol: better error handling.
        
        * Detect overflow on negative numbers too (< LONG_MIN).
        
        * Distinguish between format error and number overflow as already
          expected (e.g. for pgp_timeout and smime_timeout).

M	lib.c

2018-06-19 09:37:56 +0200  Vincent Lefevre  <vincent@vinc17.net> (1e3473ec)

        * Reset errno to 0 before calling strtol and testing it in mutt_atol.
        
        Otherwise providing LONG_MAX+1 then LONG_MAX gave an error for LONG_MAX too.

M	lib.c

2018-06-18 22:04:47 +0200  Eike Rathke  <erack@erack.de> (4bc76c2f)

        * Allow larger passphrase timeout values
        
        This came up in the comp.mail.mutt newsgroup where a user wasn't
        satisfied with the SHORT_MAX seconds ~9 hours limit on passphrase
        timeouts.
        
        For the first time made it necessary for the options parser to be
        able to parse numbers as long values. Also, introduced
        mutt_add_timeout() to detect possible overflow before adding a
        timeout to a time_t value and truncate to TIME_T_MAX instead.

M	date.c
M	doc/makedoc.c
M	doc/manual.xml.head
M	globals.h
M	init.c
M	init.h
M	pgp.c
M	protos.h
M	smime.c

2018-06-18 17:19:31 +0200  Vincent Lefevre  <vincent@vinc17.net> (508ff237)

        * Updated French translation.

M	po/fr.po

2018-06-18 19:35:24 +0800  Kevin McCarthy  <kevin@8t8.us> (e26e5664)

        * Merge branch 'stable'

2018-06-14 16:17:56 +0800  Kevin McCarthy  <kevin@8t8.us> (120f63a9)

        * Convert context and buffy to use nanosecond timestamps.
        
        The inotify interface has an unfortunate side effect of making Mutt
        react too quickly to new mail.  Sometimes, the mail is only
        half-delivered when the mailbox is checked.  Because Mutt is using the
        stat mtime - seconds resolution - this means it won't realize there
        are more messages delivered during the same second.
        
        Nanosecond resolution fields were standardized in POSIX.1-2008, so
        check for and use those if they are available.

M	buffy.c
M	buffy.h
M	configure.ac
M	mbox.c
M	mh.c
M	mutt.h
M	muttlib.c
M	mx.c
M	protos.h

2018-06-14 09:10:51 +0200  Vincent Lefevre  <vincent@vinc17.net> (7ec17b81)

        * Updated French translation.

M	po/fr.po

2018-06-12 14:11:47 -0700  Brandon Long  <blong@fiction.net> (fcd33398)

        * Support for using OAUTHBEARER for smtp.
        
        This also means a bunch of smtp auth stuff is now compiled in by
        default (with --enable-smtp) without having sasl

M	init.h
M	smtp.c

2018-06-11 10:39:49 -0700  Brandon Long  <blong@fiction.net> (798f749e)

        * Initial support for OAUTHBEARER for IMAP.
        
        Gmail supports RFC 7628 for using OAUTH with IMAP, and they really don't
        like you using password based auth.  You can still enable "less secure
        apps" and then generate an application specific password, but I figured it
        was time to support it.
        
        Being mutt, I punted on some of the "hard" work to an external script, ie
        getting/refreshing the OAUTH tokens.  This avoids the issue of how do you
        have a client-id and client-secret for an open source project, and the fact
        that OAUTH discovery is still nascent, so you'd likely need separate things
        for each of the providers.
        
        At least for Gmail, you can use the oauth2.py script from Google's
        gmail-oauth2-tools:
        https://github.com/google/gmail-oauth2-tools/blob/master/python/oauth2.py
        
        You'd need to get your own oauth client credentials for Gmail here:
        https://console.developers.google.com/apis/credentials
        
        Then, you'd use oauth2.py with --generate_oauth2_token to get a refresh
        token, and configure mutt with:
        
        set imap_authenticators="oauthbearer"
        set imap_user="<email_address>"
        set imap_pass=`/path/to/oauth2.py --quiet --user=<email_address>
        --client_id=<client_id> --client_secret=<client_secret>
        --refresh_token=<refresh_token>`
        
        For this patch, I didn't add any new configuration, but I'm open to
        suggestions on that.
        
        The patch also only support SASL-IR to reduce round-trips to the server,
        but it's certainly possible to change that if we think there are
        OAUTHBEARER IMAP servers that don't support SASL-IR.  It also requires the
        connection to be encrypted as the access token is re-usable for an hour or
        so.  Again, Gmail only allows encrypted IMAP connections, not sure if any
        OAUTHBEARER services allow non-encrypted.
        
        Turns out that auth failure leaves you in SASL mode, so I have a hack to
        issue a noop command on error.  Not sure if that's just OAUTHBEARER
        oddness, or whether I should be using lower level mutt imap functions.

M	imap/Makefile.am
M	imap/auth.c
M	imap/auth.h
A	imap/auth_oauth.c
M	imap/command.c
M	imap/imap_private.h

2018-06-10 08:51:30 +0800  Kevin McCarthy  <kevin@8t8.us> (1acb708b)

        * Move mutt_getch() timeout value into curs_lib.c
        
        Change monitor.c to reference the curs_lib value, instead of
        vice-versa.
        
        We need to store the value for both monitor.c's poll and for
        mutt_monitor_ch() to perform an initial non-blocking check of ncurses'
        getch() buffer.

M	curs_lib.c
M	monitor.c
M	monitor.h
M	mutt_curses.h

2018-06-08 14:04:16 +0200  Vincent Lefevre  <vincent@vinc17.net> (96b1449f)

        * Spelling mistake in debug message.

M	monitor.c

2018-06-08 13:53:46 +0200  Vincent Lefevre  <vincent@vinc17.net> (ebdcfa2d)

        * Missing void in mutt_set_current_menu_redraw_full prototype

M	mutt_menu.h

2018-06-08 13:49:32 +0200  Vincent Lefevre  <vincent@vinc17.net> (99dee3bb)

        * Give a prototype for mutt_monitor_poll

M	monitor.c
M	monitor.h

2018-06-05 17:38:44 -0700  Kevin McCarthy  <kevin@8t8.us> (a2a0aaa5)

        * Quick fix for ncurses buffering issue with inotify polling.
        
        Ncurses does its own buffering for some character sequences, notable
        Esc-prefixed input.  Add a non-blocking check for getch() before
        performing the mutt_monitor_poll() call.
        
        This is a quick fix, which I'll clean up more later.

M	curs_lib.c
M	monitor.c
M	monitor.h

2018-06-04 21:43:41 -0700  Kevin McCarthy  <kevin@8t8.us> (8c99b1f3)

        * Merge branch 'stable'

2018-06-04 15:51:25 -0700  Kevin McCarthy  <kevin@8t8.us> (71263490)

        * Merge branch 'stable'

2018-06-03 18:34:21 -0700  Kevin McCarthy  <kevin@8t8.us> (3d2cef4a)

        * Add new timeout functions to work with inotify monitors.
        
        The ncurses timeout() function doesn't affect the new poll inside
        mutt_monitor_poll().  This meant that $imap_keepalive and $timeout
        were not being respected when the monitor was used.
        
        Create mutt_getch_timeout(), which delegates to timeout() and sets a
        timeout value mutt_monitor_poll() uses too.

M	curs_lib.c
M	keymap.c
M	monitor.c
M	monitor.h
M	mutt_curses.h

2018-06-03 14:54:41 -0700  Kevin McCarthy  <kevin@8t8.us> (5ada2f51)

        * Merge branch 'stable'

2018-06-03 14:42:41 -0700  Kevin McCarthy  <kevin@8t8.us> (1eb7b895)

        * Merge branch 'stable'

2018-06-03 14:05:13 -0700  Kevin McCarthy  <kevin@8t8.us> (0182dc85)

        * Change direct mutt_getch() callers to handle new mail event.
        
        The inotify handler now returns -2 (timeout) on a new mail event.
        Change the direct callers to ignore, so prompts aren't strangely
        aborted.
        
        Also, fix mutt_change_flag() to call mutt_refresh() before the
        prompt.  Apparently ncurses getch() was doing this for us, but now
        that we are polling STDIN instead, the prompt wasn't displaying.

M	curs_lib.c
M	enter.c
M	flags.c
M	menu.c

2018-06-03 20:23:57 +0000  GT  <gt_16_gitlab.com@innocircle.com> (f495b84d)

        * add feature file monitoring with Linux inotify

M	Makefile.am
M	buffy.c
M	configure.ac
M	curs_lib.c
M	curs_main.c
M	doc/manual.xml.head
M	keymap.c
M	main.c
A	monitor.c
A	monitor.h

2018-06-01 10:46:34 +0100  Edward Betts  <edward@4angle.com> (479241fe)

        * Correct spelling mistakes.

M	buffy.c
M	contrib/sample.muttrc
M	crypt-mod.h
M	crypt.c
M	doc/manual.xml.head
M	hcache.c
M	init.c
M	intl/dcigettext.c
M	intl/libgettext.h
M	mh.c
M	mutt.h
M	mutt_ssl.c
M	pager.c
M	postpone.c
M	send.c
M	sendlib.c
M	smime_keys.pl
M	thread.c

2018-05-28 14:29:45 -0700  Kevin McCarthy  <kevin@8t8.us> (b286ea60)

        * Merge branch 'stable'

2018-05-21 15:12:47 -0700  Kevin McCarthy  <kevin@8t8.us> (63cb8a0a)

        * Remove mutt_buffer_new() NULL retval checks.
        
        It will fail, rather than return NULL.
        
        Further clean up imap_new_data() since it also had NULL checks for
        safe_calloc() that shouldn't happen.

M	imap/imap.c
M	imap/util.c
M	mbyte.c

2018-05-21 13:33:14 -0700  Kevin McCarthy  <kevin@8t8.us> (a001b1d3)

        * Fix mutt_strncmp size comparison for 'uncolor header'.
        
        Thanks to Fabian Groffen for pointing out the discrepancy.
        
        mutt_extract_token() null-terminates the token,, so actually there is
        no need to use "strncmp" for the comparison in this case.
        
        However, since the token is being checked against Fields there is no
        potential harm of a prefix match, so we should fix the number to be
        consistent with the other token comparisons.

M	color.c
2018-07-13 14:25:28 -0700  Kevin McCarthy  <kevin@8t8.us> (3d9028fe)

        * Check outbuf length in mutt_from_base64()
        
        The obuf can be overflowed in auth_cram.c, and possibly auth_gss.c.
        
        Thanks to Jeriko One for the bug report.

M	base64.c
M	imap/auth_cram.c
M	imap/auth_gss.c
M	protos.h

2018-07-13 13:05:22 -0700  Kevin McCarthy  <kevin@8t8.us> (6962328c)

        * Check destlen and truncate in url_pct_encode().
        
        Thanks to Jeriko One for the patch, which this commit is based upon.

M	url.c

2018-07-13 12:35:50 -0700  Kevin McCarthy  <kevin@8t8.us> (e57a8602)

        * Verify IMAP status mailbox literal count size.
        
        Ensure the length isn't bigger than the idata->buf.
        
        Thanks to Jeriko One fo the bug report and patch, which this commit is
        based upon.

M	imap/command.c

2018-07-13 12:24:58 -0700  JerikoOne  <jeriko.one@gmx.us> (9347b5c0)

        * Handle NO response without message properly

M	imap/command.c

2018-07-13 12:15:00 -0700  Kevin McCarthy  <kevin@8t8.us> (3287534d)

        * Don't overflow tmp in msg_parse_fetch.
        
        Ensure INTERNALDATE and RFC822.SIZE field sizes fit temp buffer.
        
        Thanks to Jeriko One for the bug report and patch, which this patch is
        based upon.

M	imap/message.c

2018-07-13 11:33:16 -0700  Richard Russon  <rich@flatcap.org> (31eef6c7)

        * Selectively cache headers.
        
        Thanks to NeoMutt and Jeriko One for the patch, which was slightly
        modified to apply to the Mutt code.

M	imap/util.c

2018-07-13 11:16:33 -0700  Kevin McCarthy  <kevin@8t8.us> (6aed28b4)

        * Sanitize POP bcache paths.
        
        Protect against bcache directory path traversal for UID values.
        
        Thanks for Jeriko One for the bug report and patch, which this commit
        is based upon.

M	pop.c

2018-07-13 10:47:11 -0700  JerikoOne  <jeriko.one@gmx.us> (e154cba1)

        * Ensure UID in fetch_uidl.

M	pop.c

2018-07-12 21:41:17 -0700  Kevin McCarthy  <kevin@8t8.us> (4d0cd265)

        * Fix buffer size check in cmd_parse_lsub.
        
        The size parameter to url_ciss_tostring() was off by one.

M	imap/command.c

2018-07-12 20:46:37 -0700  Kevin McCarthy  <kevin@8t8.us> (e0131852)

        * Fix imap_quote_string() length check errors.
        
        The function wasn't properly checking for dlen<2 before quoting, and
        wasn't properly pre-adjusting dlen to include the initial quote.
        
        Thanks to Jeriko One for reporting these issues.

M	imap/util.c

2018-07-07 19:32:57 -0700  Kevin McCarthy  <kevin@8t8.us> (4ff007ca)

        * Mention $pgp_decode_command for $pgp_check_gpg_decrypt_status_fd
        
        It scans $pgp_decode_command for inline and application/pgp mime
        types.

M	init.h

2018-07-07 19:03:44 -0700  Kevin McCarthy  <kevin@8t8.us> (18515281)

        * Properly quote IMAP mailbox names when (un)subscribing.
        
        When handling automatic subscription (via $imap_check_subscribed), or
        manual subscribe/unsubscribe commands, mutt generating a "mailboxes"
        command but failed to properly escape backquotes.
        
        Thanks to Jeriko One for the detailed bug report and patch, which this
        commit is based upon.

M	imap/command.c
M	imap/imap.c
M	imap/imap_private.h
M	imap/util.c

2018-06-18 11:21:38 +0200  Philipp Gesang  <philipp.gesang@intra2net.com> (df4affd1)

        * crypt-gpgme: prevent crash on bad S/MIME signature
        
        Inform the user about the fingerprint being unavailable instead
        of crashing if the S/MIME signature is bad.

M	crypt-gpgme.c

2018-06-04 21:31:33 -0700  Kevin McCarthy  <kevin@8t8.us> (edb4ec84)

        * Add GnuPG status fd checks for inline pgp.
        
        The difficulty is that "BEGIN PGP MESSAGE" could be a signed and
        armored part, so we can't fail hard if it isn't encrypted.
        
        Change pgp_check_decryption_okay() to return more status codes, with
        >=0 indicating an actual decryption; -2 and -1 indicating plaintext
        found; and -3 indicating an actual DECRYPTION_FAILED status code seen.
        
        Fail hard on -3, but change the message for -2 and -1 to indicate the
        message was not encrypted.

M	pgp.c

2018-06-04 15:40:57 -0700  Kevin McCarthy  <kevin@8t8.us> (8ec6d766)

        * Add $pgp_check_gpg_decrypt_status_fd.
        
        If set (the default) mutt performs more thorough checking of the
        $pgp_decrypt_command status output for GnuPG result codes.
        
        Ticket #39 revealed that GnuPG (currently) does not protect against
        messages that have been manipulated to contain an empty encryption
        packet followed by a plaintext packet.
        
        A huge thanks to Marcus Brinkmann for researching this issue, taking
        the time to report it to us (and the GnuPG team), and taking even more
        time to clarify exactly what needed to be checked for.   

M	contrib/gpg.rc
M	contrib/pgp2.rc
M	contrib/pgp5.rc
M	contrib/pgp6.rc
M	init.h
M	mutt.h
M	pgp.c

2018-06-03 14:52:37 -0700  Kevin McCarthy  <kevin@8t8.us> (cb2329ae)

        * Revert showing real size for small files in mutt_pretty_size().
        
        I thought the change made in 0fa64ba9 was small enough not to matter,
        but at least one long-time user took the time to track down the change
        and request it be reverted.

M	muttlib.c

2018-06-03 14:40:31 -0700  Kevin McCarthy  <kevin@8t8.us> (33290d12)

        * Switch build scripts to use `` instead of $()
        
        This is for older systems running Bourne shell as /bin/sh.

M	mkchangelog.sh
M	mkreldate.sh
M	version.sh

2013-01-06 19:24:18 +0100  Oswald Buddenhagen  <ossi@kde.org> (ec96f5f5)

        * fix inappropriate use of FREE() in ssl init error path
        
        OpenSSL structures need to be freed with dedicated functions.

M	mutt_ssl.c

2018-05-19 10:57:10 -0700  Kevin McCarthy  <kevin@8t8.us> (d55950a8)

        * automatic post-release commit for mutt-1.10.0

M	ChangeLog
M	VERSION
M	po/bg.po
M	po/ca.po
M	po/cs.po
M	po/da.po
M	po/de.po
M	po/el.po
M	po/eo.po
M	po/es.po
M	po/et.po
M	po/eu.po
M	po/fr.po
M	po/ga.po
M	po/gl.po
M	po/hu.po
M	po/id.po
M	po/it.po
M	po/ja.po
M	po/ko.po
M	po/lt.po
M	po/nl.po
M	po/pl.po
M	po/pt_BR.po
M	po/ru.po
M	po/sk.po
M	po/sv.po
M	po/tr.po
M	po/uk.po
M	po/zh_CN.po
M	po/zh_TW.po
2018-05-17 12:24:31 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net> (70c9c89b)

        * Updated Catalan translation.

M	po/ca.po

2018-05-17 10:10:52 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp> (5c717661)

        * Updated Japanese translation.

M	po/ja.po

2018-05-17 12:45:39 +0200  Vincent Lefevre  <vincent@vinc17.net> (30778c5e)

        * fr.po: updated Project-Id-Version and removed old translations.

M	po/fr.po

2018-05-14 09:12:11 +0200  Olaf Hering  <olaf@aepfle.de> (f77b641d)

        * Updated German translation.
        
        Signed-off-by: Olaf Hering <olaf@aepfle.de>

M	po/de.po

2018-05-10 09:12:19 -0700  Kevin McCarthy  <kevin@8t8.us> (400b44a1)

        * Note that $pgp/smime_self_encrypt now default to set.

M	UPDATING

2018-05-10 09:00:21 -0700  Kevin McCarthy  <kevin@8t8.us> (2364c059)

        * Add note about libidn2 v2.0.0 or greater to UPDATING file.

M	UPDATING

2018-05-09 09:32:48 -0700  Vsevolod Volkov  <vvv@mutt.org.ua> (435ca12e)

        * Updated Russian translation.

M	po/ru.po

2018-05-09 09:30:55 -0700  Vsevolod Volkov  <vvv@mutt.org.ua> (c4559f92)

        * Updated Ukrainian translation.

M	po/uk.po

2018-05-08 19:32:12 -0700  Kevin McCarthy  <kevin@8t8.us> (16a581cf)

        * Add declaration checks for libidn2.
        
        The libidn compatibilty layer was only added in version
        2.0.0 (2017-03-29).  idn2.h defines macros, so use AC_CHECK_DECL
        instead of AC_CHECK_FUNC.
        
        $with_idn2 doesn't have an "auto" state, so remove a few unneeded
        copy/paste checks from idn.

M	configure.ac

2018-05-08 10:11:17 -0700  Petr Pisar  <petr.pisar@atlas.cz> (249a6f6c)

        * Updated Czech translation.

M	po/cs.po

2018-05-05 07:35:59 -0700  Kevin McCarthy  <kevin@8t8.us> (0e9f0bed)

        * Update the UPDATING file for 1.10.0.

M	UPDATING

2018-05-06 09:43:25 -0700  Morten Bo Johansen  <mjb@spamcop.net> (cd981cd0)

        * Updated Danish translation.

M	po/da.po

2018-05-05 07:39:36 -0700  lilydjwg  <lilydjwg@gmail.com> (3d9b2704)

        * Updated Simplified Chinese translation.

M	po/zh_CN.po

2018-05-04 02:43:56 +0200  Vincent Lefevre  <vincent@vinc17.net> (643e31c3)

        * Updated French translation.

M	po/fr.po

2018-04-29 15:10:21 -0700  Kevin McCarthy  <kevin@8t8.us> (97bc33dc)

        * Add echo command.
        
        Prints messages using mutt_message().  Sets OPTFORCEREFRESH to allow
        updates in the middle of a macro.
        
        Calls mutt_sleep(0) to pause for $sleep_time seconds after displaying
        the message.

M	doc/manual.xml.head
M	init.c
M	init.h

2018-05-03 12:24:55 +0200  Vincent Lefevre  <vincent@vinc17.net> (92ae6db7)

        * Missing comma.

M	doc/manual.xml.head

2018-05-01 15:13:51 -0700  Kevin McCarthy  <kevin@8t8.us> (9e8ee145)

        * Update copyright notices.

M	COPYRIGHT
M	doc/manual.xml.head
M	doc/mutt.man
M	doc/smime_keys.man
M	main.c

2018-04-28 13:21:42 -0700  Kevin McCarthy  <kevin@8t8.us> (e4557546)

        * Update pattern documentation.
        
        Note that ~b, ~B, ~h, ~M, and ~X read the message in, and that this
        can be much slower.
        
        Change =b, =B, =h table rows to document just the IMAP behavior.  The
        "=" simple string behavior is already covered below, and makes it less
        obvious whether "***)" should be added to those entries in the table.
        
        Break up the simple string and imap server-side matching explanation
        into two paragraphs.
        
        Add ~M to the list of patterns you can't use message scoring with.
        
        Add equivalent, if briefer, explanations to the muttrc.man page.

M	doc/manual.xml.head
M	doc/muttrc.man.head

2018-04-26 18:00:00 -0700  Ammon Riley  <ammon.riley@gmail.com> (974235c7)

        * Add ~M pattern to match mime Content-Types.

M	doc/manual.xml.head
M	doc/muttrc.man.head
M	mutt.h
M	pattern.c

2018-04-30 16:17:52 -0700  Kevin McCarthy  <kevin@8t8.us> (c9f5498c)

        * Add more explanation of known vs subscribed lists to manual.
        
        Mention in both the "Mailing Lists" and "Handling Mailing Lists"
        sections the difference between known and subscribed mailing lists.
        
        Note that the Mail-Followup-To header is generated if any of the
        recipients are known mailing lists.  If any of those are subscribed
        mailing lists, the sender's address will not be in the header.  If all
        of them are known (but not subscribed), the sender's address will be
        added to the header.

M	doc/manual.xml.head

2018-04-23 23:48:33 +0200  Vincent Lefevre  <vincent@vinc17.net> (d12c361c)

        * Updated French translation.

M	po/fr.po

2018-04-22 13:02:06 -0700  Kevin McCarthy  <kevin@8t8.us> (26b82202)

        * Add Error History function and config var.
        
        <error-history>, by default unbound, shows a list of the recent error
        messages displayed by Mutt via mutt_message() or mutt_error().
        
        $error_history sets the size of the history ring.
        
        For now, I've decided to include mutt_message() messages too.  If this
        is too chatty, we can restrict it to mutt_error() easily in the
        future.

M	OPS
M	curs_lib.c
M	curs_main.c
M	functions.h
M	globals.h
M	init.c
M	init.h
M	menu.c
M	pager.c
M	protos.h

2018-04-20 17:28:47 +0200  Vincent Lefevre  <vincent@vinc17.net> (f2e8392f)

        * Updated French translation.

M	po/fr.po

2018-04-19 15:40:35 -0700  Kevin McCarthy  <kevin@8t8.us> (3ec02fbc)

        * Add $sort_browser options for count and unread.

M	browser.c
M	init.h

2018-04-19 13:51:07 -0700  Kevin McCarthy  <kevin@8t8.us> (69959820)

        * Add $browser_abbreviate_mailboxes.
        
        This allows '=' and '~' mailboxes shortcuts to be turned off in the
        browser mailbox list.
        
        The default $sort_browser value of "alpha" uses strcoll(3), which
        ignores some punctuation.  When using multiple accounts with
        dynamically changing values of $folder, this can lead to an
        unintuitive sorting order.  (See issue #22 for an example.)
        
        This problem came about because of commit 8328ce68, which enabled
        mutt_pretty_mailbox() calls for IMAP and POP mailboxes too.  The
        commit had a valid point about consistency and too-wide mailbox
        listings, so I don't really want to revert it.
        
        This option provides an alternative to completely enable/disable the
        shortcuts for those who run into an issue.

M	browser.c
M	init.h
M	mutt.h

2018-04-16 16:32:33 -0700  Kevin McCarthy  <kevin@8t8.us> (4e4574c4)

        * Fix mkreldate.sh in master to use [-r] test too.

M	mkreldate.sh

2018-04-16 16:31:08 -0700  Kevin McCarthy  <kevin@8t8.us> (8da2e090)

        * Merge branch 'stable'

2018-04-16 16:29:08 -0700  Kevin McCarthy  <kevin@8t8.us> (296ccab5)

        * Switch to using [ -r ] in version.sh for Bourne shell compatibility.
        
        Thanks to Paul Keusemann for pointing out the issue.

M	version.sh

2018-04-15 15:57:28 -0700  Kevin McCarthy  <kevin@8t8.us> (79939350)

        * Add a comment in auth_gss about RFCs and null-termination.

M	imap/auth_gss.c

2018-04-09 13:46:42 +0200  Matej Muzila  <mmuzila@redhat.com> (13a2f614)

        * Add libidn2 support

M	configure.ac
M	doc/makedoc-defs.h
M	init.h
M	main.c
M	mutt.h
M	mutt_idna.c
M	mutt_idna.h
M	mutt_socket.c
M	mutt_ssl.c

2018-04-14 13:28:11 -0700  Kevin McCarthy  <kevin@8t8.us> (a21fb60e)

        * Merge branch 'stable'

2018-04-14 13:22:48 -0700  Kevin McCarthy  <kevin@8t8.us> (bf161cf5)

        * automatic post-release commit for mutt-1.9.5

M	ChangeLog
M	UPDATING
M	VERSION

2018-04-13 20:48:28 -0700  Kevin McCarthy  <kevin@8t8.us> (2e8f6e3f)

        * Merge branch 'stable'

2018-04-13 19:17:24 -0700  Kevin McCarthy  <kevin@8t8.us> (13a8f660)

        * Merge branch 'stable'

2018-04-09 15:39:08 -0700  Kevin McCarthy  <kevin@8t8.us> (29d6f261)

        * Merge branch 'stable'

2018-04-02 11:36:05 -0700  Kevin McCarthy  <kevin@8t8.us> (9bb76cce)

        * Merge branch 'stable'

2018-04-02 10:28:12 -0700  Grzegorz Szymaszek  <gszymaszek@short.pl> (1e9df3c8)

        * Updated Polish translation.

M	po/pl.po

2018-03-30 13:37:54 +0100  Christian Ebert  <blacktrash@gmx.net> (e56d30e5)

        * pager specifc "show incoming mailboxes list" macro
        
        Exiting the pager before change-folder avoids 'Not available in this
        menu' error when selecting a different entry in some circumstances.

M	doc/Muttrc.head

2018-03-24 15:10:13 -0700  Kevin McCarthy  <kevin@8t8.us> (ed3f8b6a)

        * Increase account.user/login size to 128.
        
        Like the pass field in commit 52949004, the existing size was
        insufficient for the reporter of issue #18.  For now, just bump up the
        size, but I'll move up looking into making these dynamically sized.

M	account.h

2018-03-22 20:23:46 -0700  Kevin McCarthy  <kevin@8t8.us> (3ffc0ec4)

        * Remove dead code in pgp.c
        
        pgp_extract_keys_from_messages() has been subsumed by
        crypt_extract_keys_from_messages().  The function had incorrect
        multi-bit flag comparisons, but since it's dead code, remove it
        instead.

M	pgp.c

2018-03-22 20:04:46 -0700  Kevin McCarthy  <kevin@8t8.us> (47e6c5aa)

        * Fix comparison of flags with multiple bits set.
        
        PGPENCRYPT, PGPKEY, SMIMEENCRYPT, and SMIMEOPAQUE are all combination
        flags, with multiple bits set.  In a few places these flags were
        bitwise-and'ed incorrectly: expecting a non-zero result to indicate
        all the bits in the flag were set.  Change those to explicitly compare
        the result against the original flag.

M	hdrline.c
M	pattern.c
M	recvattach.c
M	sendlib.c

2018-03-23 02:59:38 +0100  Vincent Lefevre  <vincent@vinc17.net> (66063c45)

        * Updated French translation.

M	po/fr.po

2018-03-22 12:29:59 -0700  Kevin McCarthy  <kevin@8t8.us> (94b9549e)

        * Change prompt string for $crypt_verify_sig
        
        Thanks to Michael Tatge for pointing out that the prompt is used for
        both PGP and S/MIME.

M	commands.c

2018-03-22 09:39:49 -0700  Kevin McCarthy  <kevin@8t8.us> (e275bb06)

        * Merge branch 'stable'

2018-03-15 10:24:35 -0700  Kevin McCarthy  <kevin@8t8.us> (e250c602)

        * Change mutt_error call in mutt_gpgme_set_sender() to dprint.
        
        The message is not an error message, and flies by so quickly it has
        little informative content.  Change it to use dprint instead.
        
        Thanks to Darac Marjal for reporting the issue.

M	crypt-gpgme.c

2018-03-14 04:28:20 +0100  Vincent Lefevre  <vincent@vinc17.net> (2ddd541e)

        * Updated French translation.

M	po/fr.po

2018-03-13 19:09:45 -0700  Kevin McCarthy  <kevin@8t8.us> (a0b3740b)

        * Improve the error message when a signature is missing.
        
        Thanks to Vincent Lefèvre for reporting the issue and for the wording
        suggestion!

M	crypt.c

2018-03-12 12:24:24 +0100  Vincent Lefevre  <vincent@vinc17.net> (f6232a25)

        * Updated French translation.

M	po/fr.po

2018-03-11 12:48:46 -0700  Kevin McCarthy  <kevin@8t8.us> (f47a159b)

        * Add $abort_noattach and $abort_noattach_regexp options.
        
        $abort_noattach_regexp is matched against the body of a message.  If
        so, the $abort_noattach quadoption is used to prompt whether to abort
        sending.
        
        Thanks to Antonio Radici for bringing the original version of the
        patch to our attention, which he pulled from
        https://github.com/tlvince/pkgbuild/blob/master/mutt-kiss/mutt-attach.patch
        
        This version was rewritten to use a regexp, to fix a few issues, and
        to better fit in with Mutt styles and conventions.

M	init.h
M	mutt.h
M	mutt_regex.h
M	send.c

2018-03-03 13:44:12 -0800  Kevin McCarthy  <kevin@8t8.us> (6829c390)

        * Merge branch 'stable'

2018-02-28 15:21:50 -0800  Kevin McCarthy  <kevin@8t8.us> (7561d7bc)

        * Merge branch 'stable'

2018-02-21 18:32:12 -0800  Kevin McCarthy  <kevin@8t8.us> (338019b3)

        * Merge branch 'stable'

2018-02-20 19:09:16 -0800  Kevin McCarthy  <kevin@8t8.us> (2d4081ac)

        * Improve index color cache flushing behavior.
        
        Flush when redefining the colors for an existing color line, in
        addition to when defining a new color line.
        
        Flush only when uncoloring the index.

M	color.c

2018-02-14 10:33:41 +0100  Vincent Lefevre  <vincent@vinc17.net> (ebd93b50)

        * Avoid a potential integer overflow if a Content-Length value is huge.

M	mbox.c

2018-02-08 12:20:02 +0100  Vincent Lefevre  <vincent@vinc17.net> (088e1903)

        * Change mkreldate.sh to use the UTC date with git, so that it is increasing.

M	mkreldate.sh

2018-02-06 14:42:40 -0800  Kevin McCarthy  <kevin@8t8.us> (02d571c2)

        * Fix document version and date for git build.
        
        Change mkreldate.sh to output just the date, so it can be used in the
        manual too.

M	Makefile.am
M	doc/Makefile.am
M	mkreldate.sh

2018-02-05 18:43:12 -0800  Kevin McCarthy  <kevin@8t8.us> (fefbd81f)

        * Use git to generate the release date if available.
        
        For now, fall back to the ChangeLog.  Perhaps the release date should
        be generated from a file, similar to VERSION, for those cases instead.

M	Makefile.am
A	mkreldate.sh

2018-02-06 01:57:48 +0100  Vincent Lefevre  <vincent@vinc17.net> (65e1f5c8)

        * Add a blank line between the compile options and the contact info for mutt -v

M	main.c

2018-02-05 13:19:40 +0100  Vincent Lefevre  <vincent@vinc17.net> (731629e2)

        * Updated French translation.

M	po/fr.po

2018-02-04 15:24:59 -0800  Kevin McCarthy  <kevin@8t8.us> (e82c9ce2)

        * Put gitlab issues url on a separate line.
        
        This removes the need to use brackets, and makes it easier for
        translations to fit within 80 columns.
        
        Thanks to Derek Martin for the suggested wording, and to Vincent
        Lefèvre for proofreading and noticing a small error.

M	main.c

2018-02-04 15:15:55 -0800  Kevin McCarthy  <kevin@8t8.us> (1fe6318b)

        * Fix history menu title.
        
        Remove an accidental leading space.  Thanks to Vincent Lefèvre for
        noticing the problem and providing a patch!

M	history.c
M	po/fr.po

2018-02-04 18:29:52 +0100  Vincent Lefevre  <vincent@vinc17.net> (f57e5171)

        * Updated French translation.

M	po/fr.po

2018-02-03 18:08:28 -0800  Kevin McCarthy  <kevin@8t8.us> (aa6903c9)

        * Add history-search function, bound to ctrl-r.
        
        Create a very basic "search history" functionality in the line editor.
        It uses the current input, and searches backward through history.  If
        there is one match, it immediately uses that otherwise it pops up a
        simple menu of matches.

M	OPS
M	doc/manual.xml.head
M	enter.c
M	functions.h
M	history.c
M	history.h

2018-02-01 11:14:11 -0800  Kevin McCarthy  <kevin@8t8.us> (d5544ef6)

        * Merge branch 'stable'

2018-01-31 15:01:18 -0800  Kevin McCarthy  <kevin@8t8.us> (22e1e87c)

        * Merge branch 'stable'

2018-01-31 14:22:07 -0800  Kevin McCarthy  <kevin@8t8.us> (fea9f7db)

        * Merge branch 'stable'

2018-01-27 11:58:12 -0800  Kevin McCarthy  <kevin@8t8.us> (eca744f5)

        * Merge branch 'stable'

2018-01-21 19:41:47 -0800  Kevin McCarthy  <kevin@8t8.us> (9ee1f84d)

        * Remove useless assignments in add_to_list functions.
        
        The code was probably pulled from some of the header processing
        functions, which were in a loop.  In those versions, "last" pointed to
        a collection of new entries appended, but in these two functions,
        updating last just obfuscates the code.

M	init.c

2018-01-21 18:56:12 -0800  Kevin McCarthy  <kevin@8t8.us> (8dd14816)

        * Add a blurb about $new_mail_command in the mailboxes section.

M	doc/manual.xml.head

2018-01-21 18:34:45 -0800  Kevin McCarthy  <kevin@8t8.us> (18701782)

        * Merge branch 'stable'

2018-01-17 19:20:04 -0800  Kevin McCarthy  <kevin@8t8.us> (95c7ff2b)

        * Merge branch 'stable'

2018-01-17 19:00:50 -0800  Kevin McCarthy  <kevin@8t8.us> (fb3593b3)

        * Merge branch 'stable'

2018-01-17 18:18:20 -0800  Kevin McCarthy  <kevin@8t8.us> (49c0d177)

        * Merge branch 'stable'

2018-01-16 09:40:11 +0100  Olaf Hering  <olaf@aepfle.de> (8fac7a94)

        * Update po
        
        Followup for untranslate Copyright list.
        
        Signed-off-by: Olaf Hering <olaf@aepfle.de>

M	po/bg.po
M	po/ca.po
M	po/cs.po
M	po/da.po
M	po/de.po
M	po/el.po
M	po/eo.po
M	po/es.po
M	po/et.po
M	po/eu.po
M	po/fr.po
M	po/ga.po
M	po/gl.po
M	po/hu.po
M	po/id.po
M	po/it.po
M	po/ja.po
M	po/ko.po
M	po/lt.po
M	po/nl.po
M	po/pl.po
M	po/pt_BR.po
M	po/ru.po
M	po/sk.po
M	po/sv.po
M	po/tr.po
M	po/uk.po
M	po/zh_CN.po
M	po/zh_TW.po

2018-01-16 09:40:06 +0100  Olaf Hering  <olaf@aepfle.de> (18894e9c)

        * Split Copyright and Thanks in help output.
        
        The Copyright string is changing often, and its content is obvious.
        It does not need translation. The remaining string can be translated.
        This change avoids a stale translation once one of the years change.
        
        Signed-off-by: Olaf Hering <olaf@aepfle.de>

M	main.c

2018-01-16 09:39:57 +0100  Olaf Hering  <olaf@aepfle.de> (34267ed4)

        * Update po
        
        Preparation for following changes.
        
        Signed-off-by: Olaf Hering <olaf@aepfle.de>

M	po/bg.po
M	po/ca.po
M	po/cs.po
M	po/da.po
M	po/de.po
M	po/el.po
M	po/eo.po
M	po/es.po
M	po/et.po
M	po/eu.po
M	po/fr.po
M	po/ga.po
M	po/gl.po
M	po/hu.po
M	po/id.po
M	po/it.po
M	po/ja.po
M	po/ko.po
M	po/lt.po
M	po/nl.po
M	po/pl.po
M	po/pt_BR.po
M	po/ru.po
M	po/sk.po
M	po/sv.po
M	po/tr.po
M	po/uk.po
M	po/zh_CN.po
M	po/zh_TW.po

2018-01-15 20:20:17 -0800  Brendan Cully  <brendan@cully.org> (38d106c6)

        * add clang static analysis to builds

M	.gitlab-ci.yml

2018-01-15 18:40:20 -0800  Brendan Cully  <brendan@cully.org> (4e2b370c)

        * gitlab-ci: build against openssl and gnutls

M	.gitlab-ci.yml

2018-01-15 16:06:30 -0800  Kevin McCarthy  <kevin@8t8.us> (3e9647b9)

        * Add pgp_default_key and smime_sign_as info to contrib rc files.
        
        Explain $pgp_default_key vs $pgp_sign_as in gpg.rc.
        
        Explain $smime_default_key vs $smime_sign_as in smime.rc.

M	contrib/gpg.rc
M	contrib/smime.rc

2018-01-15 14:20:28 -0800  Kevin McCarthy  <kevin@8t8.us> (ee28581a)

        * Add pages to .gitlab-ci.yml
        
        Use this to regenerate the manual and store it in the pages for the
        project.

M	.gitlab-ci.yml

2018-01-15 14:43:53 +0000  Konstantin Stephan  <pigleich3@gmx.net> (6bd130cf)

        * Update smime.rc: Typo fix, consistent headings

M	contrib/smime.rc

2018-01-14 15:50:34 -0800  Brendan Cully  <brendan@cully.org> (d1724851)

        * use mutt/ubuntu build image, build with everything on

M	.gitlab-ci.yml

2018-01-13 14:49:35 -0800  Brendan Cully  <brendan@cully.org> (797a9e38)

        * skeleton .gitlab-ci.yml to compile commits

A	.gitlab-ci.yml

2018-01-13 21:21:35 +0100  Grzegorz Szymaszek  <gszymaszek@short.pl> (7ddb1ae3)

        * Fixed GPGME translations that weren’t shown but affected the keyboard

M	po/pl.po

2018-01-13 20:27:11 +0100  Grzegorz Szymaszek  <gszymaszek@short.pl> (637d4229)

        * Update pl.po

M	po/pl.po

2018-01-13 09:47:09 +0100  Olaf Hering  <olaf@aepfle.de> (6c271bc4)

        * Fix typo in de.po
        
        Signed-off-by: Olaf Hering <olaf@aepfle.de>

M	po/de.po

2013-12-03 16:42:39 +0100  Olaf Hering  <olaf@aepfle.de> (5619de2b)

        * examine_directory: set directory/symlink size to zero
        
        The size of a directory or symlink in the folder browser is not meaningful.
        For directories it means just how many blocks were allocated to hold all
        entries. It does not mean that the entries are still present in the directory.
        For symlinks its the size of the target.
        Set both to zero to simplify the folder browser output.
        
        Signed-off-by: Olaf Hering <olaf@aepfle.de>

M	browser.c

2013-12-03 16:43:49 +0100  Olaf Hering  <olaf@aepfle.de> (0fa64ba9)

        * mutt_pretty_size: show real number for small files
        
        If a file is smaller than a certain size it is unfriendly to print 0K or
        0,1K as number of mails or as file size. Instead use the real number.
        
        Signed-off-by: Olaf Hering <olaf@aepfle.de>

M	muttlib.c

2018-01-11 15:16:07 -0800  Kevin McCarthy  <kevin@8t8.us> (4fa32548)

        * Merge branch 'stable'

2018-01-11 13:24:30 -0800  Kevin McCarthy  <kevin@8t8.us> (db252e61)

        * Create pgp and s/mime default and sign_as key vars. (see #3983)
        
        The $postpone_encrypt and $(pgp/smime)_self_encrypt configuration
        variables have created a somewhat messier situation for users.  Many
        of them now have to specify their keys across multiple configuration
        variables.
        
        (Trac) Ticket #3983 had a reasonable request: "if my encrypt and
        signing keys are the same, why can't I just specify my key once in my
        .muttrc?"
        
        The problem currently is that $smime_default_key and $pgp_sign_as are
        both used to specify signing keys, and are set by the "sign (a)s"
        security menu choice.  So we can't store encryption keys there because
        some users have separate sign-only capability keys.
        
        Create $pgp_default_key to store the default encryption key.  Change
        signing to use $pgp_default_key, unless overridden by $pgp_sign_as.
        The pgp "sign (a)s" will continue setting $pgp_sign_as.
        
        Create $smime_sign_as.  Change signing to use $smime_default_key
        unless overridden by $smime_sign_as.  Change s/mime "sign (a)s" menu
        to set $smime_sign_as instead.
        
        Change $postpone_encrypt and $(pgp/smime)_self_encrypt to use
        $(pgp/smime)_default_key by default.
        
        Mark $(pgp/smime)_self_encrypt_as deprecated.  They are now aliases
        for the $(pgp/smime)_default_key config vars.
        
        Change $(pgp/smime)_self_encrypt default to set.
        
        The intent is that most users now need only set
        $(pgp/smime)_default_key.  If they have a sign-only key, or have
        separate signing and encryption keys, they can put that in
        $(pgp/smime)_sign_as.  This also enables to default self_encrypt on
        and solve a very common request.
        
        Thanks to Michele Marcionelli and Vincent Lefèvre for gently pushing
        me towards a solution.

M	compose.c
M	crypt-gpgme.c
M	crypt.c
M	doc/manual.xml.head
M	globals.h
M	init.h
M	pgpinvoke.c
M	postpone.c
M	send.c
M	sendlib.c
M	smime.c

2018-01-09 04:09:11 +0100  Vincent Lefevre  <vincent@vinc17.net> (be68a00c)

        * Updated French translation.

M	po/fr.po

2018-01-08 18:07:24 -0800  Kevin McCarthy  <kevin@8t8.us> (2d2665d4)

        * Change the default of NewMailCmd to 0.
        
        This is so the documentation is generated consistently for unset
        strings.

M	init.h

2018-01-07 14:49:45 +0100  Yoshiki Vázquez Baeza  <yoshiki89@gmail.com> (2f39cf2a)

        * NewMailCmd: optionally execute a command upon new mail arrival
        
        This setting allows to run any external program to e.g. produce a
        notification on the desktop when Mutt finds new mail.
        
        Signed-off-by: Fabian Groffen <grobian@gentoo.org>

M	curs_main.c
M	globals.h
M	init.h

2018-01-07 13:06:56 +0100  Fabian Groffen  <grobian@gentoo.org> (5d5dce99)

        * cmd_handle_fatal: make error message a bit more descriptive
        
        When there are multiple IMAP connections available, "Mailbox closed"
        doesn't give a hint as to which one.  Use account info to identify which
        mailbox was closed.

M	imap/command.c

2018-01-07 12:18:37 -0800  Kevin McCarthy  <kevin@8t8.us> (0df23207)

        * Merge branch 'stable'

2018-01-06 16:15:39 -0800  Kevin McCarthy  <kevin@8t8.us> (e0229b87)

        * Merge branch 'stable'

2018-01-04 17:59:20 +0100  Vincent Lefevre  <vincent@vinc17.net> (2f510d60)

        * Updated French translation.

M	po/fr.po

2017-12-30 19:10:16 -0800  Kevin McCarthy  <kevin@8t8.us> (561e106c)

        * Disable message security if the backend is not available.
        
        Gitlab issue #3 exposed an awkward corner case: if mutt is configured
        without PGP or S/MIME, and with GPGME, but $crypt_use_gpgme is unset.
        In this case, no backend will be available, but WithCrypto will be set
        with both APPLICATION_PGP and APPLICATION_SMIME bits.
        
        That will allow various config vars to enable encryption or signing,
        even though there will be no backend available to perform them.  The
        message security flag might then be set, but when the user hits send,
        will end up back at the compose menu due to the error.
        
        The pgp or smime menu might not even be available to clear the
        security setting!
        
        Add a check in send.c before the compose menu is invoked, and give a
        warning message for the menu ops inside the compose menu.
        
        I believe this should prevent the issue.  However this is a corner
        case combined with user misconfiguration, so I don't believe is worth
        a large effort to completely eradicate.

M	compose.c
M	cryptglue.c
M	mutt_crypt.h
M	send.c

2017-12-29 15:20:38 +0100  Grzegorz Szymaszek  <gszymaszek@short.pl> (521e45e7)

        * Converted po/pl.po from ISO-8859-2 to UTF-8
        
        I’ve converted the Polish translation file to UTF-8 using iconv 2.25.

M	po/pl.po

2017-12-28 13:07:21 -0800  Kevin McCarthy  <kevin@8t8.us> (8b77d84d)

        * Mention self_encrypt options in the documentation. (closes #3983)
        
        Add a paragraph to the "Sending Cryptographically Signed/Encrypted
        Messages" section of the manual.

M	doc/manual.xml.head

2017-12-26 15:09:28 -0800  Kevin McCarthy  <kevin@8t8.us> (e7addcf0)

        * Merge branch 'stable'

2017-12-18 13:02:17 -0800  Kevin McCarthy  <kevin@8t8.us> (248e9972)

        * Merge branch 'stable'

2017-12-18 03:01:07 +0100  Vincent Lefevre  <vincent@vinc17.net> (3b142cea)

        * Fixed git repo detection: for worktrees, .git is a plain file.

M	version.sh

2017-12-17 13:36:21 +0100  Adam Borowski  <kilobyte@angband.pl> (489a1c39)

        * manually touch atime when reading a mbox file
        
        The only common use of atime left is local mail agents leaving a mark on
        mbox file after the mail has been read.  And, since POSIX-2008, it is
        possible to use futimens() to alter atime even on filesystems mounted with
        noatime.
        
        There's no extra cost for doing this on when atime updates are enabled:
        the inode will be dirty already.

M	configure.ac
M	main.c
M	mbox.c
M	muttlib.c
M	protos.h

2017-12-17 12:16:10 -0800  Kevin McCarthy  <kevin@8t8.us> (f030bd36)

        * Add config.cache to .gitignore file.

M	.gitignore

2017-12-15 15:56:39 -0800  Kevin McCarthy  <kevin@8t8.us> (89e44318)

        * Merge branch 'stable'

2017-12-15 12:18:12 -0800  Kevin McCarthy  <kevin@8t8.us> (8b17d880)

        * Merge branch 'stable'

2017-12-14 16:21:04 -0800  Kevin McCarthy  <kevin@8t8.us> (35850181)

        * Merge branch 'stable'

2017-12-12 18:27:24 -0800  Kevin McCarthy  <kevin@8t8.us> (e290a8fc)

        * Merge branch 'stable'

2017-12-10 20:06:05 -0800  Kevin McCarthy  <kevin@8t8.us> (f9ca5cda)

        * Merge branch 'stable'

2017-12-03 18:15:21 -0800  Kevin McCarthy  <kevin@8t8.us> (50f85f3b)

        * Merge branch 'stable'

2017-12-02 19:27:14 -0800  Kevin McCarthy  <kevin@8t8.us> (56be6f0a)

        * Convert to .gitignore file.

A	.gitignore
D	.hgignore

2017-11-29 04:21:26 +0100  Vincent Lefevre  <vincent@vinc17.net> (376280bf)

        * Updated French translation.

M	po/fr.po

2017-11-28 19:01:15 -0800  Kevin McCarthy  <kevin@8t8.us> (8b3d4db4)

        * Update copyright notices.

M	COPYRIGHT
M	bcache.c
M	buffy.c
M	imap/imap.c
M	imap/imap.h
M	main.c
M	sidebar.c

2017-11-21 18:22:26 -0800  Kevin McCarthy  <kevin@8t8.us> (20f5519e)

        * Enable full address matching during message scoring. (closes #2179) (see #3243)
        
        The tickets are old, but it seems reasonable to expect the pattern
        matching to behave the same in scoring as when applying limits or
        searching.
        
        I don't foresee a huge performance hit, and there are no arguments
        against the change in the tickets.
        
        Thanks to the muttng devs (noted in ticket 2179) and Kornilios Kourtis
        (from the Debian ticket referenced in ticket 3243).

M	score.c

2017-11-19 15:47:45 -0800  Anton Lindqvist  <anton.lindqvist@gmail.com> (117f7de1)

        * Add NONULL to debug statement in fold_one_header().

M	sendlib.c

2017-11-18 19:13:08 -0800  Kevin McCarthy  <kevin@8t8.us> (3ccd1990)

        * Fix ansi escape sequences with both reset and color parameters. (closes #3689)
        
        The initial 0 "reset/normal" was setting attr = ANSI_OFF, which was
        subsequently being or'ed with ANSI_COLOR.
        
        The color resolution was then checking for the ANSI_OFF bit and
        turning all coloring off, even though ANSI_COLOR was also set.
        
        Change the color resolution to check for "attr == ANSI_OFF" instead, so
        the color isn't reset unless the reset occurs last in the sequence.

M	pager.c

2017-11-15 14:53:24 -0800  Kevin McCarthy  <kevin@8t8.us> (78d2c197)

        * Remove useless else branch in the $smart_wrap code. (see #3857)
        
        Thanks to Vincent Lefèvre for noticing the nested else was redundant,
        since buf_ptr is already set to "buf + cnt" after the format_line()
        call.
        
        This allows us to merge the inner and outer if statement, resulting in
        simpler code.

M	pager.c

2017-11-15 14:53:19 -0800  Kevin McCarthy  <kevin@8t8.us> (b3940ed4)

        * Fix $smart_wrap to not be disabled by whitespace-prefixed lines. (closes #3857)
        
        changeset:737102af74eb fixed a folded header display issue with $smart_wrap
        by disabling $smart_wrap for lines beginning with whitespace.
        
        Unfortunately, this turns off smart wrapping in the body of an email
        too, even when the line has other whitespace breaks in it.
        
        An earlier commit, changeset:125076e0fdfa added an infinite loop fix
        when MUTT_PAGER_NSKIP is set, by disabling the smart_wrap if the space
        backtracking went to the beginning of the line.  That is, a line
        beginning with 1+ whitespace followed by a single long word.
        
        Extend this second commit by always disabling the smart_wrap in that
        case, not just when MUTT_PAGER_NSKIP is set.  This also solves the
        folded header issue without other side effects.

M	pager.c

2017-11-11 15:49:15 -0800  Kevin McCarthy  <kevin@8t8.us> (610c6b0a)

        * Add $change_folder_next option to control mailbox suggestion order.
        
        This patch is out of the Gentoo package maintained by Fabian Groffen.
        From the link below, it appears the original author was Simon Burge.
        
        I made some minor changes to get it to apply correctly, and cleaned up
        the documentation a bit.
        
        Original patch description:
        This patch brings back the original behaviour of change-folder, which
        some people find more useful.  It suggests the next folder in your
        mailboxes list that has new mail measured from the current folder,
        instead of the first folder from your mailboxes list in any case.  This
        prevents starvation of folders defined at the back of your list ;)
        See discussion: http://thread.gmane.org/gmane.mail.mutt.devel/12457

M	curs_main.c
M	init.h
M	mutt.h

2017-11-11 19:13:40 +0100  Vincent Lefevre  <vincent@vinc17.net> (11a10487)

        * Updated French translation.

M	po/fr.po

2017-11-11 18:59:31 +0100  Vincent Lefevre  <vincent@vinc17.net> (14e37771)

        * Add %R (number of read messages) for $status_format.

M	init.h
M	status.c

2017-11-10 13:06:43 -0800  Kevin McCarthy  <kevin@8t8.us> (d1659601)

        * Add message count to $move quadoption prompt.
        
        Display the number of messages that will be moved in the quadoption
        prompt, which might prove helpful for some people.
        
        Thank you to Daan van Rossum for suggesting the improvement.

M	mx.c

2017-11-09 15:06:19 +0100  Vincent Lefevre  <vincent@vinc17.net> (6db8d16a)

        * Make sure that fgets and fgetc are undefined before their redefinition.
        
        This fixes a potential issue from changeset e0a103845344.

M	mutt.h

2017-11-08 13:40:34 -0800  David Wilson  <dw@botanicus.net> (829db35b)

        * Use fgets_unlocked and fgetc_unlocked if available.
        
        Since mutt does not use threads, there is no reason it should use the
        locked variants of the FILE* IO functions. This checks if the unlocked
        functions are available, and if so enables them globally via mutt.h.
        
        Cuts load time for a 56k message, 1.8GB /var/mail mailbox from 14
        seconds to ~6 seconds, since we avoid acquiring and releasing a mutex
        for every character of input read.
        
        Before: 0m14.376s
        
            74.98%          mutt  libc-2.18.so        [.] _IO_getc
            11.87%          mutt  mutt                [.] mbox_parse_mailbox
             0.94%          mutt  [kernel.kallsyms]   [k] copy_user_generic_string
             0.83%          mutt  libc-2.18.so        [.] __strchr_sse2
             0.53%          mutt  libc-2.18.so        [.] __memcpy_sse2
             0.44%          mutt  libc-2.18.so        [.] _int_malloc
        
        After: 6 seconds
        
            68.92%     mutt  mutt                  [.] mbox_parse_mailbox
             2.25%     mutt  [kernel.kallsyms]     [k] copy_user_generic_string
             1.73%     mutt  libc-2.18.so          [.] __strchr_sse2
             1.24%     mutt  libc-2.18.so          [.] __memcpy_sse2
             1.17%     mutt  libc-2.18.so          [.] _int_malloc
             0.87%     mutt  libc-2.18.so          [.] __strspn_sse42

M	configure.ac
M	mutt.h

2017-11-08 12:57:50 -0800  Kevin McCarthy  <kevin@8t8.us> (d2262ccb)

        * Note which ssl config vars are GnuTLS or OpenSSL only. (closes #3781)
        
        It was not obvious that the ssl_ca_certificates_file was only for
        GnuTLS, or that the ssl_usesystemcerts was only for OpenSSL.

M	init.h

2017-10-15 15:13:18 +0800  Kevin McCarthy  <kevin@8t8.us> (336f7d88)

        * Add polling for the IDLE command. (closes #3957)
        
        Add $imap_poll_timeout poll for IDLE, since this is also a command
        that will freeze after waking if $imap_idle is set.

M	imap/command.c

2017-09-30 19:16:56 -0700  Kevin McCarthy  <kevin@8t8.us> (d7e84d75)

        * merge stable

2017-09-28 11:57:56 -0700  Roger Pau Monne  <roger.pau@citrix.com> (cfcd8787)

        * Enable $reply_self for group-reply, even with $metoo unset.
        
        For a (r)eply, the $metoo variable does not have any effect because
        there is a single recipient.
        
        However with (g)roup reply, the To was initially set to the sender,
        but subsequently removed my $nometoo.  The empty To line is then
        replaced with the Cc line, resulting in a (logically correct but)
        surprising outcome.
        
        Change the behavior such that $nometoo will not strip a single To
        recipient when $reply_self is set.

M	send.c

2017-09-27 13:45:36 -0700  Kevin McCarthy  <kevin@8t8.us> (285baf9a)

        * Make cmd_parse_fetch() more precise about setting reopen/check flags.
        
        Previously any FETCH with FLAGS would result in either
          idata->reopen |= IMAP_EXPUNGE_PENDING;
          -or-
          idata->check_status = IMAP_FLAGS_PENDING;
        being set.
        
        This is unnecessary in the case of responses to FLAGS.SILENT updates
        sent by mutt (which seem to commonly happen now-a-days).
        
        Change imap_set_flags() to compare the old server flags against the
        new ones, and report when _those_ updates would/did result in a local
        header flag change.  Only set one of the reopen/check_status flags in
        the event of an actual change (or potential change if a local change
        has been made to the header.)

M	imap/command.c
M	imap/imap_private.h
M	imap/message.c

2017-09-26 19:45:23 -0700  Kevin McCarthy  <kevin@8t8.us> (1099795d)

        * merge stable

2017-09-25 18:40:32 -0700  Kevin McCarthy  <kevin@8t8.us> (bf34a038)

        * Change maildir and mh check_mailbox to use dynamic sized hash. (closes #3973)
        
        The original patch is by Matt Fleming, originally posted at
        http://www.codeblueprint.co.uk/2017/01/15/a-kernel-devs-approach-to-improving2
        
        The comments there indicate Matt tried to submit to trac and mutt-dev,
        but ran into registration problems.  Thank you for the patch, and
        sorry for those problems, Matt.
        
        I modified the patch by making the same change to the
        mh_check_mailbox() code too.

M	mh.c

2017-09-23 11:41:25 -0700  Kevin McCarthy  <kevin@8t8.us> (f5935f3d)

        * merge stable

2017-09-22 11:26:19 -0700  Kevin McCarthy  <kevin@8t8.us> (fa79d68e)

        * merge stable

2017-09-22 17:52:16 +0200  Vincent Lefevre  <vincent@vinc17.net> (83d23fd9)

        * Updated French translation.

M	po/fr.po

2017-09-20 10:43:33 -0700  Kevin McCarthy  <kevin@8t8.us> (56729e32)

        * Display an error message when delete mailbox fails. (see #3968)

M	browser.c

2017-09-14 12:48:26 -0700  Kevin McCarthy  <kevin@8t8.us> (bd906764)

        * merge stable

2017-09-13 15:54:31 -0700  Kevin McCarthy  <kevin@8t8.us> (baffaa68)

        * merge stable

2017-09-05 17:33:45 +0200  Vincent Lefevre  <vincent@vinc17.net> (e5515a9c)

        * Updated French translation.

M	po/fr.po

2017-09-04 15:51:07 -0700  Kevin McCarthy  <kevin@8t8.us> (03b0bec0)

        * Remove 'really' from the purge-message help description.
        
        This made it sound to the translators like a question.

M	OPS

2017-09-04 15:34:32 -0700  Kevin McCarthy  <kevin@8t8.us> (563143f8)

        * Add L10N comment to generated keymap_defs.h files.
        
        Make it clearer to translators that the strings are for the help
        screen.

M	gen_defs

2017-09-04 13:26:55 -0700  Kevin McCarthy  <kevin@8t8.us> (f2216024)

        * Add warning about using inline pgp with format=flowed. (closes #3963)
        
        The reporter noted that when trying to use inline signing with
        format=flowed, the flowed was turned off.
        
        After some research, this appears to be deliberate, probably because
        of strange interactions between inline PGP and format=flowed.  In fact
        the RFC strongly discourages their combined use:
        https://tools.ietf.org/html/rfc3676#section-4.6
        
        Add a warning and prompt to use PGP/MIME in mutt_protect().

M	crypt.c

2017-09-04 09:47:26 -0700  Kevin McCarthy  <kevin@8t8.us> (61c7e548)

        * merge stable
2018-04-13 20:39:35 -0700  Kevin McCarthy  <kevin@8t8.us> (ceb0534d)

        * Improve gss debug printing of status_string.
        
        Commit f52ee2f7 ensured the debug strings were properly '\0'
        terminated.  However, it did not prevent the strncpy from reading past
        the end of the status_string.value data; it simply capped it
        afterwards.  Improve the code so it only reads up to
        status_string.length without overwriting the buffer.

M	imap/auth_gss.c

2018-04-13 19:03:29 -0700  Kevin McCarthy  <kevin@8t8.us> (f52ee2f7)

        * Remove trailing null count from gss_buffer_desc.length field.
        
        RFC 2744 section 3.2.2 clearly states that trailing NULL characters
        are not to be included in the length field, and are not to be assumed
        to be present in the value field.
        
        Thanks to Greg Hudson, who recently debugged this same issue with
        fetchmail, and kindly took the time to look at Mutt's code too.

M	imap/auth_gss.c

2018-04-08 15:37:09 -0700  Kevin McCarthy  <kevin@8t8.us> (a550d535)

        * Rename _regex.h to _mutt_regex.h to avoid name collision on Macs.
        
        On Macs, <regex.h> includes <_regex.h>.  Because Mutt defines '-I .'
        during compilation, our bundled version of _regex.h was being used
        instead of the system one.
        
        I have no idea how it managed to work before, but starting in Xcode
        9.3, the differences in struct size and fields started to produce a
        crash and other strange behavior.
        
        The real issue is our use of '-I .' during compilation, which allows
        our local headers to override system ones.  An easier fix for now is
        to rename the header.
        
        Many thanks to Charles Diza, Christian Ebert, and Fabian Groffen for
        their help trying things out and helping to debug the problem.
        
        Also, a huge thanks to Steve Karmeinsky for allowing me to ssh in to
        his Mac so I could track down the underlying issue.

M	Makefile.am
R100	_regex.h	_mutt_regex.h
M	mutt_regex.h
M	regex.c

2018-04-02 11:30:31 -0700  Kevin McCarthy  <kevin@8t8.us> (4fe6cfeb)

        * configure: check for tinfo matching ncurses
        
        When we selected ncursesw, look for tinfow as well.  Since ncurses-6.1
        the binary compatibility between tinfo and tinfow disappeared, resulting
        in crashes and other odd behaviour.
        
        This change checks for tinfo or tinfow based on which ncurses we found
        to continue with.
        
        https://bugs.gentoo.org/651552
        
        [Thanks to Fabian Groffen for the patch.  I made a minor modification
        to fall back to tinfo because pre-6.1 systems may not have a tinfow
        but still need tinfo to compile.]

M	configure.ac

2018-03-22 09:32:31 -0700  Kevin McCarthy  <kevin@8t8.us> (eeba9a9b)

        * Fix s/mime non-detached signature handling.
        
        This fix is based on stbuehler's patch from
        https://dev.gnupg.org/T2919.
        
        Recent versions of gpgme seem to terminate the connection for a
        protocol error.  stbuehler's analysis is that this is actually a
        gpgme bug, but recreating the context works around the problem.

M	crypt-gpgme.c

2018-03-03 13:40:27 -0800  Kevin McCarthy  <kevin@8t8.us> (9eeb406b)

        * automatic post-release commit for mutt-1.9.4

M	ChangeLog
M	UPDATING
M	VERSION
2018-02-28 15:20:59 -0800  Kevin McCarthy  <kevin@8t8.us> (65068235)

        * Add subjectrx section to the muttrc man page.

M	doc/muttrc.man.head

2018-02-28 15:20:19 -0800  Kevin McCarthy  <kevin@8t8.us> (27758af2)

        * Fix subjectrx example in the manual.

M	doc/manual.xml.head

2018-02-14 10:33:41 +0100  Vincent Lefevre  <vincent@vinc17.net> (476ea0ac)

        * Avoid a potential integer overflow if a Content-Length value is huge.

M	mbox.c

2018-02-21 18:25:37 -0800  Kevin McCarthy  <kevin@8t8.us> (2a857f63)

        * Fix is_from() year parsing to abort on year overflow.
        
        Unlike mutt_parse_date(), is_from() was not checking for overflow, and
        could end up passing a negative year to mutt_mktime().
        
        It should perhaps be changed to use mutt_atoi(), which does better
        range checking, but that requires mutt_atoi() being changed to allow
        trailing characters and its callers return value checks being
        updated.  I'll put that on the todo list.

M	from.c

2018-02-21 18:18:53 -0800  Kevin McCarthy  <kevin@8t8.us> (189e52d5)

        * Cap parsed years at 9999 when converting to time_t.
        
        Large year values, even those less than INT_MAX, apparently can cause
        gmtime() and localtime() to return NULL.  Mutt needs larger changes
        checking and handling those errors, but this will prevent the
        immediately triggerable issue.

M	date.c

2018-02-01 11:10:01 -0800  Kevin McCarthy  <kevin@8t8.us> (b2dbdce0)

        * Add stub flea and muttbug scripts back.
        
        It was rightfully pointed out that the removal was too abrupt.  These
        programs have been around for a long time, and many internet searches
        still say to use them for reporting bugs.
        
        Add stub versions which inform to use the gitlab url instead.

M	.gitignore
M	Makefile.am
A	muttbug

2018-01-31 14:57:57 -0800  Kevin McCarthy  <kevin@8t8.us> (9103f4f5)

        * Add more delimiters for gitlab url in the po files.
        
        Some of them hid from me in my wgrep session because they were marked
        as binary.

M	po/bg.po
M	po/el.po
M	po/es.po
M	po/et.po
M	po/ga.po
M	po/hu.po
M	po/ko.po
M	po/lt.po

2018-01-31 14:13:42 -0800  Kevin McCarthy  <kevin@8t8.us> (01dee39d)

        * Add delimiters around gitlab issues URL.
        
        Without the delimiters, the period can be easily inadvertantly copied
        as part of the URL.

M	main.c
M	po/bg.po
M	po/ca.po
M	po/cs.po
M	po/da.po
M	po/de.po
M	po/el.po
M	po/eo.po
M	po/es.po
M	po/et.po
M	po/eu.po
M	po/fr.po
M	po/ga.po
M	po/gl.po
M	po/hu.po
M	po/id.po
M	po/it.po
M	po/ja.po
M	po/ko.po
M	po/lt.po
M	po/nl.po
M	po/pl.po
M	po/pt_BR.po
M	po/ru.po
M	po/sk.po
M	po/sv.po
M	po/tr.po
M	po/uk.po
M	po/zh_CN.po
M	po/zh_TW.po

2018-01-27 11:20:21 -0800  Kevin McCarthy  <kevin@8t8.us> (788b732f)

        * automatic post-release commit for mutt-1.9.3

M	ChangeLog
M	UPDATING
M	VERSION
2018-01-21 18:33:16 -0800  Kevin McCarthy  <kevin@8t8.us> (45b15d3d)

        * Fix the ftp site url in the manual.
        
        Also fix the urlview link to point to sigpipe's github account.

M	doc/manual.xml.head

2018-01-17 19:19:01 -0800  Kevin McCarthy  <kevin@8t8.us> (ffdda7e6)

        * Fix one more dev site reference in the manual.

M	doc/manual.xml.head

2018-01-17 18:57:49 -0800  Kevin McCarthy  <kevin@8t8.us> (e9ef2a16)

        * Fix a couple memory leaks in pattern.c
        
        BUFFER.data was not being freed in a couple cases.
        
        The pattern and simple search were not being freed if imap_search()
        failed.

M	pattern.c

2018-01-17 18:05:28 -0800  Kevin McCarthy  <kevin@8t8.us> (f1307ce5)

        * Change bug reporting URL to gitlab issues.

M	doc/manual.xml.head
M	doc/mutt.man
M	main.c
M	po/bg.po
M	po/ca.po
M	po/cs.po
M	po/da.po
M	po/de.po
M	po/el.po
M	po/eo.po
M	po/es.po
M	po/et.po
M	po/eu.po
M	po/fr.po
M	po/ga.po
M	po/gl.po
M	po/hu.po
M	po/id.po
M	po/it.po
M	po/ja.po
M	po/ko.po
M	po/lt.po
M	po/nl.po
M	po/pl.po
M	po/pt_BR.po
M	po/ru.po
M	po/sk.po
M	po/sv.po
M	po/tr.po
M	po/uk.po
M	po/zh_CN.po
M	po/zh_TW.po

2018-01-17 18:01:31 -0800  Kevin McCarthy  <kevin@8t8.us> (c041535f)

        * Pull latest Polish translation from master.

M	po/pl.po

2018-01-17 16:21:53 -0800  Kevin McCarthy  <kevin@8t8.us> (32ce9f35)

        * Update manual to point to gitlab.com as development site.

M	doc/manual.xml.head

2018-01-17 16:16:10 -0800  Kevin McCarthy  <kevin@8t8.us> (eff9dfbf)

        * Remove muttbug and flea.
        
        We have pretty much transitioned over to gitlab.com.

M	.gitignore
M	Makefile.am
M	configure.ac
M	doc/Makefile.am
D	doc/muttbug.man
M	init.c
D	muttbug
D	muttbug.sh.in

2018-01-11 15:08:30 -0800  Kevin McCarthy  <kevin@8t8.us> (667a4710)

        * Add missing setup calls when resuming encrypted drafts.
        
        Calls to get the passphrase were missing for app/pgp and app/smime.
        App/smime was also missing a call to crypt_smime_getkeys().
        
        If a failure occurs, report it back, rather than just continuing.
        Otherwise, postponed messages could be completely lost.

M	postpone.c

2018-01-07 12:12:42 -0800  Kevin McCarthy  <kevin@8t8.us> (a37a2c4d)

        * Fix imap status count range check.
        
        The strtoul() call for parsing the STATUS count wasn't checking the
        range properly, because it was assigning to an unsigned int.
        
        Change to assign to a unsigned long, and also add the conversion check
        from mutt_atoui().
        
        Thanks to Charles (@chdiza) for quickly noticing the problem!

M	imap/command.c

2018-01-06 15:55:17 -0800  Kevin McCarthy  <kevin@8t8.us> (8fcf8eda)

        * Change imap literal counts to parse and store unsigned ints.
        
        IMAP literals are of type number.  Change imap_get_literal_count() to
        use mutt_atoui() instead of atoi().  Change the return type variables
        used to store the count to type unsigned int.
        
        It's doubtful this was a real issue, but as long as we're cleaning up
        incorrect atoi() usage, we should fix this too.

M	imap/command.c
M	imap/imap.c
M	imap/imap_private.h
M	imap/message.c
M	imap/util.c

2018-01-05 20:39:50 -0800  Kevin McCarthy  <kevin@8t8.us> (b8190ef3)

        * Fix improper signed int conversion of IMAP uid and msn values.
        
        Several places in the imap code, when parsing "number" and "nz-number"
        values from the IMAP data, use atoi() and strtol().  This is
        incorrect, and can result in failures when a uid value happens to be
        larger than 2^31.
        
        Create a helper function, mutt_atoui() and use that instead.  One
        place was using strtol() and relying on the endptr parameter, and so
        was changed to use strtoul() instead.
        
        Thanks to Paul Saunders for the bug report and original patch, which
        this commit is based on.

M	imap/command.c
M	imap/imap.c
M	imap/message.c
M	lib.c
M	lib.h

2017-12-26 15:09:07 -0800  Kevin McCarthy  <kevin@8t8.us> (363f12a3)

        * Update wiki link in manual.

M	doc/manual.xml.head

2017-12-18 12:55:20 -0800  Kevin McCarthy  <kevin@8t8.us> (80d06b0c)

        * Determine latest tag using git describe.
        
        Commit 8648db83 relies on `sort -V` which is unavailable on some
        platforms.  Instead just use `git describe` with --abbrev=0 to only
        output the tag.  We still manually compute the distance to avoid the
        problem mentioned in that commit.
        
        Additionally, add Vincent's fix from commit 3b142cea to the stable
        branch.

M	mkchangelog.sh
M	version.sh

2017-12-15 15:31:23 -0800  Kevin McCarthy  <kevin@8t8.us> (8e0d8616)

        * automatic post-release commit for mutt-1.9.2

M	ChangeLog
M	UPDATING
M	VERSION
2017-12-15 12:09:42 -0800  Kevin McCarthy  <kevin@8t8.us> (9eedfd4e)

        * Fix s/mime certificate deletion bug. (closes #3982)
        
        Commit c1bcf4ba exposed a bug in the s/mime encryption code.  It was
        errorneously calling unlink on the list of generated cert files to
        use.
        
        Prior to that commit, the list had an initial space, which apparently
        made the unlink fail.  After that commit, encrypting to a single
        certificate would end up deleting the certificate.
        
        Remove the calls to unlink the cert file.  Add some missing cleanup if
        the call to openssl fails.

M	smime.c

2017-12-14 16:16:27 -0800  Kevin McCarthy  <kevin@8t8.us> (841f7101)

        * Update mkchangelog.sh to use git.
        
        The output isn't quite as nice as the hg generated version, but is
        close.
        
        With Mercurial, and now Git, I'm not sure of the usefulness of
        maintaining a ChangeLog file in the repos, but that is another
        discussion.

D	hg-changelog-map
M	mkchangelog.sh

2017-12-12 19:09:42 -0800  Kevin McCarthy  <kevin@8t8.us> (ecbd86c9)

        * Remove hg-commit and Makefile commit target.
        
        I haven't ever used this script, and we only update the ChangeLog
        during releases now.
        
        doc/devel-notes already mentions running check_sec.sh.  Add a mention
        of the 'make validate' target too.

M	Makefile.am
M	doc/devel-notes.txt
D	hg-commit

2017-12-12 18:17:10 -0800  Kevin McCarthy  <kevin@8t8.us> (a4d08d25)

        * Minor tweaks to the version.sh fixes from last commit.
        
        Add back a check for whether the git program exists.
        
        Don't show distance if it is zero.
        
        Remove the dirty flag.
        
        Remove the initial "g" prefix from the commitid.  This is added by git
        describe, but I don't think we need to preserve it.

M	version.sh

2017-12-11 21:46:30 -0500  Aaron Schrab  <aaron+mutt@schrab.com> (8648db83)

        * Change version.sh to manually compute version and distance.
        
        In some cases `git describe` gives bizarre results (see URL below),
        instead get the highest version-numbered tag contained in HEAD then
        count the number of commits that aren't included in it.
        
        https://public-inbox.org/git/20161205232712.GA23868@pug.qqx.org/

M	version.sh

2017-12-10 20:03:30 -0800  Kevin McCarthy  <kevin@8t8.us> (7b65f780)

        * Update some of the documentation to refer to git.
        
        Also update the repos URL.

M	COPYRIGHT
M	README
M	doc/devel-notes.txt

2017-12-03 17:55:59 -0800  Kevin McCarthy  <kevin@8t8.us> (6df931c8)

        * Convert version.sh to work with git.
        
        Use the built-in `git describe` to get the tag, distance, and
        revision id.

M	version.sh

2017-12-02 19:27:14 -0800  Kevin McCarthy  <kevin@8t8.us> (0ad4c11d)

        * Convert to .gitignore file.

A	.gitignore
D	.hgignore

2017-09-30 19:15:08 -0700  Kevin McCarthy  <kevin@8t8.us> (1f4a6c67)

        * Fix address group terminator "exact address" printing to display trailing semicolon.
        
        The exact-address handling for comma and colon are different because
        those are added outside the exact-address printing.
        
        The semicolon needs to be inside the address->val field of the address
        group terminator.

M	rfc822.c

2017-09-26 19:44:11 -0700  Kevin McCarthy  <kevin@8t8.us> (0bcb77a6)

        * Fix uses of context->changed as a counter.
        
        The first was in mx_update_tables(), but only when "not committing".
        This is used by mh/maildir during an "occult" update, and in imap when
        expunging the mailbox.  It meant to simply turn on changed when a
        single changed header is seen.
        
        The second use was in imap_sync_message_for_copy().  Previously this
        was used for a server side copy/save, but is now also used for
        fast-trash copying.  Remove the code that was trying to decrement the
        counter: this function is not capable of properly setting a status
        bit.

M	imap/imap.c
M	mx.c

2017-09-23 11:40:44 -0700  Kevin McCarthy  <kevin@8t8.us> (b333df6d)

        * mutt-1.9.1 signed

M	.hgsigs

2017-09-23 11:39:54 -0700  Kevin McCarthy  <kevin@8t8.us> (5e007dac)

        * Added tag mutt-1-9-1-rel for changeset 869633ef393e

M	.hgtags

2017-09-23 11:39:45 -0700  Kevin McCarthy  <kevin@8t8.us> (8473efa7)

        * automatic post-release commit for mutt-1.9.1

M	ChangeLog
M	UPDATING
M	VERSION
2017-09-22 11:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (19c81a140c6e)

	* imap/imap.c: Add missing IMAP_CMD_POLL flag in imap buffy check.

	I missed adding the flag to one of the imap_exec() calls inside the
	loop, when a different server is encountered in the mailboxes list.

2017-09-22 11:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (9e53c623d102)

	* imap/command.c: Close the imap socket for the selected mailbox on
	error.

	The new $imap_poll_timeout calls the cmd_handle_fatal() error
	handler on timeout, which is supposed to close and cleanup.

	However, for the currently selected mailbox, the error handler was
	not closing the socket after closing up the mailbox. This left extra
	SSL/GnuTLS data around and was causing errors on an attempt to
	reconnect.

	Thanks to Fabian Groffen for reporting the issue.

2017-09-22 11:07 -0700  Kevin McCarthy  <kevin@8t8.us>  (7155392ed28b)

	* imap/imap.c: Fix imap sync segfault due to inactive headers during
	an expunge. (closes #3971)

	Mutt has several places where it turns off h->active as a hack. For
	example to avoid FLAG updates, or to exclude from imap_exec_msgset.

	Unfortunately, when a reopen is allowed and the IMAP_EXPUNGE_PENDING
	flag becomes set (e.g. a flag update to a modified header),
	imap_expunge_mailbox() will be called by imap_cmd_finish().

	The mx_update_tables() would free and remove these "inactive"
	headers, despite that an EXPUNGE was not received for them. This
	would result in memory leaks and segfaults due to dangling pointers
	in the msn_index and uid_hash.

	There should probably be a more elegant solution, removing the
	initial hacks. However, this is causing a segfault, and the best
	solution right now is to turn active back on for non-expunged
	messages in imap_expunge_mailbox().

	Extra thanks to chdiza, who bravely runs tip and found this issue
	quickly.

2017-09-14 12:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (12d3714d8bfa)

	* imap/command.c, imap/message.c: Improve imap fetch handler to accept
	an initial UID. (closes #3969)

	Gmail sends flag updates with a UID before the FLAGS. The handler
	was very simple, and so ignored the flag update in that case.

	Pull the code from msg_parse_fetch(), paring down to just UID and
	FLAGS. This will handle arbitrary order data items.

2017-09-13 15:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (f90712538cd9)

	* imap/imap.c, imap/imap_private.h, imap/message.c: Change imap
	copy/save and trash to sync flags, excluding deleted. (closes #3966)
	(closes #3860)

	imap_copy_messages() uses a helper to sync the flags before
	performing a server-side copy. However, it had a bug that the
	"deleted" flag on a local message, if set, will be propagated to the
	copy too.

	Change the copy sync helper to ignore the deleted flag. Then, change
	the imap trash function to use the same helper.

	Thanks to Anton Lindqvist for his excellent bug report, suggested
	fixes, and help testing.

2017-09-13 15:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (19597bb7baa6)

	* imap/imap.c: Remove \Seen flag setting for imap trash. (see #3966)
	(see #3860)

	Commit 323e3d6e5e4c has a side effect where spurious FETCH flag
	updates after setting the \Seen flag can cause a sync to abort.

	Remove manually setting \Seen for all trashed message before
	copying.

	The next commit will change the imap trash function to use the same
	code as the imap copy/save function for syncing the message before
	server-side copying.

2017-09-04 09:40 -0700  Kevin McCarthy  <kevin@8t8.us>  (3c6f3ca07807)

	* curs_lib.c: Fix rv assignment in mutt_window_mvprintw(). (closes
	#3964)

	Mutt doesn't check the return value, so this wasn't causing a bug,
	but was incorrect.

	Thanks to dcb314 for reporting the issue.

2017-09-04 09:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (f2298b3e6b93)

	* mutt_ssl_gnutls.c: Fix fp resource leak. (closes #3965)

	Thanks to dcb314 for reporting the issue.

2017-09-02 12:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (ed024cc919fe)

	* setenv.c: merge default into stable

2017-09-02 12:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (a586abf3c62d)

	* .hgsigs: mutt-1.9.0 signed

2017-09-02 12:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (b050efec0ed4)

	* .hgtags: Added tag mutt-1-9-rel for changeset 549821ba69e5

2017-09-02 11:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (549821ba69e5)

	* ChangeLog, VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po: automatic post-release commit for mutt-1.9.0

2017-09-02 09:36 -0700  Kevin McCarthy  <kevin@8t8.us>  (3cd63d517453)

	* po/cs.po, po/eo.po, po/nl.po: Fix the new certificate prompt
	translations.

	The Esperanto, Dutch, and Czech po files weren't updated in time for
	1.9. Fix the certificate prompt translations by adding a "(s)kip"
	choice. Otherwise the prompts would not be functional.

2017-08-29 09:19 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (52ba6fd58607)

	* po/ja.po: Updated Japanese translation.

2017-08-27 09:28 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net>  (2666f4de9eb8)

	* po/ca.po: Updated Catalan translation.

2017-08-22 19:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (b506fa3e7aab)

	* UPDATING: Add 1.9.0 entries to the UPDATING file.

2017-08-22 13:51 -0700  Morten Bo Johansen  <mjb@spamcop.net>  (f1638434cb43)

	* po/da.po: Updated Danish translation.

2017-08-22 10:59 -0700  Morten Bo Johansen  <mjb@spamcop.net>  (cce15c0169af)

	* po/da.po: Updated Danish translation.

2017-08-22 10:28 -0700  Olaf Hering  <olaf@aepfle.de>  (3606d018ea75)

	* po/de.po: Updated German translation.

2017-08-20 09:39 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (584cc7ee5016)

	* po/ru.po: Updated Russian translation.

2017-08-20 09:31 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (ed0fff2be143)

	* po/uk.po: Updated Ukrainian translation.

2017-08-19 08:33 -0700  Kevin McCarthy  <kevin@8t8.us>  (190e778db4d6)

	* doc/manual.xml.head, globals.h, init.h, mutt.h, sendlib.c: Add
	option to run command to query attachment mime type. (closes #2933)
	(closes #3959)

	Add $mime_type_query_command to specify a command to run if the
	attachment extension is not in the mime.types file.

	Add $mime_type_query_first to allow the query command to be run
	before the mime.types lookup.

2017-08-12 22:17 +0200  Vincent Lefevre  <vincent@vinc17.net>  (69e3bde9f83d)

	* po/fr.po: Updated French translation.

2017-08-11 09:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (1306ee5f4bf7)

	* recvcmd.c: Fix parent_hdr usage in mutt_attach_reply(). (see #3728)

	If the selected attachments are not messages and no (common) parent
	is found, parent_hdr is set to the passed in hdr. In that case,
	parent will still be NULL, but parent_hdr and parent_fp will be set.

	Change the test to parent_hdr being NULL, not parent, to check for
	this case.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (052ad4fcdd6b)

	* commands.c, protos.h, recvattach.c: Add edit-content-type helper and
	warning for decrypted attachments. (closes #3728)

	Regenerating the actx index will overwrite any changes made to a
	decrypted attachment. Change the mutt_edit_content_type() function
	to return 1 when a structural change is made. Add a warning message
	when that is the case and a decrypted message was edited, so the
	user is not surprised.

	Note: mutt_edit_content_type() appeared to regenerate multipart
	subparts every time, leading to a memory leak. I believe this was an
	oversite, and it should have regenerated only when there were no
	subparts, so have "fixed" this.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (38855dc0a02a)

	* crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-classic.c, crypt-mod-
	pgp-gpgme.c, crypt-mod.h, cryptglue.c, mutt_crypt.h, pgp.c,
	recvattach.c: Fix attachment check_traditional and extract_keys
	operations. (see #3728)

	Add helpers and iterate over the actx->idx instead of the BODY
	structure.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (e6e8b2f1fae3)

	* attach.h, compose.c, pager.c, recvattach.c, recvcmd.c: Fix shared
	attachment functions. (see #3728)

	With nested decryption, the correct FP is associated with the
	ATTACHPTR entry. Also, the BODY entries are not continguous, so the
	functions need to iterate over the actx index, not the BODY
	structure.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (26e06bd4f29d)

	* recvattach.c: Fix the expand/collapse code to use the virtual index.
	(see #3728)

	Fix the init code to respect OPTDIGESTCOLLAPSE.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (c7fe290bc3a3)

	* attach.c, attach.h, compose.c, recvattach.c: Add virtual index to
	actx. (see #3728)

	The virtual index is modeled after the CONTEXT. Add a CURATTACH
	helper to reduce code verbosity. Store the actx as menu->data.

	Simplify and consolidate the recvattach and compose menu update code
	inside a function.

	Because compose and recvattach share so much code, change compose to
	use the virtual index even though it has no collapse/expand
	functionality.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (23ce88ed8961)

	* attach.c, attach.h, compose.c, protos.h, recvattach.c: Change
	recvattach to allow nested encryption. (see #3728)

	* Add a FP and BODY array to the actx. These are used to allow
	proper cleanup.

	* Add HEADER and root_fp entries, to allow for index regeneration.

	* Separate out the compose and recvattach index generation
	functions.

	* Change the recvattach index generator to decrypt as encrypted
	parts are found.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (ee1fd4a71a8a)

	* attach.c, attach.h, compose.c, recvattach.c: Add helpers to add and
	remove actx entries. (see #3728)

	Use the helper in compose update_idx(), to consolidate the resize
	logic and simplify the code.

	Separate out the actx "free" routine from a routine to empty out the
	idx. The index regeneration routines should flush and rebuild the
	index without having to renerate the actx structure.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (b8bbccd98632)

	* attach.c, attach.h, browser.c, compose.c, pager.c, pager.h,
	recvattach.c, recvcmd.c: Change helpers functions to pass actx. (see
	#3728)

	Change the pager, compose, recvattach and recvcmd to pass the actx
	instead of the individual idx and idxlen parameters.

	Separate out the compose menu exit logic to first free the BODY data
	and then call the shared actx free function at the bottom.

2017-08-10 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (278b6efc6bba)

	* attach.c, attach.h, compose.c, recvattach.c: Create ATTACH_CONTEXT
	to hold attachment index. (see #3728)

	Move the idx and idxlen into ATTACH_CONTEXT. In subsequence patches,
	this structure will hold more useful items, such as the virtual
	index.

	The swap out is straightforward, except for:
	  * update_idx() in compose.c, which post-increments the idxlen in the
	call and again in the function.
	  * mutt_gen_attach_list() which doesn't need to returns the new values.

2017-08-09 08:08 -0700  lilydjwg  <lilydjwg@gmail.com>  (5f034395e53d)

	* po/zh_CN.po: Updated Simplified Chinese translation.

2017-08-08 09:13 -0700  Olaf Hering  <olaf@aepfle.de>  (86f709e4be55)

	* po/de.po: Updated German translation.

2017-08-06 10:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (f8df8c43e5c0)

	* pager.c: Handle error if REGCOMP in pager fails when resizing.

	Thanks to JiaZhouyang for finding this issue and supplying the
	original patch.

2017-08-04 09:29 -0700  Olaf Hering  <olaf@aepfle.de>  (ac2fda8bc9c4)

	* po/de.po: Updated German translation.

2017-07-28 10:54 -0700  Kevin McCarthy  <kevin@8t8.us>  (f83de1e03e08)

	* configure.ac, mutt_socket.c: Convert raw_socket_poll() to use
	gettimeofday().

	As long as gettimeofday() is supported, it's better to be consistent
	within mutt and ensure greater portability.

	Change the raw_socket_poll() wait timer to count milliseconds, like
	the mutt_progess_update() code.

	Thanks to Vincent Lefèvre for his, as always, invaluable advice.

2017-07-27 00:20 +0100  Vincent Lefevre  <vincent@vinc17.net>  (eeb5ff58ab14)

	* po/fr.po: Updated French translation.

2017-07-24 11:19 -0700  Kevin McCarthy  <kevin@8t8.us>  (f94a97422cd0)

	* configure.ac, mutt_socket.c: Add autoconf search for clock_gettime.

	It appears to be specified in POSIX.1-2001, so just abort if it's
	not found.

	Add a missing time.h include in mutt_socket.c

2017-07-22 19:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (4a1390537a29)

	* globals.h, imap/command.c, imap/imap.c, imap/imap_private.h, init.h:
	Add $imap_poll_timeout to allow mailbox polling to time out.

	Enable the polling flag for the NOOP in imap_check_mailbox(), the
	STATUS command in imap_buffy_check(), and the LOGOUT command.

	This is not intended to handle all blocking-IO related issues.
	However, the periodic NOOP and STATUS are the most frequent places
	for mutt to freeze up, especially after a laptop is sleep/woken.

	Since these are quick operations with little data, this is a good
	place to check if the connection is still working before hanging on
	a read.

2017-07-22 19:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (908bea74acef)

	* imap/imap.c, mutt_sasl.c, mutt_sasl.h, mutt_socket.c, mutt_socket.h,
	mutt_tunnel.c: Add timeout parameter to mutt_socket_poll.

	This will be used in the next commit to add a timeout when polling
	for new mail.

2017-07-20 17:30 -0700  Kevin McCarthy  <kevin@8t8.us>  (a533c22715c8)

	* mutt.h, sendlib.c: When guessing an attachment type, don't allow
	text/plain if there is a null character. (see #2933)

	Type text/plain should not contain any null characters. Slightly
	improve the type guesser by forcing an attachment with any null
	characters to be application/octet-stream.

	Note the type guesser could use much more improvement, but this is
	an easy and obvious fix.

2017-07-19 14:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (2204d7ed4d94)

	* imap/command.c, imap/imap.c, menu.c: merge stable

2017-07-19 14:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (78cc40b6ba9e)

	* imap/command.c, imap/imap.c: Change imap_cmd_start() to return OK
	when the cmd_queue is finished. (closes #3956)

	Some response handlers can end up recursively calling
	imap_cmd_start(), processing all the command completions. If the
	outer call was an imap_exec(), this would result in the loop never
	being terminated (or just blocking reading a server that has already
	finished all the commands).

	Change the callers that are simply using it to read a response,
	without having called cmd_start(), to check for IMAP_CMD_OK instead.
	Currently this is just the open connection function.

2017-07-19 14:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (cf98f5d606a3)

	* menu.c: Fix menu color calls to occur before positioning the cursor.
	(see #3956)

	It is possible for menu->color() to end up fetching an imap message,
	and therefore generating a status message.

	Because of this, we need to make those calls before we position the
	cursor.

2017-07-14 15:19 -0700  Kevin McCarthy  <kevin@8t8.us>  (c4e507003aa0)

	* regex.c: Decrease regex failure stack limit. (closes #3955)

	When using alloca(), the built-in regexp library limited the failure
	stack to 20,000 entries. This value is too large, and causes
	alloca() to segfault in the example provided in the ticket.

	Decrease the limit to 8000.

	Thanks to Thorsten Wißmann for the excellent bug report, which made
	debugging this much easier.

2017-07-13 22:05 -0700  Brendan Cully  <brendan@kublai.com>  (9430d2357bc2)

	* imap/imap.c, imap/imap.h, mx.c: drop unused flags argument from
	imap_access

	We are not using an actual interface so it is pointless.

2017-07-12 21:20 -0700  Brendan Cully  <brendan@kublai.com>  (742c96078159)

	* bcache.c: bcache: cast to avoid implicit signed/unsigned comparison
	in bcache_path

2017-07-12 12:39 -0700  Kevin McCarthy  <kevin@8t8.us>  (51d22025190a)

	* imap/imap.c: merge stable

2017-07-12 12:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (02c6dd3a30cc)

	* imap/imap.c: Fix crash when $postponed is on another server.

	imap_mxcmp() translates NULL to "INBOX". When $postponed points to a
	URL with an empty or "INBOX" path, this will end up matching against
	a NULL idata->mailbox in imap_status(). This resulted in a crash
	because idata->ctx is also NULL.

	Thanks to Olaf Hering for the detailed bug report and suggested fix.

2017-07-08 16:35 -0700  Brendan Cully  <brendan@kublai.com>  (952e4fcf1e2b)

	* imap/imap.c: fix signed/unsigned comparison in longest_common_prefix

2017-07-05 19:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (428e36fb2262)

	* doc/manual.xml.head, doc/muttrc.man.head, mutt.h, pattern.c: Add
	~<() and ~>() immediate parent/children patterns. (closes #3144)

	Thanks to Jeremie Le Hen for the original patch, and for his
	persistence in getting this feature merged.

2017-07-03 19:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (c87d2a88308a)

	* po/bg.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/eu.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ko.po, po/lt.po, po/pl.po, po/pt_BR.po, po/sk.po, po/sv.po,
	po/tr.po, po/zh_CN.po, po/zh_TW.po: Remove stale certificate prompt
	translations.

	With the OpenSSL changes, unmaintained translation prompts will not
	function properly.

	Clear out the translation strings for those using different action
	keys.

	This changeset does not touch the translation files that are
	actively maintained. They will be properly updated before the 1.9.0
	release.

2017-07-03 19:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (752f3e879d50)

	* po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po,
	po/eo.po, po/es.po, po/et.po, po/eu.po, po/fr.po, po/ga.po,
	po/gl.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po,
	po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po,
	po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po: Update po
	files.

2017-07-03 19:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (b90d818b768c)

	* mutt_ssl_gnutls.c: Add L10N comments to the GNUTLS certificate
	prompt.

	The prompts are shared with OpenSSL, and so the prompts end up being
	separate from the action key strings.

2017-07-02 17:53 -0700  Kevin McCarthy  <kevin@8t8.us>  (680300397f3d)

	* init.h: Add more description for the %S and %Z $index_format
	characters.

2017-07-01 19:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (c45291f87137)

	* globals.h, init.h, protos.h, recvcmd.c, send.c: Add config vars for
	forwarded message attribution intro/trailer.

	Add $forward_attribution_intro and $forward_attribution_trailer to
	allow the default strings to be overridden.

2017-06-26 15:54 -0700  Antonio Radici  <antonio@dyne.org>  (88602d33a49a)

	* init.h: Fix typo in smime_self_encrypt_as documentation. (closes
	#3953)

2017-06-26 15:47 -0700  Kevin McCarthy  <kevin@8t8.us>  (c50abea2ec80)

	* init.h: merge stable

2017-06-26 15:44 -0700  Regid Ichira  <regid23@nt1.in>  (826efa89631f)

	* init.h: Minor documentation fixes.

	The muttrc man page doesn't contain the "Format Strings" section in
	the manual, so add a pointer to the explanation of conditionals in
	$status_format.

2017-06-20 15:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (219b9064cf28)

	* mutt_socket.c: Block SIGWINCH during connect(). (closes #3941)

	FreeBSD's connect() does not respect SA_RESTART, so a SIGWINCH will
	end up interrupting the connect.

	If this code is needed in other places, it should be moved into
	signal.c. For this one place, inlining the sigprocmask() seemed
	okay.

2017-06-18 10:58 -0700  Kevin McCarthy  <kevin@8t8.us>  (d56fd3f91de9)

	* compose.c: Improve the L10N comment about Sign as.

	Make it clearer what the indentation behavior is, and add
	suggestions about the width.

	Thanks to TAKAHASHI Tamotsu for the original patch suggesting
	changes to the L10N comments.

2017-06-18 10:58 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (0efae3363358)

	* po/ja.po: Updated Japanese translation.

2017-06-14 19:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (7dc8a6a3592a)

	* crypt-gpgme.c: Auto-pad translation for the GPGME key selection
	"verify key" headers.

	Remove the ridiculous need for the translators to pad the
	translation strings themselves.

2017-06-14 15:23 -0700  Morten Bo Johansen  <mjb@spamcop.net>  (2188de087f35)

	* po/da.po: Updated Danish translation.

2017-06-14 15:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (e8368cedbd95)

	* compose.c, init.h, send.c: Enable all header fields in the compose
	menu to be translated.

	While it is suggested they need not be, for some locales it might be
	preferable to be able to localize the fields.

	For instance, fr_FR may want to change the punctuation to have a
	space in front of the colon. ja_JP may be more comfortable with a
	native character set description of the field when using it every
	day.

2017-06-12 18:29 -0700  Kevin McCarthy  <kevin@8t8.us>  (0e3730ed2c3c)

	* sendlib.c: Force hard redraw after $sendmail instead of calling
	mutt_endwin. (closes #3952) (see #3948)

	Adding a mutt_endwin() seemed like a clean solution to allowing
	ncurses pinentry for $sendmail, but it leaves other users watching a
	blank screen. This change is extremely likely to generate a large
	number of complaints and bug reports. So instead, force a hard
	refresh afterwards.

2017-06-12 17:57 -0700  Kevin McCarthy  <kevin@8t8.us>  (26cbf2cac701)

	* crypt-gpgme.c: Make GPGME key selection behavior the same as
	classic-PGP. (see #3950)

	Classic-PGP key selection auto-selected a match if there was a
	single strong, valid, address-match result, even if there were other
	weak matches.

	GPGME was prompting in the same situation, if there were other weak
	matches.

	Change GPGME to match the classic behavior, as this is more useful
	and matches the manual description.

2017-06-09 11:31 -0700  Consus  <consus@gmx.com>  (dd0208f13983)

	* compose.c: Rename 'sign as' to 'Sign as'; makes compose menu more
	consistent.

2017-06-09 11:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (b4d0bb558636)

	* compose.c: Change the compose menu fields to be dynamically padded.

	Pad based on the maximum width of the fields. Note that this is a
	bit of a mess, because some of the fields are translated while
	others are not.

2017-06-08 13:26 -0700  Kevin McCarthy  <kevin@8t8.us>  (966f08249216)

	* init.c, pgp.c: Backout 02ff4277259e (see #3948)

	Vincent expressed some legitimate concerns about exporting this to
	all programs lauched by mutt. The user can always set GPG_TTY in
	their .bashrc if needed for $sendmail. cf90bf5989f3 should resolve
	the refresh issue.

2017-06-06 18:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (cf90bf5989f3)

	* sendlib.c: Add a mutt_endwin() before invoking $sendmail. (closes
	#3948)

	This is to support invoking a program such as msmtp that can use gpg
	to decrypt a password. The ncurses pinentry can corrupt the screen
	unless we exit curses.

2017-06-06 18:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (02ff4277259e)

	* init.c, pgp.c: Move setting of GPG_TTY to mutt_init(). (see #3948)

	This allows other programs mutt runs to use the ncurses pinentry if
	needed.

2017-06-06 18:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (915ba3928d49)

	* configure.ac, m4/gettext.m4, pgp.c, protos.h, setenv.c: Restore
	setenv function.

	Partially revert fa1192803257, restoring setenv. It turns out we
	still need the function.

2017-06-02 13:17 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (a11770c2137b)

	* po/ja.po: Updated Japanese translation.

2017-06-01 15:17 -0700  Kevin McCarthy  <kevin@8t8.us>  (f26adb2b0543)

	* curs_main.c, menu.c: Fix tag-prefix to not abort on $timeout.

	If $timeout is set very low, then it can cancel the tag-prefix
	before the user has time to press the desired command.

	Change the code to set the tag flag, and then recontinue with normal
	event processing instead. Cancel on an abort, but continue with a
	timeout.

	Thanks to Lauri Tirkkonen for reporting the issue.

2017-06-01 15:17 -0700  Kevin McCarthy  <kevin@8t8.us>  (ec6530cb0a5a)

	* curs_main.c, enter.c, keymap.c, menu.c, pager.c: Change km_dokey()
	to return -2 on a timeout/sigwinch.

	In some cases, such as tag-prefix or _mutt_enter_string(), it is
	desirable to be able to distinguish between a timeout/sigwinch event
	and an input error/abort/ctrl-g.

2017-06-01 13:55 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (152d548c1bcf)

	* main.c: Enable TEXTDOMAINDIR override to make translation testing
	easier.

	If set, TEXTDOMAINDIR will point to a translation directory instead
	of using the mutt installation directory.

2017-06-01 13:33 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (4e29b337e967)

	* crypt-gpgme.c, hook.c, init.c, main.c, mutt_ssl.c, pattern.c, pop.c,
	pop_auth.c: Fix "format string is not a string literal" warnings.
	(closes #3949)

	Mutt calls msgfmt with '-c' to verify that translation format
	strings match, but it is still safer to indirect strings with no
	formatting through %s.

2017-05-31 16:19 -0700  Kevin McCarthy  <kevin@8t8.us>  (093b0c6c6d86)

	* doc/manual.xml.head: merge stable

2017-05-31 16:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (d3922568a777)

	* doc/manual.xml.head: Add note about message scoring and thread
	patterns. (see #3947)

	Because scoring occurs before the mailbox is sorted, thread patterns
	don't work. Document a suggested workaround of pushing the score
	command in a folder hook.

	Also, fix the link target for the score command synopsis.

2017-05-30 12:49 -0700  Kevin McCarthy  <kevin@8t8.us>  (35fba390b1f3)

	* merge stable

2017-05-30 12:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (fff7d4bb459a)

	* .hgsigs: mutt-1.8.3 signed

2017-05-30 12:47 -0700  Kevin McCarthy  <kevin@8t8.us>  (6a54fbc38fa4)

	* .hgtags: Added tag mutt-1-8-3-rel for changeset fe5275246e13

2017-05-30 12:47 -0700  Kevin McCarthy  <kevin@8t8.us>  (fe5275246e13)

	* ChangeLog, UPDATING, VERSION: automatic post-release commit for
	mutt-1.8.3

2017-05-29 11:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (228364e8abb7)

	* init.h, send.c: Change $postpone_encrypt to use self-encrypt
	variables first.

	The concept of postpone encryption is similar to self-encrypting on
	send. The problem is the $postpone_encrypt_as option doesn't take
	into account whether PGP or S/MIME is being used.

	Since we need to add the new options for self-encryption, modify
	$postpone_encrypt to use them by default instead, falling back to
	$postpone_encrypt_as if they are unset. Note $postpone_encrypt_as is
	deprecated in the documentation.

2017-05-29 11:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (ca95f3e38355)

	* crypt.c, globals.h, init.h, mutt.h: Add self-encrypt options for PGP
	and S/MIME.

	Add $pgp_self_encrypt, $pgp_self_encrypt_as, $smime_self_encrypt,
	$smime_self_encrypt_as.

	$pgp_sign_as and $smime_default_key are inappropriate to use, as
	they specify signing key/certs. In some cases, this is a different
	value than the encryption key/cert.

2017-05-29 11:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (085fc55029d8)

	* smime.c: Convert classic s/mime to space delimit findKeys output.

	Unlike gpgme and classic pgp, smime used a "cert\ncert\n" pattern.
	Convert to use a space-delimited format, so the self-encrypt option
	code can be uniform across pgp, s/mime, and gpgme.

2017-05-24 15:46 -0700  Kevin McCarthy  <kevin@8t8.us>  (a636bc4a4940)

	* imap/message.c: Change imap body cache cleanup to use the uid_hash.

	This should speed up $message_cache_clean cleanup when syncing.

2017-05-23 15:54 -0700  Kevin McCarthy  <kevin@8t8.us>  (8904261ed212)

	* merge stable

2017-05-23 15:53 -0700  Kevin McCarthy  <kevin@8t8.us>  (fa0c2155ab8f)

	* mx.c: Fix memory leak when closing mailbox and using the sidebar.

	The code updating the sidebar counts decremented the msgcount, but
	did not set it back to the original value. Which means fastclose was
	not freeing all the headers.

	Update the sidebar only when something is deleted, since I don't
	believe it's required otherwise and the code is a bit cleaner that
	way.

2017-05-22 18:30 -0700  Kevin McCarthy  <kevin@8t8.us>  (407100d15766)

	* imap/imap.c: Don't clean up msn idata when closing an open-append
	mailbox. (see #3942)

	This is a continuation of commit 59a2125b49f2 with changes made in
	the default branch.

	Thanks again to Will Yardley for helping test the imap read-headers
	changes and discovering this bug.

2017-05-22 18:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (aec6b48e8ea5)

	* imap/imap.c: merge stable

2017-05-22 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (59a2125b49f2)

	* imap/imap.c: Don't clean up idata when closing an open-append
	mailbox.

	open-append borrows the idata just for the connection. The "mailbox
	specific" part of the idata may be being used by a normal open-
	mailbox.

	Don't free the idata "mailbox specific" part when closing an open-
	append mailbox.

	Thanks to Will Yardley for discovering the bug as part of testing
	the revised IMAP fetch_headers code (in the default branch).

2017-05-22 05:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (e614fb00459b)

	* merge stable

2017-05-22 05:08 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (1ddf2641f369)

	* mx.c: Fix potential segv if mx_open_mailbox is passed an empty
	string. (closes #3945)

	If path is "", ctx->path will be NULL. realpath() generally will
	segv if the first parameter is NULL.

2017-05-22 04:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (4ab3a8a2e321)

	* imap/message.c: Fix mfc overflow check and uninitialized variable.

	The check borrowed from mx_alloc_memory() works because it is
	incremented 25 at a time. I don't believe it will work for the
	direct set case used in imap_alloc_msn_index(). Instead, use a more
	conservative check.

	In imap_read_headers(), make sure mfhrc is initialized. It would be
	tested without being set if imap_cmd_step() returned OK right away.

2017-05-21 18:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (5904c6376f77)

	* imap/message.c: Don't abort header cache evaluation when there is a
	hole. (see #3942)

	Instead, find the first missing MSN and generate a more complicated
	sequence set specifying the missing ranges.

	This removes the assumption that the header cache query returned
	results in MSN order.

2017-05-21 18:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (1658ab70377b)

	* imap/message.c: Small imap fetch fixes. (see #3942)

	Add an integer overflow test, pulled from mx_alloc_memory(), since
	the count comes from a potentially hostile server.

	After reviewing the RFC a bit, it turns out the server is not
	supposed to send EXPUNGE responses during a FETCH. Change the
	comment, but keep the conservative code.

2017-05-21 10:51 -0700  Kevin McCarthy  <kevin@8t8.us>  (f87c679e508f)

	* imap/message.c: Properly adjust fetch ranges when handling new mail.
	(see #3942)

	When pulling down headers, it is possible for expunge responses to
	happen too. If we get a new mail count, we need to take into account
	changes to the max_msn due to the expunges.

2017-05-20 18:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (77d3173aecff)

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/message.c:
	Add msn_index and max_msn to find and check boundaries by MSN. (see
	#3942)

	Since there can be gaps in MSNs, the largest MSN in the context is
	not necessarily ctx->msgcount.

	Use max_msn instead of ctx->msgcount for:
	  - the starting MSN of new mail header fetching
	  - boundary checking in fetch, expunge, and other places

	Use msn_index to efficiently look up headers by MSN. This makes the
	expunge code slightly more efficient. It also makes FETCH handling,
	and duplicate FETCH FLAG handling efficient.

2017-05-20 18:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (5289d2caadbb)

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/message.c:
	Start fixing imap_read_headers() to account for MSN gaps. (see
	#3942)

	Change the parameters to pass MSN instead of index, to make a bit
	simpler.

	Change header cache evaluation to look at the largest MSN retrieved
	instead of ctx->msgcount for the next fetch start point. This still
	depends on the assumption that MSNs are retrieved in ascending
	order, which needs to be fixed.

	Simplify the header cache inner loop termination and memory cleanup
	logic. Fix a memory leak if a hole in the header cache occured.

	Fix the header retrieval logic to take into account MSN gaps in the
	results. Loop only as long as we get IMAP_CMD_CONTINUE instead of
	over a fixed count. Simplify the inner loop termination and memory
	cleanup logic too.

	Simplify the "new mail while fetching" logic by creating a third
	outer loop to handle re-fetches.

	Fix msg_fetch_header() to return -2 if msg_parse_fetch() encounters
	a corrupt FETCH response. Previously it would pass on the rc of
	msg_parse_fetch(), meaning it would return -1 even though the
	response was corrupt.

2017-05-20 18:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (b85bf6466c79)

	* imap/command.c: Fix cmd_parse_fetch() to match against MSN. (see
	#3942)

2017-05-20 18:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (ab3595fbb698)

	* imap/command.c, imap/imap.c: Fix imap expunge to match msn and fix
	index. (see #3942)

	The expunge needs to match against the MSN now. Since
	cmd_parse_expunge() does not automatically fix h->index anymore,
	change imap_expunge_mailbox() to fix up the h->index values.

2017-05-20 18:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (27bb55faa024)

	* imap/message.c, imap/message.h: Move the IMAP msn field to
	IMAP_HEADER_DATA. (see #3942)

	Ticket 3942 revealed that it is possible for a FETCH to have gaps in
	the MSN numbers of the results. The code makes many assumptions that
	equate context index counts and MSN. This is the first in a series
	of commits fixing that assumption.

	The header->index field is supposed to hold the SORT_ORDER index
	number of the message. If there are gaps in the MSN, than the
	highext MSN can in fact be out of the range 0..ctx->msgcount-1.

	After studying the code, I believe curs_main.c would actually work
	with header->index values out of the range, at least for IMAP. But
	some other parts of the code, such as mutt_reopen_mailbox(), do rely
	on the values being a valid index to ctx->hdrs[]. And the
	intertwining of menu->oldcurrent with header->index values makes me
	nervous about future changes.

	So, to be safe, move the MSN to its own field in IMAP_HEADER_DATA.

	The next commit will fix the EXPUNGE behavior.

2017-05-13 09:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (4bffaa6d189a)

	* history.c: Don't filter new entries when compacting history save
	file.

	If new entries are added between the two passes, they won't be in
	the dup_hash. The original intent was to filter added duplicates,
	but the check would also filter brand new entries.

2017-05-12 18:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (7a4cc1750940)

	* doc/manual.xml.head, history.c, init.h: Also remove duplicates from
	the history file.

	When $history_remove_dups is set, remove duplicates from the history
	file when it is periodically compacted.

2017-05-12 18:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (e66c6c0e8cc6)

	* doc/manual.xml.head, history.c, init.h, mutt.h: Add
	$history_remove_dups option to remove dups from history ring.

	When set, duplicate entries will be removed from the history ring
	when a new entry is added. The duplicate removal rearranges the
	history ring such that created empty slots are right after the
	"last" position in the ring, preserving the most history.

	Rewrite the next/prev functions to take into account that blank
	slots can now be in the middle of the array.

2017-05-12 09:16 -0700  Kevin McCarthy  <kevin@8t8.us>  (149f842ed1d0)

	* merge stable

2017-05-12 09:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (a97afb72d892)

	* imap/imap.c: Turn IMAP_EXPUNGE_EXPECTED back off when syncing.
	(closes #3940).

	imap_sync_mailbox() turned on IMAP_EXPUNGE_EXPECTED when issuing a
	EXPUNGE command during a sync. However, it forgot to turn it back
	off.

	That meant that an unexpected EXPUNGE that occurred during a
	mx_check_mailbox -> imap_check_mailbox() -> imap_cmd_finish() call
	was not setting idata->check_status = IMAP_EXPUNGE_PENDING; and so
	imap_check_mailbox() was not returning MUTT_REOPENED.

	This meant that although the Context had been changed, the index did
	not run update_index(), resulting in a possible segfault.

	Thanks to Uroš Juvan for reporting the issue, and his invaluable
	description of how to reproduce the problem.

2017-05-09 16:07 -0700  Kevin McCarthy  <kevin@8t8.us>  (7f95b4c993b2)

	* init.c, init.h, menu.c, mutt_menu.h, pager.c: Create R_PAGER_FLOW
	config variable flag.

	Use this for $header_color_partial, $markers, and $smart_wrap. When
	these options are changed in the pager, this flag will force a
	recalculation of lineInfo.

	Remove the manual checks in OP_ENTER_COMMAND for $markers and
	$smart_wrap, and instead use the same REDRAW_FLOW processing used
	for a SigWinch.

2017-05-09 16:07 -0700  Kevin McCarthy  <kevin@8t8.us>  (3fd8c4af4658)

	* curs_lib.c, mutt_menu.h, pager.c: Rename REDRAW_SIGWINCH to
	REDRAW_FLOW.

	The next patch will attach this redraw flag to pager settings. The
	former name becomes somewhat confusing with the expanded usage, so
	rename it to something more relevant to what is being redrawn.

2017-05-08 18:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (92d9db08a35e)

	* doc/manual.xml.head, init.h, mutt.h, pager.c: Add
	$header_color_partial to allow partial coloring of headers.

	When set, a regexp match will color only the matched text in the
	header. When unset (the default), the entire header will have color
	applied.

	With appropriate regexps, this allows coloring of just the header
	field name. Of course, it can also be used to highlight arbitrary
	phrases in the headers too.

2017-05-07 15:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (5006a0a36405)

	* mh.c: Improve maildir and mh to report flag changes in
	mx_check_mailbox() (closes #3865)

	mx_check_mailbox() would update the header flags, but was not
	returning MUTT_FLAGS back to the index loop. That meant a screen
	redraw was needed to be notified of externally modified flags.

	Change maildir_update_flags() to return 1 if the flags were actually
	changed. Change maildir_check_mailbox() and mh_check_mailbox() to
	return MUTT_FLAGS when that happens.

	Thanks to jcdenton and mike-burns for the original patch.

2017-05-05 14:03 -0700  Kevin McCarthy  <kevin@8t8.us>  (161d5f18cae5)

	* curs_main.c: merge stable

2017-05-05 13:55 -0700  Kevin McCarthy  <kevin@8t8.us>  (71cb68efe98e)

	* curs_main.c: Don't modify LastFolder/CurrentFolder upon aborting a
	change folder operation.

	Set LastFolder and CurrentFolder after mx_close_mailbox() has
	successfully completed. Otherwise, if the close is aborted, they
	will have incorrect values.

2017-05-05 12:46 -0700  Kevin McCarthy  <kevin@8t8.us>  (6d4ceb8c5b9e)

	* curs_main.c, menu.c, pager.c, postpone.c: Change message modifying
	operations to additively set redraw flags.

	With the ability to set redraw flags with the menu stack operations,
	some operations internally modify the current menu redraw flag. For
	instance, _mutt_set_flag() can now set REDRAW_SIDEBAR.

	Change the ops that modify messages to use 'redraw |= REDRAW_X'
	instead of overwriting the flag value.

2017-05-04 18:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (c8ac1df1dcc9)

	* merge stable

2017-05-04 18:05 -0700  Kevin McCarthy  <kevin@8t8.us>  (c08c72a0e24c)

	* mx.c: Fix sidebar count updates when closing mailbox. (closes #3938)

	The context unread and flagged counts were being updated too early
	in mx_close_mailbox(). Cancelling at any of the following prompts
	would leave them in an incorrect state. Additionally, $move could
	increase the delete count (for flagged messages), and $delete, if
	answered no, could turn off message deletion.

	Move all the sidebar buffy stat updating to the bottom of the
	function, after all the prompts and processing.

2017-05-03 18:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (a6db4750f675)

	* color.c, compose.c, doc/manual.xml.head, mutt_curses.h: Add color
	commands for the compose menu headers and security status. (closes
	#3915).

	Add "color compose header" to color the From/To/Subject/etc fields
	in the compose menu.

	Add "color compose security_encrypt/sign/both/none" to color the
	security status of the message.

2017-04-30 15:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (7e1edf6a7ed7)

	* sendlib.c: Remove glibc-specific execvpe() call in sendlib.c. (see
	#3937)

	Changeset fa1192803257 converted all exec calls to use
	mutt_envlist(). Unfortunately, the call in sendlib.c, execvpe(), is
	a glibc extension.

	Convert back to execvp() for now, to fix the build on MacOS.

2017-04-30 15:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (7dd3de416a54)

	* merge stable

2017-04-30 15:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (829584614fd6)

	* headers.c: Refresh header color when updating label. (closes #3935)

	color index with a '~y' pattern were not being updated after
	adding/removing labels.

2017-04-30 14:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (84acb1832fa9)

	* init.c, init.h: merge stable

2017-04-30 14:24 -0700  Kevin McCarthy  <kevin@8t8.us>  (c54ac874a32b)

	* init.c, init.h: Fix unused function warnings when sidebar is
	disabled. (closes #3936)

	parse_path_list/unlist are currently only used by the
	un/sidebar_whitelist commands. Add an ifdef around them to stop an
	unused function warning. Add a comment too, so it's clear why they
	are ifdef'ed.

2017-04-30 13:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (b3d9d7a2f677)

	* merge stable

2017-04-30 13:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (deb66bd24b9d)

	* doc/manual.xml.head: Note that mbox-hooks are dependent on $move.

	Add a note to the "Using Multiple Spool Mailboxes" section.

2017-04-30 12:25 -0700  Vincent Lefevre  <vincent@vinc17.org>  (fa1192803257)

	* configure.ac, m4/gettext.m4, mutt_tunnel.c, pgp.c, protos.h,
	sendlib.c, setenv.c: Convert all exec calls to use mutt_envlist(),
	remove setenv function.

	The documentation implies that all children processes will be
	affected by the setenv command, so convert all the exec calls to use
	mutt_envlist().

	The setenv("GPG_TTY") call is no longer needed so remove it.

	With that removed, there are no other setenv calls in mutt, so
	remove the autoconf check and replacement function.

2017-04-27 21:23 -0700  Kevin McCarthy  <kevin@8t8.us>  (c65d0c23c142)

	* curs_lib.c, keymap.c, mutt_curses.h: merge stable

2017-04-27 21:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (b8952095b583)

	* curs_lib.c, keymap.c, mutt_curses.h: Fix km_error_key() infinite
	loop and unget buffer pollution.

	'bind pager \Ch help' produces an infinite loop when an unbound key
	is pressed in the pager. The reason is because km_error_key() tries
	to verify that the key sequence is really bound to the OP_HELP
	operation. It does this by using km_expand_key(),
	tokenize_unget_string() on the resulting buffer, then checking if
	the next km_dokey() returns OP_HELP.

	The problem is that km_expand_key() does not always produce a string
	that is properly reparsed by tokenize_unget_string(). Control-h
	sequences are expanded to ^H. tokenize_unget_string() recognizes
	this as two characters '^' and 'H'. km_error_key() checks the OP
	returned, which is OP_PAGER_TOP for the '^'. This is not OP_HELP, so
	it prints a generic error and returns. This leaves the 'H' in the
	input buffer! Since 'H' (by default) is unbound in the pager, it
	retriggers km_error_key(), resulting in an infinite loop.

	The same issues can occur without control sequences: bind generic ?
	noop bind generic dq help In the index, hitting an unbound key will
	end up leaving 'q' in the unget buffer, because 'd' is bound in the
	index menu and will be read by km_dokey().

	A simple approach to fix this would be to just use the same code as
	in mutt_make_help(), which has no double-check. This would be no
	worse than the help menu, but can generate an inaccurate error
	message (e.g if '?' were bound to noop)

	This patch instead uses OP_END_COND as a barrier in the unget
	buffer. It directly inserts the keys in the OP_HELP keymap, instead
	of using km_expand_key() + tokenize_unget_string(). After calling
	km_dokey() it flushes the unget buffer to the OP_END_COND barrier.

	Thanks to Walter Alejandro Iglesias for reporting the bug.

2017-04-26 15:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (92671c9c17bd)

	* merge stable

2017-04-26 15:40 -0700  Roger Cornelius  <rac@tenzing.org>  (9a0afe7815d1)

	* mx.c: Fix error message when opening a mailbox with no read
	permission. (closes #3934)

	ctx->mx_ops ends up being NULL for both the case that ctx->magic is
	0 and -1. This meant the mutt_perror() error message was never being
	printed, because the check for ctx->mx_ops == NULL was taking place
	first.

	Move the "ctx->magic == -1" check first, so mutt will print out an
	appropriate perror message in that case.

2017-04-18 16:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (69df899cdfa9)

	* merge stable

2017-04-18 16:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (2c57a7b4dc0b)

	* .hgsigs: mutt-1.8.2 signed

2017-04-18 16:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (455a698f274b)

	* .hgtags: Added tag mutt-1-8-2-rel for changeset c6ea4aed6bec

2017-04-18 16:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (c6ea4aed6bec)

	* ChangeLog, UPDATING, VERSION: automatic post-release commit for
	mutt-1.8.2

2017-04-18 13:13 -0700  Kevin McCarthy  <kevin@8t8.us>  (385ba6449c30)

	* commands.c: Revert sort prompt labels. (see #3930)

	Using the (s)ort style may look a bit better, but it makes the
	prompt over 80 columns. The multichoice prompt supports multiple
	lines now, but it is better to have it fit on one line if possible.

	Revert back to the "capital letter" method, but leave the ticket
	open, to explore other ideas that Vincent and chdiza have for better
	ways to present a long choice like this.

2017-04-18 12:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (67677bca06fe)

	* init.c, pgp.c, protos.h: merge stable

2017-04-18 12:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (33995363e723)

	* filter.c, init.c, pgp.c, protos.h: Fix GPG_TTY to be added to
	envlist. (closes #3931)

	Changeset 37209157e33c converted filters to use the envlist.
	Unfortunately, I missed that pgp.c sets GPG_TTY when using the GnuPG
	agent. Convert to add GPG_TTY to the envlist too.

2017-04-17 17:40 -0700  Kevin McCarthy  <kevin@8t8.us>  (851a7ec95399)

	* pager.c: Handle the pager sort prompt inside the pager.

	Display the prompt in the pager, so a multiline prompt or resize
	doesn't refresh the index menu. Then, bounce back through the index
	to handle resorting and status line updates.

	This also fixes cancelling to stay in the pager.

2017-04-17 17:40 -0700  Kevin McCarthy  <kevin@8t8.us>  (979f1e669c16)

	* commands.c: Change the sort prompt to use (s)ort style prompts.

	This is consistent with the rest of mutt, and in my opinion, more
	readable.

2017-04-16 14:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (61295113f7ab)

	* curs_lib.c: Add multiline and sigwinch handling to mutt_yesorno.
	(closes #3877)

	Most of the yes/no and query_quadoption prompts are pretty short,
	but for completeness add handling for those too.

2017-04-15 12:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (2be3dd383c35)

	* curs_lib.c, pager.c: Set pager's REDRAW_SIGWINCH when reflowing
	windows.

	So that all external reflow handling functions don't have to
	remember to set the flag too.

2017-04-15 12:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (5849d1a052bb)

	* curs_lib.c: Add multiline and sigwinch handling to
	mutt_multi_choice. (see #3877)

	Resize the message window up to three lines to fix wide prompts.

	Enable sigwinch processing and redraw the current menu as needed.

2017-04-15 12:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (24e38e932693)

	* curs_lib.c, enter.c: Add ifdefs around new mutt_resize_screen calls.

	Changeset 231fa2eff206 added sigwinch handling to
	_mutt_enter_string() but neglected to add an ifdef check.

2017-04-12 18:00 -0700  Kevin McCarthy  <kevin@8t8.us>  (39bf12dccf0c)

	* merge stable

2017-04-12 17:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (feccc2ac1b9a)

	* .hgsigs: mutt-1.8.1 signed

2017-04-12 17:44 -0700  Kevin McCarthy  <kevin@8t8.us>  (491f7cfa03d9)

	* .hgtags: Added tag mutt-1-8-1-rel for changeset f44974c10990

2017-04-12 17:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (f44974c10990)

	* ChangeLog, UPDATING, VERSION: automatic post-release commit for
	mutt-1.8.1

2017-04-11 12:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (3c46ef05dca9)

	* compose.c: merge stable

2017-04-11 12:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (b825cbcaf6b5)

	* compose.c: Fix memleak when attaching files.

2017-04-08 14:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (29239b1a6d50)

	* commands.c: Ensure mutt stays in endwin during calls to pipe_msg()
	(closes #3929)

	The previous commit solved the problem reported in #3929:
	progressbar output while downloading a message via IMAP was
	refreshing the mutt ncurses session after launching the pipe
	program.

	To ensure another place in the code doesn't inadvertantly generate
	output, wrap OPTKEEPQUIET around the calls to
	pipe_msg()/mutt_wait_filter() too.

2017-04-08 14:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (0bf83c2fbbf2)

	* merge stable

2017-04-08 14:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (a8b1017a4cc1)

	* imap/message.c: Silence imap progress messages for pipe-message.
	(see #3929)

	_mutt_pipe_message() calls endwin(), and then calls pipe_msg(). If
	an imap message body hasn't already been downloaded, this can end up
	calling imap_fetch_message().

	The progress messages in imap_fetch_message() were restoring curses,
	just after extract_url was running. This was leading to a condition
	where mutt curses didn't think the screen had changed after
	extract_url exited.

	There was already a check for isendwin() inside
	imap_fetch_message(), but it wasn't wrapped around the progressbar
	creation/usage. Add a check for those places too.

2017-04-05 16:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (303fc058692f)

	* query.c: Don't create query menu until after initial prompt. (see
	#3877)

	A resize in the prompt will trigger a redraw, but the data won't be
	loaded yet, displaying a blank screen instead of the previous menu.
	Once the query is done, the data is loaded, but the menu->redraw
	state has been changed by the resize.

	We could manually flag a redraw, but it makes more sense visually
	logically to just create the menu after the query and results are
	loaded.

2017-04-05 16:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (86848e5932b0)

	* curs_lib.c, pager.c: Separate out the pager menu redrawing. (see
	#3877)

	The pager relies on REDRAW_SIGWINCH, so add that to
	_mutt_get_field().

2017-04-05 16:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (dcc95921c3c5)

	* pager.c: Prepare for pager redraw separation. (see #3877)

	Move some of the code inside SigWinch handling into the REDRAW part
	of the code.

	SigInt is handled by mutt_getch(), so remove the redundant code from
	inside the pager.

2017-04-05 16:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (178bd8b53cab)

	* curs_main.c: Separate out the index menu redrawing. (see #3877)

2017-04-05 16:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (c651b528f958)

	* compose.c, menu.c, mutt_menu.h: Separate out the compose menu
	redrawing. (see #3877)

	Add a custom_menu_redraw to the menu and change menu_redraw() to
	call that instead if set.

2017-04-05 16:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (231fa2eff206)

	* curs_lib.c, enter.c, keymap.c, menu.c, mutt_menu.h: Change
	km_dokey() to pass SigWinch on for the MENU_EDITOR. (see #3877)

	Change _mutt_enter_string() to pass the SigWinch through for
	_mutt_get_field() or mutt_enter_string() to handle.

	Add a call to mutt_current_menu() in _mutt_get_field() to properly
	redisplay the screen in that case.

2017-04-05 16:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (7f6ff45a7f59)

	* init.c: Remove redraw flag setting after mutt_endwin().

	There is no need to set a redraw flag in this case. The screen will
	automatically be properly redrawn on the next refresh().

	Remove, lest it get propagated.

2017-03-31 18:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (8b9bbd983b1a)

	* commands.c, compose.c, curs_lib.c, curs_main.c, pager.c, protos.h:
	Remove refresh parameter from mutt_enter_fname().

	Also remove it from mutt_save_message(), which used it to pass
	through to mutt_enter_fname(). The callers of this already had
	redraw logic, to which REDRAW_STATUS merely needed to be added.

2017-03-31 18:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (68bbc47c8498)

	* init.c, init.h: Create R_MENU redraw option.

	Previously, the R_INDEX option meant both the index as well as all
	other menus. The removal of the OPTFORCEREDRAWINDEX option caused
	problems with redrawing other menus for options such as
	arrow_cursor.

	One solution would be change R_INDEX back to meaning "everything"
	except pager, but there are only a handful of options that affect
	other menus.

	Instead, create R_MENU to indicate options that affect either all
	menus or one of the other menus beside the index and pager.

2017-03-31 18:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (7f47e330bd72)

	* curs_lib.c, curs_main.c, init.h, pager.c: Change reflow_windows() to
	set full redraw.

	A full redraw should always be set in this case. This also enables
	us to remove redraw flags for some options.

2017-03-31 18:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (b36e4918d1d9)

	* buffy.c, curs_main.c, flags.c, globals.h, imap/command.c, init.c,
	menu.c, pager.c, sidebar.c: Remove SidebarNeedsRedraw.

	The menu stack can be used to flag a redraw of the sidebar window.

2017-03-31 18:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (06553f524887)

	* color.c, curs_lib.c, curs_main.c, init.c, menu.c, mutt.h,
	mutt_menu.h, pager.c, score.c: Remove the OPTFORCEREDRAW options.

	Use the menu stack to flag redraws for the index and pager.

2017-03-31 17:29 +0200  Vincent Lefevre  <vincent@vinc17.net>  (6fb6021389c8)

	* mbyte.c: Filter other directional markers that corrupt the screen.

2017-03-27 11:46 -0700  Kevin McCarthy  <kevin@8t8.us>  (4c7881c441e7)

	* init.h: merge stable

2017-03-27 11:39 -0700  Kevin McCarthy  <kevin@8t8.us>  (77032036c642)

	* init.c, init.h: Fix (un)sidebar_whitelist to expand paths.

	Thanks to Arturo for reporting the issue.

2017-03-26 18:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (4d06d85a4dd7)

	* curs_main.c: Don't full redraw the index when handling a command
	from the pager.

	This causes a noticable flicker when moving through messages from
	the pager.

2017-03-26 18:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (cb57cd88846b)

	* compose.c, crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-classic.c,
	crypt-mod-pgp-gpgme.c, crypt-mod-smime-classic.c, crypt-mod-smime-
	gpgme.c, crypt-mod.h, cryptglue.c, mutt_crypt.h, pgp.c, pgp.h,
	smime.c, smime.h: Remove redraw parameter from crypt send_menus.

	The parameter was used to notify the caller if the sign (a)s menu
	was invoked, which displayed the key selection menu. This is no
	longer necessary with the menu stack pop operation.

2017-03-26 18:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (7cced4378ed5)

	* addrbook.c, browser.c, commands.c, compose.c, crypt-gpgme.c,
	curs_lib.c, curs_main.c, enter.c, menu.c, mutt.h, mutt_curses.h,
	mutt_menu.h, mutt_ssl.c, pager.c, pgpkey.c, protos.h, query.c,
	remailer.c, remailer.h, smime.c: Set refresh when popping the menu
	stack.

	This removes the need for the OPTNEEDREDRAW option and MAYBE_REDRAW
	macro previously used to communicate back the need to refresh after
	exiting a menu.

	Remove the redraw parameter from ci_bounce_message() and
	mix_make_chain() which served the same purpose.

2017-03-26 18:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (dbb9fbe9b3de)

	* curs_main.c, menu.c, pager.c: Change CurrentMenu to be controlled by
	the menu stack.

	The pager menu is a bit tricky with respect to the menu->menu and
	CurrentMenu, so add a few comments.

2017-03-26 18:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (6551825f99fa)

	* addrbook.c, browser.c, compose.c, crypt-gpgme.c, curs_main.c,
	menu.c, mutt_menu.h, mutt_ssl.c, mutt_ssl_gnutls.c, pager.c,
	pgpkey.c, postpone.c, query.c, recvattach.c, remailer.c, smime.c:
	Add a menu stack to track current and past menus.

	Change the pager to use a MENU, right now just to hold the refresh
	state.

2017-03-26 12:27 -0700  Kevin McCarthy  <kevin@8t8.us>  (b8519ee6bd74)

	* merge stable

2017-03-26 12:27 -0700  Kevin McCarthy  <kevin@8t8.us>  (9da67ea88f25)

	* curs_lib.c: Fix mutt_refresh() pausing during macro events.

	Changeset a07e8215a0ef split input buffering into two pools.
	Unfortunately, the mutt_refresh() was not changed to check the
	correct buffer count, resulting in unnecessary refreshes during
	macros.

	The SSL interactive certificate prompts set OPTIGNOREMACROEVENTS and
	then put up a confirmation menu. Perhaps we've just been lucky, but
	it seems we should refresh the screen in those cases if we're in the
	middle of a macro. Add a check for this option in mutt_refresh()
	too.

2017-03-20 10:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (c875e6f4785d)

	* merge stable

2017-03-20 10:16 -0700  Kevin McCarthy  <kevin@8t8.us>  (7cefa378ab7e)

	* init.c: Fix setenv overwriting to not truncate the envlist. (see
	#3922)

	The refactor in 2b9c40f13e13 exposed a bug I hadn't noticed. The
	match loop performed a FREE() on the slot. Then, below, it was
	checking if (*envp) to see whether it was overwriting or creating a
	new slot. However, FREE() nulls out *envp. This would end up
	truncating the envlist just after the set slot!

	Move the free down, using a mutt_str_replace(), when overwriting the
	slot.

2017-03-18 14:47 -0700  Kevin McCarthy  <kevin@8t8.us>  (741865dfc052)

	* merge stable

2017-03-18 14:39 -0700  Kevin McCarthy  <kevin@8t8.us>  (2b9c40f13e13)

	* init.c: Fix mutt_envlist_set() for the case that envlist is null.
	(see #3922)

2017-03-18 13:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (37209157e33c)

	* filter.c, init.c, protos.h, system.c: Pass envlist to filter
	children too. (closes #3922)

	The new setenv patch neglected to pass the envlist for filters too.

	Unfortunately, the filter code was already set up to pass COLUMNS to
	children, so it needed to be changed to add this to the envlist
	instead.

	Factor out mutt_envlist_set() from the parse_setenv() function,
	which the filter code can then use to set COLUMNS after forking.

2017-03-18 13:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (f09b8b2454c9)

	* main.c: Fix conststrings type mismatches. (closes #3926)

	The generation programs for conststrings.c: txt2c.c and txt2c.sh,
	specified the resultant types as "unsigned char[]" while main.c
	declared them as "const char[]".

	txt2.c generates 0xXX hex codes for each individual character, thus
	the "unsigned" definition. With link-time optimization, some
	versions of gcc notice the mismatch and emit a warning.

	Change the declarations to match the definitions and cast to char[]
	when they are used.

2017-03-13 18:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (23c00b71f653)

	* mutt_ssl.c: Change OpenSSL to use SHA-256 for cert comparison.
	(closes #3924)

	Note the GnuTLS code compares the certs directly to check if they
	are in the certfile.

2017-03-13 01:38 +0100  Vincent Lefevre  <vincent@vinc17.net>  (00cef7557f38)

	* po/fr.po: Updated French translation.

2017-03-12 10:54 -0700  Dmitri Vereshchagin  <dmitri.vereshchagin@gmail.com>  (fc4beb8e0d56)

	* browser.c: Add shortcuts for IMAP and POP mailboxes in the file
	browser

	Mailbox list may not be properly displayed in a standard 80-column
	terminal window if the $folder variable contains a long URL. In such
	a case only left part of each entry name can be visible with the
	default value of $folder_format. What's worse, this visible part may
	not be enough to distinguish between the entries.

	Thus in this case mutt_pretty_mailbox() will be just as useful as
	for local mailboxes.

2017-03-09 13:38 -0800  Kevin McCarthy  <kevin@8t8.us>  (5f65f3bcc066)

	* mutt_ssl_gnutls.c: Add SNI support for GnuTLS. (closes #3923)

2017-03-09 13:00 -0800  Kevin McCarthy  <kevin@8t8.us>  (9d3d80dd963a)

	* mutt_ssl.c: Add SNI support for OpenSSL. (see #3923)

	The original patch for this is by Phil Pennock at:
	https://people.spodhuis.org/phil.pennock/software/mutt-patches/

	I have removed the OpenSSL version check and
	defined(OPENSSL_NO_TLSEXT) check because:
	  * SSL_set_tlsext_host_name() was added in 0.9.8f [11 Oct 2007]
	  * OpenSSL 1.1 no longer has the OPENSSL_NO_TLSEXT compilation option
	  * https://rt.openssl.org/Ticket/Display.html?id=2788&user=guest&pass=g
	uest shows that the no-tlsext compilation option has been broken for
	some time.
	  * Going forward, I'd like to minimize and start removing cruft
	required to support ancient/insecure versions of libraries.

2017-03-09 11:59 -0800  Kevin McCarthy  <kevin@8t8.us>  (be5d02a8e782)

	* mutt_ssl.c: OpenSSL: Don't offer (a)ccept always choice for hostname
	mismatches. (closes #3914)

	On a hostname mismatch, saving the certificate is pointless because
	mutt will ask the user no matter if the certificate is saved or not.

	The only invocation allowing "accept always" is guarded by a call to
	check_certificate_digest(), which means the check_certificate_file()
	check is redundant. Therefore remove that check and add a comment
	noting why.

	Thanks to Matthias Andree for the original version of this patch.

2017-03-09 10:56 -0800  Kevin McCarthy  <kevin@8t8.us>  (f949694ea461)

	* mutt_ssl.c: Prevent skipped certs from showing a second time. (see
	#3916)

	OpenSSL sometimes passes a skipped certificate to
	ssl_verify_callback() a second time, with preverify_ok=1. From
	OpenSSL's viewpoint there is nothing wrong with this, but mutt will
	end up showing the certificate in the interactive prompt again.

	Cache the last cert and position, and compare with the latest when
	skip_mode and preverify_ok are both set.

2017-03-07 18:26 -0800  Kevin McCarthy  <kevin@8t8.us>  (2a0d3c4a9b0f)

	* mutt_ssl.c: Don't allow storing duplicate certs for OpenSSL
	interactive prompt. (closes #3914)

	Check to make sure the certificate is not already in the
	$certificate_file before offering the (a)ccept always option.

	To allow a cert with a new validity timespan to be added to the
	file, check the expiration dates when comparing certificates in the
	certficate file.

2017-03-07 18:26 -0800  Kevin McCarthy  <kevin@8t8.us>  (4cb6408b5fef)

	* configure.ac, doc/makedoc-defs.h, init.h, mutt.h, mutt_ssl.c: Move
	the OpenSSL partial chain support check inside configure.ac. (see
	#3916)

	Instead of directly checking whether X509_V_FLAG_PARTIAL_CHAIN is
	defined everywhere, do it once inside configure. This will allow
	better support in the future if the test needs to change.

2017-03-07 18:26 -0800  Matthias Andree  <matthias.andree@gmx.de>  (5a04f3797f03)

	* doc/makedoc-defs.h, init.h, mutt.h, mutt_ssl.c: Add
	$ssl_verify_partial_chains option for OpenSSL. (closes #3916)

	The reworked OpenSSL certificate validation took away a "feature" of
	the previous implementation: the ability to reject a node in the
	chain and yet continue to the next node.

	If this new option is set to 'yes', enables OpenSSL's
	X509_V_FLAG_PARTIAL_CHAIN flag to reinstate the functionality and
	permit to use a non-root certificate as the trust anchor.

	This option is only available if OpenSSL offers the
	X509_V_FLAG_PARTIAL_CHAIN macro, which should be the case as of
	1.0.2b or later.

	Code written by Kevin McCarthy and Matthias Andree.

2017-03-05 15:26 -0800  Kevin McCarthy  <kevin@8t8.us>  (daa9111c1f42)

	* merge stable

2017-03-05 15:24 -0800  Kevin McCarthy  <kevin@8t8.us>  (f0e3b2875065)

	* account.h: Increase ACCOUNT.pass field size. (closes #3921)

	#3921 reported his password token used for Google XOAUTH2 is size
	129. The ACCOUNT structure currently uses a size 128 buffer. Who
	knew a password field would ever be bigger than that?

	Since the ACCOUNT structure has no allocation/dellocation routines,
	the easiest fix is to increase the size. Bump the size up to 256.

2017-03-02 15:54 -0800  Kevin McCarthy  <kevin@8t8.us>  (d15de76f7123)

	* merge stable

2017-03-02 15:53 -0800  Matthias Andree  <matthias.andree@gmx.de>  (5fc3c0729a07)

	* mutt_ssl.c: SSL: Fix memory leak in subject alternative name code.
	(closes #3920)

2017-03-02 14:58 -0800  Kevin McCarthy  <kevin@8t8.us>  (9ede6c95d3d5)

	* merge stable

2017-03-02 14:53 -0800  Kevin McCarthy  <kevin@8t8.us>  (e3e47b2f1370)

	* mbox.c: Prevent segv if open-appending to an mbox fails. (closes
	#3918)

	If mbox_open_mailbox_append() fails, ctx->fp will be null. Add a
	check in mbox_close_mailbox(), to prevent a segv from passing null
	to fileno().

2017-03-02 13:17 -0800  Kevin McCarthy  <kevin@8t8.us>  (28d7872d0646)

	* merge stable

2017-03-02 13:11 -0800  Kevin McCarthy  <kevin@8t8.us>  (e82253beaa9f)

	* mutt_ssl.c: Clear out extraneous errors before SSL_connect() (see
	#3916)

	Call ERR_clear_error() just before the call to SSL_connect() to make
	sure the error queue doesn't have any old errors in it.

	PEM_read_X509() sets an error PEM_R_NO_START_LINE on end-of-file.
	Clear that out so it doesn't show up as the SSL_connect() error
	message.

2017-02-24 11:00 -0800  Kevin McCarthy  <kevin@8t8.us>  (f85c3eb8d065)

	* merge default into stable

2017-02-24 10:55 -0800  Kevin McCarthy  <kevin@8t8.us>  (7cc47d82cac4)

	* .hgsigs: mutt-1.8.0 signed

2017-02-24 10:50 -0800  Kevin McCarthy  <kevin@8t8.us>  (1672b430cbc3)

	* .hgtags: Added tag mutt-1-8-rel for changeset d897983752f9

2017-02-24 10:50 -0800  Kevin McCarthy  <kevin@8t8.us>  (d897983752f9)

	* ChangeLog, VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po: automatic post-release commit for mutt-1.8.0

2017-05-23 15:53 -0700  Kevin McCarthy  <kevin@8t8.us>  (fa0c2155ab8f)

	* mx.c: Fix memory leak when closing mailbox and using the sidebar.

	The code updating the sidebar counts decremented the msgcount, but
	did not set it back to the original value. Which means fastclose was
	not freeing all the headers.

	Update the sidebar only when something is deleted, since I don't
	believe it's required otherwise and the code is a bit cleaner that
	way.

2017-05-22 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (59a2125b49f2)

	* imap/imap.c: Don't clean up idata when closing an open-append
	mailbox.

	open-append borrows the idata just for the connection. The "mailbox
	specific" part of the idata may be being used by a normal open-
	mailbox.

	Don't free the idata "mailbox specific" part when closing an open-
	append mailbox.

	Thanks to Will Yardley for discovering the bug as part of testing
	the revised IMAP fetch_headers code (in the default branch).

2017-05-22 05:08 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (1ddf2641f369)

	* mx.c: Fix potential segv if mx_open_mailbox is passed an empty
	string. (closes #3945)

	If path is "", ctx->path will be NULL. realpath() generally will
	segv if the first parameter is NULL.

2017-05-12 09:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (a97afb72d892)

	* imap/imap.c: Turn IMAP_EXPUNGE_EXPECTED back off when syncing.
	(closes #3940).

	imap_sync_mailbox() turned on IMAP_EXPUNGE_EXPECTED when issuing a
	EXPUNGE command during a sync. However, it forgot to turn it back
	off.

	That meant that an unexpected EXPUNGE that occurred during a
	mx_check_mailbox -> imap_check_mailbox() -> imap_cmd_finish() call
	was not setting idata->check_status = IMAP_EXPUNGE_PENDING; and so
	imap_check_mailbox() was not returning MUTT_REOPENED.

	This meant that although the Context had been changed, the index did
	not run update_index(), resulting in a possible segfault.

	Thanks to Uroš Juvan for reporting the issue, and his invaluable
	description of how to reproduce the problem.

2017-05-05 13:55 -0700  Kevin McCarthy  <kevin@8t8.us>  (71cb68efe98e)

	* curs_main.c: Don't modify LastFolder/CurrentFolder upon aborting a
	change folder operation.

	Set LastFolder and CurrentFolder after mx_close_mailbox() has
	successfully completed. Otherwise, if the close is aborted, they
	will have incorrect values.

2017-05-04 18:05 -0700  Kevin McCarthy  <kevin@8t8.us>  (c08c72a0e24c)

	* mx.c: Fix sidebar count updates when closing mailbox. (closes #3938)

	The context unread and flagged counts were being updated too early
	in mx_close_mailbox(). Cancelling at any of the following prompts
	would leave them in an incorrect state. Additionally, $move could
	increase the delete count (for flagged messages), and $delete, if
	answered no, could turn off message deletion.

	Move all the sidebar buffy stat updating to the bottom of the
	function, after all the prompts and processing.

2017-04-30 15:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (829584614fd6)

	* headers.c: Refresh header color when updating label. (closes #3935)

	color index with a '~y' pattern were not being updated after
	adding/removing labels.

2017-04-30 14:24 -0700  Kevin McCarthy  <kevin@8t8.us>  (c54ac874a32b)

	* init.c, init.h: Fix unused function warnings when sidebar is
	disabled. (closes #3936)

	parse_path_list/unlist are currently only used by the
	un/sidebar_whitelist commands. Add an ifdef around them to stop an
	unused function warning. Add a comment too, so it's clear why they
	are ifdef'ed.

2017-04-30 13:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (deb66bd24b9d)

	* doc/manual.xml.head: Note that mbox-hooks are dependent on $move.

	Add a note to the "Using Multiple Spool Mailboxes" section.

2017-04-27 21:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (b8952095b583)

	* curs_lib.c, keymap.c, mutt_curses.h: Fix km_error_key() infinite
	loop and unget buffer pollution.

	'bind pager \Ch help' produces an infinite loop when an unbound key
	is pressed in the pager. The reason is because km_error_key() tries
	to verify that the key sequence is really bound to the OP_HELP
	operation. It does this by using km_expand_key(),
	tokenize_unget_string() on the resulting buffer, then checking if
	the next km_dokey() returns OP_HELP.

	The problem is that km_expand_key() does not always produce a string
	that is properly reparsed by tokenize_unget_string(). Control-h
	sequences are expanded to ^H. tokenize_unget_string() recognizes
	this as two characters '^' and 'H'. km_error_key() checks the OP
	returned, which is OP_PAGER_TOP for the '^'. This is not OP_HELP, so
	it prints a generic error and returns. This leaves the 'H' in the
	input buffer! Since 'H' (by default) is unbound in the pager, it
	retriggers km_error_key(), resulting in an infinite loop.

	The same issues can occur without control sequences: bind generic ?
	noop bind generic dq help In the index, hitting an unbound key will
	end up leaving 'q' in the unget buffer, because 'd' is bound in the
	index menu and will be read by km_dokey().

	A simple approach to fix this would be to just use the same code as
	in mutt_make_help(), which has no double-check. This would be no
	worse than the help menu, but can generate an inaccurate error
	message (e.g if '?' were bound to noop)

	This patch instead uses OP_END_COND as a barrier in the unget
	buffer. It directly inserts the keys in the OP_HELP keymap, instead
	of using km_expand_key() + tokenize_unget_string(). After calling
	km_dokey() it flushes the unget buffer to the OP_END_COND barrier.

	Thanks to Walter Alejandro Iglesias for reporting the bug.

2017-04-26 15:40 -0700  Roger Cornelius  <rac@tenzing.org>  (9a0afe7815d1)

	* mx.c: Fix error message when opening a mailbox with no read
	permission. (closes #3934)

	ctx->mx_ops ends up being NULL for both the case that ctx->magic is
	0 and -1. This meant the mutt_perror() error message was never being
	printed, because the check for ctx->mx_ops == NULL was taking place
	first.

	Move the "ctx->magic == -1" check first, so mutt will print out an
	appropriate perror message in that case.

2017-04-18 16:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (2c57a7b4dc0b)

	* .hgsigs: mutt-1.8.2 signed

2017-04-18 16:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (455a698f274b)

	* .hgtags: Added tag mutt-1-8-2-rel for changeset c6ea4aed6bec

2017-04-18 16:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (c6ea4aed6bec)

	* ChangeLog, UPDATING, VERSION: automatic post-release commit for
	mutt-1.8.2

2017-04-18 12:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (33995363e723)

	* filter.c, init.c, pgp.c, protos.h: Fix GPG_TTY to be added to
	envlist. (closes #3931)

	Changeset 37209157e33c converted filters to use the envlist.
	Unfortunately, I missed that pgp.c sets GPG_TTY when using the GnuPG
	agent. Convert to add GPG_TTY to the envlist too.

2017-04-12 17:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (feccc2ac1b9a)

	* .hgsigs: mutt-1.8.1 signed

2017-04-12 17:44 -0700  Kevin McCarthy  <kevin@8t8.us>  (491f7cfa03d9)

	* .hgtags: Added tag mutt-1-8-1-rel for changeset f44974c10990

2017-04-12 17:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (f44974c10990)

	* ChangeLog, UPDATING, VERSION: automatic post-release commit for
	mutt-1.8.1

2017-04-11 12:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (b825cbcaf6b5)

	* compose.c: Fix memleak when attaching files.

2017-04-08 14:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (a8b1017a4cc1)

	* imap/message.c: Silence imap progress messages for pipe-message.
	(see #3929)

	_mutt_pipe_message() calls endwin(), and then calls pipe_msg(). If
	an imap message body hasn't already been downloaded, this can end up
	calling imap_fetch_message().

	The progress messages in imap_fetch_message() were restoring curses,
	just after extract_url was running. This was leading to a condition
	where mutt curses didn't think the screen had changed after
	extract_url exited.

	There was already a check for isendwin() inside
	imap_fetch_message(), but it wasn't wrapped around the progressbar
	creation/usage. Add a check for those places too.

2017-03-27 11:39 -0700  Kevin McCarthy  <kevin@8t8.us>  (77032036c642)

	* init.c, init.h: Fix (un)sidebar_whitelist to expand paths.

	Thanks to Arturo for reporting the issue.

2017-03-26 12:27 -0700  Kevin McCarthy  <kevin@8t8.us>  (9da67ea88f25)

	* curs_lib.c: Fix mutt_refresh() pausing during macro events.

	Changeset a07e8215a0ef split input buffering into two pools.
	Unfortunately, the mutt_refresh() was not changed to check the
	correct buffer count, resulting in unnecessary refreshes during
	macros.

	The SSL interactive certificate prompts set OPTIGNOREMACROEVENTS and
	then put up a confirmation menu. Perhaps we've just been lucky, but
	it seems we should refresh the screen in those cases if we're in the
	middle of a macro. Add a check for this option in mutt_refresh()
	too.

2017-03-20 10:16 -0700  Kevin McCarthy  <kevin@8t8.us>  (7cefa378ab7e)

	* init.c: Fix setenv overwriting to not truncate the envlist. (see
	#3922)

	The refactor in 2b9c40f13e13 exposed a bug I hadn't noticed. The
	match loop performed a FREE() on the slot. Then, below, it was
	checking if (*envp) to see whether it was overwriting or creating a
	new slot. However, FREE() nulls out *envp. This would end up
	truncating the envlist just after the set slot!

	Move the free down, using a mutt_str_replace(), when overwriting the
	slot.

2017-03-18 14:39 -0700  Kevin McCarthy  <kevin@8t8.us>  (2b9c40f13e13)

	* init.c: Fix mutt_envlist_set() for the case that envlist is null.
	(see #3922)

2017-03-18 13:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (37209157e33c)

	* filter.c, init.c, protos.h, system.c: Pass envlist to filter
	children too. (closes #3922)

	The new setenv patch neglected to pass the envlist for filters too.

	Unfortunately, the filter code was already set up to pass COLUMNS to
	children, so it needed to be changed to add this to the envlist
	instead.

	Factor out mutt_envlist_set() from the parse_setenv() function,
	which the filter code can then use to set COLUMNS after forking.

2017-03-05 15:24 -0800  Kevin McCarthy  <kevin@8t8.us>  (f0e3b2875065)

	* account.h: Increase ACCOUNT.pass field size. (closes #3921)

	#3921 reported his password token used for Google XOAUTH2 is size
	129. The ACCOUNT structure currently uses a size 128 buffer. Who
	knew a password field would ever be bigger than that?

	Since the ACCOUNT structure has no allocation/dellocation routines,
	the easiest fix is to increase the size. Bump the size up to 256.

2017-03-02 15:53 -0800  Matthias Andree  <matthias.andree@gmx.de>  (5fc3c0729a07)

	* mutt_ssl.c: SSL: Fix memory leak in subject alternative name code.
	(closes #3920)

2017-03-02 14:53 -0800  Kevin McCarthy  <kevin@8t8.us>  (e3e47b2f1370)

	* mbox.c: Prevent segv if open-appending to an mbox fails. (closes
	#3918)

	If mbox_open_mailbox_append() fails, ctx->fp will be null. Add a
	check in mbox_close_mailbox(), to prevent a segv from passing null
	to fileno().

2017-03-02 13:11 -0800  Kevin McCarthy  <kevin@8t8.us>  (e82253beaa9f)

	* mutt_ssl.c: Clear out extraneous errors before SSL_connect() (see
	#3916)

	Call ERR_clear_error() just before the call to SSL_connect() to make
	sure the error queue doesn't have any old errors in it.

	PEM_read_X509() sets an error PEM_R_NO_START_LINE on end-of-file.
	Clear that out so it doesn't show up as the SSL_connect() error
	message.

2017-02-24 11:00 -0800  Kevin McCarthy  <kevin@8t8.us>  (f85c3eb8d065)

	* merge default into stable

2017-02-24 10:55 -0800  Kevin McCarthy  <kevin@8t8.us>  (7cc47d82cac4)

	* .hgsigs: mutt-1.8.0 signed

2017-02-24 10:50 -0800  Kevin McCarthy  <kevin@8t8.us>  (1672b430cbc3)

	* .hgtags: Added tag mutt-1-8-rel for changeset d897983752f9

2017-02-24 10:50 -0800  Kevin McCarthy  <kevin@8t8.us>  (d897983752f9)

	* ChangeLog, VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po: automatic post-release commit for mutt-1.8.0

2017-02-23 08:56 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (43e312cee971)

	* po/ja.po: Updated Japanese translation.

2017-02-22 15:58 -0800  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (3e1d26df748e)

	* po/nl.po: Updated Dutch translation.

2017-02-22 12:58 -0800  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (4b445c73fc77)

	* po/eo.po: Updated Esperanto translation.

2017-02-22 12:50 -0800  Kevin McCarthy  <kevin@8t8.us>  (5b68a3022b82)

	* UPDATING, doc/manual.xml.head, init.h: Minor touchups to
	documentation and UPDATING file.

2017-02-19 18:51 -0800  Kevin McCarthy  <kevin@8t8.us>  (715c276641c6)

	* doc/manual.xml.head: Mention $XDG_CONFIG_HOME/mutt/ in the manual.

2017-02-19 18:30 -0800  Kevin McCarthy  <kevin@8t8.us>  (1575671b3c60)

	* UPDATING: Reword some of the UPDATING entries.

	Thanks to Matthias Andree for his feedback and suggestions!

2017-02-18 15:15 -0800  Kevin McCarthy  <kevin@8t8.us>  (e4a5d1913e42)

	* UPDATING: Add 1.8.0 entries to the UPDATING file.

2017-02-18 21:30 +0000  Athanasios Douitsis  <aduitsis@gmail.com>  (943b281abfbb)

	* getdomain.c: Prevent null pointer exception for h->ai_canonname

	The getaddrinfo call in line 54 sets &h to a struct addrinfo. If a
	canonical name cannot be found for the node argument of getaddrinfo,
	h->ai_canonname is set to NULL. In that case, the strchr call in
	line 58 can lead to segfault. This behavior was observed on a macos
	sierra while the hostname was 192.168.1.3 (unfortunately this
	happens quite often in macos).

	The fix is simple, just check h->ai_canonname for the NULL value.

2017-02-17 20:02 -0800  Ivan Vilata i Balaguer  <ivan@selidor.net>  (9b7780b48f47)

	* po/ca.po: Updated Catalan translation.

2017-02-16 12:44 -0800  Vsevolod Volkov  <vvv@mutt.org.ua>  (27ee126fb9c5)

	* po/ru.po: Updated Russian translation.

2017-02-16 12:41 -0800  Vsevolod Volkov  <vvv@mutt.org.ua>  (ed569b004aef)

	* po/uk.po: Updated Ukrainian translation.

2017-02-16 11:22 -0800  Morten Bo Johansen  <mjb@spamcop.net>  (20eccc63e008)

	* po/da.po: Updated Danish translation.

2017-02-13 12:26 -0800  Petr Pisar  <petr.pisar@atlas.cz>  (519a8c8cc55c)

	* po/cs.po: Updated Czech translation.

2017-02-12 13:03 -0800  Matthias Andree  <matthias.andree@gmx.de>  (cec61c6926ea)

	* mutt_ssl.c: Show SHA1 fp in interactive cert check menu.

	While here, fix a few compiler warnings about sign mismatch in
	comparison.

2017-02-12 12:24 -0800  Kevin McCarthy  <kevin@8t8.us>  (2350d7d61b34)

	* mutt_ssl.c: Fix potential cert memory leak in
	check_certificate_by_digest().

	Thanks to Matthias Andree's debugging, it appears the cert is not
	freed when PEM_read_X509() encounters EOF. Change the return value
	check to not overwrite cert. It is already updated via the second
	parameter.

2017-02-12 09:59 -0800  Matthias Andree  <matthias.andree@gmx.de>  (48a1f145c269)

	* mutt_ssl.c: Plug memory leak in weed-expired-certs code.

	X509_STORE_add_cert() creates a copy of the certificate we're
	offering, so we need to free our copy afterwards. This isn't
	documented, but from observed behaviour in OpenSSL 1.0.2 and its
	master branch source code.

	Change PEM_read_X509() call to reuse cert to avoid free/reallocation
	overhead.

2017-02-12 09:59 -0800  Kevin McCarthy  <kevin@8t8.us>  (2632bc4f5b20)

	* mutt_ssl.c: Filter expired local certs for OpenSSL verification.

	OpenSSL has trouble establishing the chain and verifying when
	duplicate expired certs are loaded in from $certificate_file. A
	warning about this is mentioned in
	SSL_CTX_load_verify_locations(3SSL).

	Filter out expired certs when loading verify certs. Note that the
	full certicates file is still used for verification in
	check_certificate_by_digest().

2017-02-10 13:01 -0800  Kevin McCarthy  <kevin@8t8.us>  (7c97a8af8718)

	* alias.c, group.c, hash.c, hash.h, headers.c, imap/message.c, init.c,
	mh.c, mx.c, pop.c, thread.c: Change "allow_dups" into a flag at hash
	creation.

	Instead of having an "allow_dups" parameter for hash_insert(), add a
	flag, MUTT_HASH_ALLOW_DUPS, to hash_create().

	Currently ReverseAlias, subj_hash, and thread_hash allow duplicate
	keys. Change those hashes to pass the flag at creation, and remove
	the last parameter from all callers of hash_insert().

2017-02-10 12:56 -0800  Petr Pisar  <petr.pisar@atlas.cz>  (e2b186a92390)

	* po/cs.po: Updated Czech translation.

2017-02-10 12:51 +0100  Vincent Lefevre  <vincent@vinc17.net>  (a4449ebfb5f4)

	* po/fr.po: Updated French translation.

2017-02-08 07:48 -0800  Kevin McCarthy  <kevin@8t8.us>  (d215a36fd8ee)

	* hcache.c: Fix build for bdb.

	Changeset fca7e504ab6a removed #else/#endif around two blocks of
	code that won't compile with bdb enabled. Restore those directives.

	Thanks to Richard Russon for pointing out the problem and saving me
	from having egg all over my face with the 1.8 release!

2017-02-07 19:36 -0800  Kevin McCarthy  <kevin@8t8.us>  (09bb4a62ceb1)

	* hcache.c, hcache.h, imap/imap.c, imap/message.c, imap/util.c, mh.c,
	pop.c: Create function to free header cache data.

	Kyoto Cabinet documents that data from it should be freed via
	kcfree().

	LMDB claims ownership of the data returned, so convert its free
	operation to be a noop and remove the malloc from its fetch
	function.

2017-02-07 19:36 -0800  Kevin McCarthy  <kevin@8t8.us>  (52481ceb6c6e)

	* configure.ac, doc/manual.xml.head, hcache.c, init.h, mutt.h: Add
	Kyoto Cabinet support to the header cache.

	Retain the defaults as they are, although we might switch to Kyoto
	Cabinet for the next major release.

2017-02-04 12:53 -0800  Kevin McCarthy  <kevin@8t8.us>  (fca7e504ab6a)

	* hcache.c: Fixes to the LMDB header cache. (closes #3691)

	Use mdb_txn_abort() to free up readonly/reset transactions, and
	avoid leaking memory.

	Fix hcache_delete() key generation - looks like this was an
	incorrect copy/paste from the bdb code.

	Use dprint, not fprintf, for debugging messages.

	Remove strange blending of enum and bitfield logic for the txn_mode
	state.

	Remove some duplicate code from store/fetch raw.

2017-02-04 12:53 -0800  Kevin McCarthy  <kevin@8t8.us>  (42aa8b19da95)

	* configure.ac, hcache.c: Add LMDB backend support for header cache.
	(see #3691)

	Based on the original from JP Mens:
	https://gist.github.com/jpmens/15969d9d678a3d450e4e

	The following performance patch was manually applied on top of the
	original patch: https://github.com/neomutt/neomutt/commit/7e5380cd4c
	40d119ff83b2cf5f51f2cdb8a95ab3

	A variant of this patch was added to handle larger mailboxes: https:
	//github.com/neomutt/neomutt/commit/6d337642e701b1dde4b5d0812e01c85f
	41ba65ca

	Thanks to all the developers and contributors to this patch, and to
	Fabian Groffen for bundling and posting this to mutt-dev.

2017-01-31 15:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (142a87f0c855)

	* enter.c: Minor fix to ~y completion.

	Make sure the entire ~y is before curpos when enabling completion.

2017-01-31 14:27 -0800  Kevin McCarthy  <kevin@8t8.us>  (82034c72b6da)

	* enter.c, init.c, protos.h: Simplify mutt_label_complete().

	It was derived from mutt_command_complete(), which had more complex
	requirements. For labels, we just need to skip whitespace and
	complete based on the passed in buffer.

	Therefore, we don't need the pos parameter, or to work backwards
	from the end of the buffer.

2017-01-31 14:27 -0800  Kevin McCarthy  <kevin@8t8.us>  (298654f1d70c)

	* enter.c: Permit tab completion of pattern expressions with ~y
	(labels).

	Thanks to David Champion for the original patch. This version is
	slightly different, as I couldn't get the original patch working.
	This version simply scans backward for the first ~, and if it is ~y,
	invokes completion.

2017-01-31 14:27 -0800  Kevin McCarthy  <kevin@8t8.us>  (9ca99f2b1205)

	* enter.c: Fix the mutt_label_complete() pos parameter.

	i is the state->wbuf index, not the end of the buf. It was "working"
	only because the contents of buf past the null were not "space" most
	of the time.

2017-01-29 11:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (ab2f8882633b)

	* copy.c: Fix the x-label update code check location.

	The x-label comparison was outside the "beginning of header" block.

	This meant that it could theoretically match a continuation line.
	Additionally, the continuation lines of x-labels would not be
	stripped, because the comparison was after the ignore variable was
	reset.

	Move the comparison inside the block and before the ignore reset.

2017-01-28 18:48 -0800  Kevin McCarthy  <kevin@8t8.us>  (d0909785d945)

	* curs_main.c, globals.h, headers.c, init.c, main.c, mbox.c, mutt.h,
	mx.c, pop.c, protos.h: Improve the label completion hash table
	usage.

	Move the hash table inside the Context. Hook message
	arrival/deletion to update the label hash.

	Change the label hash to strdup keys.

	Use hash_find_elem when updating the counter, to reduce unnecessary
	add/delete operations.

2017-01-28 18:47 -0800  David Champion  <dgc@bikeshed.us>  (66cc205ea76a)

	* curs_main.c, doc/manual.xml.head, enter.c, globals.h, headers.c,
	init.c, main.c, mutt.h, protos.h: Adds label completion.

	A global label hash is added, to which labels are added as they're
	parsed from a mailbox file or edited manually by the user. Reference
	counts are kept in the hash table so that unused labels are removed
	from available completions. Completion is available in the label
	editor only, but it may be feasible to add for search expressions if
	the preceding text ends with '~y'.

2017-01-28 18:47 -0800  Kevin McCarthy  <kevin@8t8.us>  (51c5e574a082)

	* hash.c, hash.h: Add hash_find_elem to get the hash element.

	This will be used in the following patch for directly manipulating
	the label counter.

2017-01-28 18:47 -0800  David Champion  <dgc@bikeshed.us>  (169b67b5b666)

	* hash.c, hash.h: Add reentrant hash_walk() function for iterating
	down a hash table.

2017-01-28 18:47 -0800  Kevin McCarthy  <kevin@8t8.us>  (95b892b3f856)

	* commands.c, copy.c, curs_main.c, functions.h, headers.c, pager.c:
	Minor fixes to the x-label patch from David.

	Add L10N comment to sort menu. Mark a couple strings for
	localization.

	Use ascii_strncasecmp() for the X-Label header comparison.

	Simplify label_message() using mutt library routines.

	Bind label editing to "Y" instead of "y". "y" is already used in the
	default sample muttrc to display mailboxes.

2017-01-28 18:47 -0800  David Champion  <dgc@bikeshed.us>  (67525605640e)

	* OPS, commands.c, copy.c, copy.h, curs_main.c, doc/manual.xml.head,
	functions.h, headers.c, imap/imap.c, init.h, mh.c, mutt.h, pager.c,
	protos.h, sort.c, sort.h: Adds capability to edit x-labels inside
	mutt, and to sort by label.

2017-01-24 15:33 -0800  Kevin McCarthy  <kevin@8t8.us>  (e4ad1dc9bfbd)

	* doc/manual.xml.head, init.c: Allow "unsubjectrc *" to remove all
	patterns.

	Thanks to Aaron Schrab for the original patch.

2017-01-23 19:01 -0800  David Champion  <dgc@bikeshed.us>  (9e876d64d3c8)

	* doc/manual.xml.head, globals.h, hdrline.c, init.c, init.h, mutt.h,
	muttlib.c: Add subjectrx command to replace matching subjects with
	something else.

	This lets you define regular expressions-replacement pairs for
	subject display. When a Subject: matches the regular expression, the
	replacement value will be displayed instead in the message index.
	Backreferences are supported.

	This is especially nice for simplifying subjects that are overly
	wordy, such as mailing list posts (with [Listname] tags, etc), mail
	from ticketing systems or bug trackers, etc. It lets you reduce
	clutter in your mutt display without altering the messages
	themselves.

2017-01-23 19:01 -0800  David Champion  <dgc@bikeshed.us>  (f05df6b258f3)

	* globals.h, hcache.c, init.c, mutt.h, muttlib.c, protos.h: Abstract
	the SPAM_LIST as a generic REPLACE_LIST

	REPLACE_LIST can be used more generally as a list of pattern match-
	replace settings. SPAM_LIST was a special case of this, so spam
	handling has been been changed to use REPLACE_LIST instead, and
	SPAM_LIST was removed.

	A generic function for performing a REPLACE_LIST replacement has
	been added in mutt_apply_replace().

	Commited by Kevin McCarthy with some buffer overflow fixes in
	mutt_apply_replace().

2017-01-23 18:46 -0800  Kevin McCarthy  <kevin@8t8.us>  (7a8ea1bb09f0)

	* send.c: Improve Reply-to vs From comparison when replying. (closes
	#3909)

	Prior to this patch, if the Reply-to mailbox matched the From
	mailbox, mutt would always use the From address. This was probably
	done to preserve the display name, as the Reply-to address is often
	missing one.

	Unfortunately, there are circumstances where the Reply-to display-
	name has significance, such as in ticket 3909.

	Change mutt so that it only uses the From address if the Reply-To
	has no display-name.

2017-01-19 14:58 -0800  Kevin McCarthy  <kevin@8t8.us>  (b57c695b7923)

	* doc/manual.xml.head, init.h, sidebar.c, sort.h: Fix sidebar
	references to the "new count" to be "unread". (closes #3908)

	%N in $sidebar_format and "new"in $sidebar_sort_method actually use
	the unread message count. Update the documentation to mention that.

	Add an "unread" method to $sidebar_sort_method, but preserve "new"
	for compatibility.

	Change the SORT_COUNT_NEW constant to SORT_UNREAD, so the code is
	also consistent with the meaning.

	Thanks to cri for reporting the problem and suggesting where to fix
	it in the code.

2017-01-17 16:09 -0800  Kevin McCarthy  <kevin@8t8.us>  (a555ada578b8)

	* addrbook.c, alias.c, init.c: Fix several alias hashtable issues.

	Convert to use the strdup keys hash. Addresses can be converted back
	and forth from intl to local forms. This frees and recreates a new
	addr->mailbox string, resulting in the hash table key being a
	dangling pointer.

	Change alias hash table insert/remove to ensure the address is in
	intl form. The alias menu (previously) converted address entries to
	local form when performing a completion. Even with the pointer issue
	fixed, the entries may not be removed from the hash if the intl and
	local forms are different.

	Lastly, there is no reason for the alias menu to manually convert to
	local form before writing the address to the output buffer.
	rfc822_write_address() has a display parameter that will call
	mutt_addr_for_display() instead when set. Change to set the display
	parameter and remove the conversion calls.

	This last change obviates the first two changes, but they are a good
	idea in any case.

2017-01-17 16:09 -0800  Kevin McCarthy  <kevin@8t8.us>  (fc6990144167)

	* hash.c, hash.h, init.c: Add casecmp and strdup_key flags to
	hash_create()

	Aliases and (in the future), X-Label hashes will require a hash that
	strdups the key. Convert the casecmp parameter of hash_create() to a
	flags parameter, and add a flag to strdup the keys.

2017-01-15 10:00 -0800  Kevin McCarthy  <kevin@8t8.us>  (ac1a2af3aff4)

	* mx.c: Improve error handling in mbox magic detection.

	Thanks to Simon Ruderich for pointing out several small issues with
	the previous commit.

2017-01-14 19:18 -0800  David Champion  <dgc@bikeshed.us>  (945a3f4b15c7)

	* mx.c: Allow initial blank lines in local mailboxes.

	Some mailbox-creation tools erroneously append a blank line to a
	file before appending a UNIXv7-format mail message, resulting in
	mailboxes that are intended to be valid "mbox" folders but are not.
	Notably old versions of Mailman do this, making archive files that
	cannot be read by mutt.

	This patch causes mutt to skip leading NLs and CRs when detecting
	magic.

2017-01-10 14:48 -0800  Simon Ruderich  <simon@ruderich.org>  (79306170e367)

	* doc/manual.xml.head, doc/muttrc.man.head: Fix minor documentation
	issues.

	manual.xml: Wrap line for clarity.

	muttrc.man: Remove superfluous spaces in brackets. Add missing error
	object in color command. Sort the prompt object. Add sidebar color
	objects.

2017-01-06 14:37 -0800  Kevin McCarthy  <kevin@8t8.us>  (7c0e7a0769e4)

	* imap/command.c: Convert cmd_parse_search to use the uid hash.
	(closes #3905)

	Replace the linear scan for each result with a hash lookup. This
	should greatly improve performance for large mailboxes.

2017-01-06 14:23 -0800  Kevin McCarthy  <kevin@8t8.us>  (1ad1013cbf5b)

	* imap/imap.c, imap/imap_private.h, imap/message.c: Create a uid hash
	for imap. (see #3905)

	This hash will allow for more efficient UID SEARCH processing,
	replacing a linear scan with a hash lookup.

2017-01-06 14:17 -0800  Kevin McCarthy  <kevin@8t8.us>  (ebb93147aec7)

	* hash.c, hash.h, thread.c: Convert HASH to be indexable by unsigned
	int. (see #3905)

	Convert the HASH to be usable for either string or unsigned int
	keys, so that a uid hash can be added for imap.

	To keep hash-usage code disruption to a minimum, this introduces new
	create/insert/find/delete functions for the int hash, but keeps the
	old function names for string keys.

	This implementation makes the key a union. It may have been a better
	idea to introduce a whole new structure, but this way allows minimum
	changes to and maximum reuse of the existing hash code.

2017-01-04 19:45 -0800  Kevin McCarthy  <kevin@8t8.us>  (4f0a84b954ef)

	* imap/command.c: Fix imap server-side search to call uid2msgno() only
	once. (see #3905)

	After performing a UID SEARCH, the results are parsed in
	cmd_parse_search(). This was accidentally calling uid2msgno() twice.
	Since that function does a linear search, this has a noticable
	impact on large search results.

2017-01-02 18:08 -0800  Kevin McCarthy  <kevin@8t8.us>  (23b02a482bde)

	* curs_main.c, hook.c, mutt.h, pattern.c, protos.h, score.c: Add a
	pattern_cache_t to speed up a few repeated matches.

	Vincent Lefèvre reported experiencing an index display performance
	issue. This occurred with messages containing many recipients. He
	had many index color lines containing ~l. The ~l ended up being run
	over and over on these messages, resulting in a noticable slowdown
	displaying the index.

	This patch adds caching for just a few of the pattern operations
	(~l, ~u, ~p, ~P) that are potentially expensive and also don't have
	arguments. The caching is only enabled for operations repeatedly
	matching against the same message: color, hooks, scoring.

	The caching is fairly targeted, but isn't that invasive or
	complicated.

2016-12-31 19:57 -0800  Kevin McCarthy  <kevin@8t8.us>  (2bc2ec9ac664)

	* crypt-gpgme.c: Canonicalize line endings for GPGME S/MIME
	encryption. (closes #3904)

	This matches the behavior for S/MIME classic mode: OpenSSL converts
	the line endings to cr/lf before encrypting. Although Mutt always
	canonicalizes the line endings before verifying the signature, some
	clients do not do this for encrypted messages.

	Thanks to cooler for the patch!

2016-12-27 15:23 -0800  Kevin McCarthy  <kevin@8t8.us>  (4cb0cd767af2)

	* globals.h, hdrline.c, init.h, status.c: Make to_chars and
	status_chars accept mulitibyte characters. (closes #3024)

	Change Tochars and StChars to use the mbchars_table type introduced
	in the last commit.

2016-12-27 15:23 -0800  Kevin McCarthy  <kevin@8t8.us>  (1d054932abfb)

	* doc/makedoc.c, init.c, init.h, mutt.h: Create mbchar_table type for
	multibyte character arrays. (see #3024)

	This type is to allow multibyte characters in to_chars and
	status_chars while preserving efficient indexing to each character.

	The arrays are tokenized during initialization, and are re-tokenized
	as the values are unset, reset, and set.

2016-12-25 23:31 +0100  Vincent Lefevre  <vincent@vinc17.net>  (1303567a6ad1)

	* doc/manual.xml.head: In the manual, replaced 2 para by example
	(similar to the first example).

2016-12-13 12:19 -0800  David Champion  <dgc@bikeshed.us>  (b112fd7061fb)

	* curs_main.c, init.h, mutt.h: Add option to control whether threads
	uncollapse when new mail arrives.

	Adds $uncollapse_new: when set, the default, a collapsed thread into
	which a new message arrives will be uncollapsed to reveal the new
	message.

2016-12-13 12:02 -0800  Richard Russon  <rich@flatcap.org>  (1f04f9145eb1)

	* OPS: Remove unused OPS

	OP_MAIN_FIRST_MESSAGE and OP_MAIN_LAST_MESSAGE were added to the
	code 19 years ago. They weren't used then; they haven't been used
	since.

2016-12-13 11:16 -0800  Michał Kępień  <mutt@kempniu.pl>  (b985c324932b)

	* mutt_ssl.c: Rework OpenSSL certificate verification to support
	alternative chains. (closes #3903)

	The way Mutt currently verifies SSL certificates using OpenSSL does
	not support alternative chains, which may cause confusion when some
	popular mail providers (e.g. Gmail) are used with specific sets of
	trusted CA certificates.

	Replace the "manual" verification done by mutt in
	check_certificate_by_signer() with SSL_set_verify() using a
	callback. OpenSSL then does the certificate verification, including
	properly looking at alternative chains. The callback still provides
	the opportunity to override using ~/.mutt_certificates or an
	interactive prompt.

2016-12-11 18:56 -0800  David Champion  <dgc@bikeshed.us>  (8a23708d978b)

	* doc/manual.xml.head, init.c, init.h, main.c, system.c: Add
	setenv/unsetenv commands.

	These can be used to add and remove environment variables passed to
	children via mutt_system().

	Commited by Kevin McCarthy with some cleanup.

2016-12-06 19:07 -0800  Kevin McCarthy  <kevin@8t8.us>  (df1d1e379477)

	* doc/manual.xml.head: Move '@' pattern modifier documentation to the
	right section.

	Somehow, the patch got out of date and the documentation shifted to
	another section. Relocate back to the "Pattern Modifier" section.

2016-12-04 16:04 -0800  Kevin McCarthy  <kevin@8t8.us>  (d930e39ec095)

	* merge stable

2016-12-04 16:03 -0800  Kevin McCarthy  <kevin@8t8.us>  (b9d34372a940)

	* .hgsigs: mutt-1.7.2 signed

2016-12-04 16:01 -0800  Kevin McCarthy  <kevin@8t8.us>  (954f9049e4b3)

	* .hgtags: Added tag mutt-1-7-2-rel for changeset 99f5624d1f52

2016-12-04 16:01 -0800  Kevin McCarthy  <kevin@8t8.us>  (99f5624d1f52)

	* ChangeLog, UPDATING, VERSION: automatic post-release commit for
	mutt-1.7.2

2016-12-04 15:41 -0800  Kevin McCarthy  <kevin@8t8.us>  (a17189b58284)

	* crypt-gpgme.c, mutt_ssl.c: merge stable

2016-11-26 00:57 +0100  Vincent Lefevre  <vincent@vinc17.net>  (a0a970530a8b)

	* crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-gpgme.c: Fix build
	failure with GPGME 1.8: do not steal the gpgme_ prefix.

2016-11-19 19:35 -0800  Kevin McCarthy  <kevin@8t8.us>  (10c4761cea89)

	* mutt_ssl.c: More openssl1.1 fixes: remove uses of X509->name in
	debugging. (closes #3870)

	X509->name was a shortcut for the longer name = X509_NAME_oneline
	(X509_get_subject_name (cert), buf, sizeof (buf)); invocation.
	Change the debugging to print the cert name and chain names in the
	ssl_check_certificate() loop instead.

2016-09-07 20:00 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (2c1d79d3edd5)

	* configure.ac, mutt_ssl.c: Fix openssl 1.1 compilation issues.
	(closes #3870)

	With these changes, Mutt will no longer compile for versions less
	than 0.9.6.

2016-12-03 15:24 -0800  Kevin McCarthy  <kevin@8t8.us>  (d6c10244793f)

	* sidebar.c: Change sidebar_spoolfile coloring to be lower precedence.

	Give sidebar_new and sidebar_flagged higher precedence than
	sidebar_spoolfile, so that new and flagged message colors will show
	up for the spoolfile in the sidebar.

	Thanks to Till Smejkal for the original patch.

2016-11-29 17:48 -0800  Kevin McCarthy  <kevin@8t8.us>  (d72caeecf4af)

	* curs_main.c: Return to pager upon aborting a jump operation. (closes
	#3901)

2016-11-29 17:44 -0800  Kevin McCarthy  <kevin@8t8.us>  (1196c859942e)

	* lib.h, mutt_ssl.c: Add mutt_array_size macro, change
	interactive_check_cert() to use it. (see #3899)

	While I have reservations about the construct, it does make the
	interactive_check_cert() menu->max and part loop less fragile.

2016-11-29 17:44 -0800  Kevin McCarthy  <kevin@8t8.us>  (1a2dc7b21b5b)

	* mutt_ssl.c: Improve openssl interactive_check_cert. (closes #3899)

	Don't use X509_NAME_oneline() with a fixed size buffer, which could
	truncate the string, perhaps leaving off the CN field entirely.
	Instead, work directly off the X509_NAME.

	Rather than use strstr to tokenize it, call
	X509_NAME_get_text_by_NID() with the nid types. Although
	X509_NAME_get_text_by_NID() is "legacy", it is the most directly
	useful for mutt in this simple interactive prompt.

	The function was set up to include the ST and C fields in the
	prompt, but the loop limit was too low. I believe this was an
	oversight, so increase the loop to include those two fields.

2016-11-26 00:57 +0100  Vincent Lefevre  <vincent@vinc17.net>  (84ad86e8b8ab)

	* crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-gpgme.c: Fix build
	failure with GPGME 1.8: do not steal the gpgme_ prefix.

2016-11-22 03:48 +0100  Vincent Lefevre  <vincent@vinc17.net>  (b22c5d0e299d)

	* mutt_ssl.c: Corrected comment.

2016-11-21 18:03 -0800  Kevin McCarthy  <kevin@8t8.us>  (65f180f2904f)

	* mutt_ssl.c: Revert db13010a2e8d but add a comment. (see #3870)

	X509_NAME_oneline() always NULL-terminates the string, even when it
	has to truncate the data to fit in buf.

2016-11-21 23:10 +0100  Vincent Lefevre  <vincent@vinc17.net>  (db13010a2e8d)

	* mutt_ssl.c: Make sure that the output of X509_NAME_oneline is null-
	terminated.

2016-11-20 16:19 -0800  Kevin McCarthy  <kevin@8t8.us>  (c770d2fa615b)

	* mutt_tunnel.c: Minor resource and error logic cleanup in
	tunnel_socket_open()

	Free the conn->sockdata on failure. conn->fd is not set until the
	bottom, and before it is set, conn->conn_close() will not be called.

	Close the pin pipe if the pout pipe fails.

	Call mutt_perror first on a fork failure. Calling after the close()
	may cause errno to be changed on a close failure.

2016-11-20 16:19 -0800  Kevin McCarthy  <kevin@8t8.us>  (b319ec2dc93a)

	* mutt_tunnel.c: Don't close stderr when opening a tunnel. (closes
	#3726)

	Instead of closing stderr, redirect it to /dev/null in
	tunnel_socket_open(). Otherwise a program can accidentally open a
	file into handle 2 and then unknowingly use that when trying to
	print to stderr.

	Thanks to lotheac for the original patch, which I just modified
	slightly.

2016-11-19 19:35 -0800  Kevin McCarthy  <kevin@8t8.us>  (695243ba6374)

	* mutt_ssl.c: More openssl1.1 fixes: remove uses of X509->name in
	debugging. (closes #3870)

	X509->name was a shortcut for the longer name = X509_NAME_oneline
	(X509_get_subject_name (cert), buf, sizeof (buf)); invocation.
	Change the debugging to print the cert name and chain names in the
	ssl_check_certificate() loop instead.

2016-11-20 01:41 +0100  Vincent Lefevre  <vincent@vinc17.net>  (d14ffd58d976)

	* po/fr.po: Updated French translation.

2016-11-18 15:54 -0800  Kevin McCarthy  <kevin@8t8.us>  (4bed0172c27b)

	* OPS, curs_main.c, functions.h: Fix mark-message translation and
	keybind menu.

	Move the OP_MARK_MESSAGE and hotkey macro from MENU_GENERIC to the
	MENU_MAIN keymap. Putting the macro under generic prevents it from
	overriding a keybinding in the index (even if the function is bound
	to noop). Additionally, the macro can only be executed from the
	index, so it doesn't make sense as a generic keybinding.

	Use the term "hotkey" in both the OPS and km_bind description.

	Mark the km_bind description translatable.

	Add L10N messages for the new translation strings.

2016-11-18 14:20 -0800  Kevin McCarthy  <kevin@8t8.us>  (46194ca48b2f)

	* compress.c: Improve two compress translation messages.

	Change the "Error executing" to "Error running", which is used in
	multiple places elsewhere in mutt. This also removes the unnecessary
	newline.

	Remove the leading space in the "Error compressing" message, and
	change it to match the error message in editmsg.c.

2016-11-18 18:17 +0100  Vincent Lefevre  <vincent@vinc17.net>  (174062d0abed)

	* po/fr.po: Updated French translation.

2016-11-18 17:00 +0100  Vincent Lefevre  <vincent@vinc17.net>  (8fa4965beb62)

	* curs_main.c: Make a string translatable.

2016-11-18 16:59 +0100  Vincent Lefevre  <vincent@vinc17.net>  (c15cacbfabe5)

	* smime.c: Make a string translatable. Add a missing space at the end.

2016-11-18 13:07 +0100  Vincent Lefevre  <vincent@vinc17.net>  (c1befb06b4bd)

	* po/fr.po: Updated French translation (except for 1 string).

2016-11-18 12:32 +0100  Vincent Lefevre  <vincent@vinc17.net>  (211afb39a22a)

	* INSTALL: Updated requirement on the C compiler.

2016-11-17 17:54 -0800  Kevin McCarthy  <kevin@8t8.us>  (fa32396b5e26)

	* init.c: Revert changes made to mutt_find_cfg() in 3c6d322912e3

	The usage of MUTT_VERSION in mutt_find_cfg() was fine before the
	commit: it wasn't using MUTT_VERSION inlined into a string with
	format string substitution.

	Revert to the version of mutt_find_cfg() before that changeset.

2016-11-17 15:57 -0800  David Champion  <dgc@bikeshed.us>  (022b604bc46d)

	* OPS, curs_main.c, doc/manual.xml.head, functions.h, globals.h,
	init.h: Adds <mark-message> binding to create "hotkeys" for
	messages.

	<mark-message>foo<enter> will create a new macro "'foo" which will
	return to the current message by searching for that message's
	message id. The initial character of the macro is defined by
	$mark_macro_prefix, and defaults to "'" for verisimilitude vs. vi.

	Pushed by Kevin McCarthy with a minor fix.

2016-11-17 15:07 -0800  Kevin McCarthy  <kevin@8t8.us>  (3c6d322912e3)

	* commands.c, compose.c, dotlock.c, init.c, muttlib.c, status.c:
	Backout inlining of MUTT_VERSION in 42fee7585fae.

	If MUTT_VERSION contains a %, this will result in problems.

2016-11-16 16:05 -0800  David Champion  <dgc@bikeshed.us>  (91b3449f426b)

	* doc/manual.xml.head, mutt.h, pattern.c: Adds the '@' pattern
	modifier to limit matches to known aliases.

	Example: ~f joe matches messages from joe. @~f joe matches messages
	from any joe who is defined as an alias.

	Pushed by Kevin McCarthy with two minor cosmetic fixes.

2016-11-16 15:43 -0800  David Champion  <dgc@bikeshed.us>  (03aa03293c1d)

	* flags.c, init.h, mh.c, mutt.h: When $flag_safe is set, flagged
	messages cannot be deleted.

	This saves them from bulk operations on threads and tagged messages.
	To remove a flagged message, first unflag it.

2016-11-15 12:04 -0800  Kevin McCarthy  <kevin@8t8.us>  (5382e1e4cee1)

	* muttbug.sh.in: Fix muttbug to check $XDG_CONFIG_HOME.

	Fall back to $HOME/.config if $XDG_CONFIG_HOME is not set.

2016-11-15 12:03 -0800  Kevin McCarthy  <kevin@8t8.us>  (0ef0f4d15f75)

	* init.c: Fix loop terminator in in mutt_find_cfg().

	Keep searching even if home is NULL.

2016-11-14 11:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (c78753f98e34)

	* doc/makedoc-defs.h: Ensure the compressed documentation is always
	built.

	Add USE_COMPRESSED to makedoc-defs.h so any conditional
	documentation will always be built.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (99a3ff6555d9)

	* compress.c: Compress: check mailbox type if possible when appending.

	If an append hook isn't defined, then mutt has to decompress the
	mailbox. In that case, we can check the type of the decompressed
	mailbox instead of defaulting to DefaultMagic.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (cad0051417eb)

	* compress.c, doc/manual.xml.head: Compress: escape single quotes when
	invoking the compress/decompress commands.

	The format strings are placed in single quotes. mutt_system()
	invokes sh, so escape the single quotes using bourne-shell syntax:
	'\''

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (a51f1c8a038a)

	* compress.c: Compress: fix check_mailbox and sync_mailbox.

	Change check_mailbox to delegate to the child_ops->check_mailbox if
	the compressed mailbox has changed. This allows the mailbox to
	properly recover if both the decompressed mailbox and compressed
	file have changed.

	Change sync_mailbox to call check_mailbox before attempting to sync.
	This will prevent overwriting external changes to the compressed
	mailbox.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (0a7054904b5b)

	* compress.c, compress.h, imap/imap.c, mbox.c, mh.c, mutt.h, mx.c,
	mx.h, pop.c, pop.h: Create mx_ops.sync operation. Refactor compress
	to use the mx_ops.sync.

	Change compress.sync_mailbox() to lock the compressed mailbox around
	both the tempfile sync and compress operations. This will prevent
	changes made inbetween the two syncs from being overwritten.

	Thanks to Damien Riegel for his original patch refactoring
	mx_ops.sync, which this patch is partially based upon.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (05f6bd8532ea)

	* compress.c: Compress: pull the lock/unlock operations into the
	open,close,sync operations.

	Some operations, such as open_append and sync, need an exclusive
	lock across a longer period than a single compress/decompress.
	Remove it from the execute_command and pull into the outer callers.
	Store lock information inside compress_info.

	Sync and check_mailbox need more fixes, which will be addressed in
	subsequent patches.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (b1366f49c7b7)

	* compress.c: Compress: safe_fopen() the tempfile, to prevent tempfile
	attacks.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (7c055cc893dc)

	* compress.c: Compress: add delegate calls to open_append and close
	mx_ops functions.

	The open_append and close were partially duplicating mbox
	open_append and close operations internally. Change it to call the
	actual delegate functions instead.

	Inline the open_read() function inside open_mailbox(). Having it
	split improved nothing and just complicated the code (i.e. added
	error-handling checks in open_mailbox() that in reality could not
	fail).

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (d1ff983c9bcb)

	* compress.c, compress.h, mx.c: Compress: fix several logic and memory
	bugs.

	setup_paths leaks memory: realpath is already set in
	mx_open_mailbox()

	restore_paths is unneeded. mx_fastclose_mailbox() will free stuff,
	and nothing is looking at the path once we are closing or aborting.

	Make a copy of the hooks. Otherwise 'unhook *' will leave dangling
	pointers.

	Add compress_info freeing inside mx_fastclose_mailbox(). Only free
	inside compress.c when we want to prevent close() from doing
	anything.

	close_mailbox() didn't preserve ctx->path on error.

	execute_command() didn't return an error if the mutt_system()
	command failed.

	mx_open_mailbox_append() should check mutt_comp_can_append() only
	for the case that the mailbox doesn't exist. When it exists,
	mx_get_magic() has already looked at the file contents before
	checking for matching open_hooks.

	In open_append_mailbox() if no append hook is defined, it should't
	call ci->open() if the mailbox doesn't exist. It should act just
	like append and create a temporary file.

	check_mailbox() needs more work. For now, at least have it properly
	close the mailbox on error.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (c9c120d988a8)

	* commands.c: Compress: remove buffy stats "improvisation".

	Mutt doesn't support polling compressed mailboxes. This code creates
	a false impression and dirties mutt_save_message() in the process. I
	don't like it, so am taking it out.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (290631db373e)

	* compress.c, compress.h, hook.c, mx.c: Compress: prefix external
	functions with "mutt_"

	Also, include compress.h in compress.c so the mx_comp_ops doesn't
	need to be redeclared.

2016-11-13 20:02 -0800  Kevin McCarthy  <kevin@8t8.us>  (ad519d4b356c)

	* Makefile.am, commands.c, compress.c, compress.h, configure.ac,
	contrib/Makefile.am, contrib/sample.muttrc-compress, curs_main.c,
	doc/Muttrc.head, doc/manual.xml.head, doc/muttrc.man.head, hook.c,
	init.h, main.c, mutt.h, mx.c, mx.h, po/POTFILES.in, po/de.po,
	status.c: Compress patch from the neomutt repository.

	With the following changes:
	- po/de.po changes trimmed to just the compress additions.

	- Move the sample muttrc to contrib, and add it to the Makefile.am
	so it is distributed. Remove the sample vimrc.

	- Remove extra fluff from manual.

	Thanks to Roland Rosenfeld for the original patch, and to the
	NeoMutt team for their work cleaning up the patch.

2016-11-13 18:45 -0800  Damien Riegel  <damien.riegel@gmail.com>  (42fee7585fae)

	* commands.c, compose.c, dotlock.c, init.c, muttbug.sh.in, muttlib.c,
	status.c: search muttrc file according to XDG Base Specification
	(closes #3207)

	First of all, the MUTT_VERSION symbol is now concatenated (when
	possible) at compile time.

	Then, the logic to find the config file has been changed a bit to
	remove unnecessary calls to access(), so now each possible locations
	for the config file is only tested once, and it stops as soon as a
	valid one has been found. So instead of:

	 access("/home/dkc/.muttrc-1.7.1", F_OK) = -1 ENOENT (No such file
	or directory) access("/home/dkc/.muttrc", F_OK) = 0
	access("/home/dkc/.muttrc", F_OK) = 0 access("/home/dkc/.muttrc",
	F_OK) = 0 [... Tests for Muttrc ... ] access("/home/dkc/.muttrc",
	F_OK) = 0

	We now have:

	 access("/home/dkc/.muttrc-1.7+13 (f658e517960e)", F_OK) = -1 ENOENT
	(No such file or directory) access("/home/dkc/.muttrc", F_OK) = 0

	It also cleans up the case where -F is passed on the command line
	but points to a non-existent file by moving the error path closer to
	the actual fail condition.

	Finally, it adds partial support for the XDG Base Directory
	Specification. mutt will now try to locate its config at:

	 $XDG_CONFIG_HOME/mutt/muttrc-MUTT_VERSION
	$XDG_CONFIG_HOME/mutt/muttrc.

	If XDG_CONFIG_HOME is not set, it will use '~/.config' as a default.

2016-11-08 12:42 -0800  Kevin McCarthy  <kevin@8t8.us>  (d18482f6641e)

	* mbox.c, mx.c: Move mbox close-append logic inside
	mbox_close_mailbox().

	The mx_fastclose_mailbox() calls mx_ops->close(), which invokes
	mbox_close_mailbox().

	Also, close the ctx->fp inside mbox_close_mailbox(). This way, the
	(to be added) compress logic can call the mx_ops->close() instead of
	"knowing" to close the fp before recompressing.

	mx_fastclose_mailbox() will safe_fclose() the fp again, but I'm
	leaving it there just in case I missed a usage of the fp in some
	other part of the code.

	Thanks to Damien Riegel for the original patch.

2016-11-07 18:10 -0800  Kevin McCarthy  <kevin@8t8.us>  (d0078268768d)

	* recvattach.c: Chain %d->%F->%f in the attachment menu.

	Previously, %d would use %f if there was no description set.

	Place the new %F option in between %d and %f. This way, %d will fall
	back on %F, which will fall back on %f. This allows the standard
	attachment menu to show d_filename.

	This is useful for forwarding attachments or editing draft files
	with attachments. In these cases the actual filename is sanitized
	but the attachment name is preserved in d_filename.

2016-11-07 18:10 -0800  Damien Riegel  <damien.riegel@gmail.com>  (82e566d393cf)

	* OPS, compose.c, functions.h: compose: add operation to rename an
	attachment

	As opposed to rename-file, which actually renames the underlying
	file of the attachment, rename-attachment puts a value in
	d_filename, which is used in the Content-Disposition header.

2016-11-07 18:06 -0800  Damien Riegel  <damien.riegel@gmail.com>  (a9e7402af4de)

	* init.h, recvattach.c: attach_format: add new %F placeholder

	This new placeholder allows to print the attachment name as it will
	be seen on the recipient side.

2016-11-03 15:49 -0700  Kevin McCarthy  <kevin@8t8.us>  (45023e44c92c)

	* mutt.h: Define PATH_MAX, it's missing on the GNU Hurd. (closes
	#3815)

	I believe this patch originally came from Debian.

	Modified based on a suggestion from Fabian Groffen.

2016-11-03 10:17 +0100  Vincent Lefevre  <vincent@vinc17.net>  (ce07aa118214)

	* configure.ac: Fixed issue from changeset 4da647a80c55. (closes
	#3892)

	Shell variables cannot be used in the first argument of
	AC_CHECK_HEADERS.

2016-11-02 18:54 -0700  Kevin McCarthy  <kevin@8t8.us>  (0e0d54b5a384)

	* date.c: Attempt to silence a clang range warning. (closes #3891)

	When TM_YEAR_MAX > INT_MAX, clang complains the comparison is always
	false.

	Note that this is really a compiler bug, which was fixed by gcc 9
	years ago. https://gcc.gnu.org/bugzilla/show_bug.cgi?id=12963

	Thanks to Vincent Lefèvre for the suggested fix and the gcc bug
	reference.

2016-11-02 18:27 -0700  Kevin McCarthy  <kevin@8t8.us>  (4da647a80c55)

	* configure.ac: Make ncurses and ncursesw header checking the same.

	Previously, ncurses.h wasn't searched for directly in the include
	directory for ncursesw.

	Also, fix a test in case $withval is empty.

	Thanks to Sylvain Bertrand for the original patch.

2016-10-31 20:30 -0700  Kevin McCarthy  <kevin@8t8.us>  (b45bfce1bb0e)

	* Makefile.am, configure.ac: Add a --disable-doc configuration option.

	This allows mutt to be built without the documentation.

	Thanks to Sylvain Bertrand for the original patch.

2016-10-23 15:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (f46ed1718cb4)

	* attach.c, recvattach.c: Perform charset conversion on text
	attachments when piping. (closes #3773) (see #3886)

	When piping a text attachment, there is no reliable way to know the
	charset used.

	Vincent Lefèvre says: It was decided in the past that when there is
	no information on the charset in a transmission to an external
	command (e.g. as for mail composing), texts are expected to be
	transmitted in the local charset.

	Add a MUTT_CHARSET flag to enable charset conversion on text
	attachments for both when $attach_split is set and unset.

2016-10-23 14:49 -0700  Kevin McCarthy  <kevin@8t8.us>  (688ecc6d5a8d)

	* pager.c: merge stable

2016-10-23 14:46 -0700  Kevin McCarthy  <kevin@8t8.us>  (c6704c7f8e23)

	* pager.c: Fix pager segfault when lineInfo.chunks overflows. (closes
	#3888)

	The reporter had an html attachment with extremely long lines,
	combined with a color pattern of "color body default default ." This
	overflowed the lineInfo.chunks, causing a segfault.

	Abort the body color patterns if this happens.

2016-10-23 13:47 -0700  Kevin McCarthy  <kevin@8t8.us>  (40cf141c7383)

	* merge stable

2016-10-23 13:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (a8203b4463c1)

	* date.c: Prevent an integer overflow in mutt_mktime() (closes #3880)

	Check to make sure the year passed in isn't bigger than can be
	represented using time_t on the platform.

	Also add a (time_t) cast to an intermediate "years * 365"
	calculation to prevent an overflow there.

	Thanks to TAKAHASHI Tamotsu for his patch, and to Vincent Lefèvre
	for his improvement. I merely took their code and commited it.

2016-10-20 10:30 +0200  Vincent Lefevre  <vincent@vinc17.net>  (8e270c698bfb)

	* po/fr.po: Updated French translation.

2016-10-19 13:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (77de473642cb)

	* OPS, curs_main.c, functions.h, protos.h, thread.c: Add root-message
	function to jump to root message in thread.

	This seems like a useful feature that was brought up for discussion
	on mutt-users. Proposed solutions involved collapsing/uncollapsing
	threads, but it's not hard to modify the mutt_parent_message()
	function to return the root instead.

2016-10-17 11:23 -0700  Kevin McCarthy  <kevin@8t8.us>  (1acabd35d9a3)

	* crypt-gpgme.c: merge stable

2016-10-17 11:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (113b73b0b616)

	* crypt-gpgme.c: Actually fix gpgme segfault in
	create_recipient_set().

	Changeset 6e44bfa16096 did not fix the segv. (Sorry, I made the fix
	based off a report on IRC but didn't trigger the segv myself: it was
	caused by an out-of-tree patch).

	The actual problem was that the rset was only resized on a
	successful gpgme_get_key(). However, on error, the array still needs
	to be NULL-terminated before calling free_recipient_set().

	Move the resize so it always takes place. This obviates the need for
	the NULL check added in 6e44bfa16096.

2016-10-16 15:44 -0700  Kevin McCarthy  <kevin@8t8.us>  (18c3db1aa8c4)

	* sidebar.c: Change sidebar to only match $folder prefix on a
	$sidebar_divider_char. (closes #3887)

	The reporter had a $spoolfile of ~/Mailbox and a $folder of ~/Mail.
	The sidebar was truncating the spoolfile to "ox" because it only
	looked at a substring prefix match.

2016-10-16 15:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (7e174b2fcbe1)

	* merge stable

2016-10-16 15:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (783dce6dfcd4)

	* sidebar.c: Use mutt_strlen and mutt_strncmp in sidebar.c.

	This prevents a segv if folder is unset.

2016-10-16 14:17 -0700  Kevin McCarthy  <kevin@8t8.us>  (023181b27fb6)

	* crypt-gpgme.c: merge stable

2016-10-16 14:16 -0700  Kevin McCarthy  <kevin@8t8.us>  (6e44bfa16096)

	* crypt-gpgme.c: Fix gpgme segfault in create_recipient_set().

	If gpgme_get_key() errors on the first key, the rset will not be
	allocated yet. Attempting to null-terminate (and then free) the
	array causes a segfault.

2016-10-15 14:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (2a6bfdb9f869)

	* url.c: Allow IPv6 literal addresses in URLs. (closes #3681)

	RFCs 2732 and 3986 specify a literal IPv6 address be surrounded by
	"[]".

	This patch removes the "[]" delimiters when parsing the URL, but
	adds them back in url_ciss_tostring() if the host name contains a
	':'.

	Thanks to Evgeni Golov for the original patch.

2016-10-12 18:10 -0700  Kevin McCarthy  <kevin@8t8.us>  (a3e35631b503)

	* init.h, sendlib.c: Handle presence of '--' delimiter in $sendmail.
	(closes #3168)

	If the delimiter exists, additional sendmail flags will be inserted
	before the delimiter. Any arguments after the delimiter will be
	preserved as recipients.

2016-10-11 19:42 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (7c0995a61268)

	* crypt-gpgme.c: Fix GPGME signature zero timestamp and locale
	awareness issues. (closes #3882)

	GPGME signature information has two minor problems.

	[-- Begin signature information --]
	*BAD* signature from: Name <user@example.com> aka: Name
	<user@example.org> created: Thu Jan 1 09:00:00 1970 [-- End
	signature information --]

	First, the created timestamp is incorrect when the message is not
	verified successfully.

	Second, as the code itself has some "TODO" comments, "aka" and
	"created" lines are not properly-aligned when LC_MESSAGES !=
	English.

2016-10-10 18:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (33d16ccba4cf)

	* pop_auth.c: Add a few explanatory comments to pop_auth_sasl(). (see
	#3862)

2016-10-10 16:33 -0700    <g1pi@libero.it>  (a9764761b692)

	* pop_auth.c: Fix POP3 SASL authentication mechanism DIGEST-MD5.
	(closes #3862)

	sasl_client_step() returns SASL_OK after the fourth step: server
	auth confirmation. However, the protocol requires the client send
	one more blank line to the server, to which the server then replies
	with "+OK". See https://tools.ietf.org/html/rfc5034#section-6.

	The code currently only sends a final response if sasl_client_step
	returns data to send. Change it to always send a final client
	message after the SASL_OK.

2016-10-08 13:24 -0700  Kevin McCarthy  <kevin@8t8.us>  (4bcc3a12cc4d)

	* po/cs.po: merge stable

2016-10-08 12:57 -0700  Kevin McCarthy  <kevin@8t8.us>  (58f4b38312bf)

	* .hgsigs: mutt-1.7.1 signed

2016-10-08 12:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (e8d9ae6f41d3)

	* .hgtags: Added tag mutt-1-7-1-rel for changeset 0ce5f9bff1fd

2016-10-08 12:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (0ce5f9bff1fd)

	* ChangeLog, UPDATING, VERSION, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/eu.po, po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po,
	po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po: automatic post-release commit for
	mutt-1.7.1

2016-10-06 12:35 -0700  Kevin McCarthy  <kevin@8t8.us>  (323e3d6e5e4c)

	* imap/imap.c: Mark IMAP fast-trash'ed messages as read before
	copying. (see #3860)

	Regular copying/saving messages in mutt via a UID COPY first calls
	imap_sync_message(). However that function is designed to sync all
	flags (including deleted), and so isn't useful for the fast-trash
	code.

	As an easier solution, instead add a UID STORE to set \\Seen for the
	same msgset as the trashed messages.

2016-10-05 15:04 -0700  Petr Pisar  <petr.pisar@atlas.cz>  (227211e0e84c)

	* po/cs.po: Updated Czech translation.

2016-10-04 11:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (8262503d1991)

	* muttlib.c: merge stable

2016-10-04 11:13 -0700  Kevin McCarthy  <kevin@8t8.us>  (5c5848dfa4ea)

	* muttlib.c: Preserve forwarded attachment names in d_filename.

	When forwarding an attachment with an non-ascii name,
	mutt_copy_body() mangles the filename when calling mutt_adv_mktemp.
	Preserve the original attachment filename in d_filename.

	Remove the double copy of b->filename, which is a memory leak.

2016-10-01 16:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (8963e77577ad)

	* crypt-gpgme.c: Ensure signatures exist when verifying
	multipart/signed emails. (closes #3881).

	TAKAHASHI Tamotsu reported that when gpg2 isn't in PATH, the
	gpgme_op_verify() won't return an error, but instead will return a
	result with no signatures.

	verify_one() was only returning an error if a signature actually
	failed, so in this case the function was defaulting to returning
	success.

	Other callers of gpgme_op_verify() check to make sure the
	result->signatures exist before processing signatures. Add a check
	for verify_one() too.

2016-10-01 13:58 -0700  Kevin McCarthy  <kevin@8t8.us>  (e0c0a2820b8b)

	* url.c: RFC2047-decode mailto url headers after RFC2822 parsing.
	(closes #3879)

	Commit 55819a7e6169 performed the RFC2047 decode before the parsing.
	This works okay for headers such as subject, but for others such as
	address fields could lead to parsing errors.

	Change to perform a decode on envelope headers after all the calls
	to mutt_parse_rfc822_line(), using the same list of fields as
	mutt_read_rfc822_header().

	Change the do_2047 parameter of mutt_read_rfc822_line() to true, so
	that user headers are decoded if needed.

2016-09-27 18:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (55819a7e6169)

	* url.c: RFC2047-decode mailto header values. (closes #3879)

	RFC 6068 specifies that the header values (with the exception of
	body) may contain RFC 2047-encoded values.

2016-09-25 13:26 -0700  Kevin McCarthy  <kevin@8t8.us>  (efb8c7808715)

	* merge stable

2016-09-25 13:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (586dad383893)

	* parse.c: Reset invalid parsed received dates to 0. (closes #3878)

	The actual problem in the ticket would be solved by d3f31cf9239e
	(see #3798). However there is still the bug that Mutt considers a
	(hdr->received != 0) to be set and usable, despite not checking the
	return value of mutt_parse_date().

	Change mutt_read_rfc822_header() to unset an invalid received value
	back to 0. We don't do this inside mutt_read_rfc822_line() because
	that would cause the next received line to be parsed.

2016-09-23 16:07 -0700  Kevin McCarthy  <kevin@8t8.us>  (ca8a3451b707)

	* pager.c: Clear pager position when toggling headers.

	It doesn't make sense to try to preserve the pager position when
	toggling headers: the purpose of toggling headers is to see the
	headers in full or weeded state. So, reset the position back to the
	top.

2016-09-22 14:07 -0700  Kevin McCarthy  <kevin@8t8.us>  (87911ba95dae)

	* curs_lib.c, keymap.c: Don't abort the menu editor on sigwinch.
	(closes #3875)

	getch() will return ERR on sigwinch when timeout() is called with a
	positive value. mutt_getch() will therefore return ch==-2 for both a
	timeout and a sigwinch in this case.

	The imap code in km_dokey() exits out of the ImapKeepalive loop for
	a SigWinch, and was skipping past the check for MENU_EDITOR and
	tmp.ch==-2. Move this check below the gotkey: label so the
	ImapKeepalive loop behaves the same as the Timeout code.

	Thanks to nicop for reporting the problem and for the initial patch!

2016-09-21 18:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (f2ae8a2d6e1b)

	* merge stable

2016-09-21 18:10 -0700  Antonio Radici  <antonio@dyne.org>  (ee0fe5834195)

	* po/de.po, po/es.po, po/it.po: Mark some gpgme pgp menu keybinding
	translations as fuzzy. (closes #3874)

	Some translations for crypt-gpgme.c are marked as fuzzy but the
	keybindings attached to these translations are not, this creates
	confusions for the users who see the english message but have the
	keybindings for a message in their own language available.

	As long as the translations are fuzzy, the keybindings should stay
	fuzzy.

2016-09-21 17:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (ccd543466b9f)

	* merge stable

2016-09-21 22:51 +0200  Kevin McCarthy  <kevin@8t8.us>  (9f6e08ba6ff3)

	* mx.c: Check for NULL mx_ops in mx.c

	Eike Rathke reported this happening when in an IMAP index view the
	underlying connection was terminated, ctx->mx_ops was NULL and thus
	accessing ctx->mx_ops->check segfaulted.

	Thanks also to Eike Rathke for the initial patch, for which I
	expanded the checks to other functions.

2016-09-20 15:51 -0700  Antonio Radici  <antonio@dyne.org>  (405cbc43c3ac)

	* crypt-gpgme.c: Use body color for gpgme output. (closes #3872)

	When switching from pgp_* commands to crypt_use_gpgme=yes, Peter
	Colberg noticed that the output was colored 'brightyellow'.

	The issue is that crypt-gpgme.c uses state_attach_puts in various
	places where it should use state_puts to maintain compatibility with
	the previous behavior in pgp.c.

2016-09-20 14:01 -0700  Kevin McCarthy  <kevin@8t8.us>  (c41562a8118b)

	* crypt-gpgme.c: merge stable

2016-09-20 13:58 -0700  Antonio Radici  <antonio@dyne.org>  (8ed017079800)

	* crypt-gpgme.c: Fix gpgme segfault when querying candidates with a
	'+' in the address. (closes #3873)

	list_to_pattern() was not allocating enough space for the '+' to
	'%2B' transformation.

2016-09-07 20:00 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (821022f6c78c)

	* configure.ac, mutt_ssl.c: Fix openssl 1.1 compilation issues.
	(closes #3870)

	With these changes, Mutt will no longer compile for versions less
	than 0.9.6.

2016-09-07 19:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (a60f7d09c386)

	* doc/manual.xml.head, init.h: Add unsidebar_whitelist command.

	This pairs with the sidebar_whitelist command, and operates like the
	other "un..." list commands.

2016-09-07 18:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (485ac2438e0f)

	* doc/manual.xml.head, init.h: merge stable

2016-09-07 18:54 -0700  Kevin McCarthy  <kevin@8t8.us>  (a431c7618def)

	* doc/manual.xml.head, init.h: Fix sidebar documentation a bit.
	(closes #3859)

	Sidebar_whitelist is a command, not a variable. Also add a blurb
	about what it does.

	Fix the sort order for $sidebar_divider_char and
	$sidebar_delim_chars.

2016-09-05 19:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (3ae51b075826)

	* merge stable

2016-09-05 18:50 -0700  Kevin McCarthy  <kevin@8t8.us>  (cd127a968399)

	* contrib/Makefile.am: Add missing sidebar contrib sample files to
	dist tarball.

	I previously added the files, but neglected to add them to the
	contrib/Makefile.am file.

	Thanks to isdtor for pointing out the problem and for the original
	patch.

2016-09-05 12:44 -0700  Kevin McCarthy  <kevin@8t8.us>  (2b9689daf902)

	* merge stable

2016-09-05 12:35 -0700  Kevin McCarthy  <kevin@8t8.us>  (bb25613ce8a4)

	* getdomain.c: Stub out getdnsdomainname() unless HAVE_GETADDRINFO.

	It seems unlikely there are systems without it (given that this
	mistake has been in since 1.6.0), but for correctness we should stub
	out the function for those without it.

2016-09-05 12:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (90c1b756d87d)

	* configure.ac: Autoconf: always check for getaddrinfo().

	The getdnsdomainname() function introduced in 1.6.0 uses
	getaddrinfo().

	Pull the dependency checks for libnsl, libsocket, and getaddrinfo()
	outside of the "need_socket" block, so they are always checked for.

2016-09-04 18:57 -0700  Kevin McCarthy  <kevin@8t8.us>  (8d7f4bea8820)

	* merge stable

2016-09-04 18:50 -0700  Guilhem Moulin  <guilhem@guilhem.org>  (b082bcd5d5e2)

	* pgppubring.c: Fix pgpring reporting of DSA and Elgamal key lengths.
	(closes #3867)

	Patch provided by Guilhem Moulin from an original idea of Fabrizio
	Tarizzo.

	The key length is always the length of the first MPI for RSA, DSA,
	and Elgamal.

2016-09-03 16:19 -0700  Kevin McCarthy  <kevin@8t8.us>  (a9757cff92da)

	* postpone.c: Preserve message-id and mft headers for recalled
	messages. (closes #3081)

	Git patch creates a patch series mailbox, including the Message-ID.
	Using this as draft files was removing the Message-ID, and thus
	breaking the threaded structure.

	The second part of the ticket has already been addressed by
	95a2230ef889 (for ticket 3653).

	Thanks to Chris Webb for the original patch.

2016-09-02 19:33 -0700  Kevin McCarthy  <kevin@8t8.us>  (7a53de8c9251)

	* doc/manual.xml.head: merge stable

2016-09-02 19:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (ba5d900a90db)

	* doc/manual.xml.head, pattern.c: Disable ~X when message scoring.
	(closes #3861)

	mutt_score_message() purposely passes a NULL context to
	mutt_pattern_exec(). The idea was to block slow patterns, and the
	scoring documentation notes this by saying:

	 "For efficiency reasons, patterns which scan information not
	available in the index, such as ~b, ~B or ~h, may not be used"

	~X needs the context to parse the messages (during message scoring
	at least), and thus isn't suitable for message scoring either.

	Block ~X from being used when the context is NULL. Add ~X to the
	list of patterns noted as unusable in the message scoring
	documentation.

2016-09-02 16:24 -0700  Kevin McCarthy  <kevin@8t8.us>  (95e9357ca697)

	* browser.c: merge stable

2016-09-02 16:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (eef1e8abc46f)

	* browser.c: Increase date buffer size for $folder_format. (closes
	#3863)

	The buffer size of 16 was sufficient to hold the %d format, but not
	for using %D. Change to use a SHORT_STRING.

	Thanks to Ian Zimmerman for the original patch, and to Antonio
	Radici for forwarding it on to us.

2016-08-30 18:43 -0700  David Champion  <dgc@bikeshed.us>  (efccbd9bc6f6)

	* mutt_ssl.c: Redraw screen after an SSL cert prompt

2016-08-30 16:30 -0700  David Champion  <dgc@bikeshed.us>  (121fa0badf9e)

	* muttlib.c, send.c: Moves mutt_copy_list to muttlib.c, where it
	belongs.

2016-08-30 16:11 -0700  David Champion  <dgc@bikeshed.us>  (ab403fd7e600)

	* sort.h: Update a confusing and obsolete comment.

	This 2004 comment in sort.h predicted what has recently come to
	pass, so I'm reframing it just to document for future devs what's
	going on with this oddball flag.

2016-08-23 13:32 +0200  Vincent Lefevre  <vincent@vinc17.net>  (768b430f3dca)

	* mbyte.c: Filter out zero width no-break space (U+FEFF).

2016-08-22 20:34 -0700  Kevin McCarthy  <kevin@8t8.us>  (d500c2fd861d)

	* edit.c, send.c: Add missing include <locale.h> to send.c and edit.c.

2016-08-22 20:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (0ae083fb719c)

	* doc/manual.xml.head, edit.c, globals.h, init.h, send.c: Add
	$attribution_locale configuration variable.

	$attribution_locale replaces the just removed $locale, but is only
	used for customizing the LC_TIME locale used for dates in
	$attribution.

	This could be useful in conjunction with folder or send-hooks for
	recipients in different locales.

2016-08-22 20:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (d1ddea6099cd)

	* browser.c, crypt-gpgme.c, crypt.c, globals.h, hdrline.c, init.h,
	main.c, pgpkey.c: Remove the $locale configuration variable.

	$locale was only used to set the LC_TIME locale. Unfortunately, Mutt
	previously defaulted to using "C". This overrode the user's locale
	setting and forced them to re-specify their locale inside their
	.muttrc.

	Remove $locale and instead use the locale specified by the
	environment. Mutt still allows "C locale" dates by using a leading
	"!" in $date_format, ${}, etc.

	Another use of $locale was to customize attribution dates using
	hooks. The next commit will introduce $attribution_locale, which can
	be used for this instead.

	Thanks to Derek Martin for the original patch!

2016-08-17 20:17 -0700  Kevin McCarthy  <kevin@8t8.us>  (328e1a32034b)

	* sys_socket.h: merge default into stable

2016-08-17 20:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (e5fcfc5f9c2e)

	* .hgsigs: mutt-1.7.0 signed

2016-08-17 20:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (be1a70b1c080)

	* .hgtags: Added tag mutt-1-7-rel for changeset a4e83f60e42f

2016-08-17 20:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (a4e83f60e42f)

	* ChangeLog, UPDATING, VERSION, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/eu.po, po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po,
	po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po: automatic post-release commit for
	mutt-1.7.0

2016-11-26 00:57 +0100  Vincent Lefevre  <vincent@vinc17.net>  (a0a970530a8b)

	* crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-gpgme.c: Fix build
	failure with GPGME 1.8: do not steal the gpgme_ prefix.

2016-11-19 19:35 -0800  Kevin McCarthy  <kevin@8t8.us>  (10c4761cea89)

	* mutt_ssl.c: More openssl1.1 fixes: remove uses of X509->name in
	debugging. (closes #3870)

	X509->name was a shortcut for the longer name = X509_NAME_oneline
	(X509_get_subject_name (cert), buf, sizeof (buf)); invocation.
	Change the debugging to print the cert name and chain names in the
	ssl_check_certificate() loop instead.

2016-09-07 20:00 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (2c1d79d3edd5)

	* configure.ac, mutt_ssl.c: Fix openssl 1.1 compilation issues.
	(closes #3870)

	With these changes, Mutt will no longer compile for versions less
	than 0.9.6.

2016-10-23 14:46 -0700  Kevin McCarthy  <kevin@8t8.us>  (c6704c7f8e23)

	* pager.c: Fix pager segfault when lineInfo.chunks overflows. (closes
	#3888)

	The reporter had an html attachment with extremely long lines,
	combined with a color pattern of "color body default default ." This
	overflowed the lineInfo.chunks, causing a segfault.

	Abort the body color patterns if this happens.

2016-10-23 13:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (a8203b4463c1)

	* date.c: Prevent an integer overflow in mutt_mktime() (closes #3880)

	Check to make sure the year passed in isn't bigger than can be
	represented using time_t on the platform.

	Also add a (time_t) cast to an intermediate "years * 365"
	calculation to prevent an overflow there.

	Thanks to TAKAHASHI Tamotsu for his patch, and to Vincent Lefèvre
	for his improvement. I merely took their code and commited it.

2016-10-17 11:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (113b73b0b616)

	* crypt-gpgme.c: Actually fix gpgme segfault in
	create_recipient_set().

	Changeset 6e44bfa16096 did not fix the segv. (Sorry, I made the fix
	based off a report on IRC but didn't trigger the segv myself: it was
	caused by an out-of-tree patch).

	The actual problem was that the rset was only resized on a
	successful gpgme_get_key(). However, on error, the array still needs
	to be NULL-terminated before calling free_recipient_set().

	Move the resize so it always takes place. This obviates the need for
	the NULL check added in 6e44bfa16096.

2016-10-16 15:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (783dce6dfcd4)

	* sidebar.c: Use mutt_strlen and mutt_strncmp in sidebar.c.

	This prevents a segv if folder is unset.

2016-10-16 14:16 -0700  Kevin McCarthy  <kevin@8t8.us>  (6e44bfa16096)

	* crypt-gpgme.c: Fix gpgme segfault in create_recipient_set().

	If gpgme_get_key() errors on the first key, the rset will not be
	allocated yet. Attempting to null-terminate (and then free) the
	array causes a segfault.

2016-10-08 12:57 -0700  Kevin McCarthy  <kevin@8t8.us>  (58f4b38312bf)

	* .hgsigs: mutt-1.7.1 signed

2016-10-08 12:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (e8d9ae6f41d3)

	* .hgtags: Added tag mutt-1-7-1-rel for changeset 0ce5f9bff1fd

2016-10-08 12:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (0ce5f9bff1fd)

	* ChangeLog, UPDATING, VERSION, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/eu.po, po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po,
	po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po: automatic post-release commit for
	mutt-1.7.1

2016-10-04 11:13 -0700  Kevin McCarthy  <kevin@8t8.us>  (5c5848dfa4ea)

	* muttlib.c: Preserve forwarded attachment names in d_filename.

	When forwarding an attachment with an non-ascii name,
	mutt_copy_body() mangles the filename when calling mutt_adv_mktemp.
	Preserve the original attachment filename in d_filename.

	Remove the double copy of b->filename, which is a memory leak.

2016-09-25 13:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (586dad383893)

	* parse.c: Reset invalid parsed received dates to 0. (closes #3878)

	The actual problem in the ticket would be solved by d3f31cf9239e
	(see #3798). However there is still the bug that Mutt considers a
	(hdr->received != 0) to be set and usable, despite not checking the
	return value of mutt_parse_date().

	Change mutt_read_rfc822_header() to unset an invalid received value
	back to 0. We don't do this inside mutt_read_rfc822_line() because
	that would cause the next received line to be parsed.

2016-09-21 18:10 -0700  Antonio Radici  <antonio@dyne.org>  (ee0fe5834195)

	* po/de.po, po/es.po, po/it.po: Mark some gpgme pgp menu keybinding
	translations as fuzzy. (closes #3874)

	Some translations for crypt-gpgme.c are marked as fuzzy but the
	keybindings attached to these translations are not, this creates
	confusions for the users who see the english message but have the
	keybindings for a message in their own language available.

	As long as the translations are fuzzy, the keybindings should stay
	fuzzy.

2016-09-21 22:51 +0200  Kevin McCarthy  <kevin@8t8.us>  (9f6e08ba6ff3)

	* mx.c: Check for NULL mx_ops in mx.c

	Eike Rathke reported this happening when in an IMAP index view the
	underlying connection was terminated, ctx->mx_ops was NULL and thus
	accessing ctx->mx_ops->check segfaulted.

	Thanks also to Eike Rathke for the initial patch, for which I
	expanded the checks to other functions.

2016-09-20 13:58 -0700  Antonio Radici  <antonio@dyne.org>  (8ed017079800)

	* crypt-gpgme.c: Fix gpgme segfault when querying candidates with a
	'+' in the address. (closes #3873)

	list_to_pattern() was not allocating enough space for the '+' to
	'%2B' transformation.

2016-09-07 18:54 -0700  Kevin McCarthy  <kevin@8t8.us>  (a431c7618def)

	* doc/manual.xml.head, init.h: Fix sidebar documentation a bit.
	(closes #3859)

	Sidebar_whitelist is a command, not a variable. Also add a blurb
	about what it does.

	Fix the sort order for $sidebar_divider_char and
	$sidebar_delim_chars.

2016-09-05 18:50 -0700  Kevin McCarthy  <kevin@8t8.us>  (cd127a968399)

	* contrib/Makefile.am: Add missing sidebar contrib sample files to
	dist tarball.

	I previously added the files, but neglected to add them to the
	contrib/Makefile.am file.

	Thanks to isdtor for pointing out the problem and for the original
	patch.

2016-09-05 12:35 -0700  Kevin McCarthy  <kevin@8t8.us>  (bb25613ce8a4)

	* getdomain.c: Stub out getdnsdomainname() unless HAVE_GETADDRINFO.

	It seems unlikely there are systems without it (given that this
	mistake has been in since 1.6.0), but for correctness we should stub
	out the function for those without it.

2016-09-05 12:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (90c1b756d87d)

	* configure.ac: Autoconf: always check for getaddrinfo().

	The getdnsdomainname() function introduced in 1.6.0 uses
	getaddrinfo().

	Pull the dependency checks for libnsl, libsocket, and getaddrinfo()
	outside of the "need_socket" block, so they are always checked for.

2016-09-04 18:50 -0700  Guilhem Moulin  <guilhem@guilhem.org>  (b082bcd5d5e2)

	* pgppubring.c: Fix pgpring reporting of DSA and Elgamal key lengths.
	(closes #3867)

	Patch provided by Guilhem Moulin from an original idea of Fabrizio
	Tarizzo.

	The key length is always the length of the first MPI for RSA, DSA,
	and Elgamal.

2016-09-02 19:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (ba5d900a90db)

	* doc/manual.xml.head, pattern.c: Disable ~X when message scoring.
	(closes #3861)

	mutt_score_message() purposely passes a NULL context to
	mutt_pattern_exec(). The idea was to block slow patterns, and the
	scoring documentation notes this by saying:

	 "For efficiency reasons, patterns which scan information not
	available in the index, such as ~b, ~B or ~h, may not be used"

	~X needs the context to parse the messages (during message scoring
	at least), and thus isn't suitable for message scoring either.

	Block ~X from being used when the context is NULL. Add ~X to the
	list of patterns noted as unusable in the message scoring
	documentation.

2016-09-02 16:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (eef1e8abc46f)

	* browser.c: Increase date buffer size for $folder_format. (closes
	#3863)

	The buffer size of 16 was sufficient to hold the %d format, but not
	for using %D. Change to use a SHORT_STRING.

	Thanks to Ian Zimmerman for the original patch, and to Antonio
	Radici for forwarding it on to us.

2016-08-17 20:17 -0700  Kevin McCarthy  <kevin@8t8.us>  (328e1a32034b)

	* sys_socket.h: merge default into stable

2016-08-17 20:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (e5fcfc5f9c2e)

	* .hgsigs: mutt-1.7.0 signed

2016-08-17 20:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (be1a70b1c080)

	* .hgtags: Added tag mutt-1-7-rel for changeset a4e83f60e42f

2016-08-17 20:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (a4e83f60e42f)

	* ChangeLog, UPDATING, VERSION, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/eu.po, po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po,
	po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po: automatic post-release commit for
	mutt-1.7.0

2016-08-17 18:07 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (c513c311026f)

	* po/ja.po: Updated Japanese translation.

2016-08-15 10:17 -0700  Morten Bo Johansen  <morten.bo.johansen@gmail.com>  (83d0f5383325)

	* po/da.po: Updated Danish translation.

2016-08-15 09:15 -0700  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (f02122b5eeeb)

	* po/eo.po: Updated Esperanto translation.

2016-08-15 09:09 -0700  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (7e54c1fe55b4)

	* po/nl.po: Updated Dutch translation.

2016-08-10 09:29 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net>  (2de6949a0f08)

	* po/ca.po: Updated Catalan translation.

2016-08-10 02:20 +0200  Vincent Lefevre  <vincent@vinc17.net>  (53b4b412dd79)

	* po/fr.po: Updated French translation.

2016-08-09 14:34 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (8847b913432a)

	* po/ru.po: Updated Russian translation.

2016-08-09 14:32 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (08251fb01f90)

	* po/uk.po: Updated Ukrainian translation.

2016-08-08 13:13 -0700  Kevin McCarthy  <kevin@8t8.us>  (7abc19ad2d10)

	* curs_main.c, pager.c, protos.h: Clear pager position upon returning
	to the index menu.

	This fixes a bug where opening a message sometimes shows it scrolled
	down.

	The easiest way to trigger this is to open a long message in a
	mailbox with no new messages, scroll down, hit <next-new-then-
	unread> and then reopen the message. The pager will "remember" the
	position and scroll down. If you simply exit the message and re-
	enter it, the position is not saved.

	More annoyingly, once in a very great while I will open a new
	message and have the message scrolled down partway. I believe this
	is due to OldHdr happening to point to the same address as the
	Header of the new message.

	This is somewhat easily triggered on a mailbox with one message,
	which you open, scroll down in, hit <next-new-then-unread> to exit,
	and then delete/sync. In another mutt instance, copy the same
	messsage back to the mailbox, then open the message in the original
	mutt instance. At least some of the time, the OldHdr pointer matches
	the new message, and so it opens scrolled down.

	This patch solves the problem by clearing the pager position once
	all redirections through the index menu are done.

2016-08-06 23:35 +0200  Vincent Lefevre  <vincent@vinc17.net>  (15c4c16bed07)

	* po/fr.po: Updated French translation.

2016-08-05 14:33 -0700  Kevin McCarthy  <kevin@8t8.us>  (108ad5dcf194)

	* rfc2047.c: Remove nonsensical size check in mutt_choose_charset()

	The charsets parameter is being tokenized by the : delimeter.

	The checks against ENCWORD_LEN_MAX and ENCWORD_LEN_MIN make no
	sense, and appear to be the result of a large merge a very long time
	ago (changeset cb27682966d5).

	I can only guess where this check was supposed to be, but it
	certainly doesn't belong here.

2016-08-05 13:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (a39c8bdca361)

	* rfc2047.c: Fix memory leak in mutt_choose_charset().

2016-08-05 13:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (1ef5734f6593)

	* mh.c: Fix memleak in mh_read_dir() when sequence parsing fails.

2016-08-05 11:02 -0700  Kevin McCarthy  <kevin@8t8.us>  (f6b5f533f9ce)

	* COPYRIGHT, buffy.c, getdomain.c, globals.h, init.c, init.h, main.c,
	sidebar.c: Update copyright notices.

2016-08-02 19:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (f9a4023b86ad)

	* pop.c: Explicitly NULL unimplemented pop mx_ops functions.

	The struct initialization already does this for unlisted fields, but
	I'd rather be explicit about unimplemented operations.

2016-08-02 19:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (01541185e6f4)

	* mx.c: Use the ctx->mx_ops instead of calling mx_get_ops()

	With mx_open_mailbox_append() setting the ctx->mx_ops, all contexts
	should have mx_ops set.

	Remove calls to mx_get_ops() and instead directly use ctx->mx_ops.

2016-08-01 18:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (e778db6e693c)

	* mailbox.h, mh.c, mx.c: Use a different flag in
	mx_open_mailbox_append() when mailbox doesn't exist.

	The previous commit re-used MUTT_NEWFOLDER, but the meaning of that
	flag is slightly different: it causes mbox to use fopen with mode
	"w", and is used only for the case of a brand-new mktemp-generated
	mbox.

	Setting it for other non-existing mbox files leads to a race
	condition between the stat and the fopen/lock, and so could end up
	truncating an existing mailbox created in-between!

	Create a different flag, MUTT_APPENDNEW to notify the open_append()
	functions that the mailbox doesn't exist. Change maildir and mh to
	check for that flag to create their directory structures.

2016-08-01 15:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (2b9d6165b8b7)

	* imap/imap.c, imap/imap.h, mbox.c, mh.c, mutt.h, mx.c, pop.c: Convert
	mx_open_mailbox_append() to use ctx->mx_ops.

	Set the flag MUTT_NEWFOLDER to signal Maildir and MH to create the
	directory structure.

	Distribute the "open append" code to mbox, mh, and imap/imap.c.

	Set pop's mx_ops handler to NULL to signal it is not supported.

2016-07-31 18:42 -0700  Kevin McCarthy  <kevin@8t8.us>  (3834da0c024e)

	* mbox.c, mx.c: Move fflush and fsync to the mbox and mmdf commit_msg
	functions.

	The case statement in mx_commit_message() was previously distributed
	to the various ops->commit_msg() handlers, but the fflush and fsync
	were not.

2016-07-30 11:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (27b77b5c97cf)

	* browser.c, browser.h, imap/browse.c, imap/imap.h, init.h: Add unread
	and total message count format strings to $folder_format.

	%n will show the unread message count in the mailbox. %m will show
	total message count. Except for %n with IMAP, these both require
	$mail_check_stats to be set, which puts these counts inside BUFFY.

	Since the imap_mboxcache is never fresher than the value in BUFFY,
	remove the special imap_mailbox_state() call. Instead, just update
	from the current Context for all mailboxes.

	Remove the logic that overrode the %N format string to show unread
	count for IMAP mailboxes. If they want to see unread count, they
	will have to change the $folder_format.

	Although it doesn't look possible to reuse browser_state.entry
	slots, change the OP_DELETE_MAILBOX to memset(0) the deleted slot.
	Then, we can change to logic in add_folder() so it doesn't need to
	zero-out unset values.

2016-07-25 12:25 -0700  Richard Russon  <rich@flatcap.org>  (4f4c258ab95c)

	* imap/command.c: Fix imap buffy msg_count overwrite issue.

	The sidebar updates the buffy->msg_count with the context. This can
	cause it to become out of sync with the imap_mboxcache.

	If the imap_buffy doesn't request MESSAGES, don't overwrite the
	buffy->msg_count with a stale value.

2016-07-22 14:55 -0700  Kevin McCarthy  <kevin@8t8.us>  (7b9763564598)

	* buffy.c, mx.c: Convert buffy_mbox_check() and trash_append() to use
	local context.

	buffy_mbox_check() was leaking the dynamically allocated context.
	Rather than add a call to free, just convert it to use a local
	variable.

	Make the same change to trash_append(), which doesn't need the
	dynamically allocated context either.

2016-07-21 14:00 -0700  Kevin McCarthy  <kevin@8t8.us>  (81ecc31f8197)

	* mx.c: Fix memleak in the new trash folder code.

	Free the context in opened in trash_append()

2016-07-21 12:49 +0200  Vincent Lefevre  <vincent@vinc17.net>  (2d1279b26e22)

	* po/fr.po: Updated French translation.

2016-07-20 16:29 -0700  Kevin McCarthy  <kevin@8t8.us>  (89b266256a85)

	* mbyte.c, mbyte.h, pager.c: Filter directional markers that corrupt
	the screen. (closes #3854)

	Thanks to Vincent Lefèvre for working on these utf-8 screen display
	issues.

2016-07-19 18:56 -0700  Anton Lindqvist  <anton.lindqvist@gmail.com>  (69bbe4da959f)

	* curs_lib.c: Fix arithmetic exception due to menu->pagelen being
	negative.

	Resizing the terminal window down to two lines when in an empty
	mailbox causes mutt to crash due to division by zero since menu->max
	equals 0 and menu->pagelen < 0 in status.c:205.

	Fixing the problem at this specific line felt wrong since I did
	notice menu->pagelen being negative. The pagelen is inherited from
	the rows calculation in mutt_reflow_windows. Since the number of
	lines can potentially be smaller than the accumulated number of rows
	acquired by the status, help and message window, make sure the
	calculation does not turn negative.

2016-07-17 19:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (f1d5a884ffed)

	* imap/imap.c, imap/imap.h, mutt.h, mx.c: Add imap-fast-trash patch.

	This is based on the patch by Paul Miller.

	Modifications are:

	* Create a new flag, MUTT_TRASH for imap_make_msg_set(), rather than
	use MUTT_EXPIRED.

	* Change imap_make_msg_set(MUTT_TRASH) to only look at
	hdrs[n]->deleted && !hdrs[n]->purge, behaving like MUTT_TAG, rather
	than looking at the HEADER_DATA.

	* Reimplement imap_fast_trash() based on imap_copy_message(). It
	looks the old version was too, but it lacked handling of TRYCREATE
	and also queued the UID COPY but didn't exec it. (Presumably this
	happened in the subsequent sync).

	* Move the Context magic and mx_is_imap() checks outside of
	imap_fast_trash()

2016-07-17 19:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (280f9b195192)

	* OPS, curs_main.c, functions.h, pager.c: Add purge-message patch.

	This is based on the patch by Cedric Duval. Modifications are:

	* Use the exising M_PURGE flag from the trash folder patch, rather
	than adding a separate flag.

	* Undelete operations are already handled by the trash folder patch.

2016-07-17 19:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (20499921a4e5)

	* commands.c, curs_main.c, editmsg.c, flags.c, globals.h,
	imap/message.c, init.h, mbox.c, mutt.h, mx.c, pager.c, pattern.c,
	postpone.c: Add the trash folder patch.

	This is based on the trash folder patch by Cedric Duval.
	Modifications to the original patch are:

	* Use a flag called M_PURGE instead of M_APPENDED. The same flag is
	then used in the following "purge" patch instead of adding a
	different flag.

	* Removed the counter in context. The existing context->deleted is
	all that's needed.

	* Removed the "auto unset M_PURGE" when M_DELETED is unset inside
	_mutt_set_flag(), although this is convenient, it easily leads to
	header->purge not being reset in a few situations.

	* Reset purge flag along with the deleted flag if $delete is
	answered no.

	* Set M_PURGE on an edited message. (edit_one_message())

	* Preserve purge flag in mutt_reopen_mailbox()

	* Turn off OPTCONFIRMAPPEND when saving to the trash, rather than
	hardcoding it off in mutt_save_confirm(). That way, normal save to
	the folder will respect the option.

2016-07-16 14:04 -0700  Will Fiveash  <will.fiveash@oracle.com>  (b2cb7a38c1ed)

	* mutt_sasl.c: Fix memory leak in mutt_sasl_cb_pass.

	SASL doesn't free the sasl_secret_t, so this was leaking. Instead,
	keep our own pointer to it, and safe_realloc() each time.

	sasl_secret_t doesn't need the data field null terminated, so memcpy
	the password over.

2016-07-12 18:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (488f91a85115)

	* muttlib.c, sendlib.c: Fix BODY->d_filename memory leaks.

	mutt_message_to_7bit() and transform_to_7bit() were overwriting
	d_filename without freeing the previous value.

	mutt_free_body() was not freeing the d_filename pointer.

2016-07-12 17:46 -0700  Kevin McCarthy  <kevin@8t8.us>  (b4de6941bbb9)

	* muttlib.c, sendlib.c: Fix BODY->charset memory leaks.

	mutt_get_content_info() was directly setting charset without freeing
	the previous value.

	mutt_free_body() was not freeing the charset.

2016-07-11 18:36 -0700  Kevin McCarthy  <kevin@8t8.us>  (9378d21fc7fe)

	* curs_lib.c, main.c: Initialize mutt windows even in batch mode.
	(closes #3853)

	mutt_select_fcc() calls mutt_addr_hook() -> mutt_make_string() which
	refers to MuttIndexWindow->cols when calling mutt_FormatString(). In
	batch mode, MuttIndexWindow hasn't been initialized, leading to a
	segfault.

	This might be the only overlap, but it seems wiser to just
	initialize the mutt windows in case there are other references (now
	or in the future) when processing format strings in batch mode.

2016-07-08 19:08 -0700  rich burridge  <rich.burridge@oracle.com>  (89ae904a6b30)

	* Makefile.am: Fix conststrings compiler version string generation.
	(closes #3852)

	The Makefile.am tries compiler flags -v, --version, and -V but
	neglected to filter error messages if these flags aren't recognized.

2016-07-08 18:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (ec4c113a3d2b)

	* sidebar.c: Change sidebar highlighted mailbox behavior.

	Delay selecting the highlighted mailbox until prepare_mailbox(), to
	avoid a hidden mailbox being selected during the Buffy list
	population (in mutt_sb_notify_mailbox()).

	Change update_entries_visibility() to not automatically make the
	highlighted mailbox visible.

	Change prepare_sidebar() to (re)set the highlighted mailbox when the
	current highlighted mailbox is hidden.

2016-07-08 18:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (5fb53b95afa7)

	* sidebar.c: Fix sidebar pagedown/up when mailboxes on the end are
	hidden.

	The pageup/pagedown code was setting the highlighted mailbox to the
	top and bottom index without checking if those were hidden.

2016-07-08 18:47 -0700  Kevin McCarthy  <kevin@8t8.us>  (4dc1831fd6d7)

	* imap/message.c: Don't overwrite imap_status->uidnext with a lower
	value. (closes #3771)

	imap_read_headers() updates the idata and imap_status uidnext after
	reading through all the new headers.

	The idata is updated properly (only if its uidnext is below
	maxuid+1), but the imap_status was always being set to maxuid.

	This causes a problem with new mail checking if the most recent
	messages are deleted. Then the uidnext will be greater than maxuid+1
	in the mailbox, and if there are any other unread messages it will
	*always* report new mail even if $mail_check_recent is set.

2016-07-07 12:00 -0700  Kevin McCarthy  <kevin@8t8.us>  (6f2fe8f32dab)

	* sidebar.c: Fix the sidebar TopIndex and BotIndex when
	$sidebar_new_mail_only is set.

	When set, some of the entries can be hidden, so a simple division by
	page_size to find the correct top/bottom isn't correct.

	Instead, manually partition into groups of page_size visible entries
	and set top and bottom based on the interval around the highlighted
	entry.

2016-07-07 09:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (5229c7fbc37e)

	* mbyte.c, pager.c: Filter soft hypen from pager and headers. (closes
	#3848)

	Add U+00AD SOFT HYPHEN to the filtered characters in headers and the
	pager. In some terminals and situations it causes major display
	problems.

2016-07-06 12:31 -0700  Richard Russon  <rich@flatcap.org>  (81e9c352e5d7)

	* sidebar.c: Fix sidebar crash for non-existent mailbox

	If you <change-folder> to a non-existent mailbox, there will be no
	Context.

2016-07-06 10:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (88793198dfcb)

	* po/fr.po: merge stable

2016-07-02 12:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (bf1c73de2b7c)

	* doc/manual.xml.head, init.h: Fix the documented sort methods for
	sidebar_sort_method.

	Remove references to unused "date" and "size", and add "flagged".

2016-07-02 12:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (20089a780e8e)

	* init.c, init.h: Add R_SIDEBAR to redraw sidebar when its settings
	change.

	Add to the sidebar settings that control formatting of the sidebar.

2016-07-02 12:24 -0700  Kevin McCarthy  <kevin@8t8.us>  (d404059a7619)

	* sidebar.c: Fix sidebar "unsorted" order to match Buffy list order.

	Since the previous commit decoupled the sidebar from the Buffy list,
	we can now restore the order to match the buffy list when
	sidebar_sort_method is set (back) to "unsorted".

2016-07-02 12:22 -0700  Kevin McCarthy  <kevin@8t8.us>  (b05c170b4c91)

	* buffy.h, sidebar.c: Decouple the sidebar from the Buffy list.

	Change the sidebar to use an array of SBENTRY* instead. Move the
	"is_hidden" into SBENTRY. Remove the added "prev" pointer from
	BUFFY.

	This way, sorting the sidebar doesn't affect the BUFFY list order,
	and we don't need elements inside BUFFY just for the sidebar
	presentation.

	Fix sidebar-next for the case where the mailboxes are unsorted and
	$sidebar_new_mail_only is set. Change sorting not to clump hidden
	mailboxes at the bottom, instead simply skip over hidden mailboxes
	in sidebar-next/prev.

2016-07-01 13:39 -0700  Kevin McCarthy  <kevin@8t8.us>  (c62f5cd3c8e4)

	* send.c: merge stable

2016-06-30 12:57 -0700  Kevin McCarthy  <kevin@8t8.us>  (6b147a411f68)

	* doc/makedoc-defs.h: Fix missing sidebar documentation links. (closes
	#3847)

	USE_SIDEBAR needed to be set in doc/makedoc-defs.h so that the
	sidebar option documentation is generated whether mutt is configured
	with the sidebar or not.

2016-06-29 18:58 -0700  Kevin McCarthy  <kevin@8t8.us>  (4b6829229176)

	* m4/gssapi.m4: Fix cppflags and muttlibs duplication with --with-gss.

	When krb5-config was found, MUTT_AM_PATH_GSSAPI included CFLAGS in
	GSSAPI_CFLAGS and MUTTLIBS in GSSAPI_LIBS. However, configure.ac
	afterwards sets: CPPFLAGS="$CPPFLAGS $GSSAPI_CFLAGS"
	MUTTLIBS="$MUTTLIBS $GSSAPI_LIBS" This caused the flags and libs to
	be duplicated.

2016-06-29 18:58 -0700  Kevin McCarthy  <kevin@8t8.us>  (c84aa0d62ce3)

	* configure.ac: Include ncurses tinfo library if found.

	Thanks to Fabian Groffen for reporting this issue and providing a
	couple possible patches. From Fabian's report:

	 For some time now, ncurses can be built in a mode where the low
	level terminfo functionality lives in a separate lib called
	libtinfo. Because some people do, this means Mutt needs to include
	this library in that case to avoid linking errors [...]

2016-06-29 12:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (b62483975c94)

	* init.h: Clarify oppenc option documention. (closes #3846)

	Rephrase the option description to try and make it clearer what the
	option does, and how to enable/disable it within a message.

2016-06-28 16:06 -0700  Kevin McCarthy  <kevin@8t8.us>  (2baed7154180)

	* init.h, sidebar.c, sort.h: Remove unused SORT_DESC.

	This came over with the sidebar patch, but I believe is only used by
	the notmuch extension.

2016-06-28 15:59 -0700  Fahri Cihan Demirci  <fcdemirci@fastmail.fm>  (5bac9dacae1d)

	* contrib/sample.muttrc-sidebar: Remove $sidebar_refresh_time from
	Sample Sidebar Config

	The $sidebar_refresh_time option was removed with the changeset
	1f840760e6e0. Remove it from the sample sidebar configuration as
	well, so that anyone using that file in its entirety won't have to
	deal with "unknown variable" errors.

2016-06-23 12:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (b45c8ec1e54c)

	* buffy.c, buffy.h, curs_main.c, imap/imap.c, main.c, mutt.h, mx.c,
	pop.c, sidebar.c, sidebar.h: Change sidebar to consistently use
	realpath for context and buffy comparison.

	The original sidebar patch contained a half-implemented attempt to
	use realpath() mailbox paths for comparison. (Presumably so the open
	mailbox remains highlighted despite symlink issues).

	Add realpath to the Context, and set it when opening a mailbox.
	Remove sidebar ifdef for the buffy member, and always set it there
	too.

	Change the sidebar to use the realpath for comparison everywhere.

	mutt_buffy_check() is using stat device and inode for comparison.
	Perhaps this can be changed to use realpath instead, but that's
	beyond the scope of this patch.

2016-06-22 09:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (c8613259dc38)

	* sidebar.c: Change sidebar next/prev-new to look at buffy->new too.

	Look at new in addition to msg_unread count, to account for when
	$mail_check_stats is unset or when the sidebar only shows the %n
	status flag.

2016-06-20 20:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (3d87b0521a45)

	* doc/manual.xml.head, init.h: Add documentation to the "New Mail
	Detection" section of the manual.

	Mention the behavior change with $mail_check_recent.

	Add a section about $mail_check_stats.

2016-06-20 10:11 +0200  Vincent Lefevre  <vincent@vinc17.net>  (069c7a655ad5)

	* po/fr.po: Updated French translation.

2016-06-18 13:36 -0700  Damien Riegel  <damien.riegel@gmail.com>  (91af19866bbd)

	* imap/imap.c, imap/imap.h, imap/imap_private.h, mbox.c, mh.c, mutt.h,
	mx.c, mx.h: add commit_msg to struct mx_ops

2016-06-18 13:36 -0700  Damien Riegel  <damien.riegel@gmail.com>  (28688fee52a5)

	* mbox.c, mx.c, mx.h: add mmdf_commit_message function

	Move MMDF operations that were done in mx_commit_message to a
	dedicated mmdf_commit_message function.

2016-06-18 13:36 -0700  Damien Riegel  <damien.riegel@gmail.com>  (4c6539a88f0a)

	* mbox.c, mx.c, mx.h: add mbox_commit_message function

	Move mbox operations that were done in mx_commit_message to a
	dedicated mbox_commit_message function.

2016-06-18 13:36 -0700  Damien Riegel  <damien.riegel@gmail.com>  (16bfe31ef8b3)

	* imap/imap.h, imap/message.c, mx.c: add imap_commit_message function

	Move IMAP operations that were done in mx_commit_message to a
	dedicated imap_commit_message function.

2016-06-18 13:36 -0700  Damien Riegel  <damien.riegel@gmail.com>  (37140981e746)

	* mh.c, mx.c, mx.h: add maildir_commit_message function

	This commit adds a maildir_commit_message with a prototype
	consistent with other kind of mailboxes, to simplify upcoming
	refactoring.

2016-06-18 13:36 -0700  Damien Riegel  <damien.riegel@gmail.com>  (93d4169b0886)

	* mh.c, mx.c, mx.h: prepend maildir_commit_message function name with
	an underscore

	Basically, rename maildir_commit_message to _maildir_commit_message.
	This commit is preparatory to make the maildir_commit_message symbol
	available for further use.

	Symbols starting with underscore should be avoided but this one is
	long enough to prevent collision.

2016-06-18 13:36 -0700  Damien Riegel  <damien.riegel@gmail.com>  (e5d87ebe0f5b)

	* mh.c, mx.c, mx.h: remove unused HEADER parameter in
	mh_commit_message

	mh_commit_message is only called in one place with the header
	parameter set to NULL. To make the commit function consistent with
	other mailboxes, which only takes ctx and msg as parameters, remove
	this unused parameter.

2016-06-18 12:41 -0700  Damien Riegel  <damien.riegel@gmail.com>  (ce2e5caf4339)

	* imap/imap.c, imap/imap_private.h, imap/message.c, mbox.c, mh.c,
	mutt.h, mx.c, pop.c: add close_msg to struct mx_ops

2016-06-18 12:41 -0700  Damien Riegel  <damien.riegel@gmail.com>  (4bab14a24dbe)

	* mailbox.h, mx.c: Remove magic member in MESSAGE structure

	The "magic" was copied from the context to the message structure to
	be able to determine which close function had to be called in
	mx_close_message. Now that this function is context aware, there is
	no need to store the magic in the MESSAGE structure and it can be
	safely removed.

2016-06-18 12:41 -0700  Damien Riegel  <damien.riegel@gmail.com>  (3ec6c133641c)

	* attach.c, commands.c, copy.c, editmsg.c, mailbox.h, mh.c, mx.c,
	parse.c, pattern.c, pop.c, postpone.c, recvattach.c, sendlib.c: pass
	context in mx_close_message

	The mx_close_message is one of the few mx_* functions that don't
	have a context as parameter. To make them more consistent, pass the
	context.

2016-06-17 19:01 -0700  Damien Riegel  <damien.riegel@gmail.com>  (70eb7e0dbb58)

	* imap/imap.c, imap/imap.h, imap/imap_private.h, imap/message.c,
	mbox.c, mh.c, mutt.h, mx.c, pop.c, pop.h: Add open_msg to struct
	mx_ops

	Add the callback to open an existing message to struct mx_ops. For
	mbox, mmdf, maildir, and mh, the code was implemented directly into
	mx_open_message, so it is moved in their respective source files.
	For imap and pop, there were already <mailbox>_fetch_message
	functions, but their argument order has been changed to pass the
	context as a first argument.

2016-06-17 10:33 -0700  Olaf Hering  <olaf@aepfle.de>  (d83239fd794a)

	* browser.c, browser.h: folder_file: remove struct stat

	Add and use new flag to indicate the folder is on local filesystem.
	Add and use new gid, uid and nlink member. Use existing ->mode
	member instead of stat->st_mode. Use existing ->size member instead
	of stat->st_size. Use existing ->mtime member instead of
	stat->st_mtime. Remove struct stat, the used values were already
	duplicated in the struct. This reduces memory usage.

2016-06-17 10:33 -0700  Olaf Hering  <olaf@aepfle.de>  (8e671bbe094d)

	* regex.c: Add real prototype for re_match_2_internal in regex.c

	Fixes compilation warning with -Wunprototyped-calls

2016-06-17 10:30 -0700  Kevin McCarthy  <kevin@8t8.us>  (5817d3d93b7a)

	* buffy.c, buffy.h, mh.c, mx.h: Combine the basic and extended buffy
	functions.

	Add a check_stats parameter to the mbox, maildir, and mh buffy
	functions. Use that parameter to determine whether to also count
	total, new, and flagged messages.

	This makes the functions a bit more complicated, but improves
	efficiency (for maildir and mh).

	Also includes the following cleanup/fixes:
	* Move the orig-value counter reset to the beginnining of the loop,
	(before tmp->new is set to 0).

	* Change trashed maildir messages to not be counted in msg_count

	* Remove an incorrect setting of mailbox->new based on msg_count in
	maildir. (I missed this one for 1f840760e6e0)

	* Change mbox to use the context->mtime for stats_last_checked,
	removing a race condition.

	* Fix mh to actually count the messages in order to generate
	msg_count. mh_sequences only covers the range of messages with some
	sort of flag.

2016-06-15 11:09 +0200  Vincent Lefevre  <vincent@vinc17.net>  (c29c521eec0a)

	* po/fr.po: Updated French translation.

2016-06-14 13:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (5ad82360c6ea)

	* imap/imap.c: Reset buffy->new for the current mailbox in IMAP.

	1f840760e6e0 moved the buffy->new reset inside the STATUS processor.
	Since the current mailbox is not STATUS'ed, it needs to be reset in
	imap_buffy_check().

	Thanks to Aaron Schrab for reporting this issue (and for helping
	test tip).

2016-06-12 13:49 -0700  Kevin McCarthy  <kevin@8t8.us>  (f447c67f511b)

	* OPS.MIX, OPS.SIDEBAR: Fix the case of messages in OPS.MIX and
	OPS.SIDEBAR

	Thanks to Vincent Lefèvre for spotting the discrepancy.

2016-06-07 15:02 -0700  Kevin McCarthy  <kevin@8t8.us>  (1f840760e6e0)

	* buffy.c, buffy.h, contrib/sample.muttrc-sidebar,
	doc/manual.xml.head, globals.h, imap/command.c, imap/imap.c,
	imap/imap.h, init.h, mailbox.h, mbox.c, mh.c, mutt.h, mx.c, mx.h,
	sidebar.c, sidebar.h: Make extended buffy independent of the
	sidebar.

	Add new boolean option $mail_check_stats (default off) and
	$mail_check_stats_interval. The first turns extended buffy on. The
	second sets the amount of time in between extended buffy checks
	(defaulting to 60 seconds).

	Remove the option $sidebar_refresh_time.

	Change mutt_buffy_check() to only notify the sidebar to redraw if a
	mailbox buffy value changes.

	Remove the #ifdefs around the extended buffy functions. The next
	patch will merge these functions with the basic functions and pass a
	parameter instead.

	Imap is a special case, because it sends out the status in one
	batch. Change this to perform the comparisons inside
	cmd_parse_status() and flag the sidebar there. It was previously
	directly assigning the status counters (unsigned int) to the
	buffy->new (short). Change this to assign 1/0.

2016-06-08 14:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (4be8b077c81f)

	* doc/manual.xml.head, init.h: Change the default for sidebar_format
	to use %n.

	The next series of patches is going to create a new option,
	$mail_check_stats defaulting off. When off, the extended buffy which
	calculates total/new/flagged messages won't be run. To help reduce
	"sidebar is broken" bug reports, this changes the default format to
	something not requiring extended buffy.

	The previous default is documented in the option and preserved in
	the sample sidebar muttrc in contrib.

2016-06-08 13:16 -0700  Kevin McCarthy  <kevin@8t8.us>  (594137a8ea12)

	* init.h, sidebar.c: Add sidebar_format flag '%n' to display 'N' on
	new mail.

2016-06-11 17:59 +0200  Vincent Lefevre  <vincent@vinc17.net>  (123e36398eea)

	* po/fr.po: Updated French translation.

2016-06-09 12:06 -0700  Richard Russon  <rich@flatcap.org>  (93c4ae03689e)

	* compose.c: Fix alignment in the compose menu.

	Several of the compose-panel labels didn't use the TITLE_FMT to
	align themselves. This causes formatting problems when the width is
	changed, e.g. by the NNTP patch.

2016-06-08 13:28 +0200  Vincent Lefevre  <vincent@vinc17.net>  (1fad3bfd4aab)

	* Makefile.am: Corrected OPS.SIDEBAR filename in EXTRA_DIST.

2016-06-07 13:40 -0700  Richard Russon  <rich@flatcap.org>  (fc33b34d637b)

	* sidebar.c: Setting $sidebar_width to more than 128 would cause bad
	things to happen.

	First, give the users more than enough space. Second, don't pad out
	short strings beyond the buffer

	--- sidebar.c | 11 ++++++----- 1 file changed, 6 insertions(+), 5
	deletions(-)

2016-06-07 13:27 -0700  Kevin McCarthy  <kevin@8t8.us>  (9937540dab42)

	* commands.c, hdrline.c, pager.c, protos.h, status.c: Fix columns used
	for $status_format and $pager_format in the pager.

	The code was hardcoding use of MuttIndexWindow->cols in
	mutt_make_string_info() and MuttStatusWindow->cols in
	menu_status_line().

	Add a parameter to mutt_make_info_string(). Change
	menu_status_line() to use menu->statuswin->cols, falling back to
	MuttStatusWindow if no menu is passed in.

	Set menu->statuswin appropriately inside pager.c.

	Thanks to Richard Russon for tracking down this problem, and for the
	initial patch.

2016-06-05 18:30 -0700  Kevin McCarthy  <kevin@8t8.us>  (5270cd795043)

	* doc/makedoc.c: Add warning in makedoc for unexpected prefices. (see
	#3845)

	In case other types get renamed again in the future, add a warning
	message to makedoc.c.

2016-06-05 18:05 -0700  Kevin McCarthy  <kevin@8t8.us>  (91608dca6f12)

	* mx.c: Fix sidebar buffy stats updating on mailbox close.

	Move the mutt_sb_set_buffystats() call from mx_fastclose_mailbox()
	to the bottom of mx_close_mailbox(). Append-only mailboxes don't
	have msgcount set, so fastclose was the wrong place to be doing
	these updates.

2016-06-04 11:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (8e342d73159b)

	* buffy.c, mh.c: Start to fix sidebar buffy modifications.

	The extended buffy for mh had incorrect placement of the loop
	brackets. The counters weren't being incremented in the loop.

	Fix extended buffy for maildir to count a maildir message as new if
	it doesn't have the info delimeter.

	Remove shortcircuits added to the basic buffy stating there is new
	mail when (msg_unread > 0). This is not necessarily true, depending
	on $mail_check_recent.

	Note: the extended buffy still needs more fixes, which will be done
	when it is refactored into its own option.

2016-06-04 11:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (5d117fd810a9)

	* sidebar.c: Various fixes to the sidebar logic.

	Use strfcpy instead of strncpy. The current logic could write past
	the end of the buffer.

	Don't mess with BUFFY next pointers during removal. The
	mutt_parse_mailboxes() is fine, but this is still not something that
	should be done inside sidebar.c.

	On removal, set next->prev since we can.

	Fix unmailboxes logic:
	  * only fix the prev pointers once.
	  * if we unmailbox the open mailbox, set it to NULL.

	Lastly, flag a redraw on mailboxes/unmailboxes.

2016-06-04 11:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (b542812c262e)

	* buffy.c, curs_main.c, main.c, menu.c, mx.c, pager.c, sidebar.c,
	sidebar.h: Add "mutt_" prefix to global sidebar functions.

	Also, remove unused sb_init declaration.

2016-06-04 11:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (cb23ed20d035)

	* doc/manual.xml.head, init.h: Clean up the sidebar manual.

	Remove the introduction section. It's a nice effort, but reads more
	like a tutorial than something that belongs in section 2. Will
	probably put in on the website instead.

	Remove references to a "patch", neomutt, and the history.

	Remove the sample muttrc from the manual.

	Fix validation errors for the documentation.

2016-06-04 11:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (517d4f0debab)

	* sidebar.c: Re-indent and style sidebar.c.

2016-06-04 11:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (39639dc7e9e7)

	* sidebar.c: Fix sidebar check_sec.sh warnings.

	Use safe_malloc, FREE, and the safe_strcat functions.

2016-06-04 11:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (08f9ba9efab9)

	* Makefile.am, buffy.c, configure.ac, curs_main.c, flags.c, globals.h,
	keymap.c, menu.c, mutt_menu.h, pager.c, sidebar.c: Sidebar clean up:
	building and drawing logic.

	Fix the autoconf/makefile.am changes to be consistent.

	Create a global SidebarNeedsRedraw to indicate a redraw is needed,
	instead of putting sb_draw() everywhere in the code.

	Create a menu_redraw_sidebar() function and use the REDRAW_SIDEBAR
	flag instead of piggy-backing it inside the index loop.

	Fix curs_main.c and pager.c to be a bit cleaner by using the global
	and REDRAW_SIDEBAR.

	Start to clean up some of the buffy code, but this needs to
	refactored and fixed.

2016-06-04 11:31 -0700  Richard Russon  <rich@flatcap.org>  (8ad6090903db)

	* Makefile.am, OPS.SIDEBAR, buffy.c, buffy.h, color.c, configure.ac,
	contrib/sample.muttrc-sidebar, contrib/sample.vimrc-sidebar,
	curs_main.c, doc/manual.xml.head, flags.c, functions.h, globals.h,
	imap/command.c, imap/imap.c, init.c, init.h, keymap.c, mailbox.h,
	main.c, mbox.c, menu.c, mh.c, mutt.h, mutt_curses.h, mutt_menu.h,
	mx.c, mx.h, pager.c, sidebar.c, sidebar.h, sort.h: Add neomutt
	version of sidebar patch. (closes #3829)

	This is the patch from neomutt; branch 'devel/win-sidebar'; commit
	c796fa85f9cacefb69b8f7d8545fc9ba71674180 with the following changes:

	 - move the sample muttrc and vimrc to contrib.
	  - remove the README.sidebar.
	  - empty out the PATCHES file.

2016-05-31 13:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (52f48b083cc0)

	* doc/makedoc.c: Fix documentation for DT_MAGIC types. (closes #3845)

	With the rename of M_ to MUTT_, the documentation generator in
	makedoc.c needed to be adjusted for the new prefix size.

	Thanks to Damien Riegel for the suggested fix.

2016-05-26 14:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (cd316a555bd7)

	* copy.h, group.h, mailbox.h, mutt.h, mutt_curses.h, pager.h: Fix
	header file indentation after M_ prefix renaming.

	The use of tabs caused misalignment of various macro definitions.

2016-05-26 14:05 -0700  Damien Riegel  <damien@riegel.io>  (2821e77c1a54)

	* imap/imap.c, imap/imap.h, mbox.c, mh.c, mutt.h, mx.c, mx.h, pop.c,
	pop.h: add check operation to struct mx_ops

	In mx_check_mailbox switch case, we simply call
	<mailbox>_check_mailbox, so this operation can be move into the
	mx_ops structure pretty easily.

	This commit adds a mandatory "check" operation to struct mx_ops and
	change all mailboxes to use it. Check functions are made static as
	they are only used in their respective source files now.

2016-05-26 14:05 -0700  Damien Riegel  <damien@riegel.io>  (a28ed1c725c6)

	* curs_main.c, mailbox.h, mx.c: mx_check_mailbox: remove lock argument
	in function call

	This function is only called in one place with lock = 0. Basically,
	all code under if (lock) is dead code, so we can remove it, making
	the function simpler to factorize.

2016-05-26 14:05 -0700  Damien Riegel  <damien@riegel.io>  (0ae29df8a81a)

	* imap/imap.c, imap/imap.h, mx.c: add function
	imap_check_mailbox_reopen

	In mx_check_mailbox, imap mailbox is the only function with a
	different prototype: it has an extra force argument.

	In order to move the check operation to the mx_ops structure, we
	need that all mailboxes have the same prototype. To do so, a new
	function imap_check_mailbox_reopen is added.

2016-05-25 15:58 -0700  Kevin McCarthy  <kevin@8t8.us>  (261939e71d80)

	* mx.c: Add a TODO to mx_open_new_message() to use mx_ops in the
	future.

	We can't use it until mx_open_mailbox_append() is converted to set
	mx_ops.

2016-05-25 15:53 -0700  Damien Riegel  <damien@riegel.io>  (63cb99b46c34)

	* imap/imap.c, mailbox.h, mbox.c, mh.c, mutt.h, mx.c, mx.h: add
	open_new_msg operation to struct mx_ops

	The code was already using a function pointer to do this operation.
	This commit moves this function pointer to the mx_ops structure and
	the open_new_message functions to their respective source files if
	it needs to.

2016-05-24 12:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (79c379cb0c21)

	* keymap.c: merge stable

2016-05-12 12:41 -0700  Damien Riegel  <damien.riegel@gmail.com>  (ae203b2c56a6)

	* imap/imap.c, imap/imap.h, mbox.c, mh.c, mutt.h, mx.c, mx.h, pop.c,
	pop.h: Start decoupling mailbox operations.

	Introduce a dedicated structure for mailbox operations: struct
	mx_ops. Move the open and close operations into that structure.

	Assign this structure to the context in mx_open_mailbox. This is
	currently based on the "magic" for the mailbox type, but may be
	refactored in the future.

	Add a stub mbox_close_mailbox function. This function does nothing,
	the main purpose is to introduce a mx_ops structure for mbox, so its
	usage is similar to mh/imap/pop. We reuse the name that was made
	available by the previous commmit. Note that the actual closing of
	the descriptor is done in mx.c.

	To be more consistent with other mailboxes, introduce functions
	mh_open_mailbox and maildir_open_mailbox, and create a dedicated
	structure for mmdf.

2016-05-12 12:41 -0700  Damien Riegel  <damien.riegel@gmail.com>  (6356f1068fe2)

	* mbox.c, mx.c, mx.h: rename mbox_close_mailbox to
	mx_close_mailbox_append and move it

	mbox_close_mailbox was used as the counterpart of
	mx_open_mailbox_append. To make things clearer, rename it
	mx_close_mailbox_append.

	As it is only used in mx.c, move it there and make it static.

2016-05-10 09:42 -0700  Kevin McCarthy  <kevin@8t8.us>  (391492f27fef)

	* doc/manual.xml.head, filter.c: Set COLUMNS to MuttIndexWindow->cols
	in mutt_create_filter_fd. (closes #3837)

	This allows filters to automatically (or via a command line
	argument) adjust to the width of the pager/index. This is even more
	important with the sidebar, since the width of the pager is smaller
	than the terminal width.

	Thanks to Vincent Lefèvre for his helpful information and
	suggestions, and to Richard Russon for the initial patches.

2016-05-09 14:06 -0700  Kevin McCarthy  <kevin@8t8.us>  (d18cd04e3f5a)

	* Makefile.am, getdomain.c, mutt_sasl.c, mutt_socket.c, mutt_tunnel.c,
	sys_socket.h: Back out wrapper sys_socket.h workaround
	(23334e967dd7)

	After renaming all internal macros from M_* to MUTT_*, the
	sys_socket.h workaround is no longer necessary.

2016-05-09 14:06 -0700  Derek Martin  <code@pizzashack.org>  (59b77d5c73e0)

	* account.c, account.h, addrbook.c, alias.c, attach.c, browser.c,
	buffy.c, buffy.h, charset.c, charset.h, color.c, commands.c,
	compose.c, copy.c, copy.h, crypt-gpgme.c, crypt.c, curs_lib.c,
	curs_main.c, doc/makedoc.c, editmsg.c, enter.c, flags.c,
	functions.h, group.h, handler.c, hcache.c, hcache.h, hdrline.c,
	help.c, hook.c, imap/browse.c, imap/command.c, imap/imap.c,
	imap/imap_private.h, imap/message.c, imap/util.c, init.c, init.h,
	keymap.c, lib.c, lib.h, mailbox.h, main.c, mbox.c, menu.c, mh.c,
	mutt.h, mutt_curses.h, mutt_menu.h, mutt_sasl.c, mutt_socket.c,
	mutt_socket.h, mutt_ssl.c, mutt_ssl_gnutls.c, muttlib.c, mx.c, mx.h,
	pager.c, pager.h, parse.c, pattern.c, pgp.c, pgpinvoke.c, pgpkey.c,
	pop.c, pop_auth.c, pop_lib.c, postpone.c, protos.h, query.c,
	recvattach.c, recvcmd.c, remailer.c, rfc1524.c, rfc2047.c,
	rfc2231.c, rfc3676.c, score.c, send.c, sendlib.c, smime.c, smtp.c,
	status.c, system.c, thread.c: Change M_* symbols to MUTT_*

	Changeset 23334e967dd7 created a workaround for a namespace conflict
	with Solaris and derivatives. After some discussion, the team
	decided it would be best to move away from using the "M_" prefix for
	macros.

	This patch was automatically generated by running: perl -wpi -e
	's/\bM_(\w+)\b/MUTT_$1/g' `find . -name '*.[ch]' -print` with the
	exception that sys_socket.h was exempted. (That file will be backed
	out subsequent to this commit.)

	Thanks to Andras Salamon for supplying the perl script used to make
	this change.

2016-05-03 13:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (b74dfb9fa901)

	* mbyte.c, pager.c: Skip bidi markers in the pager and index. (closes
	#3827)

	Curses and slang don't support them, so there's little point in
	showing them or attempting to somehow deal with them.

	This patch adds filtering in the pager, and changes the filtering
	added in 6e0aca94cdb0 for the index to completely skip the marker.

2016-05-03 09:46 -0700  Kevin McCarthy  <kevin@8t8.us>  (9dfe211355b6)

	* curs_lib.c: Change mutt_window_getyx() to accept NULL *y/*x params.

	Thanks to Vincent Lefèvre for suggesting this nice cleanup.
	Previously, _mutt_get_field() was employing an ugly hack to avoid an
	unused var warning.

2016-04-30 14:39 -0700  Kevin McCarthy  <kevin@8t8.us>  (fb68199318ae)

	* po/fr.po: merge stable

2016-04-30 13:05 -0700  Kevin McCarthy  <kevin@8t8.us>  (e1cec1a958e9)

	* pager.c: Fix pager mini-index drawing when $pager_index_lines = 1
	and $status_on_top.

	When $pager_index_lines is 1, there is room for the index status
	line, but not for any actual index entries. The index redraw part
	was always calling menu_redraw_current() which doesn't actually
	check if there is room for the current row.

	This bug only shows up with $status_on_top, due to the order things
	are redrawn.

2016-04-30 10:50 -0700  Kevin McCarthy  <kevin@8t8.us>  (d0746905cb3f)

	* pager.c: Fix pager layout when $status_on_top with no mini-index.
	(closes #3836)

	The pager_window->row_offset should only be adjusted when we have a
	mini-index.

	Pull common window initialization above, and adjust only when the
	mini-index is enabled. The pager_window rows and row_offset code
	could be further consolidated (since the status line is always a
	height of one), but I think the code reads a bit more clearly when
	the adjustments are explicitly stated.

2016-04-29 18:00 -0700  Kevin McCarthy  <kevin@8t8.us>  (e369be9d490b)

	* pager.c: Remove newline insertion from pager. (closes #3835)

	The window patches commited now manually move to the next line, so
	there is no need to insert newlines for that purpose.

	The newlines also goof windows placed to the right of the pager, as
	is the case for the (currently external) sidebar-on-the-right
	functionality.

	Thanks to Richard Russon for the original patch and help testing the
	revised patch.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (efa6f7910c94)

	* addrbook.c, browser.c, compose.c, crypt-gpgme.c, hdrline.c,
	muttlib.c, pgpinvoke.c, pgpkey.c, protos.h, query.c, recvattach.c,
	remailer.c, smime.c, status.c: Add cols parameter to
	mutt_FormatString()

	Continuing with the conversion to using windows for screen drawing,
	mutt_FormatString() was directly using COLS for right justification
	and similar formatting. Instead pass in a parameter, cols.

	This change involved seeding the parameter through callback
	functions too, as many of them call mutt_FormatString() back.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (04f1846c56c1)

	* buffy.c, commands.c, flags.c, handler.c, help.c, init.c, keymap.c,
	mutt_curses.h, muttlib.c, recvattach.c, recvcmd.c, sendlib.c: Fix
	remaining direct usages of COLS/LINES to use mutt window functions.

	Most of these were just message update/clearing.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (9f9bcde2d0ff)

	* remailer.c: Change remailer to use mutt windows.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (8ad6164d9fe4)

	* edit.c: Modify the built-in editor to use windows.

	This only involved changing to use the MuttMessageWindow.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (0989f9d01b5c)

	* compose.c: Modify the compose screen to use windows.

	The header field positions enum is now started at 0: the windows
	compute the relative positioning as needed. A small improvement from
	this is that the headers now align with the top: there isn't a gap
	if $help is turned off.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (fd3fe386c24a)

	* copy.c, mutt_curses.h, pager.c, rfc3676.c: Modify the pager to use
	windows.

	The pager view is somewhat complex, due to the "mini-index" and the
	positioning of the index_status vs pager_status changes depending on
	$status_on_top as well as $pager_index_lines and $help.

	To make things simpler, it creates four "pager windows":
	index_status_window, index_window, pager_status_window,
	pager_window.

	mutt_term_width() is renamed to mutt_window_wrap_cols() and a
	mutt_window_t parameter passed in.

	Also, the pager drawing loop calling display_line() has a
	mutt_window_move() added to move to the beginning of the next line
	each time. This is in case the pager_window isn't flush with the
	left side of the terminal.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (4e20ab8ebf42)

	* curs_main.c: Modify the index to use windows.

	Change the index screen to use MuttIndexWindow and MuttStatusWindow.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (1b8abb069c37)

	* curs_lib.c, edit.c, enter.c, protos.h: Modify enter.c routines to
	use windows.

	This modifies the mutt_enter_string() functions to use
	MuttMessageWindow.

	Thanks to Richard Russon for pointing out slang doesn't support
	getcurx.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (47e9732b3a3c)

	* curs_lib.c: Modify the curs_lib.c to use windows.

	This changes some of the "prompting" routines to use the
	MuttMessageWindow.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (48676eb3e400)

	* menu.c, mutt_curses.h, mutt_menu.h: Modify the menu code to use
	windows.

	Change menu.c to use the mutt_window_t structures and functions. The
	index/stats/help/message window pointers are stored inside the
	menu_t. This is useful for the pager, where the "index" we want to
	use is a mini-index.

2016-04-27 17:56 -0700  Kevin McCarthy  <kevin@8t8.us>  (ac4f746e614f)

	* curs_lib.c, init.c, init.h, main.c, mutt_curses.h, resize.c: Add
	window structures to use for screen layout.

	This is a series of 11 patches, centralizing Mutt screen drawing
	inside windows (mutt_window_t structures).

	Currently, the screen drawing and cursor positioning logic is
	distributed all over the code, resulting in many files having the
	same logic of where the help, status, message windows are.
	Additionally, the code directly uses move and mvadd*/mvprint*
	functions, which means if the layouts are changed, the row/column
	computation logic needs to be changed all over the place.

	The patch creates a (very simple) mutt_window_t structure and
	functions for moving, addch/str/printw, along with clearing the
	line. The windows keep track of where they are on the screen,
	allowing the Mutt code to simply position elements relative to the
	window.

	During curses initalization, and when the window is resized, the
	window sizes and positions and recomputed. Also, a new option flags,
	R_REFLOW is added for options that need to force a reflow when they
	are changed.

	Thanks to Richard Russon for pointing out the slang compilation
	issue.

2016-04-27 13:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (8083387557d9)

	* merge stable

2016-04-14 12:35 -0700  Kevin McCarthy  <kevin@8t8.us>  (9a9c515e09d3)

	* muttlib.c: Fix soft-padding available columns computation.

	If arrow_cursor is set, it's possible that COLS < offset. Compute
	avail_cols, floored at 0, and use that instead.

2016-04-14 12:35 -0700  Kevin McCarthy  <kevin@8t8.us>  (ca1af57e1855)

	* muttlib.c: Fix right justify buffer-truncated pad calculation in
	mutt_FormatString()

	Vincent Lefèvre noted that the computation had implementation
	defined behavior and was potentially incorrect.

	Change to make sure the subtraction won't lead to a wrap-around, and
	set pad to 0 in that case.

2016-04-14 12:35 -0700  Kevin McCarthy  <kevin@8t8.us>  (92bbc02fdf9c)

	* muttlib.c: Pre-space softfill multi-column padding.

	Similar to the previous patch, this deals with multi-column padding
	characters and soft-fill. This will add spacing so the padding and
	content after padding aligns with the right side.

	You can see the effect by setting set index_format="%s %*我[ooooo]"
	and resizing the terminal. The right hand side will be jagged
	without the patch.

2016-04-14 12:35 -0700  Kevin McCarthy  <kevin@8t8.us>  (fef5b5ed0f44)

	* muttlib.c: Add spacing to truncated multi-column characters when
	using soft-fill.

	First, fix the left-hand side column truncation calculation: "col +
	pad*pw -offset" pad = (COLS - col - wid) / pw, so this becomes "col
	+ COLS - col - wid - offset" => "COLS - wid - offset"

	The problem is that pad was calculated *before* the right side was
	mutt_wstr_trunc() truncated, which may adjust wid! We want that
	calculation, with correct values, so instead just use the final
	reduction directly. (Note, the reduction ignores integer truncation,
	but pad shouldn't be used here in any case, because it's negative:
	there is no padding occuring).

	Second, when the left-hand side is truncated, multi-column
	characters may get chopped in the middle. Truncated characters are
	not included in the wlen and col values returned. Add spaces until
	the number of columns lines up (checking to make sure we don't run
	out of space too).

2016-04-11 12:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (eb94f64ad81a)

	* mutt_ssl.c: Add null-terminator to BIO_get_mem_data() output.

	It turns out the output isn't necessarily null-terminated.

2016-04-11 21:17 +0200  Vincent Lefevre  <vincent@vinc17.net>  (46f37be4afef)

	* po/fr.po: Updated French translation.

2016-04-11 11:55 -0700  Kevin McCarthy  <kevin@8t8.us>  (0b66f6fd3d44)

	* mutt_ssl.c: Add an error message and debugging if SSL_CTX_new()
	fails. (closes #3831)

	Generate a mutt_error(). Add a debugging function
	ssl_dprint_err_stack() to dprint the ssl error stack.

2016-04-11 11:28 +0200  Vincent Lefevre  <vincent@vinc17.net>  (78aa3a1db632)

	* po/fr.po: Updated French translation.

2016-04-10 19:10 -0700  Kevin McCarthy  <kevin@8t8.us>  (00c0c155d992)

	* mutt_ssl.c: Check for SSL_CTX_new returning NULL in ssl_sock_open().
	(closes #3831)

	Thanks to Yuan Kang and the security researchers at Columbia
	University and the University of Virginia for reporting the bug.

2016-04-10 18:30 -0700  Kevin McCarthy  <kevin@8t8.us>  (5464329344cd)

	* merge stable

2016-04-10 14:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (685b9dfba297)

	* imap/browse.c: Add error message string for imap_mailbox_rename() on
	root folder.

	This was fixed just before 1.6.0, but due to the string freeze,
	could not add an error message.

2016-04-08 18:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (b8240918eded)

	* rfc2047.c: Fix potential memory leak in rfc2047_encode. (closes
	#3825)

	If convert_string() has nonreversible characters, the allocated
	output buffer would be overwritten (and not freed) in
	rfc2047_encode().

	Thanks to Richard Russon for the bug report and initial patch, and
	to TAKAHASHI Tamotsu for the analysis and revised fix suggestion.

2016-04-08 15:27 -0700  Kevin McCarthy  <kevin@8t8.us>  (180a90d05ed4)

	* pager.c: Fix pager.c format_line() to use size_t for mbrtowc()
	retvals.

	While fixing up the error checking for mbrtowc(), I noticed the uses
	in pager.c format_line() were assigning the retval to an int.

	The cleanup for this was a little tricky, because it was making use
	of possible negative values for (k1 - k). The backspace detection
	loop condition was a bit heavy, so this patch first pulled the
	initialization and first call above, and put the second call inside
	the loop.

	Note that k1 previously included k, but this patch changes it to be
	just the retval of mbrtowc. This means the second mbrtowc()
	arguments are changed to include k, as is the ch increment at the
	bottom of the loop.

2016-04-08 15:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (a8bc75e7c4e1)

	* alias.c, curs_lib.c, help.c, pager.c: Reset mbstate for other
	mbrtowc() calls returning -1

	Continue the cleanup started in changesets c8c76a6a1e61 and
	a3450fd50d11. In those changesets, a bug was occurring due to the
	mbstate not being reset when mbrtowc() returned -1.

	This patch fixes other callers of mbrtowc() to reset mbstate when it
	returns -1.


2016-07-06 10:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (88793198dfcb)

	* po/fr.po: merge stable

2016-07-06 10:41 -0700  Kevin McCarthy  <kevin@8t8.us>  (88030069f94d)

	* .hgsigs: mutt-1.6.2 signed

2016-07-06 10:40 -0700  Kevin McCarthy  <kevin@8t8.us>  (592270259a8e)

	* .hgtags: Added tag mutt-1-6-2-rel for changeset 7ccd4417bd70

2016-07-06 10:40 -0700  Kevin McCarthy  <kevin@8t8.us>  (7ccd4417bd70)

	* ChangeLog, UPDATING, VERSION, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/eu.po, po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po,
	po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po: automatic post-release commit for
	mutt-1.6.2

2016-07-01 13:33 -0700  Kevin McCarthy  <kevin@8t8.us>  (7e817890913c)

	* send.c: Check $pgp_autoinline and $pgp_replyinline if oppenc is set.
	(closes #3846)

	The first oppenc call takes place after the initial checks of
	$pgp_autoline and $pgp_replyinline, and doesn't go through the pgp
	menu.

	Therefore, check for $pgp_autoline and $pgp_replyinline if oppenc is
	set too, to avoid oppenc enabling encryption without INLINE being
	set in those cases.

	a6a4d6ed0f19 previously cleaned things up so that it is safe to set
	INLINE even if encryption isn't enabled.

2016-05-24 12:08 -0700  Kevin McCarthy  <kevin@8t8.us>  (f1f1af650910)

	* keymap.c: Fix infinite loop when help is bound to a named key
	combination.

	Commit a07e8215a0ef introduced a bug in km_error_key, which is
	called when an unbound key is pressed.

	If help is bound to a sequence containing named keys (e.g. <esc>),
	the raw (untokenized) string would be pushed back into the unget
	buffer. This could lead to an infinite loop of unbound key presses
	triggering more unbound keys being put into the unget buffer.

	Change km_error_key to tokenize the string before putting it in the
	unget buffer.

	Much thanks to Jiri Bohac for his bug report, analysis, and initial
	patch!

2016-04-30 14:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (1ef1e39a7218)

	* ChangeLog, UPDATING, VERSION, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/eu.po, po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po,
	po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po: automatic post-release commit for
	mutt-1.6.1

2016-04-30 14:23 -0700  Kevin McCarthy  <kevin@8t8.us>  (2822cefa33d6)

	* .hgtags: Added tag mutt-1-6-1-rel for changeset 1ef1e39a7218

2016-04-30 14:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (e3bc23cbe3d1)

	* .hgsigs: mutt-1.6.1 signed

2016-04-27 13:08 -0700  Kevin McCarthy  <kevin@8t8.us>  (23334e967dd7)

	* Makefile.am, getdomain.c, mutt_sasl.c, mutt_socket.c, mutt_tunnel.c,
	sys_socket.h: Create a wrapper sys_socket.h to work around Solaris
	namespace issues. (closes #3833)

	Solaris includes "sys/stream.h" inside their "sys/socket.h". This
	include file adds many non-reserved macros to Mutt's namespace, two
	of which conflict with existing Mutt macros.

	The simplest fix would be to rename those macros in Mutt, however
	this will cause difficulty with out-of-tree patches. This fix
	creates a wrapper include file that preserves those existing macros
	and prevents the Solaris values from entering Mutt's namespace.

2016-04-10 16:02 -0700  Kevin McCarthy  <kevin@8t8.us>  (a6a4d6ed0f19)

	* crypt.c, send.c: Fix mutt_protect() when INLINE is set. (closes
	#3828)

	The oppenc changes allow security bits to be set even when not
	encrypting or signing (for instance, OPPENCRYPT and INLINE).

	mutt_protect() assumed that if INLINE is set, then either ENCRYPT or
	SIGN must also be set. Specifically, it would end up inline-signing
	the message even though neither was set.

	Ensure mutt_protect() is a noop if neither SIGN or ENCRYPT are set.

	In ci_send_message(), check for sign or encrypt before calling the
	crypt_get_keys() / mutt_protect() block, and also in the fcc section
	(since clear_content would be NULL if not).

	The second change to the fcc part is somewhat redundant, but better
	to be explicit and avoid the case where the subtype is somehow
	"encrypted" or "signed" even though msg->security wasn't set thus.

2016-04-05 14:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (f7db9cefd3b0)

	* Makefile.am, configure.ac, mutt_idna.h: Fix IDNA functions for
	systems without iconv.

	The IDNA changes for SMTPUTF8 support introduced a bug for systems
	without iconv. For those systems, the local<->intl functions would
	return an error due to the charset conversion failing.

	Change mutt_idna.c back to being conditionally compiled, but this
	time based on HAVE_ICONV. If there is no iconv, stub out the
	functions in mutt_idna.h.

2016-04-02 13:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (b983eb6c1a04)

	* merge default into stable

2016-04-02 11:55 -0700  Kevin McCarthy  <kevin@8t8.us>  (b81408b02cbb)

	* .hgsigs: mutt-1.6.0 signed

2016-04-02 11:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (349f9cb71427)

	* .hgtags: Added tag mutt-1-6-rel for changeset be82a2fde82f

2016-04-02 11:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (be82a2fde82f)

	* ChangeLog, UPDATING, VERSION, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/eu.po, po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po,
	po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po: automatic post-release commit for
	mutt-1.6.0

2016-04-01 09:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (503bd3a3c818)

	* Makefile.am: Fix hcversion.h generation error when using included
	gettext.

	When configuring mutt with --enable-hcache and
	--with-included-gettext, there is an automake ordering issue:
	BUILT_SOURCES are processed before SUBDIRS. Therefore, the
	'hcversion.h' target is run before the included gettext (intl) is
	built.

	The hcversion.h target runs the cpp over config.h and mutt.h, but
	mutt.h includes lib.h which tries to #include <libintl.h>.
	Unfortunately, libintl.h (in this configuration) is generated by the
	intl subdir build and so doesn't exist yet.

	While the build doesn't completely fail, the resulting hcversion.h
	is incorrect: it's just the md5sum of the initial value of
	BASEVERSION.

	This fix is somewhat of a hack but is cleaner than trying to change
	automake's behavior. It inserts a '#undef ENABLE_NLS' in between the
	config.h and mutt.h sent to the cpp. Since hcachever.sh is just
	scanning the data structures used by mutt, this shouldn't affect the
	hash generated.

	Thanks to Will Yardley for reporting this issue.

2016-03-30 13:16 -0700  Kevin McCarthy  <kevin@8t8.us>  (6e0aca94cdb0)

	* mbyte.c: Filter out bidi marks in rfc2047 and rfc2231 encoding. (see
	#3827)

	Filter out U+200F RIGHT-TO-LEFT MARK and U+200E LEFT-TO-RIGHT MARK
	in rfc2047 and 2231 encoded fields. GNU Screen has a bug that
	corrupts the display, and can cause the wrong email to appear to be
	selected in the index. Until screen fixes the issue, filter it out
	in mutt.

2016-03-29 14:07 -0700  Kevin McCarthy  <kevin@8t8.us>  (96b7714fef87)

	* doc/manual.xml.head: Fix documentation: mime_lookup (not mime-
	lookup).

2016-03-29 15:06 +0200  Vincent Lefevre  <vincent@vinc17.net>  (47aeb87ce9cd)

	* doc/manual.xml.head: Fix typo.

2016-03-26 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (62e478a3f1c8)

	* imap/imap.c: Fix error handling in sync_helper() and
	imap_sync_mailbox(). (closes #3817)

	This patch is based on the one Richard Russon found in the Fedora
	package.

	If an error occurs during one of the imap_exec() calls in
	imap_sync_mailbox(), the mailbox could end up being closed. This
	would cause idata->ctx to be NULL. Add a check in sync_helper() for
	the case where idata->ctx == NULL.

	In imap_sync_mailbox(), check the return value of sync_helper(). To
	keep the code simple, change rc from being the sum of the calls to
	the bitwise-OR of the calls. (We only need to know if a single flag
	needs to be updated, and bitwise-OR will detect negatives.)

	Below the calls to sync_helper(), if the call to imap_exec() fails,
	make sure rc is set to -1.

2016-03-26 13:30 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (0b1f1daba437)

	* po/ja.po: Updated Japanese translation.

2016-03-24 12:07 -0700  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (484b34e23f2a)

	* po/eo.po: Updated Esperanto translation.

2016-03-23 15:28 -0700  Kevin McCarthy  <kevin@8t8.us>  (55a389b96d0b)

	* imap/browse.c: Prevent renaming root folder in imap.

	The root folder results in mx.mbox being NULL, which causes a
	segfault. This can be triggered by entering a subfolder and trying
	to rename the ".." entry.

	Due to the translation string freeze, no visible error message is
	displayed. Add a TODO note about this for post-1.6 release.

2016-03-23 14:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (27cde0a2fe32)

	* imap/browse.c: Fix uninitialized prompt buffer in
	imap_mailbox_rename(). (closes #3819)

	This is a patch from OpenBSD to initialize the newname buffer in
	imap_mailbox_rename(). Previously it would generate random garbage
	in the prompt.

	This version of the patch initializes the prompt to the old mailbox
	name.

	Thanks to TAKAHASHI Tamotsu for finding this patch.

2016-03-23 13:17 -0700  Kevin McCarthy  <kevin@8t8.us>  (789500dae762)

	* doc/manual.xml.head: Add "-d" command-line option to manual. (closes
	#3816)

	Thanks to Richard Russon for finding this patch in the Fedora
	package.

2016-03-23 13:06 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net>  (180380cd9119)

	* po/ca.po: Updated Catalan translation.

2016-03-22 18:00 -0700  Kevin McCarthy  <kevin@8t8.us>  (a3450fd50d11)

	* curs_lib.c, protos.h: Clean up mutt_wstr_trunc() some more.

	* Change return type to size_t. The return value is the cumulation
	of values from mbrtowc(), which returns size_t. All callers already
	assign the return value to a size_t, requiring no external changes.

	* Change the local variables n, w, l, and cl to size_t. n is the
	strlen of the src parameter. l and cl are used for the return value.
	w is assigned to the *width parameter, which is size_t.

	 cw is kept as an int, because wcwidth returns type int.

	* Change error handling of mbrtowc to be the same as other functions
	in mutt: only reset mbstate when the retval==-1. When retvat==-2,
	set cl=n to break out of the loop. Also, set wc to replacement_char
	and allow the logic below to determine the width instead of
	hardcoding to 1.

2016-03-20 17:06 -0700  Karel Zak  <kzak@redhat.com>  (c8c76a6a1e61)

	* curs_lib.c: Improve error handling in mutt_wstr_trunc().

	This is Karel Zak's patch to fix handling of (illegal) multi-byte
	chars.

	 * mutt_wstr_trunc(): Reset mbstate after error in mbrtowc(). Set
	wc=0 if wcwidth returns < 0.

	Addresses: https://github.com/karelzak/mutt-kz/issues/58

	Thanks to Richard Russon for bringing this patch to our attention.

2016-03-22 12:35 -0700  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (b302f9868d78)

	* po/nl.po: Updated Dutch translation.

2016-03-21 01:31 +0100  Vincent Lefevre  <vincent@vinc17.net>  (b3703e907d83)

	* po/fr.po: Updated French translation.

2016-03-20 15:38 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (2a73a6e7c6e7)

	* po/ru.po: Updated Russian translation.

2016-03-20 15:36 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (b3504a7b6cc2)

	* po/uk.po: Updated Ukrainian translation.

2016-03-20 15:30 -0700  Morten Bo Johansen  <mbj@spamcop.net>  (1f8e728ac6af)

	* po/da.po: Updated Danish translation.

2016-03-19 17:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (7992020e522d)

	* sendlib.c: Turn off asserts in sendlib.c.

	The Doctor reported triggering an assertion in convert_file_to(),
	due to an unexpected errno from iconv(). According to the comments,
	the assertions were only enabled for debugging and should have been
	turned off. We certainly don't want to abort mutt for this case, so
	just disable them as the comment indicates.

2016-03-19 16:19 -0700  Petr Pisar  <petr.pisar@atlas.cz>  (36bf3b7ebd2c)

	* po/cs.po: Updated Czech translation.

2016-03-19 06:08 -0700  Kevin McCarthy  <kevin@8t8.us>  (36f855a4a2cc)

	* crypt-gpgme.c, init.c, mutt_ssl.c, pgp.c: Fix a few typos in
	translation messages.

	Thanks to Moritz Barsnick for reporting these.

2016-03-18 12:12 +0100  Vincent Lefevre  <vincent@vinc17.net>  (fb13f458ad16)

	* po/fr.po: Updated French translation.

2016-03-18 10:15 +0100  Vincent Lefevre  <vincent@vinc17.net>  (6630c196ecd8)

	* mutt_ssl.c: Fix typo in debug message.

2016-03-17 17:33 -0700  Richard Russon  <rich@flatcap.org>  (cbf073e5e0d7)

	* recvattach.c: Fix typo picked up by Debian's QA.

	This was allegedly fixed 5 years ago (see #3493).

2016-03-17 17:22 -0700  Richard Russon  <rich@flatcap.org>  (1fb2a924a7c0)

	* Makefile.am: Use '$(PACKAGE).pot' instead of 'mutt.pot' in
	Makefile.am

2016-03-17 17:12 -0700  Richard Russon  <rich@flatcap.org>  (80926cec6d41)

	* hcache.c, imap/auth_gss.c: Fix three build warnings when DEBUG isn't
	defined.

2016-03-16 14:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (cc1af19c0763)

	* hcache.c: Fix tcbdb error reporting to use ecode, not errno.

	After committing aff8d62ebddb and taking a closer look at the tcbdb
	documentation, I realized those functions don't set errno.

	Change the error handling messages to instead get the ecode and
	message using tcbdbecode() and tcbdberrmsg().

2016-03-16 13:33 -0700  Kevin McCarthy  <kevin@8t8.us>  (aff8d62ebddb)

	* hcache.c: Fix crash in hcache_open_tc() when open fails and debug is
	on. (closes #3813)

	When the hcache open fails, it was trying to dprint. The dprint had
	a %s where it was passing errno, leading to a crash in strlen.

	Unify the dprint messages for tcdbopen and tcdbclose to report the
	path, strerror, and errno.

	Thanks to Will Yardley for capturing the stack trace!

2016-03-15 18:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (29b254ac7c12)

	* mbox.c: Prevent ctx->fp from being closed twice in the event of an
	error.

	The previous patch from Vincent exposed a crash if ftruncate() fails
	in mbox_sync_mailbox(). Change fclose() to safe_fclose(), to avoid
	it being called twice.

2016-03-15 18:01 -0700  Vincent Lefevre  <vincent@vinc17.org>  (2a152212cd9a)

	* mbox.c: Check return value of ftruncate() in mbox_sync_mailbox().

	Generate an error in the event that ftruncate() fails.

2016-03-13 19:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (73c8c033e184)

	* init.h: Update the $hostname documentation.

	Change to reflect the updates in changeset ce71d168c819.

2016-03-13 18:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (ad14066bf6c1)

	* UPDATING: Update the UPDATING file for 1.6.0

2016-03-13 11:19 -0700  Kevin McCarthy  <kevin@8t8.us>  (90d0935c3142)

	* rfc2231.c: Fix RFC2231 continuation join order. (closes #3811)
	(closes #3741)

	The function generating a list of parts to join had incorrect
	sorting logic. It was comparing values, not attributes.
	Additionally, the order logic wasn't correct.

	Thanks to TAKAHASHI Tamotsu for pointing out the value vs attribute
	comparison bug.

2016-03-11 13:47 +0100  Vincent Lefevre  <vincent@vinc17.net>  (bd0e695f627e)

	* po/fr.po: Updated French translation.

2016-03-10 15:52 -0800  Kevin McCarthy  <kevin@8t8.us>  (b5f170446e14)

	* doc/manual.xml.head: Improve the mailto_allow documentation.

	Add to the commands list. Document unmailto_allow. Mention the new
	behavior in the Security Considerations section about mailto: links.

2016-03-10 14:59 -0800  Michael Elkins  <me@sigpipe.org>  (ad94dd58966b)

	* doc/manual.xml.head, doc/muttrc.man.head, globals.h, init.c, init.h,
	url.c: Restrict mailto header fields using mailto_allow.

	By default, only the body and subject fields are allowed. These can
	be changed with the mailto_allow and unmailto_allow commands.

2016-03-10 14:20 -0800  Kevin McCarthy  <kevin@8t8.us>  (b46ee6523400)

	* configure.ac: Check stat return value in configure.ac. (closes
	#3810)

2016-03-08 15:57 -0800  Kevin McCarthy  <kevin@8t8.us>  (d07d2e9f1e34)

	* init.h, main.c, mutt.h: Add $resume_edited_draft_files option.

	This adds an extra header when saving edited draft files (-E -H on
	the command line). With this header, the next time they are edited,
	they are automatically "resumed" (by setting $resume_draft_files).

	The idea is to prevent multiple user-defined headers and signatures
	from being added to the draft message by avoiding processing it as a
	brand new message after the first time.

2016-03-08 15:57 -0800  Kevin McCarthy  <kevin@8t8.us>  (24b4f14e9538)

	* init.h, mutt.h, send.c: Add $resume_draft_files option.

	When set, draft files are processed the same as when resuming
	postponed messages. One use of this option is to avoid multiple
	user-defined headers and signatures being added to the message.
	(e.g. when -E is used repeatedly on the draft files).

2016-03-08 13:12 -0800  Derek Martin  <code@pizzashack.org>  (ce71d168c819)

	* getdomain.c, init.c: Improve method of determining FQDN. (closes
	#3298)

	Rather than reading /etc/resolv.conf, use gethostname() and
	getaddrinfo() to get the canonical domain.

	Thanks to Vincent Lefèvre for the memory leak fix.

2016-03-02 15:08 -0800  Kevin McCarthy  <kevin@8t8.us>  (8e77637a1a69)

	* init.h: Document that GPGME doesn't support creating inline PGP
	messages.

2016-03-02 15:08 -0800  Kevin McCarthy  <kevin@8t8.us>  (6034900d1636)

	* crypt-gpgme.c: Add hard redraw for the gpgme application/pgp
	handler.

	Will Yardley reported display artifacts and keyboard issues after
	decrypting a traditional pgp message using gpgme. It turns out the
	gpgpme code path was missing a hard_redraw() to repaint the screen
	after pinentry.

2016-02-28 19:42 -0800  Kevin McCarthy  <kevin@8t8.us>  (d11b6776532f)

	* main.c, mutt.h, send.c: Draft file tweeks: rename flag, don't auto-
	abort on no change.

	Rename the flag to SENDDRAFTFILE since it will be used in contexts
	other than the body allocation.

	Don't automatically abort if the message was unchanged; it seems
	possible the draft files could be used as the entire message reply.

2016-02-15 19:44 -0800  Kevin McCarthy  <kevin@8t8.us>  (909cf6dd067c)

	* contrib/gpg.rc, crypt-gpgme.c, globals.h, init.h, pgp.c: Add
	$pgp_decryption_okay to verify multipart/encrypted are actually
	encrypted. (closes #3770)

	In pgp classic mode, if the $pgp_decrypt_command generated output,
	it assumed the content was encrypted. However, gpg will generate
	output even if the block is simply signed and armored text. The
	problem is that mutt was then printing mime headers labelling the
	output as encrypted text in the ui.

	Add a new option, and suggested value of: set
	pgp_decryption_okay="^\\[GNUPG:\\] DECRYPTION_OKAY" If set, the
	output from the decrypt command will be scanned for this regexp to
	confirm an actual decryption occurred.

	Note that gpgme already correctly rejects this form of spoofed
	message.

2016-02-11 15:12 -0800  Kevin McCarthy  <kevin@8t8.us>  (b55c6a64a07b)

	* crypt-gpgme.c: Update the status message after decryption using
	gpgpme.

	Change gpgme to behave the same as classic pgp mode: after a
	decryption, update the status message to overwrite the initial
	"Invoking PGP..." message.

2016-02-11 02:15 +0100  Vincent Lefevre  <vincent@vinc17.net>  (3b59ef2bf032)

	* po/fr.po: Updated French translation.

2016-02-07 10:15 -0800  Kevin McCarthy  <kevin@8t8.us>  (87c46e1f6f8c)

	* postpone.c: Fix pgp and smime decryption in mutt_prepare_template().

	Change the "combined" multipart decryption block to only work for
	pgp, since mutt_is_multipart_encrypted() currently only checks for
	pgp headers and it therefore only worked for pgp in the first place.

	Fix the newhdr->security to be based on what that function returns,
	instead of the "context" hdr passed in.

	Add a smime decryption block below when iterating through the
	content.

	Fix the application/pgp decryption block to assign to hdr->security
	using the type of the app/pgp part instead of hdr->content.

2016-02-07 10:15 -0800  Kevin McCarthy  <kevin@8t8.us>  (a4d885bb36ab)

	* compose.c, doc/manual.xml.head, doc/mutt.man, main.c, mutt.h,
	protos.h, send.c: Add new flag -E to modify draft/include file.
	(closes #3799)

	Specifying -E with -i will cause mutt to directly edit the include
	file.

	Specifying -E with -H will cause the draft file to be regenerated
	from the latest version of the email on exit.

	Improve -H so that it will read (and write) multipart messages.

2016-01-26 13:46 -0800  Kevin McCarthy  <kevin@8t8.us>  (e8f7a08cb7ac)

	* doc/manual.xml.head: Mention <what-key> under the key bindings
	documentation.

2016-01-23 12:30 -0800  Kevin McCarthy  <kevin@8t8.us>  (df42596d08fe)

	* lib.h: Increase HUGE_STRING size to 8192. (see #3804)

	The interface for editing a large number of recipients is poor and
	perhaps shouldn't be using a fixed buffer size. Until a redesign can
	be thought about, this will help.

2016-01-19 14:05 -0800  Kevin McCarthy  <kevin@8t8.us>  (b315c4d4ede7)

	* imap/auth_sasl.c, pop_auth.c, smtp.c: Make sasl authentication
	buffers dynamically sized. (see #3804)

	The reporter found that the current buffer of HUGE_STRING was
	insufficient in his case to encode the clientout response back to
	the server in imap_auth_sasl().

	Since sasl gives us the size of "clientout", we can dynamically
	malloc and resize the buffer as needed. This patch uses
	max(LONG_STRING, (clientoutlen*2)). This is sufficient to hold the
	base64 encoded value plus additional prefix/suffix needed in each
	protocol.

	The size is rechecked after each sasl_client_step() and resized as
	needed.

	Similar code is in pop_auth_sasl() and smtp_auth_sasl(), so convert
	all three to use a dynamic buffer.

2016-01-05 18:08 -0800  Kevin McCarthy  <kevin@8t8.us>  (7c0bd34546f4)

	* smime.c: Allow tab as a delimiter in smime .index files. (closes
	#3802)

	The old parsing code used fscanf, and so happened to allow a tab as
	a delimiter. Even though smime_keys.pl uses a space, some users
	maintain their own .index files by hand (using tab delimiters), so
	continue to allow that delimiter.

	Thanks to Andre for the bug report and patch.

2016-01-04 16:28 -0800  Kevin McCarthy  <kevin@8t8.us>  (cf4c1c21e58d)

	* compose.c: Add a couple missing ATTACHPTR->tree frees.

	While working on ticket 3800, I noticed the tree wasn't being freed
	inside OP_COMPOSE_EDIT_HEADERS. Add a free there, and in the cleanup
	at the end of mutt_compose_menu().

	A few other sections in mutt_compose_menu() are performing a free-
	on-error where the tree isn't allocated yet, so skip it for those.

	I believe this is actually not fixing a memory leak: all attachments
	are always at level 0 in the compose menu (as far as I know); so
	nothing is ever allocated in the tree pointer. However since other
	parts of the code in compose.c clean this up, it make sense to add
	them here too.

2016-01-04 13:57 -0800  S. Gilles  <sgilles@math.umd.edu>  (960017a249f7)

	* color.c: Prefer bright versions (8-15) of colors for brightXXX
	backgrounds.

	When a bright color is specified as a background, try to use the
	bright version of that color, falling back to the A_BLINK method
	only on terms which do not support enough colors.

2016-01-01 12:24 -0800  Kevin McCarthy  <kevin@8t8.us>  (d3f31cf9239e)

	* parse.c: Use strrchr to search for Received date separator. (closes
	#3798)

	Sample email provided by the submitter showed a Received header with
	a ";" at the end of each line, instead of a single ";" in front of
	the date. The emails are obviously not RFC compliant, but the fix is
	simple enough: find the last ";" using strrchr instead of the first.

2016-01-01 12:16 -0800  Kevin McCarthy  <kevin@8t8.us>  (cec45c0a405e)

	* doc/manual.xml.head: Update manual copyright too.

2016-01-01 12:07 -0800  Kevin McCarthy  <kevin@8t8.us>  (b74ce90c7ba1)

	* account.c, account.h, ascii.h, bcache.c, bcache.h, commands.c,
	crypt-gpgme.c, crypt.c, cryptglue.c, curs_lib.c, curs_main.c,
	enter.c, globals.h, imap/auth.c, imap/auth.h, imap/auth_sasl.c,
	imap/browse.c, imap/command.c, imap/imap.c, imap/imap.h,
	imap/imap_private.h, imap/message.c, imap/message.h, imap/util.c,
	init.h, keymap.c, lib.c, mutt_idna.c, mutt_sasl.c, mutt_sasl.h,
	pager.c, parse.c, pattern.c, pgp.c, pgp.h, pgpkey.c, pgplib.h,
	pgppacket.c, pop.c, postpone.c, rfc3676.c, rfc822.c, send.c,
	smime.c, smime.h, smime_keys.pl, smtp.c, url.c: Convert copyright
	years to all use 4 digit years.

	Vincent Lefèvre pointed out the common shortcut, e.g 1996-9, is
	actually not allowed for copyright years. Convert all the copyright
	years (for mutt files) to use 4 digits.

2016-01-01 12:07 -0800  Kevin McCarthy  <kevin@8t8.us>  (fdd3fdd6f708)

	* COPYRIGHT, account.h, attach.c, bcache.c, browser.c, buffy.c,
	buffy.h, color.c, compose.c, copy.c, crypt-gpgme.c, curs_lib.c,
	curs_main.c, enter.c, from.c, handler.c, headers.c,
	imap/auth_login.c, imap/command.c, imap/imap.c, imap/imap_private.h,
	imap/util.c, init.c, init.h, keymap.c, keymap.h, lib.c, lib.h,
	main.c, mbox.c, mh.c, mime.h, mutt.h, mutt_curses.h, mutt_idna.c,
	mutt_sasl.c, muttlib.c, mx.c, mx.h, pager.c, parse.c, pattern.c,
	pgp.c, pop.c, postpone.c, protos.h, query.c, recvattach.c,
	rfc1524.c, rfc2047.c, rfc822.c, send.c, sendlib.c, signal.c,
	smime_keys.pl, system.c: Update copyright notices.

	This patch only updates existing copyright notices in the source
	files, using commit dates since the last copyright update in commits
	e3af935cdb1a and f8fd60d8d3f2.

	Add a notice to the COPYRIGHT file to refer to our mercurial
	repository for the full commit history.

	Add myself to the COPYRIGHT file and smime_keys.pl file.

2016-01-01 09:52 -0800  Kevin McCarthy  <kevin@8t8.us>  (c6471322c68f)

	* compose.c: merge stable

2016-01-01 09:48 -0800  Kevin McCarthy  <kevin@8t8.us>  (f99561e22a99)

	* compose.c: Fix segfault when deleting and reusing attachment slots.
	(closes #3800)

	When attachments are deleted, delete_attachment() slides the entries
	down in the idx array, but forgets to NULL out the last vacated
	slot.

	If more attachments are added later on via OP_COMPOSE_EDIT_HEADERS
	and the Attach: pseudo-header, mutt_gen_attach_list() will attempt
	to re-use the ATTACHPTR in that last slot because it wasn't set to
	NULL. This will be pointing to freed memory and likely segfault (at
	best).

2015-12-17 12:25 -0800  Kevin McCarthy  <kevin@8t8.us>  (9480a363a68a)

	* init.h: Add missing "yes" to $recall option documentation.

	Also add a blurb about the <recall-message> function.

2015-12-17 07:37 -0800  Kevin McCarthy  <kevin@8t8.us>  (52df4013b0b7)

	* doc/manual.xml.head: Reword new f=f documentation.

	Reword a couple parts, as Oswald Buddenhagen suggested the original
	wording was somewhat confusing.

2015-12-15 15:29 -0800  Kevin McCarthy  <kevin@8t8.us>  (e52d3e9c83d8)

	* doc/manual.xml.head, init.h, mutt.h, rfc3676.c: Add
	$reflow_space_quotes option. (closes #3309)

	When viewing and replying to a flowed email, add spacing between the
	quotes to improve readability and interoperability with non-flowed
	replies.

	Add a section to the documentation discussing support for viewing
	and non-flowed replies to flowed emails.

2015-12-08 09:12 -0800  Kevin McCarthy  <kevin@8t8.us>  (02bc14ed1569)

	* merge stable

2015-12-08 09:11 -0800  Kevin McCarthy  <kevin@8t8.us>  (f542783e257d)

	* mh.c: Fix hash table key "use after free" in mh_check_mailbox().
	(closes #3797)

	The fnames hash uses the maildir->header->path as the key. As
	matches are found, the headers are freed. This inadvertantly also
	freed the key to the hashtable entry; the next hash_find() going to
	the same bucket might end up comparing keys with a freed string.

	This patch stores the path in the struct maildir canon_fname field
	(just as maildir_check_mailbox() does) and uses that as the hash key
	instead. This field isn't used outside of maildir_check_mailbox(),
	and is automatically freed for us in the maildir_move_to_context()
	call at the bottom of both functions.

	Note there are other ways to fix this problem:
	- Add a new mode to the hash table, causing it to strdup the keys and
	free them itself.
	- Delete the entries in the fnames hash, rather leaving them there.
	The first seems the cleanest, but would end up touching much more
	code. The second is also clean, but might have a negative
	performance impact.

	Additionally, peeking back in history to changeset 1d45a50b6f9b, it
	looks like the canon_fname used to be used by mh too, so perhaps
	removing the strdup may have been a mistake during refactoring at
	some point.

2015-12-07 12:22 +0100  Vincent Lefevre  <vincent@vinc17.net>  (72fbf15cd9a1)

	* po/fr.po: Updated French translation.

2015-12-03 15:23 -0800  Kevin McCarthy  <kevin@8t8.us>  (bce2a0e71bf6)

	* crypt.c: Provide a better prompt and error for inline PGP with
	attachments. (closes #3738)

	Change mutt_protect() to check for text/plain before trying to
	invoke crypt_pgp_traditional_encryptsign(). This way, mutt can
	provide a bit more specific prompt and error message.

	Since pgp_mime_auto says it will prompt in the event of any failure,
	keep the more generic prompt after the encryptsign call too.

2015-12-01 18:20 -0800  Kevin McCarthy  <kevin@8t8.us>  (5e5aff1782dc)

	* crypt.c: Loosen mutt_signed_handler() protocol value consistency
	check. (closes #3639)

	Apparently, for S/MIME, some MUAs mismatch the protocol value of the
	multipart/signed and the content-type of the signature: putting
	"pkcs7-signature" in one and "x-pkcs7-signature" in the other.

	Change mutt_signed_handler() to independently verify the values of
	the protocol and the content-type. This still checks for correct
	values but doesn't ensure they match between the two (for S/MIME).

2015-11-30 15:52 -0800  Kevin McCarthy  <kevin@8t8.us>  (428a92464d5b)

	* contrib/smime.rc, globals.h, init.h, smime.c: smime: allow signing
	message digest algorithm to be specified.

	Currently, Mutt hardcodes micalg=sha1 for signed messages.
	Unfortunately, the actual message digest algorithm used defaults to
	the value in the "Signature Algorithm" field in the signing key's
	certificate.

	Add a new configuration option $smime_sign_digest_alg, defaulting to
	sha256. Add a new printf format string, %d, to be used in the
	signing command to specify the digest algorithm. Modify the sample
	$smime_sign_command to include "-md %d".

	Note: This solution requires using the modified $smime_sign_command,
	or else the micalg parameter again may not match the algorithm used.
	An alternative solution would be to query the certificate "Signature
	Algorithm" field and try to change the micalg to match it, but this
	method is easier to implement and provides better control for the
	user to configure, in any case.

2015-11-26 11:01 -0800  Kevin McCarthy  <kevin@8t8.us>  (ff560d1f3f7a)

	* smtp.c: Clean up address_uses_unicode() (closes #3794)

	Pull the null check out of the loop. Use a bit comparison to detect
	if the high bit is set: this avoids a warning for platforms where
	char is implicitly signed (where comparing < 128 is always true).

2015-11-24 21:45 -0800  Kevin McCarthy  <kevin@8t8.us>  (94186a96ca17)

	* mutt_idna.c: Fix bad idn error on local mailboxes. (closes #3795)

	Commit 831abf39d53a pulled the mbox_to_udomain() call inside the
	conversion functions. Unfortunately, this causes local (user only)
	mailboxes to be considered conversion errors instead of just
	skipping them.

	Revert mbox_to_udomain() back to using a static buffer and pull back
	into the mutt_addrlist_to_local/intl() functions.

	Pass the user and domain into the conversion functions instead of
	the address.

2015-11-24 15:49 -0800  Kevin McCarthy  <kevin@8t8.us>  (0d7ce56bbafd)

	* mutt_idna.c: Add user reversibility check in intl_to_local.

	This ensures we don't lose information by converting to the local
	charset.

2015-11-24 15:49 -0800  Kevin McCarthy  <kevin@8t8.us>  (935c779db0ea)

	* smtp.c: Implement SMTPUTF8 capability support in smtp.c

	This is patch 4 of 4 implementing support for SMTPUTF8 (RFC 6531).

	RFC6532 support already worked: rfc822*.c already parsed messages in
	exactly the way RFC6532 wants.

	Thanks for Arnt Gulbrandsen for the original patch.

2015-11-24 15:49 -0800  Kevin McCarthy  <kevin@8t8.us>  (151ff413e21a)

	* init.h, mutt.h, mutt_idna.c: Add option 'idn_encode'; rename option
	'use_idn' to 'idn_decode'.

	This is patch 3 of 4 implementing support for SMTPUTF8 (RFC 6531).

	Add an option to control whether international domains are encoded
	with IDN or not. This defaults to set, for backward compatibility.

	Rename the use_idn option to idn_decode, since that more properly
	reflects its purpose.

2015-11-24 15:49 -0800  Kevin McCarthy  <kevin@8t8.us>  (831abf39d53a)

	* mutt_idna.c: Rewrite address local-to-intl conversion functions.

	This is patch 2 of 4 implementing support for SMTPUTF8 (RFC 6531).

	Perform charset conversion from local to UTF-8 for both the user and
	domain parts of the address.

	If IDN is enabled and the options (added in the next patch) are
	turned on, encode/decode the domain part.

	Use the intl_checked and is_intl status bits to record the
	intl/local status of the ADDRESS mailbox part.

2015-11-24 15:49 -0800  Kevin McCarthy  <kevin@8t8.us>  (814ece9689cc)

	* Makefile.am, alias.c, commands.c, compose.c, configure.ac, edit.c,
	init.c, main.c, mutt_idna.c, mutt_idna.h, query.c, recvcmd.c,
	rfc822.c, rfc822.h, send.c, sendlib.c: Rename idna functions and
	bits for smtputf8 changes.

	This is patch 1 of 4 implementing support for SMTPUTF8 (RFC 6531).

	Change mutt_idna.c to be always compiled. Remove the stub functions
	in mutt_idna.h. Instead, put #ifdefs around the idna function calls.
	The conversion functions will be fixed up in the next patch.

	Rename the conversion functions to mutt_addrlist_to_intl() and
	mutt_env_to_intl(). Rename the ADDRESS idna status bits to "intl"
	status bits.

2015-11-21 15:28 -0800  Kevin McCarthy  <kevin@8t8.us>  (e635ce43b001)

	* imap/browse.c: Remove redundant mbox delimiter check in
	imap_browse(). (closes #3646)

	imap_fix_path() removes duplicate and trailing delimiters, so the
	check below it was redundant. This also made it appear list.delim
	could be used uninitialized.

	Remove the check, but add a check to make sure the "fixed" path has
	len>0, to prevent oob accesses of mbox[n-1] below.

	Lastly, remove a redundant n=strlen(mbox) inside the initial LIST
	processing loop. The mbox isn't changed from above, so there is no
	need to rerun strlen.

2015-11-18 16:14 -0800  Kevin McCarthy  <kevin@8t8.us>  (444f1f013f1b)

	* enter.c: Fix memcpy buf=NULL/len=0 issue in replace_part(). (closes
	#3790)

	Calling memcpy with src or dest=NULL is technically illegal, even if
	len=0. Recent compilers seem to now be generating warnings/errors
	with this.

	replace_part() is currently the only place we are getting bug
	reports, so for now just fix the problem in this one place.

2015-11-09 18:53 -0800  Kevin McCarthy  <kevin@8t8.us>  (c799162691b2)

	* pattern.c: Improve error messages for eat_date() and eat_regexp().

	After calling mutt_extract_token(), s->dptr will typically be at the
	end of the string if an error occurred. Save a pointer to the
	beginning of the expression, so it can be properly displayed in the
	error message.

	Convert eat_date() and eat_regexp() to use the same iconv strings
	for the error message.

2015-11-09 15:40 -0800  Kevin McCarthy  <kevin@8t8.us>  (1c151d8800de)

	* curs_lib.c, lib.h, pattern.c, rfc2047.c, rfc822.c: Fix possible
	unintentional '\0' strchr matches.

	After fixing the ticket 3787 strchr issue, this patch cleans up
	other potentially incorrect uses of strchr for the '\0' case.

	In mutt_multi_choice(), mutt_getch() can technically return 0.
	Although it seems the user would have to try quite hard to do this,
	it's incorrect to return that index into letters. Change "ch.ch==0"
	to be considered the same as an abort.

	is_email_wsp() is used in a couple places where it wasn't obvious
	whether '\0' was being accounted for, so add an explicit check to
	the function.

	Inside eat_date(), if mutt_extract_token() had no input and returned
	"", the strchr ("<>=", buffer.data[0]) below would return a pointer.
	In actuality, this is prevented by an empty parameter check inside
	mutt_pattern_comp(), but it doesn't hurt to make it the same as
	eat_regexp() and have the check explicitly done here too.

	rfc2047_encode() was another borderline case for adding a check. The
	convert_string() sets a length, so it seems highly unlikely that *t
	could be 0, but doesn't hurt to add the check.

	The find_encoded_word() fix looks necessary. If the passed in s was
	something like "=?charset?" (followed by EOS, '\0'), the
	strchr("BbQq", q[1]) would in fact return a pointer and the
	following q[2] would read past the end of string. If q[2] happened
	to be '?', it might even continue reading in the for loop below.

	Lastly, in parse_mailboxdomain(), the potential overread was already
	fixed in changeset:a6919571eb59, but although the nonspecial and
	special strchr() line happens to "work" for the case of '\0', it's
	pretty fragile to leave as is. It's better to be explicit and just
	return if we hit EOS without calling next_token().

2015-10-20 17:59 +0200  Vincent Lefevre  <vincent@vinc17.net>  (17991330c086)

	* po/fr.po: Updated French translation.

2015-10-18 20:05 +0800  Kevin McCarthy  <kevin@8t8.us>  (41af5a753d6f)

	* merge stable

2015-10-18 19:45 +0800  Kevin McCarthy  <kevin@8t8.us>  (a6919571eb59)

	* rfc822.c: Fix next_token() oob read. (closes #3787)

	With specially crafted input to 'mutt -H', the line "Return-Path:<()
	" is read and passed to mutt_parse_rfc822_line(). "<() " is then
	passed through to rfc822_parse_adrlist().

	Eventually, inside next_token(), is_special(*s) is called when s
	points to the end of the string ('\0'). This macro calls strchr,
	which will actually match and return a pointer to the trailing '\0'
	in RFC822Specials! This causes "s + 1" to be returned, skipping past
	the end of string inside parse_mailboxdomain().

	This patch adds a check to make sure *s is non-null before calling
	is_special(*s).

2015-10-17 11:15 +0800  Kevin McCarthy  <kevin@8t8.us>  (19c3406fbad9)

	* compose.c: Fix error message for attach-message. (closes #3785)

	Currently if mx_open_mailbox() fails when trying to attach a
	message, mutt_perror() is called. Change this to call mutt_error()
	instead, since errno isn't set for all failure cases.

2015-10-08 13:17 +0200  Vincent Lefevre  <vincent@vinc17.net>  (7aa4e6fc6884)

	* po/fr.po: Updated French translation.

2015-10-04 10:08 +0800  Kevin McCarthy  <kevin@8t8.us>  (a07e8215a0ef)

	* browser.c, commands.c, curs_lib.c, curs_main.c, keymap.c, menu.c,
	mutt.h, mutt_curses.h, mutt_ssl.c, mutt_ssl_gnutls.c: Create a
	separate macro/push/exec event buffer. (closes #3779)

	Currently, the SSL and TLS certficate prompts turn on
	OPTUNBUFFEREDINPUT, (to prevent macros and such from running right
	through the dialog). Unfortunately, the menu dialog processing in
	menu_dialog_dokey() is using mutt_ungetch() to forward non-dialog
	keys on to standard menu processing. With OPTUNBUFFEREDINPUT set,
	those keys never make it to the menu and are buffered until after
	the menu dialog.

	This patch creates a new event buffer, separate from the standard
	"unget" buffer, for use by macros, exec, and push events. These
	events can be temporarily ignored by setting OPTIGNOREMACROEVENTS
	(renamed from OPTUNBUFFEREDINPUT), while continuing to allow unget
	events to be processed.

	Since the "push" and "unget" functions now go to different buffers,
	function names were slightly renamed, to make it less easy to
	unintentionally use the wrong function at the wrong time.

2015-10-04 10:08 +0800  Kevin McCarthy  <kevin@8t8.us>  (ac156dcc2c54)

	* menu.c, mutt_ssl.c, mutt_ssl_gnutls.c: Fix menu type in certificate
	prompt. (see #3779)

	The menu type is used in several places as a direct index into
	Keymaps[], so passing in -1 to mutt_new_menu() was leading to
	illegal memory accesses later on.

	Add a range check in mutt_new_menu(), defaulting to MENU_GENERIC, to
	prevent this problem in the future.

2015-10-01 15:38 +0800  Kevin McCarthy  <kevin@8t8.us>  (9de2f1c6da87)

	* compose.c: Improve prompt when switching between PGP and S/MIME.
	(closes #3777)

	Only prompt when encrypt or sign is enabled.

	Also, improve oppenc to run and refresh the status when switching.

2015-09-30 11:25 +0800  Kevin McCarthy  <kevin@8t8.us>  (909dfe9878ff)

	* smime.c: Fix chomp in smime_handle_cert_email.

	During a review of the previous patch, Oswald Buddenhagen noticed
	two of the fixed oob reads had another problem: they were "chomping"
	(the newline) without verifying there actually was a newline at the
	end of the string.

2015-09-30 11:25 +0800  Kevin McCarthy  <kevin@8t8.us>  (d9142ca37afb)

	* smime.c: merge stable

2015-09-30 11:21 +0800  Kevin McCarthy  <kevin@8t8.us>  (590ff6eebe1a)

	* parse.c, smime.c, smtp.c: Fix oob reads when fgets returns "\0".
	(closes #3776)

	The ticket reported an out of bounds read in mutt_read_rfc822_line()
	when a '\0' was embedded on its own line in the headers. The
	function assumed if fgets() didn't return NULL, then the string
	would have at least one character.

	I scanned the rest of the code and found three other places making
	the same assumption for fgets.

	Thanks to hanno for finding this with the "american fuzzy lop" tool.

2015-09-20 20:37 -0400  Derek Schrock  <dereks@lifeofadishwasher.com>  (aec82c4dd826)

	* UPDATING, hdrline.c, init.h, send.c: Add new optional index_format
	expandos %r and %R.

	These generate a comma separated list of all the To and Cc
	recipients.

	Also, increase the attribution buffer size to accommodate these new
	expandos.

2015-09-21 10:28 +0800  bat guano  <bat.guano@don.blech.e4ward.com>  (93c6ae1ef01b)

	* po/de.po: German translation fix. (closes #3701)

2015-09-20 19:05 +0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (2fdec286cfb7)

	* po/ja.po: Updated Japanese translation.

2015-09-20 18:58 +0800  Kevin McCarthy  <kevin@8t8.us>  (61c754a8effd)

	* pager.c: Translation improvements.

	Thanks to TAKAHASHI Tamotsu for pointing out these ones I missed.

2015-09-13 14:41 +0800  Kevin McCarthy  <kevin@8t8.us>  (e85eda4ee425)

	* po/Makefile.in.in, po/bg.po, po/hu.po, po/ko.po, po/pt_BR.po,
	po/uk.po: Enable msgfmt translation check flag -c.

	Fix discovered translation format string errors.

2015-09-13 11:47 +0800  Kevin McCarthy  <kevin@8t8.us>  (6eb6b41f5d45)

	* compose.c, crypt-gpgme.c, curs_main.c, edit.c, editmsg.c,
	imap/message.c, mutt_ssl.c, muttlib.c, pgp.c, send.c, smime.c: Add
	translation comments and improvements.

	These were suggested by TAKAHASHI Tamotsu.

2015-09-12 11:25 +0800  Kevin McCarthy  <kevin@8t8.us>  (1a281a527cb7)

	* crypt-gpgme.c: Improve translation string in crypt-gpgme.c

	Combine into a single buffer to make the translation easier. Also,
	mark a couple todos for alignment problems.

2015-09-06 16:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (2dac9fa02842)

	* imap/browse.c: Fix double-decode during IMAP browse.

	cmd_parse_list() already calls imap_unmunge_mbox_name() on the
	mailbox names returned from the server. However,
	browse_add_list_result() was taking those mailbox names and passing
	them to imap_add_folder(), which was calling
	imap_unmunge_mbox_name() yet again.

	The reason is that imap_browse() was directly calling
	imap_add_folder() too, passing in a previously encoded "mbox" name.
	After looking carefully at the code, I could find no reason that
	mbox needed to be encoded outside of the LIST commands.. Therefore I
	changed imap_browse() to call imap_munge_mbox_name() on mbox for the
	two LIST commands generated from it instead, and removed the
	imap_unmunge_mbox_name() call inside imap_add_folder().

2015-09-06 07:41 -0700  Kevin McCarthy  <kevin@8t8.us>  (c6a6b7d3b83d)

	* merge stable

2015-09-06 07:40 -0700  Kevin McCarthy  <kevin@8t8.us>  (40c47fcc9d17)

	* mx.c: Fix use after free of ctx->last_tag. (closes #3775)

	When using imap to access gmail, tagging and saving messages to "all
	mail" and pressing <sync-mailbox> can result in the call path:
	mx_check_mailbox() imap_check_mailbox() imap_cmd_finish()
	imap_expunge_mailbox() mx_update_tables() followed by:
	mx_sync_mailbox()

	The HEADER pointed to by ctx->last_tag will be removed and FREE'ed
	in mx_update_tables(), but will subsequently be accessed in
	mx_sync_mailbox().

	This patch simply sets ctx->last_tag=NULL if it is freed inside
	mx_update_tables().

	Thanks to Peter Lekensteyn for the bug report and ASAN report.

2015-09-05 19:55 -0700  Morten Bo Johansen  <mbj@spamcop.net>  (58cbc3235db6)

	* po/da.po: Updated Danish translation.

2014-07-17 16:05 +0200  Kevin McCarthy  <kevin@8t8.us>  (bd2c2a6058a7)

	* imap/browse.c, imap/command.c, imap/imap.c, imap/imap_private.h,
	imap/message.c, imap/utf7.c, imap/util.c: Add support for utf-8
	mailboxes in imap.

	This adds support for RFC6855 to imap/*.c.

	Thanks to Arnt Gulbrandsen for the original patch.

2015-09-02 18:14 -0700  Kevin McCarthy  <kevin@8t8.us>  (5700b43f1e5b)

	* crypt-gpgme.c: merge stable

2015-09-02 18:11 -0700  Kevin McCarthy  <kevin@8t8.us>  (f675e853af12)

	* crypt-gpgme.c: Add time_t conversion to fix gpgme segfault on
	OpenBSD.

	time_t isn't the same size as gpgme_subkey_t->timestamp on OpenBSD.
	Passing &subkey->timestamp to localtime was therefore passing an
	address to the wrong size int and was causing a segfault.

	Thanks to Hannes Wenzel for reporting the bug and providing a patch.

2015-09-02 15:02 -0700  Kevin McCarthy  <kevin@8t8.us>  (8bbcfa2af7b6)

	* crypt-gpgme.c, pgp.c, smime.c: Add L10N messages for the pgp/smime
	send menus.

	This documents the 'f' "forget it" choice for translators.

	Thanks to Benno Schulenberg for pointing this out and for the
	original patch.

2015-09-02 14:43 -0700  Kevin McCarthy  <kevin@8t8.us>  (f7859d96006c)

	* alias.c, curs_main.c, doc/devel-notes.txt, po/Makefile.in.in: Flag
	translator comments using L10N.

	Add comment to devel-notes.txt documentation.

2015-08-31 09:32 -0700  Kevin McCarthy  <kevin@8t8.us>  (62730ecbc17d)

	* mkinstalldirs: merge default into stable

2015-08-30 10:27 -0700  Kevin McCarthy  <kevin@8t8.us>  (2f0d516fc638)

	* .hgsigs: mutt-1.5.24 signed

2015-08-30 10:26 -0700  Kevin McCarthy  <kevin@8t8.us>  (a494c8f932fa)

	* .hgtags: Added tag mutt-1-5-24-rel for changeset 08e81162482f

2015-08-30 10:26 -0700  Kevin McCarthy  <kevin@8t8.us>  (08e81162482f)

	* ChangeLog, VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po: automatic post-release commit for mutt-1.5.24

2015-08-30 10:21 -0700  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (d9b1c4b6662f)

	* po/eo.po: Partially updated Esperanto translation.

2015-08-30 10:18 -0700  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (b9864644b6a2)

	* commands.c: Minor translation fixes.

	This makes two equivalent translation messages the exact same so
	they only need to be translated once.

	It also adds a missing translation marker (for the same string).

	This same string is used in recvcmd.c so does not generate a new
	translation string.

2015-08-30 10:08 -0700  Kevin McCarthy  <kevin@8t8.us>  (934fbd272ce6)

	* UPDATING: Set release date. Minor fixes to release notes.

2015-08-29 12:51 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net>  (faa85ed8a7c9)

	* po/ca.po: Updated Catalan translation.

2015-08-29 12:40 -0700  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (14a2ad40e954)

	* po/nl.po: Updated Dutch translation.

2015-08-29 07:40 -0700  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (0d346dc8dccb)

	* smime.c: Minor translation fix.

	This makes two equivalent translation messages the exact same so
	they only need to be translated once.

2015-08-28 07:35 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (e33ba8f72a40)

	* po/ja.po: Updated Japanese translation.

2015-08-20 11:18 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (b3c095648df6)

	* po/ru.po: Updated Russian translation.

2015-08-19 09:41 -0700  Petr Pisar  <petr.pisar@atlas.cz>  (83760f05bb46)

	* po/cs.po: Updated Czech translation

2015-08-17 14:51 -0700  Kevin McCarthy  <kevin@8t8.us>  (c0180991c352)

	* configure.ac: Add idn to MUTTLIBS instead of LIBS (see #3638)

	Currently, -lidn is included while linking all the mutt binaries.
	Add it to MUTTLIBS instead so it's only used for the mutt linking.

	Also, add $LIBICONV to $LIBS before checking for some of the idna
	functions. On some sytems, there are apparently issues when using
	static linking. (Thanks to grarpamp for reporting).

2015-08-17 12:31 -0700  Kevin McCarthy  <kevin@8t8.us>  (356443232291)

	* muttlib.c, protos.h: Change mutt_adv_mktemp to call mutt_mktemp
	instead of mktemp. (see #3638).

	mutt_mktemp is currently called in 95% of the cases in mutt, and is
	already our "own rolled" version of mktemp. The "insecure mktemp
	warning" discussion keeps coming up, so instead add prefix and
	suffix functionality to mutt_mktemp() and call that.

	All other uses of Tempdir in the mutt source did not call
	mutt_expand_path() first, so remove that from mutt_adv_mktemp().

2015-08-17 12:26 -0700  Kevin McCarthy  <kevin@8t8.us>  (8b2fe6a4db79)

	* configure.ac: Enable C99 mode for compiler. (See #3638).

	This is already the default for clang (FreeBSD) so shouldn't cause
	any issues.

	Enabling this will increase the allowed static string length and
	remove the Copyright length warning.

2015-08-11 11:20 -0700  Kevin McCarthy  <kevin@8t8.us>  (55ea6e829b46)

	* Makefile.am: Compile txt2c using automake rules.

	The compilation rule used $< which isn't portable for ordinary make
	rules.

2015-08-11 11:20 -0700  David Champion  <dgc@bikeshed.us>  (eb4aaf4581ac)

	* txt2c.sh: Fix txt2c.sh sed invocations to use posix syntax.

2015-08-07 03:38 +0200  Vincent Lefevre  <vincent@vinc17.net>  (711708700602)

	* po/fr.po: Updated French translation.

2015-07-29 09:26 -0700  Kevin McCarthy  <kevin@8t8.us>  (34ca1c5fdd45)

	* doc/manual.xml.head: Minor documentation fix.

	In one place, the documentation mentioned 'alternative-order'
	instead of 'alternative_order'.

2015-07-29 09:07 -0700  Kevin McCarthy  <kevin@8t8.us>  (75e398daa94c)

	* doc/manual.xml.head, hook.c: Add error handling for ^ and other
	empty mailbox shortcuts.

	(closes #2402) (closes #3735)

	Explicitly mention the ^ example in the documentation added in
	6d733cab6b45.

	Add an error message for ^ when CurrentFolder is not set. Add checks
	for other mailbox shortcuts that expand to the empty string. This
	could happen if the @alias shortcut was accidentally used, or the
	value referenced by a shortcut isn't set yet.

2015-07-27 14:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (6d733cab6b45)

	* doc/manual.xml.head: Add "Mailbox Matching in Hooks" section to
	manual.

	Folder-hook and mbox-hook perform mailbox shortcut expansion on the
	regexp parameter. Add a section to the manual to give examples and
	make the behavior clearer.

2015-07-26 14:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (21a08f9abc80)

	* crypt-gpgme.c, crypt.c, handler.c, mutt_crypt.h, pgp.c,
	recvattach.c: Handle malformed ms-exchange pgp-encrypted block.
	(closes #3742)

	In certain circumstances, Exchange corrupts a multipart/encrypted
	block into: <multipart/mixed> <text/plain> <application /pgp-
	encrypted> [BASE64-encoded] <application/octet-stream>
	[BASE64-encoded]

	This patch pulls the full detection of valid/invalid multiparts into
	mutt_body_handler(). It extracts a run_decode_and_handler()
	function, which is reused by new intermediate handlers to decode the
	application/octet-stream part before passing it directly to
	crypt_pgp_encrypted_handler. These intermediate handlers then check
	and set any GOODSIG flags back into the parent part.

	This change may result in less error messages for invalid
	multipart/encrypted parts. Instead, mutt will default to the
	multipart_handler if it isn't fully "correct".

	Viewing attachments uses crypt_pgp_decrypt_mime() which bypasses the
	handler mechanism. Add decoding to the decrypt_mime() functions for
	pgp and gpgme.

	Thanks to Vincent Brillault for his analysis and initial patch.

2015-07-18 18:40 +0200  Martin Sandsmark  <martin@sandsmark.ninja>  (e40e3e0391ea)

	* UPDATING, buffy.c, init.h, mutt.h: Add support for checking cur/ in
	Maildir for unread mails in buffy.

	Also skip messages with the S flag when checking for unread mails.

2015-07-24 13:36 -0700  Kevin McCarthy  <kevin@8t8.us>  (fdafc56a854f)

	* doc/Makefile.am: Set AUTOMAKE_OPTIONS in doc/Makefile.am. (closes
	#3766)

	Add the "foreign" option to silence warnings generated by
	flymake.am.

2015-07-24 13:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (cbae8642cb3d)

	* UPDATING: Update the UPDATING file with changes since 1.5.23.

2015-07-23 14:57 -0700  Kevin McCarthy  <kevin@8t8.us>  (8c16206f50a1)

	* hcache.c, help.c, imap/util.c, protos.h, sendlib.c: Fix compiler
	type warnings. (closes #3765)

	The output of mutt_local_tz() was being passed to abs(). Technically
	the return type is time_t, but it represents a small value: the
	timezone offset in seconds. Add a safe explicit cast to int.

	Change the txt parameter of mutt_make_help() to type const char *.
	Typically all calls run the txt parameter through _(), which accepts
	const char * and returns a char *. However, if NLS is not enabled,
	_() is a noop, simply returning the parameter itself. In
	mutt_compile_help(), items[i].name is const char *, so it will
	generate a warning when passed as the txt parameter of
	mutt_make_help().

	On some systems, e.g. OS X, snprintf is defined as a macro. One call
	in hcache.c was embedding directives inside the snprintf call. This
	is apparently undefined behavior, so duplicate the call instead.

2015-07-22 19:23 -0700  Kevin McCarthy  <kevin@8t8.us>  (c60fed102d79)

	* imap/message.c, keymap.c, pop_lib.c: Fix a few small compiler
	warnings. (See #3638)

	In certain configurations, unused variables and labels were causing
	warnings.

	Add a missing "#include <netinet/in.h>" to pop_lib.c.

2015-07-21 12:41 -0700  Kevin McCarthy  <kevin@8t8.us>  (704e0622cc67)

	* imap/imap.c: merge stable

2015-07-21 12:34 -0700  Kevin McCarthy  <kevin@8t8.us>  (e5fe2f80e797)

	* imap/imap.c: Imap: Fix flag caching after sync.

	The flags cached in IMAP_HEADER_DATA were not updated to match the
	HEADER flags after a sync. This means if a flag were toggled and
	synced twice, the second sync was not sending the flag update.

	Thanks to Noah Misch for the patch.

2015-07-19 15:55 -0700  Kevin McCarthy  <kevin@8t8.us>  (100835c4a8ac)

	* init.h: Add note about gpg fixed-list-mode. (closes #3763).

	Thanks to Gregor Zattler for the original patch.

2015-07-11 14:36 -0700  Kevin McCarthy  <kevin@8t8.us>  (2ca89bed6448)

	* main.c: Fix batch mode lockup. (closes #3761) (closes #3760)

	The new TS capability check was also running when curses wasn't
	initialized. Move check inside the !OPTNOCURSES block.

2015-07-09 14:50 -0700  Kevin McCarthy  <kevin@8t8.us>  (7e91a8855dc3)

	* Makefile.am, doc/Makefile.am, imap/Makefile.am: Use $(VAR) instead
	of @VAR@ in Makefile.am files. (closes #3664)

	The @VAR@ form is not overridable, such as the case for #3664 where
	the reporter wanted to override DOTLOCK_GROUP.

	It's doubtful targets need to be overriden, but it makes sense to be
	consistent in the usage of automake substituted variables unless
	there is a particular reason/bug to work around.

2015-07-05 13:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (79cd2f34961d)

	* crypt-gpgme.c: Remove 'hit enter' prompt for GPGME initialization
	errors.

	Older GPGMEs are missing CMS (S/MIME) support. Don't force the poor
	users to hit enter every time they start mutt.

2015-07-02 11:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (39422ec14f60)

	* .hgignore, mkinstalldirs: Remove the automake mkinstalldirs script.

	Add to .hgignore so it doesn't accidentally get added again.

2015-07-02 11:21 -0700  Kevin McCarthy  <kevin@8t8.us>  (97ef326274e7)

	* Makefile.am, configure.ac, contrib/Makefile.am, doc/Makefile.am,
	intl/Makefile.in, m4/gettext.m4, po/Makefile.in.in: Convert from
	using mkinstalldirs to $(MKDIR_P).

	The automake mkinstalldirs script is now deprecated. "install-sh -d"
	can be used in place. Configure.ac already includes AC_PROG_INSTALL,
	which will ensure install-sh is bundled. Add AC_PROG_MKDIR_P, which
	will set $(MKDIR_P) to either a thread-safe "mkdir -p" or will fall
	back to using install-sh.

2015-07-02 11:18 -0700  Kevin McCarthy  <kevin@8t8.us>  (67d945e38074)

	* build-release: Fix build-release to always update automake tools.
	(closes #3671)

	1.5.22 and 1.5.23 include a version of "missing" older than the
	version of automake/aclocal used to generate configure.

	Fix the build-release script to always copy and force update of the
	automake tools.

2015-06-29 14:35 -0700  Kevin McCarthy  <kevin@8t8.us>  (9802a6172edf)

	* doc/manual.xml.head: Add note to manual clarifying push/exec and
	folder-hook order.

	Folder-hooks are executed in the order declared. However, push/exec
	commands will simply prepend to the keyboard buffer. If there are
	multiple push/exec commands, each will prepend to the earlier one.
	The result is that they will end up being "run" in reverse order
	once keyboard buffer processing starts.

2015-06-26 12:23 -0700  Kevin McCarthy  <kevin@8t8.us>  (3bbb1f569eb1)

	* imap/auth_sasl.c, imap/imap.c: Fix IMAP segfault due to NULL capstr.

	After a failed login, the connection is left open but capstr is
	freed. If a second login attempt is made, imap_auth_sasl was trying
	to strstr using the NULL capstr.

	Add a NONULL around the capstr parameter to strstr. Change
	imap_conn_find() to keep the capstr around until a successful
	authentication occurs.

2015-06-26 11:38 -0700  Kevin McCarthy  <kevin@8t8.us>  (b4be5796a458)

	* crypt-gpgme.c, pgp.c, smime.c: Add comment about "(f)orget it"
	choice in pgp/smime send menus.

2015-06-26 12:28 +0200  Vincent Lefevre  <vincent@vinc17.net>  (b640b23e64a8)

	* po/fr.po: Updated French translation.

2015-06-07 13:59 -0700  Kevin McCarthy  <kevin@8t8.us>  (17a4f92e4a95)

	* smime.c, smime.h: Rewrite S/MIME key searching. Add purpose
	checking.

	Model the smime.c searching off of classic pgp searching. Create
	smime_get_key_by_hash()/addr()/str() functions that use a single
	smime_get_candidates() function to search the index.

	Use the new smime_keys generated purpose flag in the index to filter
	by KEYFLAG_CANENCRYPT and KEYFLAG_CANSIGN. Old style indices fall
	back to all-inclusive behavior.

2015-06-07 13:59 -0700  Kevin McCarthy  <kevin@8t8.us>  (106914bc9406)

	* smime_keys.pl: smime_keys: Add refresh command.

	Refresh verifies the trust of each certificate and adds the purpose
	flag if it is missing. It pushes those values to the private keys'
	index file too.

2015-06-07 13:59 -0700  Kevin McCarthy  <kevin@8t8.us>  (aabd030b25cb)

	* smime_keys.pl: smime_keys: Add purpose flag to index.

	A subsequent patch will change smime.c to use the purpose to filter
	certs and keys that can't be used for signing or encryption.

	Issuer, trust, and purpose flags were also added to the keys index
	file, to keep parsing simpler in smime_keys as well as smime.c. The
	trust and purpose are derived from the cert. Issuer is set to '?' as
	this should never be needed for keys.

2015-05-25 10:59 -0700  Kevin McCarthy  <kevin@8t8.us>  (0255b37be491)

	* smime_keys.pl: smime_keys: Handle certificate chains in add_cert.
	(closes #3339) (closes #3559)

	Find all chains in the certificate provided. For each chain create a
	separate leaf and intermediate certificate file. Because Mutt
	controls the label prompt, use a single label for all chains.

	Also, loosen up cert file parsing to allow attributes even if they
	aren't delimited by a "Bag Attributes" header.

	Thanks to David J. Weller-Fahy for his testing and feedback!

2015-05-18 13:27 -0700  Kevin McCarthy  <kevin@8t8.us>  (577987ca2d02)

	* smime_keys.pl: smime_keys: Convert openssl execution to use
	open("-|",...). (see #3575) (see #2456)

	This does a fork/exec, bypassing the shell, and so handles spaces,
	quotes, and other shell-characters problems better than the simple
	fix in changeset:c66a6bd5d0d5

	This also fixes the "verify with crl" bug in #2456: the grep is now
	done in perl.

	Thank you Vincent Lefevre for your review and feedback!

2015-05-18 03:25 +0200  Vincent Lefevre  <vincent@vinc17.net>  (82d43abf2a37)

	* po/fr.po: Updated French translation (related to PGP & S/MIME, with
	corrections).

2015-05-15 14:09 -0700  Kevin McCarthy  <kevin@8t8.us>  (c66a6bd5d0d5)

	* smime_keys.pl: smime_keys: quote filenames. (closes #3575) (see
	#2456)

	Wrap the various filename parameters in single quotes in case there
	are spaces in the filename.

2015-05-15 10:47 -0700  Kevin McCarthy  <kevin@8t8.us>  (babc30377614)

	* smime_keys.pl: Start cleaning up and fixing smime_keys.pl (closes
	#3324) (see #2456)

	* Convert to using File::Temp (#3324). This was also suggested at
	https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=775199

	* Use File::Temp for add_p12 temp file. (#2456)

	* Make the query_label() method a bit more robust with empty
	strings, ctrl-d, and leading spaces.

	* Clean up openssl_do_verify() logic. Mark cert as invalid rather
	that die'ing if an openssl verify command fails.

	* General cleanup:
	  - Clearly separate op handler, certificate management, and helper
	functions by section and using prefixes.
	  - Create openssl helper functions to reduce copy/paste invocations and
	make the code clearer.
	  - Make indentation consistent at 2 spaces.
	  - Change handle_add_pem() to re-use handle_add_chain() once the
	correct files are identified.
	  - Change openssl_parse_pem() to return a single array of data
	structures representing the parsed certs/keys.

2015-05-03 16:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (c46dfbdb5eff)

	* globals.h, init.h, mutt_ssl.c, mutt_ssl_gnutls.c: Provide SSL cipher
	selection option. (closes #3167)

	Creates a $ssl_ciphers option that allows direct selection of the
	ciphers for OpenSSL (via SSL_CTX_set_cipher_list) and GnuTLS (via
	gnutls_priority_set_direct).

	Thank you Sergio Gelato for the patch.

2015-04-25 19:00 -0700  Seth Forshee  <seth@forshee.me>  (755a18da99bc)

	* handler.c: Fix performance regression for ~b/~B searching. (closes
	#3743)

	In mutt_is_autoview(), changeset b58cdfacfb89 introduced a call to
	rfc1524_mailcap_lookup() before checking if the MIME type should be
	autoviewed based on the user's preferences. This caused a major
	performance regression for ~b/~B searching.

	Rearrange mutt_is_autoview() to check the user preferences first,
	then search for a mailcap entry only if the MIME type should be
	autoviewed.

	In order to preserve correct mime_lookup behavior, re-add a call to
	mutt_check_lookup_list() before scanning the AutoViewList.

2015-04-19 13:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (067a3ac42c3b)

	* crypt-gpgme.c, doc/manual.xml.head, init.h, mutt.h, pgp.c: Add
	$crypt_confirmhook option. (see #3727)

	Allow the confirmation prompt for crypt-hooks to be disabled. This
	is useful for multiple crypt-hook users (e.g. encrypted mailing
	lists), or just for people who are certain of their crypt-hooks and
	don't want to be prompted every time.

	Thanks to Dale Woolridge for the original patch.

2015-04-19 13:15 -0700  Kevin McCarthy  <kevin@8t8.us>  (b4c57d3fd7e8)

	* crypt-gpgme.c, doc/manual.xml.head, doc/muttrc.man.head, hook.c,
	pgp.c, protos.h: Allow multiple crypt-hooks with the same regexp.
	(closes #3727).

	Changes the crypt-hook to accumulate a LIST of hooks with the same
	regexp, as opposed to replacing the hook data. This is useful for
	the case of encrypted mailing lists.

	Update pgp classic and gpgme to process a LIST of crypt-hook values
	instead of just one.

	This version of the patch creates a new _mutt_list_hook() function
	that (in theory) other hooks could use if they were changed to
	return a list. It also changes the behavior when a crypt-hook is
	declined: previously it would immediately use the original recipient
	for key selection. Now it will only do that if all crypt-hooks for a
	recipient are declined. This allows all, a subset, or none of the
	hooks to be used.

	Thanks to Rejo Zenger, Remco Rijnders, and Dale Woolridge for their
	work on various versions of this patch.

2015-04-15 19:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (1e26a962ab7a)

	* doc/manual.xml.head: Fix a few more incorrect documentation lines
	for hooks.

	Hopefully this finishes up aac979f8b529 and ca5aff2a4b6e.

2015-04-15 18:57 -0700  Kevin McCarthy  <kevin@8t8.us>  (d12cb775b779)

	* crypt-gpgme.c, doc/manual.xml.head, init.h, pgp.c, pgp.h, pgpkey.c:
	Use fingerprints instead of keyIDs internally. (see #3695)

	Add a helper function, pgp_fpr_or_lkeyid(), that returns the
	fingerprint if available, otherwise falls back to the long key id.
	Convert Mutt to use that value for pgp command invocation.

	Change gpgme to use an equivalent crypt_fpr_or_lkeyid() function in
	a couple places too (for keylist generation and sign-as key
	selection).

	Update documentation to mention fingerprints and the --with-
	fingerprint option for gpg invocation.

	Change pgp_long_ids to default: yes, but add a note mentioning it's
	only used for the display of key IDs in a few places.

2015-03-12 14:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (bd21cff208c4)

	* recvattach.c: Allow attachments from unencrypted emails to be
	deleted.

	Print a warning if the message is signed or partly signed.

	Thanks to David Haguenauer for the original patch!

2015-04-06 18:39 -0700  Kevin McCarthy  <kevin@8t8.us>  (ca5aff2a4b6e)

	* doc/muttrc.man.head: Clarify hook pattern vs regexp in muttrc.man
	page.

	Updates to the muttrc.man page were inadvertently not included in
	changeset:aac979f8b529. Fix mbox-hook and crypt-hook to show they
	accept a regexp, not a pattern.

2015-04-05 13:52 -0700  Kevin McCarthy  <kevin@8t8.us>  (e3e6febd8240)

	* contrib/smime.rc: Fix smime.rc typos and spacing issues. (closes
	#3745)

	Thanks to David J. Weller-Fahy for that patch.

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (1bd26d871d76)

	* crypt-gpgme.c: Fix const errors caused by find_keys() changes.

	Part 4 of the oppenc series changed the keyID type to const as part
	of some cleanup changes. At the time, that only propagated to
	crypt_getkeybystr(), but with the fingerprint changes, this is
	starting to propagate too far.

	Create a separate non-const variable to deal with the crypt hook
	value and revert crypt_getkeybystr()'s parameter to non-const.

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (b8ead28d8e84)

	* compose.c, crypt-gpgme.c, pgp.c, smime.c: Add ui elements for oppenc
	mode.

	Add a status message to the Security line when oppenc is enabled.

	For each send menu, add the ability to toggle it on or off. When
	enabled, the menus won't show the (e)ncrypt or (b)oth options, and
	the (c)lear function only clears the SIGN bit when it is active.

	Change the gpgme_send_menu() to directly use the ENCRYPT and SIGN
	flags instead of the PGPENCRYPT/SIGN and SMIMEENCRYPT/SMIME flags.
	Using the latter sometimes resulted in the APPLICATION bit unset,
	which made oppenc unhappy.

	The send_menus previously used a switch statement using choice
	numbers. Since the menus now vary based on the oppenc option and
	message bit being set, these were all changed to convert the numbers
	back to a choice letter.

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (2ec6a8d91de4)

	* crypt.c, mutt.h, mutt_crypt.h, postpone.c, send.c, sendlib.c: Add a
	security bit to the message for oppenc mode.

	This allows oppenc to be enabled/disabled on a message level. If
	something initially enables encryption, such as crypt_autoencrypt or
	crypt_replyencrypt, oppenc is turned off for the message.

	Change the postpone/resume code to persist the oppenc bit.

	Also change resend message to enable and invoke oppenc if the option
	is set.

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (b38c4838976f)

	* compose.c, crypt.c, init.h, mutt.h, send.c: Add the
	crypt_opportunistic_encrypt option and calls.

	This patch creates the OPTCRYPTOPPORTUNISTICENCRYPT option and
	documentation.

	It also adds calls to crypt_opportunistic_encrypt() during initial
	message composition, after updating to, cc, or bcc, and after
	editing the message (if edit_headers is enabled).

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (b10d0a945623)

	* crypt.c, mutt_crypt.h, send.c: Implement
	crypt_opportunistic_encrypt().

	This function will be called to flip encryption on and off based on
	message recipients.

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (db2abe57adb5)

	* crypt-gpgme.c, pgp.c, pgp.h, pgpkey.c, smime.c: Implement
	oppenc_mode in the find_keys methods.

	oppenc_mode is used by crypt_opportunistic_encrypt to determine
	whether there are valid keys for all recipients of a message,
	without prompting the user.

	The patch wraps around prompts, and makes getkeybyaddr methods
	return a valid address-matching key without prompting.

	The patch also fixes a small problem with gpgme's getkeybyaddr. When
	determining if there were multiple strong matches, it was comparing
	the crypt_key_t instead of its kobj member (gpgme_key_t).

	The patch also enables a call to crypt_is_numerical_keyid() in
	find_keys(), so that crypt-hooks can actually be checked without
	prompting when gpgme is enabled. (The addition was patterned off of
	the pgp_findKeys() function).

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (80b963ff82d3)

	* crypt.c, mutt_crypt.h, pgp.c: Pull is_numerical_keyid() into
	crypt.c.

	A subsequent patch (re?)-introduces a call to is_numerical_keyid
	inside find_keys(). Rather than duplicate the function, this patch
	pulls it into crypt.c, where find_keys() and pgp_findKeys() can both
	call it.

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (04eb395d80a7)

	* crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-classic.c, crypt-mod-
	pgp-gpgme.c, crypt-mod-smime-classic.c, crypt-mod-smime-gpgme.c,
	crypt-mod.h, crypt.c, cryptglue.c, mutt_crypt.h, pgp.c, pgp.h,
	smime.c, smime.h: Introduce an oppenc_mode parameter

	It's added to the parameter lists through the call stack down to the
	find_keys calls.

	No functionality is implemented yet. This patch is separated just to
	keep other patches more readable.

2015-03-30 15:45 -0700  Kevin McCarthy  <kevin@8t8.us>  (5b443e7da81b)

	* crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-classic.c, crypt-mod-
	pgp-gpgme.c, crypt-mod-smime-classic.c, crypt-mod-smime-gpgme.c,
	crypt-mod.h, crypt.c, cryptglue.c, mutt_crypt.h, pgp.c, pgp.h,
	smime.c, smime.h: Refactor the address list generation out of the
	find_keys routines.

	All four find_keys routines have a similar set up code for
	generating a single address list out of the to, cc, bcc lists. This
	patch pulls all the code into crypt_get_keys.

	This is done to simplify the functions before later patches make
	them more complicated (with the oppenc_mode parameter).

2015-03-17 16:28 -0700  Kevin McCarthy  <kevin@8t8.us>  (59bd9030e898)

	* doc/manual.xml.head: Document limitation of color index and server-
	side searches. (see #3723)

2015-03-17 16:28 -0700  Kevin McCarthy  <kevin@8t8.us>  (ab101844dc07)

	* doc/manual.xml.head: Add entries for =B and =h in pattern modifier
	table.

	Since these operate differently for IMAP, it's worth adding explicit
	entries to the table for these two.

2015-03-17 16:28 -0700  Kevin McCarthy  <kevin@8t8.us>  (aac979f8b529)

	* doc/manual.xml.head: Clarify hook documentation to specify regexp
	instead of pattern.

	Account-hook, crypt-hook, and mbox-hook accept a regexp parameter,
	not a pattern.

2015-03-04 19:24 -0800  Kevin McCarthy  <kevin@8t8.us>  (09be71b645a7)

	* pgp.c: Fix pgp_application_pgp_handler to remove all tempfiles.

	If multiple PGP blocks are present in an email, Mutt only cleans up
	the tempfiles for the last block. Thanks to Dennis Preiser for the
	patch and sample mbox file demonstrating the problem.

	This patch also fixes the argument to mutt_perror for the pgpout
	tempfile.

2015-02-19 11:00 -0800  Kevin McCarthy  <kevin@8t8.us>  (71f12fef8c6f)

	* sendlib.c: merge stable

2015-02-10 18:29 +0100  Peter Wu  <peter@lekensteyn.nl>  (70b85d8b232b)

	* sendlib.c: Fix buffer underread for empty header values. (closes
	#3736)

	When a header has no value (*p == '\0' so l == 0), do not read
	outside the buffer but print the newline anyway when a tag is
	already printed (col != 0).

	Caught by ASAN while opening a draft with no Subject.

2015-02-11 21:38 +0100  Eike Rathke  <erack@erack.de>  (f5b1b75c5958)

	* crypt-gpgme.c, crypt.c, mutt_crypt.h, pgpkey.c: Allow fingerprint
	user input for key selection. (see #3695)

	Accept and check input of a fingerprint and find the matching key.

	Note that for both to work, match against and display of
	fingerprint, the pgp_list_pubring_command and
	pgp_list_secring_command need to contain the
	--with-fingerprint option, or have with-fingerprint in
	~/.gnupg/gpg.conf.

2015-02-15 10:09 -0800  Kevin McCarthy  <kevin@8t8.us>  (af5951f5d81c)

	* contrib/gpg.rc, gnupgparse.c: Add fingerprint record parsing for pgp
	list keys. (see #3695)

	Modify parse_pub_line to parse fpr records and add the fingerprint
	to the pgp_key_t's fingerprint field.

	Add "--with-fingerprint --with-fingerprint" to the
	pgp_list_pubring_command and pgp_list_secring_command commands in
	contrib/gpg.rc. The second invocation generates fpr records for
	subkeys too.

2015-02-15 10:08 -0800  Kevin McCarthy  <kevin@8t8.us>  (47b4e57b2f1c)

	* pgplib.c, pgplib.h, pgppubring.c: Convert pgp_key_t fingerprint to a
	char* (see #3695)

	Currently only pgppubring.c is using the fingerprint field, and is
	using it to store a binary version of the fingerprint.

	Convert the field to store a null-terminated string. Modify
	pgppubring.c to use to use the new field.

2015-02-10 12:14 -0800  Kevin McCarthy  <kevin@8t8.us>  (385d7434c9d6)

	* pgpkey.c: Protect addr with NONULL in pgp_getkeybyaddr.

	This was introduced by bb3b01f41ed2, but wasn't included in the
	NONULL checks added in 9a75aa4bd69e.

2015-02-08 14:19 -0800  Kevin McCarthy  <kevin@8t8.us>  (addd7cea01d4)

	* crypt-gpgme.c: Cache uid validity in crypt_key_t.

	In order to find the validity for a crypt_key_t, the code has to
	loop through the key->kobj->uids list up to the correct index. This
	is a bit silly since the uid is available when the crypt_key_t is
	created in get_candidates().

	This patch adds a validity field, and changes the various places to
	use that instead of looping.

	Also fix a bug in _crypt_compare_trust(): it was using the validity
	of the first uid instead of the corresponding uid's validity.

2015-02-08 13:44 -0800  Kevin McCarthy  <kevin@8t8.us>  (7162033d1fb8)

	* crypt-gpgme.c: Fix pgp-gpgme to set revoke/expired/disabled flags.

	The code wasn't settings those flags in get_candidates(). This patch
	adds it to the pgp path. I don't know if these flags apply to SMIME
	so am leaving them out for the smime branch.

	Fix up crypt_select_key() to follow the same logic as
	pgp_select_key().

2015-02-03 15:39 -0800  Kevin McCarthy  <kevin@8t8.us>  (2fd1b9f17b80)

	* contrib/smime.rc, init.h: Change the smime_encrypt_with default to
	aes256.

	Openssl supports -aes256 at least since 2004, and it's a stronger
	algorithm than des3.

	Also:
	- Remove the incorrect documentation comment about defaulting to 3des
	if unset.
	- Change the default set in contrib/smime.rc.

2015-02-04 11:04 -0800  Kevin McCarthy  <kevin@8t8.us>  (d2f5832a9e68)

	* send.c: Protect SmimeDefaultKey for postpone/resume.

	PgpSignAs is saved and restored in ci_send_message(), but
	SmimeDefaultKey was not.

	Also, fix a bug where an empty PgpSignAs was not restored back to
	empty if the postponed email contained a SignAs value.

2015-02-02 13:25 -0800  Kevin McCarthy  <kevin@8t8.us>  (3f4dc0ce66ae)

	* postpone.c: Fix mutt_parse_crypt_hdr() sign_as behavior.

	Currently, if a message is postponed with only the E encryption
	flag, when it is resumed, pgp_sign_as will be overwritten (with an
	empty string).

	This intention of the behavior was probably to restore the exact
	state of pgp_sign_as upon resuming. However, if the message wasn't
	marked for signing, the state of pgp_sign_as is not known. This
	patch changes the mutt_parse_crypt_hdr() to only set an empty
	pgp_sign_as if there is an S flag (and if set_empty_signas is true).

	mutt_edit_headers() also uses the function, but it doesn't want to
	overwrite pgp_sign_as with just an S flag. The set_signas parameter
	is renamed to (a hopefully clearer) "set_empty_signas".

2015-01-31 20:05 -0800  Kevin McCarthy  <kevin@8t8.us>  (1235dd48ef3f)

	* contrib/smime.rc, init.h: Update smime_encrypt_with documentation to
	list all algorithms.

	Thanks to Michael Schwipps for the patch!

2015-01-15 14:18 -0800  Kevin McCarthy  <kevin@8t8.us>  (688d66ae6014)

	* imap/message.c, mailbox.h, mx.c, sendlib.c: Send the IMAP \Draft
	flag when postponing a message.

	This patch adds a mx_open_new_message() flag, M_SET_DRAFT. It also
	adds a MESSAGE->flags.draft flag.

	mutt_write_fcc() passes the M_SET_DRAFT flag to
	mx_open_new_message(), which then sets MESSAGE->flags.draft. Then,
	imap_append_message() is able to see this flag and so adds the
	\Draft flag.

	The imap_append_message() function started to have a bit too many
	flags, so this version of the patch separates out the flag
	generating code into a simpler version.

2015-01-31 11:53 -0800  Brendan Cully  <brendan@kublai.com>  (200185ed86bc)

	* crypt-mod-pgp-gpgme.c: gpgme: typo in previous commit

2015-01-31 11:21 -0800  Brendan Cully  <brendan@kublai.com>  (20e46d7bc453)

	* configure.ac, crypt-gpgme.c, crypt-mod-pgp-gpgme.c: gpgme: guard
	mail-key on presence of gpgme_op_export_keys

	This function is too new to be assumed present.

2015-01-30 14:17 +0100  Vincent Lefevre  <vincent@vinc17.net>  (b804f2daca31)

	* po/fr.po: Updated French translation.

2015-01-29 15:40 -0800  Kevin McCarthy  <kevin@8t8.us>  (282832c0329a)

	* mutt_sasl.c: Clean up sasl warnings.

	These were caused by assigning callback functions to the
	sasl_callback_t.proc member. The callback type doesn't list any
	parameters, because parameters vary by callback. The fix was simply
	assigning a cast.

	Cyrus-sasl2 has a sasl_callback_ft typedef that their sample code
	uses for this purpose, but it is in a different header, saslplug.h,
	and isn't in their 1.5 tree. Since this is probably not portable to
	other implementations, I just added an equivalent cast.

2015-01-27 16:15 -0800  Kevin McCarthy  <kevin@8t8.us>  (73b97b986e0d)

	* configure.ac, mutt_ssl_gnutls.c: Clean up gnutls warnings.

	Most of the warning were caused by deprecated types:
	gnutls_certificate_credentials gnutls_certificate_status
	gnutls_datum gnutls_digest_algorithm gnutls_session
	gnutls_transport_ptr gnutls_x509_crt Even though I believe the
	replacements have been around for a while, the patch adds autoconf
	checks and fallback typedefs.

	One warning was caused by casting an int to a pointer for the second
	parameter to gnutls_transport_set_ptr(). Recent gnutls has a
	replacement gnutls_transport_set_int() macro, but this macro simply
	(eventually) casts the parameter using
	"(gnutls_transport_ptr_t)(long)". So this patch just does the same.

2015-01-25 18:09 -0800  Kevin McCarthy  <kevin@8t8.us>  (df55f14f4585)

	* crypt-gpgme.c, init.h, pgp.c: Remove GPG_AGENT_INFO check for GnuPG
	2.1 compatibility. (closes #3715)

	GnuPG version 2.1 stops exporting the GPG_AGENT_INFO environment
	variable, so mutt can't check for the presence of that to ensure the
	agent is running.

	For GPGME, we can check for the OpenPGP protocol being present. For
	classic pgp, we have to trust the user setting.

	This patch is based on the patches sent by CustaiCo and muffins.
	Thank you both for reporting the problem and creating a patch.

2015-01-27 00:52 +0100  Vincent Lefevre  <vincent@vinc17.net>  (a0a5e505463e)

	* po/fr.po: Updated French translation.

2015-01-26 13:07 +0100  Vincent Lefevre  <vincent@vinc17.net>  (aa67709a73ce)

	* INSTALL, README.SECURITY, README.SSL, TODO, configure.ac,
	curs_lib.c, help.c, imap/message.c, lib.c, mh.c: Corrected various
	spelling mistakes (most of them reported by codespell).

2015-01-23 10:33 -0800  Kevin McCarthy  <kevin@8t8.us>  (ec93761e3e12)

	* crypt-gpgme.c, crypt-mod-pgp-gpgme.c: Implement mail-key, Esc-K, for
	gpgme. (closes #3488)

	This patch implements the make-key-attachment function for gpgme,
	modeled after the pgp version.

	It also adds an optional tempf parameter to
	data_object_to_tempfile() so the function can be reused for make-
	key-attachment.

2015-01-19 15:58 -0800  Kevin McCarthy  <kevin@8t8.us>  (b39219ffe75b)

	* pgpkey.c: pgp_getkeybystr: Pull key matching out of the address
	match loop.

	Since the key is invariant inside the address loop, there is no need
	to match against it with each address.

	All the keys should have at least one address record (see
	bb3b01f41ed2), but in case a record was malformed, add a check for
	that to keep the same logic.

2015-01-21 10:14 +0100  Eike Rathke  <erack@erack.de>  (5d7345b4c516)

	* doc/devel-notes.txt: HEAD is dead, remove wrong instruction from doc
	/devel-notes.txt

	Branch HEAD was closed over a year ago. If one was following the
	instruction to update -C HEAD you'd end up with an empty source tree
	and had to checkout the default branch again.

2015-01-18 17:50 +0100  Eike Rathke  <erack@erack.de>  (6e5a62946141)

	* crypt-gpgme.c: Allow short and long key ID user input in
	crypt_getkeybystr()

	The following did not work, e.g. when leaving a key list, and at the
	"Sign as" or "Encrypt to" prompt attempting to enter a key ID:
	* set pgp_long_ids=no
	  * enter a long key ID, with or without leading 0x
	* set pgp_long_ids=yes
	  * enter a short key ID without leading 0x

	Specifically entering a long key ID should always be possible as
	evil32.com has shown.

	This also cleans up the logic used to determine the matching
	condition, which was quite convoluted.. it even slightly speeds up
	the loop as less string operations are involved in the inner
	condition.

	This only changes how the result obtained from the crypt_* gpgme
	interface is filtered.

2015-01-18 17:45 +0100  Eike Rathke  <erack@erack.de>  (63ad7cf0d0de)

	* pgp.c, pgp.h, pgpkey.c: Allow short and long key ID user input in
	pgp_getkeybystr()

	The following did not work, e.g. when leaving a key list, and at the
	"Sign as" or "Encrypt to" prompt attempting to enter a key ID:
	* set pgp_long_ids=no
	  * enter a long key ID, with or without leading 0x
	* set pgp_long_ids=yes
	  * enter a short key ID without leading 0x

	Specifically entering a long key ID should always be possible as
	evil32.com has shown.

	This also cleans up the logic used to determine the matching
	condition, which was quite convoluted.. it even slightly speeds up
	the loop as less string operations are involved in the inner
	condition.

	This only changes how the result obtained from the pgp_* command
	line interface is filtered.

2015-01-17 14:34 -0800  Kevin McCarthy  <kevin@8t8.us>  (58a9dbfd0d25)

	* crypt-gpgme.c: Fix some context, data, and key memory leaks in
	gpgme.

	The context and data cleanup just involved adding missing
	gpgme_release() and gpgme_data_release() calls in a few places.

	The key usage was a little more involved:
	  * Fix crypt_free_key(). It wasn't freeing the key passed in, and
	didn't work properly if multiple keys were passed in. It also was
	missing a call to gpgme_key_unref().

	 * Add free_recipient_set() to properly unref all the keys before
	freeing the array.

	 * Fix get_candidates() to ref keys added to the crypt_key_t list,
	and unref the keys returned by gpgme_op_keylist_next().

	 * Change usages of gpgme_key_release() to gpgme_key_unref(). The
	former was deprecated in gpgme version 0.4.1 (2003-06-06).

2015-01-17 14:42 -0800  Kevin McCarthy  <kevin@8t8.us>  (cc7903944687)

	* hcache.c: Fix the hcache type punning warning.

	This patch fixes the type punning warning by switching from (safe
	but perhaps not elegant) casting to using a union.

	Thanks to Vincent Lefevre for his input and suggestion to use the
	union as a better solution to the problem!

2015-01-15 13:19 +0100  Vincent Lefevre  <vincent@vinc17.net>  (d732298789f2)

	* curs_lib.c: Also colorize the initial mutt_enter_fname prompt.

	Note: the new prompt obtained after a key is typed was already
	colorized.

2014-08-12 14:04 -0700  Kevin McCarthy  <kevin@8t8.us>  (4ba366bc7c45)

	* doc/manual.xml.head, enter.c, history.c, history.h: Add a scratch
	buffer to the history ring. (closes #3082)

	This patch creates an extra slot in the history ring for a scratch
	buffer (at h->last). If you are editing inside that buffer, it is
	preserved when you scroll up/down through the history. Editing while
	in other places in history are *not* preserved with this patch.

	Another behavior change worth noting with this patch: the position
	in history is now reset to the scratch buffer after each input
	entry. Before, the position would be stay wherever it was - you
	didn't restart at the "bottom" each time.

2013-11-06 13:07 -0800  Kevin McCarthy  <kevin@8t8.us>  (8a2d9d352e2c)

	* globals.h, init.h, mutt.h, send.c: Add option to encrypt postponed
	messages. (closes #3665)

	This patch is based on Christian Brabandt's patch sent to mutt-
	users.

	Add two new configuration variables: $postpone_encrypt and
	$postpone_encrypt_as. When $postpone_encrypt is set and a message is
	marked for encryption, the message will be encrypted using the key
	specified in $postpone_encrypt_as before saving the message.

	In this patch, $postpone_encrypt_as must be specified. I
	experimented with passing safe_strdup( NONULL (PostponeEncryptAs))
	when unspecified, but although gpg.conf has a default-key setting, I
	could not get it to work properly. (pgpclassic gave an error message
	and gpgme sefaulted.)

	Although not necessary, this patch turns off signing during
	encryption of the postponed message (and turns it back on before
	saving), since there is no need to sign the message yet.

2015-01-09 14:22 -0800  Kevin McCarthy  <kevin@8t8.us>  (25430a489665)

	* color.c, contrib/colors.default, contrib/colors.linux, curs_lib.c,
	doc/manual.xml.head, doc/muttrc.man.head, mutt_curses.h: Add color
	type for prompts.

	This adds a new color type, MT_COLOR_PROMPT, that can be used to
	colorize prompts (fields, yes/no, multi_choice).

	Thanks to Ben Boeckel for the patch!

2013-10-29 18:25 -0700  Kevin McCarthy  <kevin@8t8.us>  (789501922727)

	* crypt-gpgme.c, pgp.c: Add gpg signature name. (closes #3478)

	Some mail clients display "noname" for the gpg signature attachment.
	This patch sets the mime name to "signature.asc".

	The patch is based on http://dev.mutt.org/trac/attachment/ticket/347
	8/gpg_signature_name.patch with the changes:
	  - removes the configuration options
	  - removes mime description

2015-01-06 14:38 -0800  Kevin McCarthy  <kevin@8t8.us>  (cd57f8893b43)

	* configure.ac, globals.h: merge stable

2014-12-31 20:35 -0800  Kevin McCarthy  <kevin@8t8.us>  (31ce789af3df)

	* crypt-gpgme.c: Fix segfault of extract-keys (^K) under gpgme.
	(closes #3698)

	This patch is based on the patch by Ben Price, which relocated the
	safe_fclose (&in) after its use by keydata in
	pgp_gpgme_extract_keys. Thank you for the patch!

	In addition, this patch:
	  * removes spurious (debug?) output when the extract keys is finished.
	  * adds a gpgme_data_release() call to free the keydata.

2014-10-10 14:17 +0800  Kevin McCarthy  <kevin@8t8.us>  (e7a77a6bfb84)

	* query.c: Fix a memory leak in mutt_query_complete.

	When a single result was returned, it was written to the buffer and
	returned, but the query result was never freed.

	This patch creates a free_query function and changes the code to use
	that everywhere.

2014-08-14 20:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (c7f116b6dc20)

	* configure.ac: Fix variable name in configure.ac.

	$ac_cv_search_STRINGPREP_CHECK_VERSION should be
	$ac_cv_search_stringprep_check_version, to match the first parameter
	of the AC_SEARCH_LIBS([stringprep_check_version] above.

	Running configure was giving a "test: =: unary operator expected"
	error.

2014-12-28 09:41 -0800  Kevin McCarthy  <kevin@8t8.us>  (8a981dce369e)

	* globals.h: Remove duplicate SmimeCryptAlg declaration in globals.h

	Thank you Elias Diem for the patch.

2015-01-06 14:31 -0800  Kevin McCarthy  <kevin@8t8.us>  (59c2c4be08a7)

	* pgpkey.c: merge stable

2014-12-01 14:19 -0800  Kevin McCarthy  <kevin@8t8.us>  (0aebf1df4359)

	* sendlib.c: Revert write_one_header() to skip space and tab. (closes
	#3716)

	This patch fixes CVE-2014-9116 in the stable branch. It reverts
	write_one_header() to the pre [f251d523ca5a] code for skipping
	whitespace.

	Thanks to Antonio Radici and Tomas Hoger for their analysis and
	patches to mutt, which this patch is based off of.

2015-01-05 18:28 -0800  Kevin McCarthy  <kevin@8t8.us>  (5a86319adad0)

	* pgpkey.c: Fix segv in pgp_getkeybystr(). (closes #3725)

	When searching for keys, and the user supplies "" to match against,
	pgp_getkeybystr will have values: p = ""; l = 0; After returning
	from pgp_select_key(), it will try to assign to p[l-1].

	(As a note, the function is chopping off and restoring the trailing
	"!" character because of ticket #1928.)

2015-01-03 11:33 -0800  Kevin McCarthy  <kevin@8t8.us>  (79ea10b2d81c)

	* commands.c: Change bounce to use mutt_parse_adrlist() for address
	parsing.

	When prompting for recipients, forwarding, replying, and mailing all
	use mutt_parse_adrlist() to parse the addresses. This allows for
	addresses to be separated by spaces.

	Bounce message currently uses rfc822_parse_adrlist(), which doesn't
	allow the spaces. This one-line patch simply changes bounce to
	behave the same as mail, reply, and forwarding for the address
	prompt.

	Thanks to Roger Cornelius for the patch!

2014-12-31 20:35 -0800  Kevin McCarthy  <kevin@8t8.us>  (5530e9fb17d9)

	* crypt-gpgme.c: Fix segfault of extract-keys (^K) under gpgme.
	(closes #3698)

	This patch is based on the patch by Ben Price, which relocated the
	safe_fclose (&in) after its use by keydata in
	pgp_gpgme_extract_keys. Thank you for the patch!

	In addition, this patch:
	  * removes spurious (debug?) output when the extract keys is finished.
	  * adds a gpgme_data_release() call to free the keydata.

2014-08-12 14:33 -0700  Kevin McCarthy  <kevin@8t8.us>  (9a75aa4bd69e)

	* gnupgparse.c, pgpkey.c: Wrap pgp_uid_t->addr in NONULL(). (closes
	#3564)

	The previous patch introduced the possibility for addr to be null.
	Mutt is surprisingly robust against null strings, but there are a
	few places that should be wrapped in NONULL().

2014-08-12 14:33 -0700  Kevin McCarthy  <kevin@8t8.us>  (bb3b01f41ed2)

	* gnupgparse.c: Fix parse_pub_line to allow an empty User-ID field for
	a pub record. (see #3564)

	A key whose primary uid record has an empty User-ID will result in
	the user being unable to use the key to encrypt an email in mutt.
	This is because the mutt functions for key selection iterate through
	the address fields of a key for matching against and for displaying
	to the user.

	This change allows a pgp_uid_t record to be created for a pub record
	whose User-ID field is blank. So the key will have one address
	record, albeit with a null addr field.

2013-11-02 20:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (4909bd9c9149)

	* main.c: Override draft headers with arguments. (closes #3580)

	Currently, if the -H option is used, it is not possible to redefine
	the recipient addresses with positional argument. This patch fixes
	it as well as CC, Bcc, and Subject headers.

	This patch is based on the patch by Petr Písař at http://dev.mutt.or
	g/trac/attachment/ticket/3580/override_draft_headers_with_arguments.
	patch

	This version of the patch merges the To, Cc, and Bcc commandline
	arguments into the template, and fixes a few small problems with the
	previous patch.

	This patch also moves the fin close outside the "if (tempfile)"
	block, since it is opened outside that block.

2014-06-21 13:51 -0700  Kevin McCarthy  <kevin@8t8.us>  (daf61444d454)

	* pgpinvoke.c: Enable %a format string for all pgp command configs.
	(closes #3699)

	Currently, the documentation states that, with the exception of
	pgp_getkeys_command, all the PGP format commands should be available
	to the pgp_*_command configuration variables.

	However, the %a format is actually only enabled for
	pgp_clearsign_command, pgp_encrypt_sign_command, and
	pgp_sign_command.

	Philip Rinn discovered this problem when he was trying to add a
	"--encrypt-to %a" to pgp_encrypt_only_command. Rather than just fix
	the one configuration he was having the problem with, this patch
	enables %a usage for all of them. (With the exception of the
	documented pgp_getkeys_command.)

2013-12-18 19:19 -0800  Kevin McCarthy  <kevin@8t8.us>  (630bbc147022)

	* doc/manual.xml.head: Note correct usage of $edit_headers. (closes
	#3673)

	Ticket 3673 shows that it isn't necessarily obvious a blank line is
	needed between the headers and body of a message when using
	$edit_headers. This patch adds a small note to the documentation,
	indicating the blank line should be preserved between the headers
	and body.

	Thank you Sinan Kaan Yerli for the patch.

2014-08-13 13:46 -0700  Kevin McCarthy  <kevin@8t8.us>  (89b17d3cd510)

	* doc/mutt.man, doc/pgpring.man: Clarify PGPPATH usage in manpages.

	Make more clear that, when used with the original PGP program, mutt
	and pgpring rely on this being set.

2014-10-10 14:17 +0800  Kevin McCarthy  <kevin@8t8.us>  (45fbc40193aa)

	* query.c: Fix a memory leak in mutt_query_complete.

	When a single result was returned, it was written to the buffer and
	returned, but the query result was never freed.

	This patch creates a free_query function and changes the code to use
	that everywhere.

2014-08-21 18:41 -0700  Kevin McCarthy  <kevin@8t8.us>  (b1ef16f25425)

	* init.c: Remove unused variable t in start_debug().

	t was set but never used. This was generating a compiler warning.

2014-08-14 20:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (80186ee6eb57)

	* configure.ac: Fix variable name in configure.ac.

	$ac_cv_search_STRINGPREP_CHECK_VERSION should be
	$ac_cv_search_stringprep_check_version, to match the first parameter
	of the AC_SEARCH_LIBS([stringprep_check_version] above.

	Running configure was giving a "test: =: unary operator expected"
	error.

2014-12-28 09:41 -0800  Kevin McCarthy  <kevin@8t8.us>  (1630cee66057)

	* globals.h: Remove duplicate SmimeCryptAlg declaration in globals.h

	Thank you Elias Diem for the patch.

2014-11-04 23:40 -0600  David Champion  <dgc@uchicago.edu>  (39d3ddb56d34)

	* init.h: Disable SSLv3 by default.

	Since Oct. 14 2014 SSLv3 is no longer considered safe. See POODLE:
	https://en.wikipedia.org/wiki/Transport_Layer_Security#POODLE_attack

2014-10-11 13:20 -0700  Brendan Cully  <brendan@kublai.com>  (3a46874d5845)

	* hcache.c: hcache tcdb debug logging

2014-10-11 11:05 -0700  Brendan Cully  <brendan@kublai.com>  (85393e522337)

	* Makefile.am, doc/Makefile.am, flymake.am, imap/Makefile.am: add
	check-syntax target for flymake

2014-10-11 10:59 -0700  Brendan Cully  <brendan@kublai.com>  (bb7f59864d47)

	* .hgignore: ignore generated pgpewrap/pgpring man pages

2014-10-11 10:58 -0700  Brendan Cully  <brendan@kublai.com>  (0dc2dafab53a)

	* .hgignore: ignore gnu global tags

2014-09-07 12:00 -0700  Brendan Cully  <brendan@kublai.com>  (4a814b05874f)

	* merge stable

2014-09-07 11:04 -0700  Brendan Cully  <brendan@kublai.com>  (1b583341d5ad)

	* mutt_sasl.c: mutt_sasl: fix double negative in iptostring result
	check (fixes #3705)

2014-09-07 10:52 -0700  Brendan Cully  <brendan@kublai.com>  (769905e66205)

	* mutt_sasl.c: mutt_sasl: whitespace only

2014-09-07 10:36 -0700  Brendan Cully  <brendan@kublai.com>  (c81c93e64af8)

	* UPDATING, po/nl.po: merge stable

2014-07-25 20:43 +0200  Vincent Lefevre  <vincent@vinc17.net>  (b8bebc2f9a55)

	* po/fr.po: Updated French translation.

2014-03-13 23:37 +0000  Ivan Vilata i Balaguer  <ivan@selidor.net>  (375ba5ce358c)

	* po/ca.po: Updated Catalan translation.

2014-03-13 17:41 +0000  Vsevolod Volkov  <vvv@mutt.org.ua>  (99dda89b7685)

	* po/uk.po: Updated Ukrainian translation.

2014-03-13 17:41 +0000  Vsevolod Volkov  <vvv@mutt.org.ua>  (061217dd31ef)

	* po/ru.po: Updated Russian translation.

2014-03-13 17:36 +0000  Jonathan Wakely  <bugs@kayari.org>  (fd531fc9188c)

	* doc/mutt.man: fix typo in man page.

2014-03-13 03:56 +0000  Petr Pisar  <petr.pisar@atlas.cz>  (67673770fb96)

	* po/cs.po: Updated Czech translation

2014-03-12 09:44 -0700  Brendan Cully  <brendan@kublai.com>  (d9f45fa9458c)

	* .hgsigs: mutt-1.5.23 signed

2014-03-12 09:28 -0700  Brendan Cully  <brendan@kublai.com>  (4790aa52f0f2)

	* .hgtags: Added tag mutt-1-5-23-rel for changeset b8a63730c848

2014-03-12 09:28 -0700  Brendan Cully  <brendan@kublai.com>  (b8a63730c848)

	* ChangeLog, VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po: automatic post-release commit for mutt-1.5.23

2014-03-12 09:25 -0700  Brendan Cully  <brendan@kublai.com>  (07556816c588)

	* build-release: build-release: make sure version is picked up by
	autoconf

	* mkchangelog.sh: mkchangelog: only show log entries on current branch

	* build-release: No more devel

2014-03-11 10:04 -0700  Michael Elkins  <me@sigpipe.org>  (3c13c4188912)

	* UPDATING: add user visible changes since 1.5.22 release.

	* copy.c: Fix buffer overrun caused by not updating a string length
	after address expansion.

2013-10-24 09:55 -0700  Michael Elkins  <me@sigpipe.org>  (3d5e23a66a1a)

	* init.h: remove trailing period from documentation for
	$pgp_list_secring_command

	* init.h: remove trailing period from documentation for
	$pgp_list_pubring_command

2013-04-26 12:10 -0700  Kevin McCarthy  <kevin@8t8.us>  (914e13a3694d)

	* postpone.c: Fix postpone/resume to not remove a Mail-Followup-To
	header (closes #3070)

	This solution changes mutt_prepare_template() to check whether the
	message_id field is NULL to decide whether to wipe the message-id
	and mail-followup-to headers when instantiating the message.

	If we are resending a message, we don't want the previous message-id
	and mail-followup-to headers. If we are resuming a postponed
	message, however, we want to keep the mail-followup-to header if any
	was set before the postpone. (grafted from
	d7d83298011a6e7aa31bde49e0b6b21209a85fd2)

2013-10-22 15:12 -0500  Aaron Schrab  <aaron@schrab.com>  (4a24e6233a5f)

	* version.sh: version.sh: step back from $() to ``. closes #3661
	(grafted from 01cf5814dfe5e79b65b1d950aab1276d19a9f031)

2013-07-14 19:48 -0700  Kevin McCarthy  <kevin@8t8.us>  (b5c894182719)

	* muttlib.c: Allow filename prompt when saving multiple attachments to
	a directory. (closes #3083)

	Currently, if you specify a directory when saving multiple
	attachments and choose (a)ll, the first attachment is saved without
	confirming the filename. Subsequent attachments prompt for the
	filename.

2013-10-04 18:22 +0000  Michael Elkins  <me@sigpipe.org>  (95a2230ef889)

	* mutt.h, postpone.c, send.c: When recalling a postponed message that
	does not have a x-mutt-fcc header field, generate a default FCC just
	as we do for new messages. If x-mutt-fcc is present but empty, we
	assume that means the user does not want a copy.

	closes #3653

2013-10-23 11:11 -0700  Michael Elkins  <me@sigpipe.org>  (331d48da153b)

	* crypt-gpgme.c: Ensure that at least one signature was generated to
	catch the case where $pgp_sign_as is unset and no default key is
	specified in ~/.gnupg/gpg.conf

	closes #3658

2013-10-06 09:15 -0700  Michael Elkins  <me@sigpipe.org>  (99d913f46eb9)

	* handler.c, smime.c: use LOFF_T as the type for variables used in
	fseeko()

	closes #3487

2013-10-04 18:04 +0000  Michael Elkins  <me@sigpipe.org>  (dd67e8649ea4)

	* crypt-gpgme.c: Display the KeyID when the pubkey is not found in the
	user's keyring during signature verification.

	closes #3654

2013-10-23 11:11 -0700  Michael Elkins  <me@sigpipe.org>  (db3028e34ce0)

	* mutt_ssl_gnutls.c: return 0 if import of cert failed to match other
	error conditions.

2013-10-23 11:11 -0700  Michael Elkins  <me@sigpipe.org>  (4dde4bcda519)

	* mutt_ssl_gnutls.c: only terminate the write-half of the TLS
	connection to avoid hanging if the remote doesn't respond.

	RFC5246 section 7.2.4 states that the initiator of the closure need
	not wait for the remote to response before closing the read-half.

	closes #3633

2013-10-22 21:11 -0700  Brendan Cully  <brendan@kublai.com>  (2ab618f4f6b0)

	* create stable branch

2013-10-21 11:58 -0700  Michael Elkins  <me@sigpipe.org>  (0d9d7c486331)

	* doc/manual.xml.head: add note about use of ! ~Q in send-hook when
	paired with reply-hook.

2013-10-19 11:23 -0700  Michael Elkins  <me@sigpipe.org>  (84acf5f0ce92)

	* crypt-gpgme.c: remove <stdbool.h> and use "1" instead of "true".
	closes #3657

	see #3642 for the change that caused this bug.

2013-10-18 14:12 -0700  Michael Elkins  <me@sigpipe.org>  (b9693e10f431)

	* UPDATING: update UPDATING with 1.5.22 release date

2013-10-17 22:55 -0700  Brendan Cully  <brendan@kublai.com>  (6f5fe49fdf64)

	* .hgsigs: mutt-1.5.22 signed

2013-10-17 22:43 -0700  Brendan Cully  <brendan@kublai.com>  (941ba77040a8)

	* .hgtags: Added tag mutt-1-5-22-rel for changeset 8c5ea668e7e0

2013-10-17 22:43 -0700  Brendan Cully  <brendan@kublai.com>  (8c5ea668e7e0)

	* ChangeLog, VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po: automatic post-release commit for mutt-1.5.22

2013-10-16 16:04 +0000  Michael Elkins  <me@sigpipe.org>  (5648f4b2ed44)

	* rfc822.c: Rework logic to avoid advancing list pointer inside the
	for loop.

	closes #3531

2013-10-15 15:41 +0000  Ivan Vilata i Balaguer  <ivan@selidor.net>  (20954d6af1b1)

	* po/ca.po: updated Catalan translation

2013-10-11 15:51 +0000  Vsevolod Volkov  <vvv@mutt.org.ua>  (d60465c5ee6a)

	* po/uk.po: updated Ukranian translation

2013-10-11 15:49 +0000  Tamotsu TAKAHASHI  <ttakah@lapis.plala.or.jp>  (b9ba481ed72a)

	* po/ja.po: updated Japanese translation

2013-10-07 17:32 +0000  Michael Elkins  <me@sigpipe.org>  (804e46bc366e)

	* doc/pgpewrap.man, doc/pgpring.man: add missing files that were
	supposed to be included with
	[76f8df0ac80396559aa80e7f145be6f235a6db51]

2013-10-07 17:21 +0000  hhorak  <hhorak@redhat.com>  (76f8df0ac803)

	* doc/Makefile.am, doc/PGP-Notes.txt: adds some missing options in doc
	and adds man pages for binaries pgpewrap and pgpring.

	closes #3643

2013-10-07 17:09 +0000  esr  <esr@thyrsus.com>  (8d888e4d4f0b)

	* doc/makedoc.c, doc/muttrc.man.head: Problems with muttrc.5:

	Ambiguous or invalid backslash. This doesn't cause groff a problem.
	but it confuses doclifter and may confuse older troff
	implementations.

	Unknown or invalid macro. That is, one that does not fit in the
	macro set that the man page seems to be using. This is a serious
	error; it often means part of your text is being lost or rendered
	incorrectly.

	Use local definitions of .EX/.EE or .DS/.DE to avoid low-level troff
	requests in the page body. There are plans to add these to groff
	man; in the interim, this patch adds a compatible definition to your
	page.

2013-10-07 16:10 +0000  esr  <esr@thyrsus.com>  (02234de89d2a)

	* doc/mutt.man: Problems with mutt.1:

	Ambiguous or invalid backslash. This doesn't cause groff a problem.
	but it confuses doclifter and may confuse older troff
	implementations.

	Spelling error or typo.

2013-10-06 09:31 -0700  nihilhill  <nihilhill@gmail.com>  (24bb691dcde7)

	* crypt-gpgme.c: include <stdbool.h> for definition 'true'

	closes #3642

2013-10-05 15:57 +0800  Kevin McCarthy  <kevin@8t8.us>  (035306822940)

	* attach.c: Fix segfault when viewing text attachments in compose
	menu. (closes #3644)

	The segfault was introduced in changeset b9f9e3147eb4. Since
	decoding and charset conversion aren't needed for attachments when
	composing a message, this patch reverts to just using
	mutt_save_attachment() to view "raw data" for text attachments in
	the compose/send case.

	This patch is based on Michael Elkins' patch at http://dev.mutt.org/
	trac/attachment/ticket/3644/view_attach_compose_segfault with just a
	missing return value check added.

2013-10-06 14:32 +0000  Aaron Schrab  <aaron+mutt@schrab.com>  (6bcde5f1c7a7)

	* commands.c, hook.c, imap/command.c, imap/imap.c: Ensure that BUFFER
	variables are initialized to prevent later attempts to traverse an
	uninitialized pointer.

2013-10-05 19:25 +0000  Aaron Schrab  <aaron+mutt@schrab.com>  (132861c8b4e9)

	* commands.c, hook.c, imap/command.c, imap/imap.c, imap/message.c,
	init.c, keymap.c, pattern.c, score.c: Consistently use
	mutt_buffer_init function

	Despite the existence of the mutt_buffer_init function, most
	initializations were instead done with memset. Use the specific
	function instead to make it easier if later changes are made to how
	the initialization should be done.

2013-10-04 16:47 +0000  Michael Elkins  <me@sigpipe.org>  (0beba37c336b)

	* crypt-gpgme.c, handler.c, init.c, pop_auth.c: fix more comment typos

2013-07-23 14:07 +0200  Ondřej Bílka  <neleai@seznam.cz>  (bc7e7cf0fed3)

	* compose.c, crypt-gpgme.c, crypt-mod.h, curs_lib.c, date.c,
	doc/makedoc.c, editmsg.c, handler.c, imap/util.c, init.c,
	intl/gettextP.h, intl/plural.c, keymap.c, lib.c, mbox.c, mkdtemp.c,
	mutt.h, mutt_menu.h, mutt_ssl.c, mutt_ssl_gnutls.c, muttlib.c, mx.c,
	parse.c, pattern.c, pop.c, pop_auth.c, pop_lib.c, recvcmd.c,
	regex.c, send.c, signal.c, smime.c, snprintf.c, sort.h, thread.c:
	fix typos in comments

2013-04-16 20:12 -0700  Kevin McCarthy  <kevin@8t8.us>  (d3096e8796e7)

	* pager.c: Don't exit pager if quit=ask is answered "no".

	This patch addresses ticket 2788.

	Currently if you quit ('Q') from inside the pager, with quit=ask-yes
	or quit=ask-no, and you respond "no", mutt leaves you back in the
	index menu.

	This patch changes it so that mutt does not exit the pager.

2013-04-11 02:17 +0000  Michael Elkins  <me@sigpipe.org>  (4c5163272b9c)

	* browser.c, enter.c, imap/message.c, init.c, mbox.c, muttlib.c, mx.c,
	pop.c, query.c, smime.c, system.c: backout c1371176ea45

2013-04-11 01:59 +0000  Michael Elkins  <me@sigpipe.org>  (f99e91980f0f)

	* getdomain.c, init.c: Backed out changeset 1142ed8974fa

2013-04-10 23:40 +0000  Michael Elkins  <me@sigpipe.org>  (1142ed8974fa)

	* getdomain.c, init.c: use gethostname() to determine the system host
	name

	use getaddrinfo() to look up canonical DNS name, and fall back to
	hinting from /etc/resolv.conf

	see #3298

2013-04-10 22:38 +0000  Michael Elkins  <me@sigpipe.org>  (c1371176ea45)

	* browser.c, enter.c, imap/message.c, init.c, mbox.c, muttlib.c, mx.c,
	pop.c, query.c, smime.c, system.c: fix various compiler warnings;
	most were due to unchecked return values from system calls.

2013-03-04 04:14 +0000  is  <is@netbsd.org>  (d498f0e91914)

	* lib.c: use mkdtemp() to create temporary directory rather than
	mktemp() followed by mkdir()

	closes #3637

2013-02-23 03:12 +0000  Michael Elkins  <me@sigpipe.org>  (4c16c0d1ba9e)

	* pop.c, pop_lib.c: use of sscanf() had undefined behavior, replace
	with simple parsing instead

	see #3636

2013-02-22 18:31 +0000  Michael Elkins  <me@sigpipe.org>  (c7eff98bb299)

	* smime.c: increase string size by one byte to accomodate the
	terminating null character in fscanf() since the maximum field width
	does not include it

	closes #3636

	hat tip: Will Fiveash

2013-02-22 16:30 +0000  john beck  <john.beck@oracle.com>  (14596ac2b323)

	* rfc1524.c, sendlib.c: fix potential buffer overflow in off-by-one
	bounds checking error

	closes #3635

2013-02-08 17:06 +0000  Michael Elkins  <me@sigpipe.org>  (302044b4ed3f)

	* curs_lib.c: explicitly call mutt_refresh() prior to endwin() to
	force a screen redraw.

	[4903e80356d3] removed the call, but some environments (screen+xterm
	under SuSE11/12) don't properly flush without it prior to the
	endwin() call

2013-01-31 05:06 +0000  Michael Elkins  <me@sigpipe.org>  (2a1c5d3dd72e)

	* curs_lib.c: do not use mutt_message() to display prompt in
	mutt_yesorno().

	properly calculate screen width of prompt string by using
	mutt_strwidth() rather than strlen()

	use safe_asprintf() return the formatted yes/no string since
	specifying COLS+1 is wrong when dealing with multibyte characters

	closes #3412 closes #3352

2013-01-23 21:52 +0000  Michael Elkins  <me@sigpipe.org>  (b86b154f3988)

	* buffy.c, buffy.h, mh.c, mx.h: add support for $mail_check_recent to
	mh mailbox driver

	closes #3629

2013-01-23 19:52 +0000  Michael Elkins  <me@sigpipe.org>  (4903e80356d3)

	* curs_lib.c: do not explicitly reset the terminal attributes and move
	the cursor in mutt_endwin(). endwin() itself should handle this.

	closes #3627

2013-01-22 02:02 +0000  Michael Elkins  <me@sigpipe.org>  (acc8b2afdf29)

	* configure.ac: remove PKG_CHECK_MODULE() check and always use
	AC_CHECK_HEADERS()

	only check for <idn/idna.h> when <idna.h> isn't found

	closes #3626

2013-01-20 21:45 +0000  Michael Elkins  <me@sigpipe.org>  (98e031cd81d4)

	* configure.ac, main.c, mutt_idna.h: use pkg-config to look for libidn
	if available.

	checking <idn/idna.h> rather than including -I/usr/include/idn for
	Solaris 11.

	closes #3624

2013-01-17 23:04 +0000  Michael Elkins  <me@sigpipe.org>  (7fcc0049f250)

	* attach.c: backout [392e945dfba7]

	closes #3293 see #3234

2013-01-17 23:03 +0000  Michael Elkins  <me@sigpipe.org>  (b9f9e3147eb4)

	* attach.c: when falling back to viewing an attachment as text in the
	internal pager, perform charset conversion

	this change is meant to replace [392e945dfba7]

	see #3234 see #3293

2013-01-17 02:43 +0000  Michael Elkins  <me@sigpipe.org>  (571e945d6544)

	* hcache.c, hcache.h, imap/util.c, mh.c, pop.c: use a separate flag
	for mutt_hcache_store() to signal that the gettimeofday() value
	should be substituted, so that a 0 uidvalidity can be used by the
	imap driver.

	closes #3501

2013-01-17 02:10 +0000  Michael Elkins  <me@sigpipe.org>  (b58cdfacfb89)

	* attach.c, handler.c, protos.h: change semantics of
	mutt_is_autoview() to return 1 if there is a matching mailcap entry
	and either $implicit_autoview is set or the MIME type matches the
	user's auto_view list.

	closes #3496 closes #3426

2013-01-14 20:39 -0800  Michael Elkins  <me@mutt.org>  (1a75c9e477b4)

	* from.c: detect pipermail-style obscured return path in mbox From
	lines

	see #1200

2013-01-14 19:23 -0800  Michael Elkins  <me@mutt.org>  (8c75478735a3)

	* curs_main.c: allow use of sync-mailbox when the current limit has no
	visible messages

	closes #3538

2013-01-14 08:50 -0800  Michael Elkins  <me@sigpipe.org>  (05cd8d0d1450)

	* handler.c: avoid debug warning about trailing whitespace in a base64
	encoded attachment

	closes #3558

2013-01-04 04:05 +0000  Michael Elkins  <me@sigpipe.org>  (90f7869decec)

	* Makefile.am: When "make install" fails to chgrp or chmod the
	mutt_dotlock binary, add the reason why we are doing this so the
	user knows what to look for.

2013-01-03 16:12 -0800  Michael Elkins  <me@sigpipe.org>  (d7d26c40e1e5)

	* pager.c: Fix regression introduced by [10cc06eff52b] where the
	CLEARLINE() removal was not replaced by a move() to position the
	cursor at the correct location to draw the status bar.

	closes #3619

2013-01-03 19:04 +0000  Michael Elkins  <me@sigpipe.org>  (7fe92ce1cfc1)

	* parse.c: Remove unused variable `matched'.

2013-01-03 19:04 +0000  Michael Elkins  <me@sigpipe.org>  (6f4ce8ce80a7)

	* parse.c: Fix memory leak when multiple x-label or supersedes header
	fields exist in the header.

	In order to keep the current behavior where the value of the last
	header field present is the one used, free any previous value.

2013-01-03 08:03 -0800  Michael Elkins  <me@sigpipe.org>  (21457574a9b6)

	* main.c: Backed out changeset bf84f24e512d

2013-01-02 23:43 +0000  Michael Elkins  <me@sigpipe.org>  (bf84f24e512d)

	* main.c: display +/-NCURSES_WIDECHAR when displaying ncurses version
	to show whether we are linked against -lncurses or -lncursesw

2013-01-01 21:39 +0100  Matthias Andree  <matthias.andree@gmx.de>  (ea52317444ef)

	* hcache.c: Drop unneeded variable HEADER_CACHE that causes clang
	warnings.

	The variable was unused and clang warned that it was not emitted to
	the .o file.

2012-12-31 23:29 +0000  Michael Elkins  <me@sigpipe.org>  (32ec63debe52)

	* init.h: fix xml validation error in manual.xml in auto-generated
	content due to missing paragraph mark in the $editor docstring

2012-12-31 15:03 -0800  guns  <self@sungpae.com>  (474e9e809054)

	* rfc822.c: Fix accidental var redeclation with --enable-exact-address

	closes #3615

2012-12-31 14:54 -0800  Michael Elkins  <me@sigpipe.org>  (bf6bf2a80c35)

	* merge

2012-12-31 14:52 -0800  Michael Elkins  <me@sigpipe.org>  (5196c3d6c5d0)

	* curs_lib.c: reset to color normal before clearing to end of line
	when printing a message/error string

	closes #3617

2012-12-31 19:06 +0000  Michael Elkins  <me@sigpipe.org>  (ca67a3dad949)

	* doc/gen-map-doc: update regexp to include const keyword. The auto
	generated documentation of functions was failing due to a change in
	the source code format.

2012-12-30 19:48 -0800  Antonio Radici  <antonio@dyne.org>  (b1b49019fec0)

	* headers.c: Ensure that the in-reply-to header field was actually
	present before deciding it was removed.

	closes #3378

2012-12-30 19:17 -0800  Michael Elkins  <me@sigpipe.org>  (a90f57e0adbd)

	* ChangeLog: update ChangeLog

2012-12-30 19:14 -0800  Michael Elkins  <me@sigpipe.org>  (c03ba94d8750)

	* imap/message.c: add __FREE_CHECKED__

2012-12-30 19:12 -0800  Michael Elkins  <me@sigpipe.org>  (f7247ad288e7)

	* UPDATING: document the TLS changes since 1.5.21

2012-12-30 18:49 -0800  Michael Elkins  <me@sigpipe.org>  (10cc06eff52b)

	* color.c, compose.c, curs_lib.c, curs_main.c, menu.c, mutt_curses.h,
	pager.c, remailer.c: make the SETCOLOR() macro use bkgdset() on
	systems which have it, and attrset() when we don't.

	closes #3005

2012-12-30 09:26 -0800  Michael Elkins  <me@sigpipe.org>  (8c0b9ddee11f)

	* configure.ac: remove m4_translit because it generates a warning with
	newer versions of autoconf when used in AC_INIT. Instead, use tr -d
	to output the version string without a trailing newline.

2012-12-27 21:04 -0800  Michael Elkins  <me@mutt.org>  (b0265d385207)

	* version.sh: restore ability for version.sh to cope with a repository
	directory with a space in it.

2012-12-27 20:33 -0800  Aaron Schrab  <aaron@schrab.com>  (13c9a5d820f2)

	* configure.ac, version.sh: Use the directory where the version.sh
	script is located as the directory where it is run. Since this will
	be run in a separate shell anyway, there's no need to worry about
	changing current directory.

	This eliminates the need for the caller to specify where the source
	directory is located, and doesn't require that the code take special
	care to use the appropriate directory. The fallback method of using
	`cat VERSION` was broken in this respect, it would not work when run
	from a different directory.
	--- configure.ac | 2 +- version.sh | 7 ++++--- 2 files
	changed, 5 insertions(+), 4 deletions(-)

2012-12-27 17:37 -0800  Michael Elkins  <me@sigpipe.org>  (0f281c548d69)

	* configure.ac: use [] around body of AC_CHECK_HEADER to avoid
	problems with older versions of autoconf

2012-12-27 18:56 -0800  Michael Elkins  <me@mutt.org>  (8728418605fd)

	* configure.ac: avoid using m4_esyscmd_s() since it is not available
	in older versions of autoconf. use m4_esyscmd() and m4_translit()
	to whack the newline instead.

	see #3613

2012-12-22 18:00 -0800  Michael Elkins  <me@sigpipe.org>  (de974f67eba3)

	* configure.ac, init.h, mutt_ssl.c: Uses SSLv23_client_method() in
	mutt_ssl_starttls() because TLSv1_2_client_method() does not honor
	the SSL_OP_NO_TLS* flags.

	closes #3612

2012-12-22 15:04 -0800  Michael Elkins  <me@sigpipe.org>  (d07c9ee9a92b)

	* configure.ac: If neither --with-idn nor --without-idn are given, use
	-I/usr/include/idn when checking for the libidn header files, if
	present (needed for Solaris 11).

	Don't bother checking for the idna_* functions if we didn't find
	-lidn

2012-12-21 11:17 +0100  Matthias Andree  <matthias.andree@gmx.de>  (7d55bad3b11f)

	* patchlist.sh: Fix VPATH-based generation of non-hg-mq based
	patchlists.

	Note: Makefile.am runs patchlist.sh with $(srcdir)/PATCHES provided
	on stdin.

2012-12-21 11:07 +0100  Matthias Andree  <matthias.andree@gmx.de>  (759dd53302a0)

	* version.sh: Fix VPATH build outside Mercurial repositories.

2012-12-21 12:37 -0800  Michael Elkins  <me@sigpipe.org>  (494af2a964cb)

	* Makefile.am: add version.sh and check_sec.sh to EXTRA_DIST so they
	are including in the "make dist" output.

2012-12-20 21:13 -0800  Michael Elkins  <me@mutt.org>  (5554d811eb99)

	* imap/util.c: fix forgotten RETSIGTYPE change id [18a724e9eba0]

2012-12-20 20:49 -0800  Michael Elkins  <me@mutt.org>  (18a724e9eba0)

	* configure.ac, sendlib.c, signal.c: remove deprecated check for
	signal() return type

2012-12-20 20:45 -0800  Michael Elkins  <me@mutt.org>  (6de2578088ab)

	* configure.ac: update configure.ac with autoupdate

2012-12-20 20:34 -0800  Michael Elkins  <me@mutt.org>  (fe28a8bdd598)

	* configure.ac: change AM_CONFIG_HEADER to AC_CONFIG_HEADERS and move
	it after the AM_INIT_AUTOMAKE. config.h was not being generated
	from the dist package.

2012-12-20 17:09 -0800  Michael Elkins  <me@sigpipe.org>  (21c085ae6e8f)

	* configure.ac: modernize intialization of configure.ac

2012-12-21 00:38 +0100  Matthias Andree  <matthias.andree@gmx.de>  (0703095bf52d)

	* Makefile.am: Fix 'make distcheck': missing txt2c* and po/mutt.pot
	cleanup

2012-12-20 14:44 -0800  Michael Elkins  <me@sigpipe.org>  (f8774119c433)

	* menu.c: remove redundant #include statements

2012-12-20 14:40 -0800  Michael Elkins  <me@sigpipe.org>  (489031af8fdd)

	* menu.c: remove extern decl for Charset_is_utf8 since menu.c includes
	mbyte.h which has the same decl.

2012-12-20 11:20 -0800  Michael Elkins  <me@mutt.org>  (6674c087fd4f)

	* configure.ac: backout out changeset 36b0cc717ecc

2012-12-19 15:26 -0800  Michael Elkins  <me@sigpipe.org>  (879c9516154c)

	* crypt-gpgme.c: allow for CRLF line endings when comparing for the
	OpenPGP block identifiers

	adapted from http://svnweb.freebsd.org/ports/head/mail/mutt/files
	/patch-pgp?revision=301308&view=markup

2012-12-19 14:52 -0800  Michael Elkins  <me@sigpipe.org>  (41089c2982e3)

	* pager.c: support nbsp in the pager.

	imported from http://svnweb.freebsd.org/ports/head/mail/mutt/files
	/patch-nbsp?revision=301308&view=markup

2012-12-19 14:40 -0800  Michael Elkins  <me@sigpipe.org>  (fd2d94a0eb20)

	* configure.ac: detect newer BDB versions up to 5.2

	imported from http://svnweb.freebsd.org/ports/head/mail/mutt/files
	/patch-bdb?revision=301308&view=markup

2010-07-22 20:06 +0200  Fabian Groffen  <grobian@gentoo.org>  (bc39bac75ea8)

	* regex.c: http://thread.gmane.org/gmane.mail.mutt.devel/15710

	Interix doesn't have btowc, but it does have mbtowc. Linux manpage
	also discourages the use of btowc.

2012-12-19 13:29 -0800  Petr Pisar  <petr.pisar@atlas.cz>  (f7bd9642217f)

	* po/cs.po: updated cs.po

2012-12-19 11:56 -0800  Michael Elkins  <me@sigpipe.org>  (73900ca5db9a)

	* menu.c: use WACS_* macros for printing wide versions of the line
	drawing characters when linking against ncursesw.

	This patch is based on http://prefix.gentooexperimental.org:8000
	/mutt-patches/file/fea851a2808f/solaris-ncurses-chars.patch

2012-12-19 11:08 -0800  Michael Elkins  <me@sigpipe.org>  (36b0cc717ecc)

	* configure.ac: make configure define _POSIX_C_SOURCE, _XOPEN_SOURCE
	and _XOPEN_SOURCE_EXTENDED to comply with POSIX.1-2008 and XSI
	conforming applications.

2012-12-19 06:57 -0800  Vsevolod Volkov  <vvv@mutt.org.ua>  (52219fecdac8)

	* po/ru.po: update ru.po

2012-12-19 06:55 -0800  Vincent Lefevre  <vincent@vinc17.org>  (caf64f14142d)

	* charset.c: remove duplicate const keyword

2012-12-18 20:46 -0800  Michael Elkins  <me@mutt.org>  (940e528ef852)

	* mutt_ssl.c: disable tls v1.1/1.2 in mutt_ssl_starttls() based on
	$ssl_use_tlsv1_*

	see #3571

2012-12-18 20:38 -0800  Michael Elkins  <me@mutt.org>  (6bdd35fb3378)

	* mutt_ssl_gnutls.c: add support for TLSv1.1/1.2 when using GNUTLS.

	see #3571

2012-12-18 19:44 -0800  hncaldwell  <hncaldwell>  (fab920f01ca7)

	* init.h, mutt.h, mutt_ssl.c: add variables for disabling TLSv1.1/1.2
	when compiled against OpenSSL 1.0.1

	see #3571

2012-12-18 13:50 -0800  Michael Elkins  <me@mutt.org>  (f251d523ca5a)

	* headers.c, lib.h, mutt_crypt.h, parse.c, pop_lib.c, postpone.c,
	rfc1524.c, rfc822.c, send.c, sendlib.c, url.c: rename iswsp() to
	is_email_wsp()

	add new inline funtion skip_email_wsp() to be used in lieu of
	SKIPWS() when parsing ASCII protocols rather than user input.

	change use of SKIPWS() to skip_email_wsp() in places where it is
	likely to be a problem.

2012-12-18 02:21 -0800  Michael Elkins  <me@mutt.org>  (897dcc62e4aa)

	* sendlib.c: fix problem where mutt_substrdup() was called with the
	start pointer > end pointer, as a result of using SKIPWS(). This
	occurred because the header field had an empty body, so the trailing
	newline was skipped over. The fix is to just skip over ascii space
	and htab.

	closes #3609

2012-12-18 01:53 -0800  Honza Horak  <hhorak@redhat.com>  (d7f4b2e2b09a)

	* mutt_ssl_gnutls.c: if the peer's x.509 cert is not valid, we need to
	allow the user to inspect it even if the digital signatures are
	valid

	closes #3506

2012-12-17 20:42 -0800  Vincent Lefevre  <vincent@vinc17.org>  (722c47f6ede9)

	* po/fr.po: updated fr.po

2012-12-17 17:09 -0800  Honza Horak  <hhorak@redhat.com>  (ca4747442189)

	* pop.c: fix segfault in pop driver. when rereading the message
	header, the ENVELOPE* struct is freed, but ctx->subj_hash retains a
	pointer to env->real_subj, so the hash table entry must be deleted
	prior to calling mutt_free_envelope()

	http://pkgs.fedoraproject.org/cgit/mutt.git/tree/mutt-1.5.21-pophash
	.patch?h=f18

2012-12-17 16:47 -0800  Petr Pisar  <petr.pisar@atlas.cz>  (9f8e41dd4e1d)

	* crypt-gpgme.c: Fix NULL pointer dereference in notation name

	closes #3574

2012-12-17 10:39 -0800  Michael Elkins  <me@sigpipe.org>  (e6b271ed1d7f)

	* configure.ac, mutt_ssl.c: use TLSv1.2 if available in the system
	OpenSSL when using starttls

2012-12-17 10:09 -0800  Michael Elkins  <me@sigpipe.org>  (d77d81a69999)

	* mutt_ssl.c: use SSL_get_version() to display the actual SSL protocol
	used rather than the fixed string SSL.

2012-12-16 20:23 -0800  Andrew Gaul  <andrew@gaul.org>  (ed06326ae8a8)

	* doc/dotlock.man, doc/makedoc.c, doc/smime_keys.man, po/bg.po,
	po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/eo.po,
	po/es.po, po/et.po, po/eu.po, po/fr.po, po/ga.po, po/gl.po,
	po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/lt.po,
	po/nl.po, po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po,
	po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, rfc1524.c: Correct
	typos

2012-12-16 19:33 -0800  Michael Elkins  <me@mutt.org>  (5e745e37fe6e)

	* init.h: update documentation for $pgp_getkeys_command to note that
	%r is replaced with the email address, not the public key ID

	closes #1208

2012-12-16 13:28 -0800  Michael Elkins  <me@mutt.org>  (1cc05de753c2)

	* rfc822.c, rfc822.h: use new function iswsp() in place of isspace()
	when testing for whitespace.

	closes #3608 closes #2956

2012-12-15 07:48 -0800  Michael Elkins  <me@mutt.org>  (8aee8497cc2b)

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/message.c,
	imap/util.c: make imap_private.h include message.h for
	IMAP_HEADER_DATA definition

	cast &ctx->data to IMAP_HEADER_DATA** to fix compiler warning

	imap_free_header_data should check for *data being NULL, rather than
	"data"

2012-09-09 19:54 -0700  Andrew Gaul  <andrew@gaul.org>  (d39813193f27)

	* imap/imap_private.h, imap/message.c: Make imap_free_header_data
	type-safe

	Also push conditional into function for safety and consistency with
	other free functions.

2012-12-08 12:31 +0100  Matthias Andree  <matthias.andree@gmx.de>  (c4c65eadeb71)

	* Makefile.am: Fix VPATH build by running txt2c.sh from ${srcdir}
	rather than ".".

2012-12-07 09:51 -0800  Michael Elkins  <me@sigpipe.org>  (d626fb87c489)

	* crypt-gpgme.c: invoke gpgme_check_version() as required to
	initialize the library.

	move locale code to initialization function.

	closes #3300

2012-12-06 07:56 -0800  Michael Elkins  <me@mutt.org>  (ed5ad234aeed)

	* init.h: additional documentation for $editor. closes #3602

2012-12-01 14:48 -0800  Michael Elkins  <me@mutt.org>  (dace74dd904a)

	* doc/manual.xml.head: list-reply documentation should mention its
	behavior wrt the List-Post header field.

	closes #3599

2012-12-01 14:32 -0800  Michael Elkins  <me@mutt.org>  (109ebf6d4e53)

	* send.c: don't perform rfc3676 space stuffing when recalling a
	postponed message where it has already been done.

	closes #3600

2012-12-01 14:31 -0800  Michael Elkins  <me@mutt.org>  (2bf065dd23d6)

	* ascii.c: make ascii_strcasecmp properly handle unequal length
	strings with the same prefix

	closes #3601

2012-10-16 18:13 -0500  David Champion  <dgc@uchicago.edu>  (d414971f0c48)

	* .hgignore, Makefile.am, main.c, muttbug.sh.in, txt2c.c, txt2c.sh:
	Add compiler and configure info to mutt -v output (closes #3537)

	Makefile(.am) updated to produce conststrings.c, which contains C
	strings representing:

	* the compiler's own version information;
	* the CFLAGS value from the Make environment
	* the ./configure options

	main.c is updated to print them when running 'mutt -v'.

	txt2c.sh is added to produce conststrings.c. txt2c.sh uses a
	compiled txt2c binary if possible, for complete fidelity to the
	source strings in whatever encoding they may use. If txt2c is not
	available (could not be compiled, or was not compiled natively) it
	falls back on a shell function to approximate the output using sed
	and tr.

2012-07-22 11:15 -0700  Brendan Cully  <brendan@kublai.com>  (70810a88ce9f)

	* muttlib.c: mutt_buffer_init: just memset the buffer (closes #3588)

	This was meant to be part of the previous commit.

2012-07-21 19:51 -0700  Brendan Cully  <brendan@kublai.com>  (99dbd23ce78f)

	* imap/imap.c, imap/util.c, mbyte.c, muttlib.c, parse.c, protos.h:
	Split mutt_buffer_new out of mutt_buffer_init.

	Currently, no callers were providing a non-NULL buffer to
	mutt_buffer_init, and splitting it will allow more sane semantics
	for buffer allocation, initialization, and destruction in a later
	patch.

2012-07-20 12:32 -0700  Brendan Cully  <brendan@kublai.com>  (6d6df167185c)

	* commands.c, hook.c, init.c, pattern.c: Do not use stack-allocated
	space for BUFFERs

	It will cause mutt_buffer_* to segfault if it needs to grow the
	space. Thanks to Steve Losh for discovering the issue. I have done
	some simple grepping to find other cases, but some may remain.

2012-07-08 22:40 -0700  Dan Fandrich  <dan@coneharvesters.com>  (2f2ebc24920d)

	* send.c: Set text_flowed after send-hook has been applied (closes
	#3550)

2012-07-08 22:27 -0700  Brendan Cully  <brendan@kublai.com>  (5bf02605d988)

	* mutt_ssl_gnutls.c: silence some style warnings

2012-07-08 17:34 -0700  Antonio Radici  <antonio@dyne.org>  (33415ca7d976)

	* copy.c, crypt.c, edit.c, enter.c, init.c: Fix some spelling errors
	(closes #3493)

2012-07-08 17:25 -0700  Brendan Cully  <brendan@kublai.com>  (243710db60e0)

	* mutt_ssl_gnutls.c: gnutls:tls_compare_certificates: check strstr for
	failure (closes #3547)

	A malformed certificate file could cause strstr to return an
	unhandled NULL. Thanks to hhorak for the proposed patch. This one is
	similar but avoids using memmem for the first time (I am not sure
	about its portability).

2012-07-07 21:57 -0700  Antonio Radici  <antonio@dyne.org>  (8fabaffc2c00)

	* init.c: check_charset: check for NULL before calling strtok_r
	(closes #3326)

	Otherwise, if strtok_r cannot handle NULL an empty *charset setting
	will segfault

2012-07-07 15:50 -0700  Brendan Cully  <brendan@kublai.com>  (c6a44f4f6a99)

	* imap/auth_sasl.c: Do not use SASL for login unless AUTH=LOGIN is
	advertised (closes #3556)

2012-05-25 22:30 +0200  Marco Paolone  <marcopaolone@gmail.com>  (e452440f92a4)

	* po/it.po: Update Italian translation

2012-05-24 22:02 -0700  Brendan Cully  <brendan@kublai.com>  (0488deb39a35)

	* configure.ac: Remove AM_C_PROTOTYPES from configure.ac (closes
	#3579)

	I doubt we have any users of that macro nowadays. It will be
	interesting to hear about it if we do.

2012-05-23 23:29 -0400  Brendan Cully  <brendan@kublai.com>  (0fb6d7579fd1)

	* account.h: Support passwords of up to 127 characters.

	I received a report on IRC of a failure due to a 64-byte password.

2012-04-29 22:15 -0700  Brendan Cully  <brendan@kublai.com>  (41a8d7dceb6c)

	* mutt_ssl_gnutls.c: gnutls: catch gnutls_init failures

	I haven't actually experienced these, but it seems like a good idea.

2012-04-29 22:14 -0700  Brendan Cully  <brendan@kublai.com>  (aadaeb69cbd0)

	* mutt_sasl.c: give user time to read SASL init error message

2011-12-20 22:24 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (c26dbc7021f4)

	* po/ja.po: Updated Japanese translation

2011-12-03 11:13 -0800  Dan Fandrich  <dan@coneharvesters.com>  (9e756d1adb76)

	* addrbook.c, browser.c, charset.c, color.c, compose.c, crypt-gpgme.c,
	curs_lib.c, curs_main.c, date.c, enter.c, functions.h, globals.h,
	handler.c, help.c, imap/auth.c, imap/command.c, imap/message.c,
	imap/utf7.c, imap/util.c, init.c, init.h, keymap.c, keymap.h, lib.c,
	mapping.h, mime.h, mutt_ssl.c, pager.c, parse.c, pattern.c,
	pgpkey.c, pgpmicalg.c, pop_auth.c, postpone.c, protos.h, query.c,
	recvattach.c, remailer.c, rfc2047.c, rfc822.c, rfc822.h, sendlib.c,
	url.c: Declare many structures const (closes #3552)

	Many structs used in mutt are actually constant but are defined
	without the 'const' keyword. This can slow initialization (slightly)
	in some environments due to extra copying and increases the amount
	of writable RAM required at run-time, which can be significant on
	non-MMU systems. Using const can also increase the opportunities for
	compiler optimization.

	The attached patch marks many such structures as const. On my test
	x86 build, this reduces the size of .data by over 50%.

2011-12-03 11:07 -0800  Dan Fandrich  <dan@coneharvesters.com>  (1ed2657f6e24)

	* ascii.c: Inline some small, often-used functions (closes #3551)

	When I first sent this patch to the mailing list in 2008, my
	benchmarking found a reduction in startup time of 15%.

2011-11-26 20:41 -0800  Vincent Lefevre  <vincent@vinc17.net>  (d7b14ea9f708)

	* po/fr.po: Updated French translation

2011-11-28 09:46 -0800  Michael Elkins  <me@mutt.org>  (6f65f6d7d4c9)

	* enter.c: make kill-eow and kill-word consistent in considering words
	to consist only of alphanumeric characters. closes #3549.

2011-11-25 12:52 -0800  Michael Elkins  <me@mutt.org>  (ab1b84289213)

	* sendlib.c: Check that $sendmail is set to avoid potential segfault.
	Closes #3548.

2011-07-13 11:05 -0500  David Champion  <dgc@uchicago.edu>  (b01d63af6fea)

	* hcache.c: Invalidate header caches when spam rules change. closes
	#3473

	User 'exg' on #mutt reported a problem when using header cache with
	IMAP and spam rules. Spam tags are retrieved from cache and not
	updated when spam rules change.

	1. Enable header caching in muttrc 2. Set spam rules in muttrc 3.
	Use IMAP (or POP or Maildir). Your spam rules store spam tags into
	your message headers, and these get cached. 4. Quit mutt 5. Change
	your spam rules in muttrc 6. Relaunch mutt 7. Because of header
	caching, the rfc822 headers are not reparsed, and spam rules are
	not reapplied. User has outdated spam tags.

	Spam rules are applied during rfc822 header parsing because it's the
	only time we get a full and unadulterated view of all headers. Once
	header parse is done we have only processed headers and 'user
	headers' (X-headers). We might do spam rule matching against the
	struct HEADER copy of headers, except that:

	a. the header might not be in HEADER if it's non-standard and not an
	X-header; b. spam rules are regular expressions matching any
	arbitrary header line, and we would need to map these regexps to
	the header used to create the HEADER fields. This would change
	the syntax and behavior of spam rules dramatically.

	One solution, perhaps stopgap, is to invalidate the header cache
	when spam rules change. That's what this patch does. It alters the
	hcache versioning algorithm so that in addition to using the
	compiled-in checksum of mutt's structures definitions, we also mix
	in the user's runtime spam rules. Any time spam rules change the
	hcachever hash value changes, causing the hcache to be rewritten.

2011-07-01 18:21 -0700  Brendan Cully  <brendan@kublai.com>  (54a454492bd0)

	* ChangeLog: Update ChangeLog

2011-07-01 17:23 -0700  Brendan Cully  <brendan@kublai.com>  (94eee9410f7a)

	* version.sh: version.sh: fix(?) failure due to bizarre sh quoting
	rules

	I have not checked POSIX, and sh quoting always makes my head hurt,
	but this seems to suffice for my sh (actually bash in sh mode) when
	HGROOT contains a space.

2011-05-23 13:22 +0200  Olaf Hering  <olaf@aepfle.de>  (81a7c41040bf)

	* browser.c, browser.h: folder_file: change type of new from short to
	int

	As requested by Rocco Rutte in bug #2421 increase the type to int.

	Signed-off-by: Olaf Hering <olaf@aepfle.de>

	* pgppubring.c: fix gcc 4.6 warning -Wunused-but-set-variable in
	pgppubring.c

	pgppubring.c: In function 'pgp_parse_pgp3_sig': pgppubring.c:424:17:
	warning: variable 'hashalg' set but not used [-Wunused-but-set-
	variable] pgppubring.c:423:17: warning: variable 'pkalg' set but not
	used [-Wunused-but-set-variable]

	Signed-off-by: Olaf Hering <olaf@aepfle.de>

2011-06-29 12:01 -0500  David Champion  <dgc@uchicago.edu>  (8b5e41c6a517)

	* version.sh: version.sh: 1003.1 "-k" instead of obsolete "+" syntax
	(closes: #3528)

	* configure.ac, version.sh: version.sh: support building outside of
	source directory

	Reported by Emanuele Giaquinta <e.giaquinta@glauco.it>. Thanks also
	to Michael Elkins <me@sigpipe.org>.

2011-06-25 20:07 -0700  Brendan Cully  <brendan@kublai.com>  (b477d7c5733e)

	* imap/command.c: Parentheses suggested

	* imap/command.c: Do not subscribe to \noselect mailboxes. Closes
	#3445

2011-06-25 15:42 -0700  Honza Horak  <hhorak@redhat.com>  (0e4f1782ea2e)

	* imap/message.c: Avoid creating sparse ctx array when fetch responses
	are ignored. Closes #3288.

2011-06-25 15:23 -0700  Brendan Cully  <brendan@kublai.com>  (53dcb3a21da4)

	* compose.c, muttlib.c: Silence some eclipse warnings

2011-06-20 16:39 -0700  Michael Elkins  <me@mutt.org>  (b574d6f9f532)

	* sendlib.c: rfc2047 encode recipient list in resent-to header field.
	closes #3512

	* rfc822.c: copy idn status when duplicating address object

2011-06-20 16:07 -0700  antonio  <antonio@dyne.org>  (1bb9002567c4)

	* doc/manual.xml.head: fix regexp example in documentation

2011-06-18 21:29 -0700  antonio  <antonio@dyne.org>  (b9856206eee4)

	* mutt_ssl_gnutls.c: Remove the deprecated
	gnutls_certificate_verify_peers() in favour of the new
	gnutls_certificate_veirfy_peers2()

	Reported on http://bugs.debian.org/624085

	closes #3516

2011-06-18 21:07 -0700  Michael Elkins  <me@mutt.org>  (beebe6a4d25d)

	* imap/auth_login.c: clear logging in message when login succeeded.
	closes #3524

2011-05-23 12:59 +0200  Olaf Hering  <olaf@aepfle.de>  (8570f8a10572)

	* smime.c: fix gcc 4.6 warning -Wunused-but-set-variable in smime.c

	smime.c: In function 'smime_handle_entity': smime.c:1663:8: warning:
	variable 'last_pos' set but not used [-Wunused-but-set-variable]

	Signed-off-by: Olaf Hering <olaf@aepfle.de>

	* pgp.c: fix gcc 4.6 warning -Wunused-but-set-variable in pgp.c

	pgp.c: In function 'pgp_application_pgp_handler': pgp.c:254:8:
	warning: variable 'start_pos' set but not used [-Wunused-but-set-
	variable]

	Signed-off-by: Olaf Hering <olaf@aepfle.de>

	* crypt-gpgme.c: fix gcc 4.6 warning -Wunused-but-set-variable in
	crypt-gpgme.c

	crypt-gpgme.c: In function 'show_one_sig_status': crypt-
	gpgme.c:1311:21: warning: variable 'uid' set but not used [-Wunused-
	but-set-variable] crypt-gpgme.c: In function
	'pgp_gpgme_application_handler': crypt-gpgme.c:2285:27: warning:
	variable 'anywarn' set but not used [-Wunused-but-set-variable]
	crypt-gpgme.c:2159:8: warning: variable 'start_pos' set but not used
	[-Wunused-but-set-variable] crypt-gpgme.c: In function
	'crypt_getkeybystr': crypt-gpgme.c:4094:7: warning: variable 'match'
	set but not used [-Wunused-but-set-variable]

	Signed-off-by: Olaf Hering <olaf@aepfle.de>

	* rfc1524.c: fix gcc 4.6 warning -Wunused-but-set-variable in
	rfc1524.c

	rfc1524.c: In function 'rfc1524_expand_filename': rfc1524.c:453:20:
	warning: variable 'r' set but not used [-Wunused-but-set-variable]

	Signed-off-by: Olaf Hering <olaf@aepfle.de>

	* compose.c: fix gcc 4.6 warning -Wunused-but-set-variable in
	compose.c

	compose.c: In function 'redraw_crypt_lines': compose.c:113:7:
	warning: variable 'off' set but not used [-Wunused-but-set-variable]

	Signed-off-by: Olaf Hering <olaf@aepfle.de>

	* imap/imap.c: fix gcc 4.6 warning -Wunused-but-set-variable in imap.c

	imap.c: In function 'imap_open_mailbox': imap.c:558:15: warning:
	variable 'conn' set but not used [-Wunused-but-set-variable] imap.c:
	In function 'imap_open_mailbox_append': imap.c:777:15: warning:
	variable 'conn' set but not used [-Wunused-but-set-variable] imap.c:
	In function 'imap_subscribe': imap.c:1816:15: warning: variable
	'conn' set but not used [-Wunused-but-set-variable] imap.c: In
	function 'imap_complete': imap.c:1944:15: warning: variable 'conn'
	set but not used [-Wunused-but-set-variable]

	Signed-off-by: Olaf Hering <olaf@aepfle.de>

2011-05-22 22:13 -0700  Brendan Cully  <brendan@kublai.com>  (1fc2afbf9e3a)

	* keymap.c, mbox.c: Fix some minor warnings

2011-03-30 07:52 -0700  Michael Elkins  <me@mutt.org>  (f7160c94ff70)

	* keymap.c: fix bug where SIGWICH is ignored when $imap_keepalive <
	$timeout

	closes #3507

2011-03-07 10:17 -0600  David Champion  <dgc@uchicago.edu>  (8d0281f79b21)

	* configure.ac, dotlock.c, mutt.h, version.sh: Extra information in
	mutt version string, redux.

	Restores [f1b4d1d17200] functionality with a slight change to keep
	'make dist' working (see backout in [6b38124a5b81]).

	Automake is too much voodoo for me at this time, so I let it keep
	VERSION. mutt.h defined MUTT_VERSION as VERSION and the code used
	that, so I removed MUTT_VERSION from mutt.h and put it into config.h
	via configure.ac. A couple of tweaks were needed elsewhere. This
	restores the fancy-versioning feature within mutt and keeps 'make
	dist' happy.

2011-03-06 07:31 -0800  Brendan Cully  <brendan@kublai.com>  (6b38124a5b81)

	* configure.ac, version.sh: Back out f1b4d1d17200. It is nice, but it
	breaks make dist.

2011-01-03 13:19 -0600  David Champion  <dgc@uchicago.edu>  (b107737c415c)

	* patchlist.sh: Include mq-based patches in the mutt patch list.

	This augments the contents of the PATCHES file, so that mq-based
	builds do not need to maintain that file.

	* configure.ac, version.sh: Include extra information in mutt version
	string for developer builds.

	When a build is based on an hg clone, include extra information
	about the changeset node, distance from a tagged release, and mq
	applied patch count.

	For example, after this patch is applied my mutt build identifies
	itself (in mutt -v and in <show-version>) as:

	Mutt 1.5.21+26,mq+22 (7edc2073390d) (2010-09-15)

	I have applied 26 changesets applied since 1.5.21 was tagged, 22 of
	which are in my mq patch series. A 1.5.21 release build that is not
	mercurial-based would still appear simply as "1.5.21".

2011-02-21 23:12 -0800  Brendan Cully  <brendan@kublai.com>  (047bd501d6db)

	* UPDATING, init.h: Lower $imap_keepalive default to 300
	seconds

2010-12-30 10:09 -0800  Brendan Cully  <brendan@kublai.com>  (f01b306ebe0e)

	* sendlib.c: Handle missing : in write_one_header debug statement.
	Closes #3483

2010-10-13 07:38 -0700  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (57568da7d9aa)

	* thread.c: fix a minor logic error in thread.c, and a dead code line

2010-10-11 07:56 -0700  Michael Elkins  <me@mutt.org>  (033acdc0a947)

	* pager.c: Backed out changeset 11399121296a

2010-10-07 14:43 -0700  Michael Elkins  <me@mutt.org>  (11399121296a)

	* pager.c: support non-breakable space character in the pager

2010-10-01 07:14 -0700  Michael Elkins  <me@mutt.org>  (1a4c43138685)

	* muttlib.c: fix segfault when $message_cachedir is set and opening a
	POP3 mailbox.

	fixes #3457

2010-09-30 18:11 -0700  Roman Kagan  <rkagan@mail.ru>  (c10f8863e979)

	* crypt-gpgme.c: use gpgme_strerror() in lieu of gpg_strerror()

2010-09-29 14:17 -0700  Michael Elkins  <me@mutt.org>  (a23835db228d)

	* globals.h, handler.c, init.h, mutt.h, rfc3676.c: Add $reflow_text
	boolean, and $reflow_wrap variables to control display of
	format=flowed text parts.

	* rfc3676.c: fix typoh in comment

	* rfc3676.c: fix handling of format=flowed when $wrap is 0.

2010-09-23 11:06 -0700  Michael Elkins  <me@mutt.org>  (f2452f1f1fef)

	* rfc2047.c: RFC2047 encode/decode the group name in an address list.
	closes #3317

2010-09-23 06:56 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net>  (51ee8e8a56bb)

	* po/ca.po: updated Catalan translation

2010-09-20 14:04 +0100  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (d2f10c550d90)

	* mbox.c: Fix typo

2010-09-16 07:19 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (0ca7ed91fe7f)

	* po/ru.po: update ru.po for 1.5.21

2010-09-15 11:47 -0700  me  <me@sigpipe.org>  (59aad6c21703)

	* regex.c: fix compile error with --with-regex and --without-wc-funcs

2010-09-15 10:53 -0700  Brendan Cully  <brendan@kublai.com>  (bd0afbb35c65)

	* UPDATING: Belatedly update UPDATING

2010-09-15 10:21 -0700  Brendan Cully  <brendan@kublai.com>  (b42be44bb41a)

	* .hgsigs: mutt-1.5.21 signed

2010-09-15 10:10 -0700  Brendan Cully  <brendan@kublai.com>  (9c7bd63635de)

	* .hgtags: Added tag mutt-1-5-21-rel for changeset 25a7f8f7d50d

2010-09-15 10:10 -0700  Brendan Cully  <brendan@kublai.com>  (25a7f8f7d50d)

	* VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po: automatic post-release commit for mutt-1.5.21

2010-09-15 10:05 -0700  Michael Elkins  <me@mutt.org>  (54e3139a0362)

	* safe_asprintf.c: suppress check_sec errors

2010-09-13 17:25 -0700  Michael Elkins  <me@mutt.org>  (20b2d496349f)

	* init.h: make $mail_check_recent set by default

2010-09-13 19:00 +0100  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (fea3860ff672)

	* imap/command.c: Restore the previous behaviour of checking for new
	messages in imap folders when mail_check_recent is set.

2010-09-12 19:54 -0700  Michael Elkins  <me@mutt.org>  (a51df78218e8)

	* buffy.c, buffy.h, imap/command.c, init.h, mbox.c, mutt.h: add
	$mail_check_recent boolean to control whether Mutt will notify about
	all new mail, or just new mail received since the last visit to a
	mailbox

	closes #3271

	partly addresses #3310

	* smime.c: fix crash when index contains 0 keys

2010-09-11 07:34 -0700  Michael Elkins  <me@mutt.org>  (0f962f1a6bbb)

	* send.c: Allow setting message security in send2-hook

	This patch delays checking the message security options until after
	the user has an initial chance to edit the message. This allows the
	security options to be set in a send2-hook when using $edit_headers.
	Without this patch, the user has no way of automatically setting
	security based on recipients since the to/cc prompts are bypassed.

	The other change in behavior is if the user happened to use a
	send2-hook to see if the message had security applied *prior* to
	editing the message, that no longer works.

	* keymap.c, keymap.h, main.c: support for ncurses extension allowing
	binding to function keys with modifiers

	* keymap.c: allow octal codes with more than three digits

	* crypt-gpgme.c, mime.h, pgp.c, recvattach.c, sendlib.c: add DISPNONE
	to mean no preferred Content-Disposition; make pgp-signature parts
	DISPNONE for multipart/signed

	* recvcmd.c: fix problem with reply-hook not working when a
	message/rfc822 attachment is selected

	* rfc2047.c: more lenient RFC2047 decoding: accept illegal spaces and
	bare question marks in encoded words

	* curs_main.c, mx.c: fix crash when new mail is received during IMAP
	IDLE

	closes #3335

2010-08-25 00:30 +0100  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (5302767aa6aa)

	* rfc2047.c: Use mutt_substrdup in rfc2047_decode_word

2010-08-24 16:40 -0700  Michael Elkins  <me@mutt.org>  (92b02f77e780)

	* rfc2047.c: detect failure to decode word and copy raw string
	instead; avoids calling strlen() on uninitialized memory

	closes #2923

2010-08-24 18:39 +0100  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (ebd4beafe5eb)

	* mutt_ssl.c: Fix typo.

	* browser.c, hook.c, init.c, menu.c, mutt_ssl_gnutls.c, pager.c: Do
	not call regfree if regcomp fails. The content of the regex_t
	structure is undefined in this case.

	* curs_lib.c, mutt_ssl_gnutls.c: use REGCOMP() macro

2010-08-24 10:03 -0700  Michael Elkins  <me@mutt.org>  (5d59c8b737ba)

	* init.c: add REG_ICASE accidentally removed in changeset 1a35f096c8cb

	* muttlib.c: do not print debug message on ENOENT

2010-08-14 09:18 -0700  Michael Elkins  <me@mutt.org>  (04fd8ddea579)

	* url.c: avoid c99 syntax for backwards compat

2010-08-06 21:52 +0200  Matthias Andree  <matthias.andree@gmx.de>  (24a7b1aa2e55)

	* buffy.c: Fix comparison signedness warnings.

2010-08-12 16:04 -0700  Michael Elkins  <me@mutt.org>  (ced5d3dca974)

	* imap/util.c: Fix bug in imap_keepalive() which erroneously free
	Context when the IMAP connection is shut down by the server.

	Closes #3410

	* url.c: url_parse_mailto should return 0 on success

	fix memory leak errors when unable to parse mailto: URL

	closes #3441

	* mh.c: always update message body size when parsing a maildir message

	* safe_asprintf.c: call va_end() even when vasprintf returns <0

2010-08-09 20:48 -0700  Michael Elkins  <me@mutt.org>  (6572e8bcd723)

	* Makefile.am, imap/message.c, lib.c, lib.h, safe_asprintf.c: rename
	mutt_sprintf() to safe_asprintf() to match the GNU extension that
	performs a similar task

2010-08-09 10:27 -0700  Vincent Lefevre  <vincent@vinc17.org>  (e86ee9991dc3)

	* postpone.c: In postpone.c, function mutt_num_postponed, the old
	{{{OldPostponed}}} is never freed.

	closes #3442

2010-08-09 09:38 -0700  Michael Elkins  <me@mutt.org>  (8051fc8b631c)

	* send.c: clear the real name when $reverse_realname is unset and a
	match is hit so that $realname can be set in a reply- or send-hook

	closes #3427

	* doc/manual.xml.head: fix example of mailto: use on the command line

	* pager.c: fix buffer underrun when processing ANSI escape sequences

	closes #3371

2010-08-08 12:29 -0700  Michael Elkins  <me@mutt.org>  (4dcf19c58139)

	* doc/manual.xml.head, doc/mutt.man: document support for mailto: URLs
	on the command line

	closes #3400

	* imap/message.c: avoid error when the user has requested many extra
	headers via IMAP

	closes #3435

	* lib.c, lib.h: add a malloc+sprintf combo function

2010-08-08 10:21 -0700  Fabian Groffen  <grobian@gentoo.org>  (d4d703e21cdd)

	* pattern.c: fix crash in limit when user enters invalid regexp

	closes #3417

2010-08-07 06:44 -0700  Michael Elkins  <me@mutt.org>  (cc881d855f05)

	* mutt_ssl.c: Fix comparison signedness warnings

	* pop_lib.c: add comment about safety of cast

2010-08-06 21:58 +0200  Matthias Andree  <matthias.andree@gmx.de>  (55f50b2db1f8)

	* pop_lib.c: Fix comparison signedness warning.

	* status.c: Fix signedness warning.

	* .hgignore: Ignore backup files ending in a tilde character.

	* url.c: Fix comparison signedness warnings.

	* gnupgparse.c, pop_auth.c: Fix comparison signedness warnings.

	* lib.h: Resolve if/else empty body ambiguity/warnings when compiling
	without DEBUG.

2010-08-06 17:08 -0700  Michael Elkins  <me@mutt.org>  (5b15d4d96277)

	* configure.ac, init.c, protos.h: detect availablity of 'long long'

	cast time_t to 'long long' prior to bitshifting since it can be a
	float value according to POSIX.1-2008

	closes #3439

2010-08-06 21:22 +0200  Matthias Andree  <matthias.andree@gmx.de>  (bf13863e682e)

	* md5.c: Drop declaration for unused argv/argc parameters.

	Fixes GCC warning with -Wextra.

2010-08-06 13:11 -0700  Michael Elkins  <me@mutt.org>  (998ca956b41b)

	* init.c, muttlib.c: use a 64-bit random value in temporary filenames.

	closes #3158

	* browser.c: avoid using C99 bool

	* browser.c, init.h: add %D format string to $folder_format to expand
	the time based on $date_format.

	properly set the locale for LC_TIME prior to calling strftime()
	closes #1734 closes #3406

	* mutt_ssl.c: fix compiler warning about wrong type for
	SslSessionCerts

2010-08-06 09:58 +0200  Matthias Andree  <matthias.andree@gmx.de>  (473fbe29f626)

	* mutt_ssl.c: Unbreak X.509 SubjAltName checks,

	regression in 6016:dc09812e63a3 that calls strlen on an SSL sk
	rather than its string payload.

	closes #3426

2010-08-06 07:12 -0700  Michael Elkins  <me@mutt.org>  (4ae33a8a1391)

	* configure.ac: properly set _XOPEN_SOURCE to 600 (POSIX.1-2004) when
	detecting th wc*() functions

	closes #3341

2010-08-05 21:57 -0700  Michael Elkins  <me@mutt.org>  (bc5fb152e2ba)

	* mbox.c: when parsing From_ lines in mmdf/mbox, the TZ should be
	computed based on the time in the string rather than the current
	time, otherwise DST issues cause the computed time to be wrong.

	closes #2177

	* thread.c: explanatory comments

2010-08-05 17:03 -0700  andreas  <andreas.amann@tyndall.ie>  (0666d9588eac)

	* curs_main.c, functions.h: do not leave pager when changing sort
	order.

	closes #2143

2010-08-05 16:47 -0700  Michael Elkins  <me@mutt.org>  (57d4b3839172)

	* curs_main.c: do not leave pager when using read-thread and read-
	subthread

	closes #2137

2010-08-04 17:04 -0700  Petr Písař  <petr.pisar@atlas.cz>  (59ca5d7b1656)

	* ChangeLog, po/cs.po: Updated Czech translation

2010-08-04 06:37 -0700  Vincent Lefevre  <vincent@vinc17.org>  (a7f05f29d9bc)

	* po/fr.po: updated French translation

2010-08-03 10:10 -0700  Michael Elkins  <me@mutt.org>  (2c42f4760c8f)

	* browser.c: add locale.h for compililng with -std=c99

	* main.c: adjust help for -a to make it clearer that -- is required
	terminator

2010-07-31 08:21 -0700  Michael Elkins  <me@mutt.org>  (7cd85c18bfaf)

	* muttlib.c: Fix buffer underflow in expansion of format pipes. Add
	better error detection.

	Closes #3432.

2010-07-18 14:24 -0700  Michael Elkins  <me@mutt.org>  (1a35f096c8cb)

	* init.c: use REGCOMP() macro

2010-07-18 22:09 +0100  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (d0e0d174d620)

	* init.c: Skip 'attachments' directive if minor type is not a valid
	regexp

2010-07-09 11:07 -0700  Joel Dahl  <joel@FreeBSD.org>  (6b13e8319c1f)

	* po/sv.po: fix misspelling in Swedish translation

2010-05-18 08:39 -0700  Michael Elkins  <me@sigpipe.org>  (29e37994a536)

	* send.c: Consider any negative return value from send_message() to be
	an error and allow the user to resend.

	Closes #3411.

2010-04-24 16:10 -0700  Brendan Cully  <brendan@kublai.com>  (4cd2daafd03b)

	* mutt_ssl.c: openssl: only call SSL_shutdown during clean
	shutdown (closes #3407)

2010-04-22 09:14 -0700  Vincent Lefevre  <vincent@vinc17.net>  (6ebdfd09abc1)

	* po/fr.po: updated French translation

2010-04-14 15:47 -0700  Michael Elkins  <me@mutt.org>  (15b9d6f3284f)

	* pgp.c: remove toggle and replace with format in pgp-menu

2010-04-12 15:13 -0500  David Champion  <dgc@uchicago.edu>  (41a46373ddd9)

	* compose.c: Improve clarity/uniformity in compose menu's crypto
	display

	Incorporates feedback on "Security: None" key hints.

2010-04-13 06:49 -0700  Michael Elkins  <me@mutt.org>  (4d798ee2898e)

	* muttlib.c: fix bug handling wide pad char in soft-fill mode

2010-04-11 20:00 -0700  Michael Elkins  <me@mutt.org>  (2cd62f40d840)

	* compose.c: increase size of buffer used for displaying addresses in
	the compose menu to avoid truncating on widescreen displays

	* curs_lib.c: clear prompt when user cancels with ^G from a yes/no
	prompt

	* muttlib.c: Fix bug in soft-fill (%*) in $index_format not accounting
	for 'set arrow_cursor'

	* pgp.c: Remove the (i) option from the PGP-menu when encryption or
	signing is not yet selected. The toggle between PGP/MIME and
	Traditional doesn't make sense unless some type of security has been
	requested.

	Closes #3402.

2010-04-06 09:47 -0700  Michael Elkins  <me@mutt.org>  (889aa698cc49)

	* configure.ac, muttlib.c: fix for compiling Mutt with clang: check
	for wchar_h prior to wctype_h in check for wc funcs

2010-04-05 11:12 -0700  Michael Elkins  <me@mutt.org>  (844174efa648)

	* doc/manual.xml.head: [doc] Remove bogus -group parameter from
	unlists and unsubscribe commands; add links to address group section
	for context.

2010-04-03 20:34 -0700  Michael Elkins  <me@mutt.org>  (cf97505addf8)

	* init.c: prevent user from setting $charset to an empty string since
	other code requires it to be set to a valid string

	closes #3326

	* pager.c: allow regexps to match on continuation header lines in
	'color header' commands.

	closes #3373

	* pattern.c: Fix crash on invalid regexp in search string due to
	uninitialized BUFFER variable.

	Closes #3401

2010-04-01 10:10 -0700  Simon Ruderich  <simon@ruderich.org>  (b9baa0234846)

	* attach.c, commands.c, filter.c, muttlib.c, send.c: fix comment typos

2010-04-01 09:59 -0700  Michael Elkins  <me@mutt.org>  (96ed7cdacdc6)

	* init.h: Improve documentation for $query_command to note that Mutt
	automatically adds quotes according to shell quoting rules (thx:
	Simon Ruderich).

	* doc/manual.xml.head: Clarify the documentation on what the line-
	editor is (thx: Simon Ruderich)

2010-03-31 08:50 -0700  Michael Elkins  <me@mutt.org>  (7e9e31b1bd7b)

	* muttlib.c: avoid buffer overflow when expanding the format string
	associated with a 'spam' command.

	closes #3397

2010-03-23 16:03 -0700  Michael Elkins  <me@mutt.org>  (fe29d691deff)

	* doc/muttrc.man.head: remove errant commands in secton on setting
	alternates

2010-03-22 22:16 -0700  Brendan Cully  <brendan@kublai.com>  (69e9a1a0ba2f)

	* sendlib.c: Fix a format string warning

2010-03-22 20:02 -0700  Marcel Telka  <marcel@telka.sk>  (f544730656c1)

	* compose.c: redraw entire screen when exiting editor after re-editing
	the message body in the send menu.

	closes #3393.

2010-03-21 09:52 -0700  Michael Elkins  <me@mutt.org>  (0a29e3f4f4b9)

	* sendlib.c: Do not assume whitespace follows the colon in a header
	field.

	Closes #3385.

2010-03-08 15:13 -0800  Brendan Cully  <brendan@kublai.com>  (ad6d799951cb)

	* configure.ac: Comment about search libsasl for sasl2 functions

2010-03-08 14:04 -0600  Will Fiveash  <Will.Fiveash@Sun.COM>  (b92b9c6a1c85)

	* configure.ac: OpenSolaris sasl fix for configure.ac

2010-03-08 15:00 -0800  Brendan Cully  <brendan@kublai.com>  (05cec973f0d9)

	* pattern.c: When regexp compilation fails, report actual pattern
	along with error.

	* muttlib.c: mutt_buffer_printf: NULL dptr means use data

	* pattern.c: If regcomp fails, assume rx has not been allocated. Fixes
	a core dump for save-hook '~f foo\.bar@(something|other)\.com' =foo.

2010-03-02 11:31 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (fec2720ff6ef)

	* rfc822.c: Fix #2014. Thanks to Vincent Lefevre for help
	with this one.

2010-03-02 11:16 -0800  Brendan Cully  <brendan@kublai.com>  (41cf44ddbb4c)

	* copy.c: Fix thinko in [cc02f079b1b9]

2010-03-01 22:40 -0800  Brendan Cully  <brendan@kublai.com>  (cc02f079b1b9)

	* copy.c: Guard dequote with NULL check on personal field

	* copy.c, rfc822.c, rfc822.h: Another attempt to dequote
	RFC2047-encoded address comments (see #2014)

	* rfc822.c: Backed out changeset 2a4ca6917fd0. It is incompatible with
	$assumed_charset (see #2014).

2010-02-28 23:03 -0800  Brendan Cully  <brendan@kublai.com>  (2a4ca6917fd0)

	* rfc822.c: RFC-2047 decode address text before dequoting it (see
	#2014)

	* doc/manual.xml.head: Fix next-unread-mailbox name in
	documentation. Closes #3319.

2010-02-28 17:23 -0800  Antonio Radici  <antonio@dyne.org>  (25459cbb132a)

	* po/de.po: Fix German translation of "No undeleted messages." (closes
	#3372)

	* pop_lib.c: pop: allow user-specified port to override
	default in URL. Closes #3322.

2010-02-28 17:00 -0800  ludwig  <ludwig@fh-worms.de>  (2c78b28027cc)

	* crypt-gpgme.c: GPGME: Sender verification should be canse-
	insensitive for domain names. Closes #2180

2010-02-26 18:18 -0800  Brendan Cully  <brendan@kublai.com>  (40eca68c394a)

	* UPDATING, init.h: Make $thorough_search default to yes
	(closes #3386)

2010-02-23 12:42 -0800  Brendan Cully  <brendan@kublai.com>  (57124ea5592e)

	* commands.c: Don't use freed ctx.path when updating utime of target
	mailbox in save-message. Thanks to Sean Boudreau for the bug report.

2010-02-22 23:01 -0800  Vincent Lefevre  <vincent@vinc17.net>  (f17302c10229)

	* po/fr.po: Updated French translation.

2010-02-21 13:16 -0800  Brendan Cully  <brendan@kublai.com>  (a6fddecdc5f5)

	* curs_lib.c: Make mutt_yesorno use mutt_message to print query.
	Closes #3352.

2010-02-20 21:56 -0800  Gregory Shapiro  <dev.mutt.org@g.gshapiro.net>  (f723e07c8e6d)

	* OPS, UPDATING, curs_main.c, functions.h: Add imap-logout-
	all to log out of all IMAP connections. Closes #2880.

2010-02-17 00:47 -0800  Simon Ruderich  <simon@ruderich.org>  (260d39279161)

	* doc/manual.xml.head: Document 'n' and 'o' flags in index

	* doc/devel-notes.txt, doc/muttrc.man.head, init.h,
	rfc1524.c: Spelling fixes

2010-02-10 23:29 -0800  Brendan Cully  <brendan@kublai.com>  (b7ec848af36b)

	* doc/manual.xml.head: Fix a typo (closes #3379)

2010-02-01 23:40 -0800  Antonio Radici  <antonio@dyne.org>  (e9965b78e92d)

	* po/sv.po: The Swedish translation has a suboptimal
	translation of the word "Bad" in several places. The proposed patch
	substitutes Dålig (which implies bad "as in quality", and not bad
	"as in error") for Felaktig (erroneous).

	Closes #3370.

	* init.h: Small fix to the muttrc manpage. Closes #3374

2010-01-13 19:12 +0100  Matthias Andree  <matthias.andree@gmx.de>  (e2c60de29015)

	* configure.ac: Fix hcache build on systems with $(EXEEXT), include it
	in mutt_md5.

2009-12-29 00:33 -0500  Brendan Cully  <brendan@kublai.com>  (31881f38ca1e)

	* curs_lib.c: Hack mutt_wstr_trunc to treat M_TREE characters as 1
	cell. Closes #3364.

2009-12-28 22:13 -0500  Brendan Cully  <brendan@kublai.com>  (359de549b2d1)

	* doc/manual.xml.head: Remove spurious quotes from query_command
	example. Closes #3365.

2009-12-14 10:24 -0800  Brendan Cully  <brendan@kublai.com>  (736b6af3c5f1)

	* rfc1524.c: Fix off-by-one errors in mailcap parser.
	Closes #3362

2009-12-10 22:52 -0800  Daniel Jacobowitz  <dan@debian.org>  (b7d2cb7c7ce1)

	* hcache.c: Do not store header color in hcache. If the color
	directive is removed from muttrc, the cached value from the last
	directive would otherwise still be in effect.

2009-12-07 23:08 -0800  Patrick Welche  <prlw1@cam.ac.uk>  (1cf34ea1f128)

	* mutt_ssl.c: STACK* is not defined with newer SSL, use
	STACK_OF instead. Closes #3356.

2009-12-07 22:46 -0800  Peter Rosin  <peda@lysator.liu.se>  (fc9563de3dcb)

	* snprintf.c: Output %p as unsigned in the bundled snprintf

2009-11-14 14:31 -0800  Brendan Cully  <brendan@kublai.com>  (6928f522ac48)

	* curs_main.c: Back out e67f4c347bb4.

	I could not reproduce the problem, and the change makes it
	impossible to change to a real folder when no folder is currently
	open.

2009-10-28 23:03 -0700  Brendan Cully  <brendan@kublai.com>  (89fb586edda2)

	* sendlib.c: Unfold headers to wrap length in pager, when weed is set.

	From Rocco's patch queue.

2009-09-22 23:29 -0700  Antonio Radici  <antonio@dyne.org>  (5037c59a589e)

	* po/it.po: Correct Italian translation of y/n/a prompt.
	Closes #3336

2009-08-27 22:10 -0700  Petr Písař  <petr.pisar@atlas.cz>  (605559e4f88f)

	* po/cs.po: Updated Czech translation.

2009-08-20 11:34 +0200  René Clerc  <rene@clerc.nl>  (6b48ff4e69a3)

	* doc/manual.xml.head: No-brain documentation typo fix

2009-08-20 11:33 +0200  Rocco Rutte  <pdmef@gmx.net>  (e196cfc00105)

	* doc/manual.xml.head: Backed out changeset c9dd93b09ce7

2009-08-20 11:25 +0200  René Clerc  <rene@clerc.nl>  (c9dd93b09ce7)

	* doc/manual.xml.head: No-brain documentation typo fix Hi Rocco,

	Attached a patch for the documentation that fixes a small typo I
	stumbled upon. If you'd rather have me opening a trac ticket,
	please say so; since this is such a no-brainer I figured I'd e-mail
	you directly.

2009-08-17 17:07 +0200  Rocco Rutte  <pdmef@gmx.net>  (d0fce0eec0b3)

	* doc/manual.xml.head, doc/muttrc.man.head, init.h: Doc: fix more
	typos

	* doc/Makefile.am, doc/mutt.pwl: Doc: fix aspell calls, add
	custom mutt-only wordlist

	* curs_main.c: Require already opened folder when using templates for
	change-folder.

	For example, start with -y and type a wrong IMAP password so that no
	mailbox is open. Trying to change folders resulted in a crash.

2009-08-14 21:29 +0200  Rocco Rutte  <pdmef@gmx.net>  (6a08a5244d60)

	* pattern.c: Clear last search pattern if it's invalid.
	Closes #3315.

	We keep both, the string version and compiled version around for
	search-next; however, in case of parsing errors we dropped only the
	compiled version and not the string one making the code attempting
	to perform a search using a NULL pattern.

	* pattern.c: Bail on missing pattern modifiers at end of pattern.
	Closes #3314.

2009-08-13 23:49 +0200  Rocco Rutte  <pdmef@gmx.net>  (f8d50e968853)

	* doc/Muttrc.head, doc/manual.xml.head, init.h: Docs: fix
	typos/style

2009-08-11 12:22 -0700  Tomas Hoger  <thoger@redhat.com>  (dc09812e63a3)

	* mutt_ssl.c: Catch SSL null prefix attach (openssl)

2009-08-09 14:45 -0700  Brendan Cully  <brendan@kublai.com>  (002b4676d502)

	* buffy.c: Add buffy_new and buffy_free abstractions.

2009-08-09 14:53 +0200  Christian Ebert  <blacktrash@gmx.net>  (0153dbc12dc4)

	* doc/manual.xml.head: manual: fix wrong spell checker assumptions

2009-08-09 14:35 +0200  Rocco Rutte  <pdmef@gmx.net>  (59b4c73e7254)

	* doc/manual.xml.head: Manual: Fix typos, consequently use
	en_US spelling

2009-08-08 22:50 -0700  Brendan Cully  <brendan@kublai.com>  (d4ea7f571f10)

	* buffy.c: Split out mailbox-specific code in mutt_buffy_check

	* buffy.c, muttlib.c, mx.c, mx.h, status.c: Unconditionally define
	M_IMAP, M_POP. These aren't bloat, and not having them creates a lot
	of #ifdef clutter.

	* curs_lib.c: Abort prompt on ^C, as was the case prior to
	12a6de725483

2009-08-04 10:47 -0700  Vincent Lefevre  <vincent@vinc17.org>  (15a695678b7b)

	* po/fr.po: Updated French translation.

2009-08-04 12:34 +0200  Rocco Rutte  <pdmef@gmx.net>  (25c2d70f2f00)

	* doc/manual.xml.head: Manual: Add some words of warning to really
	remove IRT header when intended

	* doc/manual.xml.head: Manual: Put mailbox shortcuts into
	table for readability

	* doc/manual.xml.head: Manual: Fix docs for push/exec

2009-08-04 12:08 +0200  Johan D  <djo33@free.fr>  (14bb498c6a1c)

	* mh.c: Fix MH parsing, fixes [0698e8195545]. Closes #3312

2009-08-01 15:16 +0200  Rocco Rutte  <pdmef@gmx.net>  (29727d19634a)

	* doc/manual.xml.head: Manual: use full names for &eacute; and
	&egrave; entities. Closes #3286.

	This is necessary because we want to install a us-ascii manual.txt
	that would contain only "e" instead of accented characters.

2009-07-30 17:56 +0200  Rocco Rutte  <pdmef@gmx.net>  (4a572310c3b5)

	* main.c: Fix mutt -h output for -a/-- options

2009-07-29 13:26 -0700  Brendan Cully  <brendan@kublai.com>  (a2a4286491b4)

	* hcache.c, hcache.h, imap/util.c: Harmonize hcache uidvalidity size
	to unsigned int (per IMAP RFC). Closes #3296.

2009-07-28 23:16 +0200  Rocco Rutte  <pdmef@gmx.net>  (153eac9e03e7)

	* Makefile.am: Add group.h to distribution

	* group.c, group.h, init.c, rfc822.c: Fix some issues with
	ungroup [...] *

2009-07-27 21:14 -0700  Kees Cook  <kees@outflux.net>  (2fc9348684fe)

	* mh.c: Properly propagate mh_read_sequences result. Closes #3308.

2009-07-27 20:49 -0700  Brendan Cully  <brendan@kublai.com>  (5c076ed18883)

	* configure.ac: Do not overwrite docdir unless --with-
	docdir was explicitly given. This allows --docdir from autoconf
	2.60+ to work, though if given --with-docdir will silently override
	--docdir. Closes #3282.

2009-07-24 14:30 +0200  Rocco Rutte  <pdmef@gmx.net>  (86e066a206ac)

	* po/de.po: Update German translation

	* init.c: Fix check_sec.sh warning

2009-07-23 23:36 -0400  Aron Griffis  <agriffis@n01se.net>  (0ee27568ad09)

	* init.c: fix :reset to work with empty strings

	Signed-off-by: Aron Griffis <agriffis@n01se.net>

2009-07-23 23:32 -0700  Vincent Lefevre  <vincent@vinc17.org>  (223020f50cb7)

	* po/fr.po: Updated French translation.

2009-07-23 23:51 +0200  Matthias Andree  <matthias.andree@gmx.de>  (1e77b368ef55)

	* charset.h, rfc2047.c: Use proper prototype for
	mutt_get_default_charset(), fix fallout.

	* bcache.c, charset.c: Fix two warnings "the address of 'foo' will
	always evaluate as 'true'".

2009-07-23 17:28 +0200  Rocco Rutte  <pdmef@gmx.net>  (1597c2074a52)

	* doc/manual.xml.head: Manual: better document what address
	groups are (for)

	* group.c, group.h, init.c, init.h, pattern.c, protos.h, rfc822.c,
	rfc822.h: Implement ungroup command. Closes #3304.

	* init.c, mutt.h, muttlib.c: Move remove_from_rx_list() to muttlib.c,
	name it mutt_remove_from_rx_list()

2009-07-22 15:25 +0200  Fabian Groffen  <grobian@gentoo.org>  (d41e043fa775)

	* keymap.c: Use CRYPT_BACKEND_GPGME instead of non-existent
	HAVE_GPGME

2009-07-22 14:43 +0200  kees  <kees@outflux.net>  (848f08512bf3)

	* hcache.c, rfc822.h: Properly restore addresses from hcache using
	rfc822_new_address(). Closes #3302.

	* mh.c: Don't leak mhs flags in mh_buffy(). Closes #3303.

2009-07-17 17:57 -0400  Aron Griffis  <agriffis@n01se.net>  (a3c4b605cfad)

	* UPDATING: add batch mode send-hooks note to UPDATING

2009-07-14 20:25 -0700  Aron Griffis  <agriffis@n01se.net>  (084fb086a0e7)

	* send.c: Make send-hooks work for batch mode. Closes
	#3219.

	Handle SENDBATCH inline with the normal sending code, instead of
	handling it separately. This allows send-hooks to run, along with
	removing a number of unnecessarily lines of code.

2009-07-11 14:52 +0200  Rocco Rutte  <pdmef@gmx.net>  (6f942afe60b5)

	* charset.c, mbyte.c: Recognize charset extensions, see #3150.

	With utf-8//TRANSLIT, we internally didn't recognize it as utf-8.
	This leads to badly broken behaviour if --without-wc-funcs is used
	for some reason. In that case, if we have utf-8 as charset, we
	implement our own wide char functions; for all other charsets, we
	use the system single-byte locale functions. And using these with
	utf-8 is broken.

	* curs_lib.c: Render blanks to spaces in index, fixes
	[298194c414f0]

	wcwidth(<tab>) returns -1 so 'foo<tab>bar' was rendered to 'foobar',
	and now to 'foo bar'. Closes #3270 again.

2009-07-08 13:37 +0200  Rocco Rutte  <pdmef@gmx.net>  (f22b71d8005a)

	* mbyte.c: Fix compiler warning

2009-07-07 15:03 +0200  Rocco Rutte  <pdmef@gmx.net>  (d5e03a46518c)

	* TODO: Update TODO

2009-07-07 10:49 +0200  Matthias Andree  <matthias.andree@gmx.de>  (cc4d6044b31e)

	* INSTALL: GNU-make based VPATH builds work.

2009-07-07 13:16 +0200  Rocco Rutte  <pdmef@gmx.net>  (f161c2f00d84)

	* UPDATING, bcache.c, doc/manual.xml.head, hcache.c,
	muttlib.c, protos.h: Make hcache+bcache paths always UTF-8. Closes
	#3284.

	* UPDATING, globals.h, init.h, sendlib.c: Add $wrap_headers. Closes
	#3135

	* doc/manual.xml.head: Manual: mention terminal setup for
	charsets, more unicode pros.

	Closes #3292.

2009-07-06 15:28 +0200  Rocco Rutte  <pdmef@gmx.net>  (ccab6c56b557)

	* doc/manual.xml.head: Manual: Add a note about when/why to use utf-8

2009-07-05 18:36 -0700  Brendan Cully  <brendan@kublai.com>  (118b8fef8aae)

	* buffy.c, buffy.h, mx.c: Suppress new mail notification
	from mailbox just left. Closes #3290.

2009-07-02 20:42 +0200  Rocco Rutte  <pdmef@gmx.net>  (042f2ce0b870)

	* doc/manual.xml.head: Manual: minor fixes

	* doc/manual.xml.head, doc/mutt.css: Manual: Render
	comments in examples a lighter for readability

	* doc/manual.xml.head, doc/manual.xml.tail: Manual: Reformat
	paragraphs, fix &tilde; -> ~ breakage

	* doc/manual.xml.head: Manual: rework MIME chapter a bit

	* doc/gen-map-doc, doc/manual.xml.tail, functions.h: Manual: Generate
	more pretty titles/ids for key binding tables

	* doc/manual.xml.head: Manual: fix supported version
	numbers for mixmaster

2009-07-02 00:06 -0700  Brendan Cully  <brendan@kublai.com>  (029ba140fb48)

	* curs_main.c: Handle keepalive failure when changing folders. There
	are probably many other places where this kind of thing could happen
	though. See #3028.

2009-07-01 18:13 -0700  Rocco Rutte  <pdmef@gmx.net>  (f6c6066a5925)

	* account.c, mutt_sasl.c, smtp.c: Make getuser/pass abort
	if input is required in batch mode. Replaces [0a3de4d9a009]. See
	#3289.

	* doc/manual.xml.head: Manual: Add detailed section on charset
	handling

	* smtp.c: SMTP: use $smtp_pass in batch mode. Closes #3289.

	mutt_account_getpass() copying the password from $smtp_pass into the
	account structure is only called from the SASL callback we only use
	if we're sure we don't need curses (i.e. have the pass already).

2009-06-30 17:32 +0200  Rocco Rutte  <pdmef@gmx.net>  (f4baa2f1251a)

	* pgpewrap.c: Add missing config.h include to pgpewrap.c

	It technically doesn't need it, but pgpewrap should be rebuilt after
	configure ran, too.

	* doc/Makefile.am: Manual: Run lynx with --display_charset
	=us-ascii, see #3286.

2009-06-29 18:20 +0000  Rocco Rutte  <pdmef@gmx.net>  (03c65df651e0)

	* UPDATING, doc/manual.xml.head: Manual: Move new mail detection into
	its own section

	This also updates some parts of docs and adds missing ones. It also
	adds a note about the recent changes, also to UPDATING.

2009-06-29 18:03 +0200  Rocco Rutte  <pdmef@gmx.net>  (d3a7e0334e5d)

	* url.c, url.h: Revert URL path encoding for now

	It breaks gmail url display and makes bcache use different paths.
	Still we need to think about whether we want to allow any character
	in bcache paths (possibly multibyte, possibly depending on
	$charset).

2009-06-28 20:49 -0700  Brendan Cully  <brendan@kublai.com>  (298194c414f0)

	* configure.ac, curs_lib.c: Allow tabs in index subject. Closes #3270.

	* imap/util.c: Allow ImapDelimChars to be unset

	* mutt.h: Rename struct thread to struct mutt_thread. Closes #3279.

	* imap/command.c: Not being able to start an IMAP command
	is a fatal error. Closes #3155.

	* imap/auth_login.c: IMAP LOGIN does not support separate user and
	login accounts. Use the user account for both. Closes #3240.

2009-06-28 22:40 +0200  Rocco Rutte  <pdmef@gmx.net>  (71a84cf22c42)

	* url.c, url.h: Fix URL parser to encode paths

2009-06-28 15:42 +0200  Deng Xiyue  <manphiz@gmail.com>  (fe688db8099a)

	* po/zh_CN.po: Update Simplified Chinese translation. Closes #3281.

2009-06-27 17:07 +0200  Rocco Rutte  <pdmef@gmx.net>  (7ca8d09f7d2c)

	* hg-commit: hg-commit: drop changelog entries from hg log

	* doc/makedoc.c, doc/manual.xml.head: Manual: stop using DocBook
	entities mapping to ascii chars

	There's no real benefit, it only makes reading/writing the manual
	harder. All entities that potentially map to non-ascii characters
	(&mdash, &auml, etc.) are left so that manual.xml remains pure
	ascii.

2009-06-26 21:47 -0700  Brendan Cully  <brendan@kublai.com>  (b2b97c7a2ae6)

	* imap/imap_private.h, imap/message.c, imap/util.c: Set
	internaldate of messages appended to IMAP mailboxes

2009-06-26 20:27 +0200  Rocco Rutte  <pdmef@gmx.net>  (156e6d6e34fc)

	* doc/manual.xml.head: Manual: try to explain that and why
	copiousoutput should come last

	* po/de.po: Update German translation

2009-06-25 21:46 +0200  Rocco Rutte  <pdmef@gmx.net>  (c5d0252e8f72)

	* rfc3676.c: Fix f=f corner case with DelSp=yes abuse

	* sendlib.c: header folding: treat From_ specially, never wrap on
	sending side

	* sendlib.c: Add Date: header to postponed messages

	* sendlib.c: Only add Status: header (fcc/postpone) when
	saving to mbox/mmdf

	* compose.c: Treat messages written with <write-fcc> as fcc, not
	postponed.

2009-06-23 10:13 -0700  Vincent Lefevre  <vincent@vinc17.org>  (bc2463863c15)

	* po/fr.po: Updated French translation.

2009-06-23 16:56 +0200  Rocco Rutte  <pdmef@gmx.net>  (d152033cf967)

	* doc/manual.xml.head: Manual: Simply type conversion section wording.

	* Makefile.am, configure.ac: Don't build hcversion.h and mutt_md5
	without hcache

	* handler.c, mutt.h, muttlib.c: Implement state_putws() and
	state_putwc(), see #3148.

	This is needed to unbreak text/enriched rendering on Linux.

	* commands.c: Only use keypad() when curses is running

2009-06-23 00:28 -0700  Vincent Lefevre  <vincent@vinc17.org>  (642987450d83)

	* curs_lib.c: Only beep when displaying error messages (unbreaks
	[54bc1ef602e7])

2009-06-23 00:20 -0700  Brendan Cully  <brendan@kublai.com>  (f5849c72a274)

	* crypt-gpgme.c: Update crypt-gpgme for mutt_mktemp change
	in [ed7eb5de7536]

2009-06-22 17:36 +0200  Rocco Rutte  <pdmef@gmx.net>  (54bc1ef602e7)

	* curs_lib.c: Make mutt_curses_(error|message) format message to COLS
	chars. Closes #3278.

	While I'm at it, fold both functions into one.

2009-06-22 17:21 +0200  Alexey Tourbin  <at@altlinux.org>  (e378bbdc3f0f)

	* smime_keys.pl: smime_keys: use Time::Local module. Closes #3277.

2009-06-22 17:17 +0200  Rocco Rutte  <pdmef@gmx.net>  (4899f140ec25)

	* mbyte.c: Fix included iswupper(). Closes #3276.

	* lib.c: Catch range errors when converting to long.

2009-06-21 21:57 +0200  Rocco Rutte  <pdmef@gmx.net>  (ed7eb5de7536)

	* attach.c, commands.c, crypt.c, editmsg.c, handler.c, headers.c,
	help.c, history.c, imap/message.c, main.c, mbox.c, muttlib.c, mx.c,
	pattern.c, pgp.c, pgpkey.c, pgpmicalg.c, pop.c, protos.h,
	recvattach.c, recvcmd.c, rfc3676.c, send.c, sendlib.c, smime.c: Pass
	buffer size to mutt_mktemp()

	* handler.c, rfc3676.c: Port f=f and text/plain handlers to
	mutt_read_line()

	* lib.c: mutt_read_line(): make line counting ptr optional

	* sendlib.c: Silently drop headers not in "key: value"
	format. Fixes out-of-memory exits.

2009-06-20 23:09 +0200  Rocco Rutte  <pdmef@gmx.net>  (6447ebe80797)

	* handler.c: f=f: Don't kill signature separator when stripping
	trailing spaces. Closes #3275.

	* curs_main.c: Disallow breaking threads for messages not part of
	a thread

2009-06-20 15:22 +0200  Rocco Rutte  <pdmef@gmx.net>  (580ab0256c49)

	* doc/manual.xml.head: Manual: Clarify and extend variable type
	conversion section

2009-06-19 19:56 -0400  Aron Griffis  <agriffis@n01se.net>  (ee3d174297bb)

	* rfc822.c: remove bogus FREE

	It's impossible for cur->personal to be non-NULL at this point,
	since cur was calloc'd just a couple lines prior.

	Signed-off-by: Aron Griffis <agriffis@n01se.net>

2009-06-19 22:49 +0200  Rocco Rutte  <pdmef@gmx.net>  (9ae13dedb5ed)

	* mbox.c, mx.c, mx.h: Fixup atime for mbox/mmdf also when mailbox is
	unchanged but has new mail. See #1362.

	* mbox.c: Don't mangle atime/mtime for mbox folders without new
	mail upon sync. Closes #1362, #3271.

	* doc/manual.xml.head: Manual: Add note and example for type
	conversions with my_vars

	* sendlib.c: Enforce 998 char length limit on header lines when
	sending.

2009-06-18 15:06 +0200  Antonio Radici  <antonio@dyne.org>  (c6fe0bb8cf11)

	* doc/Makefile.am, doc/smime_keys.man: Provide
	smime_keys(1). Closes #3272.

2009-06-18 14:56 +0200  Rocco Rutte  <pdmef@gmx.net>  (508bfe4a2e23)

	* mbox.c: Backout experimental patch

	* UPDATING, mbox.c: UPDATING: add note about -a and --

2009-06-17 16:19 -0700  Antonio Radici  <antonio@dyne.org>  (25e46aad362b)

	* buffy.c: Do not free statically-allocated buffy buffer. Unbreaks
	unmailboxes, closes #3273.

2009-06-17 15:23 -0700  Petr Písař  <petr.pisar@atlas.cz>  (fe94f01b369a)

	* ChangeLog, po/cs.po: Updated Czech translation.

2009-06-17 13:58 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net>  (ef9b67c7ebc4)

	* po/ca.po: Updated Catalan translation.

2009-06-17 13:57 -0700  Vincent Lefevre  <vincent@vinc17.org>  (62471a5d3186)

	* po/fr.po: Updated French translation.

2009-06-17 20:42 +0200  Rocco Rutte  <pdmef@gmx.net>  (33376ae23d8f)

	* doc/devel-notes.txt: Mention check_sec.sh in doc/devel-notes.txt

2009-06-17 11:09 -0700  Brendan Cully  <brendan@kublai.com>  (7f37d0a57d83)

	* crypt-gpgme.c, pgp.c: Display unsigned part of traditional PGP
	messages. Unbreaks [e2780a423d96], closes #3269

2009-06-17 19:29 +0200  Antonio Radici  <antonio@dyne.org>  (a2a868fc40ea)

	* mx.c: Leave error handling of mx_get_magic() up to the
	caller. Closes #3268.

2009-06-17 18:02 +0200  Rocco Rutte  <pdmef@gmx.net>  (4b5326d8d2ee)

	* UPDATING, muttlib.c: Always display text/* parts inline,
	overrideable by auto_view. Closes #3246.

2009-06-15 22:05 +0200  Rocco Rutte  <pdmef@gmx.net>  (f40de578e8ed)

	* handler.c: Unbreak header weeding for message/rfc822
	parts. Closes #3265.

	* init.c, lib.c, lib.h: Print timestamps in debug files. Closes #3263.

	* doc/manual.xml.head, doc/muttrc.man.head: bind: Clarify function
	argument usage

	* doc/manual.xml.head, init.h, url.c: Fixup URL parser

	The fixes are: 1) allow / in usernames for IMAP (by %-encoding /, :
	and % when pretty-printing urls), 2) for POP/SMTP the trailing / is
	no longer mandatory, 3) more strict %-decoding to avoid unexpected
	results

2009-06-15 17:49 +0200  Bertrand Janin  <tamentis@neopulsar.org>  (abc8fa0abeee)

	* UPDATING: Fix UPDATING

2009-06-15 17:06 +0200  Rocco Rutte  <pdmef@gmx.net>  (d6f88fbf8387)

	* url.c: Don't parse URL port as signed short, but to int and cast to
	unsigned short. Closes #3264.

	* doc/manual.xml.head: Manual: Add a short note about new header
	folding

	...so we don't get bug reports for tab folding.

	* init.h: Clarify what $wrap=0 does

	* doc/mutt.css: CSS update for newer docbook xslt versions

	* pager.c: pager: intermediate fix for wrapping long header lines with
	$smart_wrap set

	The header folding algorithm outputs a word without spaces and
	longer than $wrap as-is. The pager however tries to break it. With
	$smart_wrap unset, it simply breaks at $wrap regardless if there's a
	space or not. With $smart_wrap set it tried to find a space and
	break if the next word is too long. This logic doesn't work for
	folded header lines which always start with space. Thus, the output
	would always contain the folding whitespace on a line by itself
	detaching the header value from the header name.

	As an intermediate fix we don't try to be smart if the line begins
	with space or tab.

	* pager.c, sendlib.c: pager: Ignore $wrap for attachment markers

2009-06-14 20:57 -0700  Brendan Cully  <brendan@kublai.com>  (d2e0b495b148)

	* build-release: Remove duplicate update-changelog call.

2009-06-14 20:51 -0700  Antonio Radici  <antonio@dyne.org>  (fef17099376d)

	* doc/mutt.man: Escape hyphens in man page. Closes #1937 again.

2009-06-14 12:29 -0700  Brendan Cully  <brendan@kublai.com>  (7f8a2ba64516)

	* UPDATING: Update UPDATING

	* VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po, po/fr.po,
	po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po, po/ja.po,
	po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po, po/ru.po,
	po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po:
	automatic post-release commit for mutt-1.5.20

	* imap/imap.c: Save a dereference, and close #3226 with voodoo.

	* sendlib.c: Initialize pointer before use under -d4

2009-06-13 19:52 -0700  Brendan Cully  <brendan@kublai.com>  (83ffb5593bc6)

	* curs_main.c: Adjust menu position after sync more
	carefully. Closes #3092.

	* init.h: Force status to redraw when $postponed changes.

	* postpone.c: Fix check for changed $postponed. The pointer-based
	check fails when the new $postponed string is stored in the same
	location.

2009-06-13 01:08 +0200  Rocco Rutte  <pdmef@gmx.net>  (536771b4e085)

	* commands.c, copy.c, copy.h, handler.c, protos.h, send.c, sendlib.c:
	Rewrite header folding

	We now distinct between sending and display case. For display, we
	always use tabs for folding for readability; for sending we now
	correctly fold using whitespace found in the header.

	Closes #2995. Closes #3080.

2009-06-12 23:10 +0200  Rocco Rutte  <pdmef@gmx.net>  (23de0e3c81f8)

	* UPDATING, init.h, mutt.h, send.c: Turn $fcc_attach into a
	quadoption. Closes #2528.

	* handler.c: Don't insert Content-Description/form name into reply.
	Closes #3164.

	* pgpkey.c: Allow ! suffix for pgp keys via $pgp_sign_as and
	prompt. Closes #1928.

	* commands.c, recvcmd.c: Warn before bouncing messages without
	From: header. Closes #3180.

	* smtp.c: SMTP: don't block but print CRLF for last line if it's
	not terminated

2009-06-11 18:34 +0200  Rocco Rutte  <pdmef@gmx.net>  (f60eb41ef63c)

	* UPDATING: Mention maildir mtime use in browser

	* send.c: Don't allow setting Return-Path: header via my_hdr

	Mutt has use_envelope_from/envelope_from_address for that purpose.
	Closes #1840.

	* browser.c: Use only latest mtime of new/cur for browser, not whole
	stat() info

	* copy.c: Don't reformat Return-Path (angle brackets are not
	optional). Closes #1702.

2009-06-10 17:44 +0200  Rocco Rutte  <pdmef@gmx.net>  (0721c3f6320d)

	* mbox.c, mx.c: Only print messages about CONTEXT when quiet flag not
	set

2009-06-09 22:09 -0700  Brendan Cully  <brendan@kublai.com>  (dc9ec900c657)

	* mutt_ssl.c: Improve host checking for SSL with intermediate
	certificates.

	* mutt_ssl.c: Whitespace.

	* imap/imap.c: Skip comparison against current mailbox for idle
	connections. Closes #3216.

	* imap/util.c: Revert accidental change

	* imap/util.c: Remove trailing whitespace.

2009-06-08 23:55 -0700  Brendan Cully  <brendan@kublai.com>  (15c662a95b91)

	* configure.ac, m4/libgnutls.m4: Test for libgnutls by hand rather
	than relying on deprecated libgnutls-config script. Closes #3239.

2009-06-07 10:55 -0700  Brendan Cully  <brendan@kublai.com>  (9831d4c2c3f9)

	* imap/message.c: Do not display error message when user declines
	to create target mailbox.

	* imap/message.c: Minor cleanup in imap_copy_messages.

2009-06-07 08:14 +0200  Miroslav Lichvar  <mlichvar@redhat.com>  (16592f0dfdaf)

	* configure.ac, mutt_ssl_gnutls.c: Disable checking certificate
	activation/expiration times in gnutls as we do the checks ourselves.

2009-06-06 22:31 -0700  Brendan Cully  <brendan@kublai.com>  (e5c2befbf0f5)

	* imap/message.c: Do not treat already-seen headers as if they are
	new. See #2935.

2009-06-07 02:09 +0200  Rocco Rutte  <pdmef@gmx.net>  (a786b0e8627c)

	* doc/dotlock.man, doc/makedoc.c, doc/mbox.man, doc/mmdf.man,
	doc/mutt.man, init.h: Fix hyphens in manpages. Closes #1937

2009-06-04 17:07 +0200  Rocco Rutte  <pdmef@gmx.net>  (4f1ceaae93dc)

	* rfc3676.c: Fix pretty quoting for f=f by resetting space count when
	flushing paragraph

2009-06-03 22:35 +0200  Rocco Rutte  <pdmef@gmx.net>  (386f2ce6b872)

	* rfc3676.c: Fix several f=f bugs

	It fixes problems with space-handling in general (trailing spaces
	for display, un-space-stuffing), fixes quote prefix for replies and
	lowers FLOWED_MAX so we don't run into line length trouble too
	early.

	* UPDATING, globals.h, init.h, pager.c: Don't abuse $pager_context for
	searches, add $search_context. See #976.

	* pattern.c: Fix compiler warning

2009-06-02 20:25 +0200  Miroslav Lichvar  <mlichvar@redhat.com>  (d1d0481d1ca1)

	* mutt_ssl_gnutls.c: Add support for GNUTLS_CERT_INSECURE_ALGORITHM
	error code

	* mutt_ssl_gnutls.c: Don't ignore certificate verification errors on
	saved signer certs

2009-06-02 10:18 -0700  René Clerc  <rene@clerc.nl>  (761bc678b23e)

	* po/nl.po: Updated Dutch translation.

2009-06-02 17:24 +0200  Rocco Rutte  <pdmef@gmx.net>  (8b2af5b64981)

	* buffy.c: Fix duplicate mailbox detection for remote
	folders

	* smtp.c: Fix array size

	* buffy.c: Thoroughly check for duplicates when parsing
	'mailboxes' command. Closes #1428.

2009-06-01 14:50 +0200  Rocco Rutte  <pdmef@gmx.net>  (7a277ba306c9)

	* gnupgparse.c: Use mutt_atoi() when parsing GnuPG output. Closes
	#3145

	* hcache.c, mh.c: More atoi() fixes

	* smtp.c: SMTP: Use mutt_atoi() to parse server responses

	* curs_main.c, edit.c, init.c, main.c, menu.c, mh.c, parse.c,
	resize.c, score.c, url.c: Use strtol() wrappers for most atoi()
	calls

	* lib.c, lib.h: Add mutt_atos(), mutt_atoi() and
	mutt_atol() (strtol() wrappers)

	* send.c: Treat address groups as no recipients

	When sending with Sendmail or SMTP we exclude address groups anyway,
	so treat these addresses as not present when checking for valid
	recipients before sending in the compose menu.

	* smtp.c: Weed out address groups for SMTP the same way we
	do for sendmail

2009-05-31 19:19 -0700  Brendan Cully  <brendan@kublai.com>  (0024860ab03e)

	* doc/Makefile.am: Allow chunked and unchunked manuals to build in
	parallel.

	* mutt_ssl_gnutls.c: Remove trailing whitespace

2009-05-31 14:46 +0200  Rocco Rutte  <pdmef@gmx.net>  (8e591e80cd48)

	* smtp.c: SMTP: Don't send "undisclosed-recipients" in RCPT TO

	This happened for Bcc only messages. "undisclosed-recipients" is
	added in To: as guard against MTAs that leak BCCs if no To:/Cc:
	header is given. See Debian #529090.

	* init.h: Document that $pager_context affects searching, too

	* UPDATING: Update UPDATING

	* handler.c: Turn trailing \r\n to \n for qp-encoded messages.

	RFC2045 (sect. 6.7, (1) general 8bit representation) states that
	neither CR nor LF of the trailing CRLF may be qp-encoded. So we
	ignore trailing qp-encoded CRs.

	See #2898 though this is a partial fix only.

	* pager.c: Give $pager_context lines of context when searching
	page-based menus. Closes #976.

	* handler.c, init.h, rfc3676.c: f=f: Strip trailing spaces for
	interoperability. Closes #3001.

	If we make a fixed reply to a flowed message we remove trailing
	spaces and can now safely allow $indent_string to be used which is
	what users expect.

	Second, if we make a flowed reply to a fixed message we also strip
	trailing spaces since from format=fixed we assume all lines are
	fixed (i.e. we don't want to errorneously make fixed lines flowed).

	* handler.c, init.h, mutt.h: Add $honor_disposition to not display
	attachments inline. Closes #3170.

	Previously all MIME parts were displayed inline regardless of the
	Content-Disposition header (if present). With $honor_disposition
	set, only inline parts are displayed inline, attachments can only be
	viewed from the attachments menu.

2009-04-25 01:56 -0400  Dan Loewenherz  <daniel.loewenherz@yale.edu>  (c1b947f60ea6)

	* init.h: Disables the insecure SSLv2 protocol. Closes #3192.

2009-05-30 19:37 +0200  Rocco Rutte  <pdmef@gmx.net>  (b080ae086a62)

	* ChangeLog, mbox.c: Keep new mail flag for mbox/mmdf folders after
	closing. Closes #1362.

2009-05-30 10:23 -0700  Vincent Lefevre  <vincent@vinc17.org>  (be7b3d349725)

	* po/fr.po: Updated French translation.

2009-05-30 00:24 +0200  Rocco Rutte  <pdmef@gmx.net>  (f65a1eb8abce)

	* smtp.c: Fix logic in f260f5836284

2009-05-29 21:33 +0200  Rocco Rutte  <pdmef@gmx.net>  (c4d86d4ea260)

	* pager.c: Drop modified version of and use mutt_read_line() in pager,
	too

	* history.c, init.c, lib.c, lib.h, mh.c, mutt_ssl_gnutls.c, pgp.c,
	query.c, rfc1524.c, smime.c: Add flags to mutt_read_line() for
	EOL-stripping and continuation support

	We use these to stop supporting EOL-escaping with \ which was wrong
	in most cases (e.g. $history_file), support is kept for reading
	config and mailcap files.

	Leaving CRLF in will be used for the pager.

	* menu.c, pager.c, pattern.c: Fall back to search if no query exists
	for search-(next|opposite)

	The pager had the fall-through to search, so for consistency do that
	in other menues as well.

	* pager.c: Fix pager search prompt for reverse search

	When doing a reverse search for the first time after switching to
	the pager, SearchBack is always 0 and thus gave the wrong prompt,
	change to using op directly. While I'm at it, unify search prompts.

	* doc/manual.xml.head: Manual: Fix markup of environment variables

2009-05-28 16:37 +0200  Rocco Rutte  <pdmef@gmx.net>  (f260f5836284)

	* smtp.c: SMTP: don't interactively authenticate without a
	password in batch/mailx mode

	Otherwise, if we don't have a password and curses is not running,
	the SASL authentication callback will crash mutt. We now abort if
	the password wasn't given in $smtp_url.

	* doc/mutt.css: Manual: vertical-align table cells at the top

	* doc/manual.xml.head, doc/mutt.css: Manual: Wrap muttrc commands
	in <command/>

2009-05-27 23:14 -0700  Brendan Cully  <brendan@kublai.com>  (5502fb790bab)

	* mutt_ssl_gnutls.c: gnutls: do not ignore certificate problems.
	Specifically, do not allow revoked certificates or those signed by
	non-CAs unless they have been explicitly stored in the trusted
	certificate file. Thanks to Miroslav Lichvar.

2009-05-27 22:55 -0700  Miroslav Lichvar  <mlichvar@redhat.com>  (85f41efec6bf)

	* ChangeLog, mutt_ssl_gnutls.c: Don't prompt to save certificates that
	are already saved but invalid.

2009-05-27 22:52 -0700  Brendan Cully  <brendan@kublai.com>  (90ef283c103e)

	* mutt_ssl_gnutls.c: Don't leak gnutls certs on preauth validation
	failure. Thanks to Miroslav Lichvar.

	* mutt_ssl.c: Fix TLS certificate chain validation for
	openssl.

2009-05-25 17:31 -0700  Brendan Cully  <brendan@kublai.com>  (8f11dd00c770)

	* mutt_ssl_gnutls.c: Fix a serious oversight validating TLS
	certificates. If any certificate in a chain presented by a server
	was accepted, the connection was allowed without verifying that the
	presented certificate was actually signed by the certificate in the
	chain.

2009-05-27 22:13 -0700  Petr Písař  <petr.pisar@atlas.cz>  (05bc65d6ae70)

	* po/cs.po: Updated Czech translation.

2009-05-27 10:13 +0200  Rocco Rutte  <pdmef@gmx.net>  (97305eeb91ce)

	* doc/manual.xml.head, doc/mutt.man: Document that -- is always
	mandatory after -a. Closes #3235.

	* init.h: Mention account-hook in the docs for $tunnel.  Closes
	#3237.

2009-05-26 17:57 +0200  Rocco Rutte  <pdmef@gmx.net>  (392e945dfba7)

	* attach.c: Use charset parameter to view text attachments using
	<view-attach>. Closes #3234.

2009-05-25 15:57 +0200  Rocco Rutte  <pdmef@gmx.net>  (3f0963dd9257)

	* pager.c: pager: print progress percentage for attachments, too

	* attach.c: Mark strings for translation

2009-05-18 20:48 -0700  Vincent Lefevre  <vincent@vinc17.org>  (6d810c5cf4fc)

	* po/fr.po: Updated French translation.

2009-05-15 15:03 +0200  Takahashi Tamotsu  <ttakah@lapis.plala.or.jp>  (c665bdf5ff5f)

	* pop.c: POP: Notify user when messages are lost. Closes #2226.

	* pop.c: POP: Ignore already-deleted messages while
	syncing. Closes #2225.

2009-05-13 18:03 +0200  Rocco Rutte  <pdmef@gmx.net>  (0563c88ad6f0)

	* attach.c, recvattach.c: Don't loose error message when attachment
	saving fails. Closes #3156.

2009-05-15 12:46 +0200  Seth Arnold  <seth.arnold@suse.de>  (1cea1ecf9f79)

	* UPDATING, color.c, doc/manual.xml.head: Make "uncolor" also work
	header and body objects. Closes #1046.

2009-05-13 14:20 +0200  Rocco Rutte  <pdmef@gmx.net>  (f96a176bb14c)

	* send.c: Don't set 'replied' flag if user changes
	References/IRT. Closes #2044.

	* mutt.h, muttlib.c: Add mutt_find_list() to lookup data in lists

	* alias.c, crypt-gpgme.c, group.c, mbox.c, pgp.c, query.c,
	rfc822.c, rfc822.h, send.c, smime.c: Prune empty address groups
	when preparing replies. Closes #2875.

	* mbox.c: Actually reopen mbox/mmdf files in case we find
	modifications. Closes #2725.

	Since the file is changed while we have it open in ctx->fp, we
	likely get wrong information when parsing the mailbox. Now we
	explicitely close and (re)open it.

2009-05-12 16:26 +0200  Rocco Rutte  <pdmef@gmx.net>  (06e318bfe8f2)

	* mbox.c: Backout errorneously commited mbox atime fix

	* OPS, mbox.c: Fix description for <save-message>

2009-04-29 14:49 +0200  Rocco Rutte  <pdmef@gmx.net>  (335e6f782862)

	* browser.c: Fix maildir times in mailboxes browser. Closes #626.

	Instead of using the (pointless) mtime of the top-level maildir
	folder, use the latest mtime of the "new" and "cur" subdirectories.
	Maildir folders in the mailboxes list can now be properly sorted by
	date. This does not affect the directory browser. Also see #2421.

	* mailbox.h, mh.c, mx.c: Move Maildir/MH folder detection from
	mx.c to mh.c

2009-04-28 15:12 +0200  Rocco Rutte  <pdmef@gmx.net>  (4d9685be5987)

	* sendlib.c: Fold References: header so we never run into line length
	problems

	* headers.c: Fix comment typo

2009-04-28 14:18 +0200  Bertram Felgenhauer  <int-e@gmx.de>  (6b20a3545f03)

	* doc/manual.xml.head, headers.c: Drop References header if In-Reply-
	To is modified by user. Closes #3221.

2009-04-28 13:05 +0200  Rocco Rutte  <pdmef@gmx.net>  (a13d8fd40094)

	* send.c: Don't generate References: for reply to multiple
	messages

	All parent Message-Ids are present in In-Reply-To already. Also,
	RfC2822, section 3.6.4 discourages its generation.

	* sendlib.c: Don't trim In-Reply-To with $edit_headers set

	In case of a tagged reply to several messages, we want In-Reply-To
	to contain all parent Message-Ids.

	* imap/imap.c: Only sync changed messages back to hcache on
	mailbox sync

	* doc/manual.xml.head: For spam detection, mention $imap_headers.
	Closes #3223.

	* doc/manual.xml.head: Manual: Fix typo and reword paragraph

2009-04-26 21:09 +0200  Rocco Rutte  <pdmef@gmx.net>  (9fa4a3e74355)

	* UPDATING, doc/manual.xml.head, pop.c: POP: Support hcache updating,
	too.

	This also allows us to use hcache to manage "flagged" and "replied"
	message flags.

	* imap/imap.c, mh.c: Sync header to hcache when synching
	MH/Maildir/IMAP folders. Closes #2942.

	* pager.c: Use dynamic buffer for displaying pager lines. Closes
	#3162.

	With too small fixed-size buffers we can't color/find certain words
	that span buffers. This needs to duplicate mutt_read_line with the
	adjustment to leave line termination in and not support breaking
	long lines using \ at EOL. Other callers may want to use this one
	instead, too as we support \-escaping in too many places.

	* init.h: Document suffixes for %f in $folder_format

2009-04-22 23:29 +0200  Bertram Felgenhauer  <int-e@gmx.de>  (0aa313a3bf20)

	* headers.c: Fix memory leak in mutt_edit_headers(). Closes #3220.

2009-04-25 10:51 +0200  Thomas Wiegner  <wiegner@gmx.de>  (8da22400a48d)

	* configure.ac, mkdtemp.c, protos.h: Add mkdtemp() from xfce to
	unbreak gpgme build on Solaris. Closes #3217.

2009-04-25 10:35 +0200  Rocco Rutte  <pdmef@gmx.net>  (c6de4f51b8c7)

	* ChangeLog, configure.ac, protos.h, strcasestr.c: Add strcasestr()
	from uclibc to unbreak (Open)Solaris build. Closes #3222.

2009-04-21 15:10 -0400  Aron Griffis  <agriffis@n01se.net>  (3d89eddb2d9a)

	* buffy.c: Equivalent mutt_buffy, but readable code

	* buffy.c, buffy.h: Call mutt_expand_path() from mutt_buffy to fix
	imap separator. Closes #3208 and #3218

	* buffy.c: Use slen instead of assuming _POSIX_PATH_MAX

2009-04-23 12:51 -0700  Vincent Lefevre  <vincent@vinc17.org>  (b5b4e652e4b1)

	* ChangeLog, po/fr.po: Updated French translation.

2009-04-20 18:36 +0200  Christoph Berg  <cb@df7cb.de>  (39fee3a9d034)

	* doc/manual.xml.head, init.h: Better document that some send-hooks
	can't work with $autoedit. Closes #1834.

2009-04-20 18:26 +0200  Rocco Rutte  <pdmef@gmx.net>  (6cc887ccd229)

	* init.h: Fix typo for $imap_pass

2009-04-17 18:05 +0200  Rocco Rutte  <pdmef@gmx.net>  (7d44a83efcc6)

	* pgp.c: Support the Charset: armor header for inline PGP. Closes
	#3039.

	The header is defined as optional by RfC4880.

	This is based on patch-1.5.9.tamo.pgp_charsetchack.1. We only
	support reading this header and, if present, recode the PGP output
	from the given charset to $charset if we find it valid; otherwise
	fall back to UTF-8. Certain clients make use of the header when
	sending mail, so mutt should respect it because some messages are
	otherwise unreadable.

	The sending side is not touched, we unconditionally send UTF-8.

2009-04-17 15:45 +0200  Michael Elkins  <me@mutt.org>  (61a0c67ed727)

	* sendlib.c: Make sure Recent-From: consults $realname.  Closes
	#1721.

2009-04-17 15:37 +0200  Rocco Rutte  <pdmef@gmx.net>  (3a7ecc3f8aeb)

	* UPDATING, functions.h, pager.c: Make <set-flag> and <clear-flag>
	work in the pager, too. Closes #3212.

	* pager.c: Don't consider \n part of a line for body
	coloring. Closes #2363.

	* attach.c: Enlarge buffer size for parsing mailcap files

	We really need code for dynamic buffers which would solve a few
	other bugs, too. Closes #2205.

2009-04-16 19:23 +0200  Rocco Rutte  <pdmef@gmx.net>  (a4f66ae72dc5)

	* ChangeLog, pop_lib.c: POP: Default to using getservbyname() as we do
	for IMAP and SMTP

	* doc/manual.xml.head: Manual: Improve docs on URL syntax, add
	examples

	* doc/manual.xml.head: Manual: Add user-defined variables to variable
	types

2009-04-11 10:35 +0200  Rocco Rutte  <pdmef@gmx.net>  (7d7976cd4fc4)

	* ChangeLog, buffy.c, buffy.h, commands.c, sendlib.c: Don't raise new
	mail flag on mbox/mmdf Fcc mailboxes. Closes #1896.

2009-04-08 16:25 +0200  Rocco Rutte  <pdmef@gmx.net>  (5b631ee33281)

	* hdrline.c: For %F, display Bcc recipient if no other recipients
	found. Closes #3157.

	* UPDATING, doc/manual.xml.head, doc/muttrc.man.head, pattern.c:
	Make ~x match In-Reply-To, too. Closes #771.

2009-04-07 19:57 +0200  Rocco Rutte  <pdmef@gmx.net>  (667b0006b586)

	* sendlib.c: Fix b5cbd0dab863, closes #3215.

	Still valgrind reports 'fromcode' as leaking.

2009-04-07 11:32 +0200  Erik Hovland  <erik@hovland.org>  (d344c6429a48)

	* sendlib.c: Try to correct usage of tempfile and *tempfile

	Since tempfile is a double pointer checking for tempfile and then
	dereferencing with *tempfile is not correct.

2009-04-06 22:05 +0200  Rocco Rutte  <pdmef@gmx.net>  (d639baaf57fb)

	* doc/manual.xml.head: Manual: Fix typo

2009-04-06 19:10 +0200  Erik Hovland  <erik@hovland.org>  (4fe35e9984ba)

	* sendlib.c: mutt_message_to_7bit(): Only close file
	pointer if we opened it

	The pointer is to be managed outside the function and provided. Only
	close it we opened it ourself using fopen().

2009-04-06 19:07 +0200  Erik Hovland  <erik@hovland.org>  (b5cbd0dab863)

	* sendlib.c: Plug memory leaks in sendlib.c

2009-04-05 13:41 +0200  Rocco Rutte  <pdmef@gmx.net>  (5d393e716c51)

	* init.h, sendlib.c: Backed out changeset 23c7b469ff20

	This requires more thought: if the user has -- in $sendmail, we need
	to add our arguments for 8BITMIME/DSN/etc. before it and not after.
	See #3168.

	* doc/manual.xml.head: Manual: Make sure every rc command has a
	synopsis in its describing section

	* doc/manual.xml.head: Manual: Fold consecutive <cmdsynopsis/>
	into just one

	This make it visually easier to spot what belongs together.

	* doc/manual.xml.head: Manual: More entities and <quotes/> as
	appropriate

2009-04-04 16:23 +0200  Rocco Rutte  <pdmef@gmx.net>  (a4b635e96b30)

	* doc/Makefile.am: Manual: Improve 'sortcheck' target

	Don't call up diff+pager if all is sorted and remove the temp files
	for diffing we created.

	* doc/gen-map-doc, doc/manual.xml.head, doc/manual.xml.tail: Manual:
	Capitalize headlines

	* doc/manual.xml.head: Manual: Move section on mixmaster support to
	Optional Features

	* doc/manual.xml.head: Manual: Remove duplicate section on mailcap use
	from security chapter

	We already have a more detailed section on secure mailcap usage, so
	link to it.

	* doc/manual.xml.head: Manual: Minor improvements and fixes

	* doc/Makefile.am, doc/manual.xml.head: Manual: Add a short chapter
	summarizing security considerations

	* doc/manual.xml.head: Manual: Use &mdash; in text rather than --

	* doc/manual.xml.head: Manual: Add section on padding for format
	strings

	* doc/manual.xml.head: Manual: Mention reply types in "Sending Mail"
	section

	* doc/manual.xml.head: Manual: Add table with navigation keys for
	page-based menus

	* doc/mutt.css: mutt.css: Add left+right margins to screen, note and
	examples

	* doc/manual.xml.head: Manual: Add section on screens and menus with
	short descriptions.

	Mostly stolen from old mutt-ng docs with adjustments.

2009-04-02 13:11 +0200  Steve Kemp  <skx@debian.org>  (23c7b469ff20)

	* init.h, sendlib.c: Only append -- to $sendmail if not
	present. Closes #3168.

	This allows users to add custom recipients via $sendmail.

2009-04-02 12:57 +0200  Rocco Rutte  <pdmef@gmx.net>  (bfb12cf02417)

	* init.h: Clarify what $attach_charset does, closes #3165.

	* doc/Makefile.am: Add 'sortcheck' target to doc/Makefile.am

	This should be used from time to time to check if vars are sorted.

	Closes #3191.

	* init.h: Sort $pgp_* and $crypt_* vars, see #3191.

	* init.h: Sort $smime_* vars, see #3191.

2009-04-01 14:33 +0200  Miroslav Lichvar  <mlichvar@redhat.com>  (8205a12329d3)

	* hcache.c, muttlib.c: Use PATH_MAX for buffers passed to realpath(3)
	as we're supposed to

2009-04-01 13:16 +0200  Rocco Rutte  <pdmef@gmx.net>  (47c64fd9ac70)

	* doc/gen-map-doc, doc/manual.xml.head: Manual: Fix openjade
	warnings

	* doc/makedoc.c, doc/mutt.css: makedoc: Render description lists as
	<informaltable/>

	This looks better and is more compact (except missing column
	headers.)

2009-03-31 16:03 +0200  Rocco Rutte  <pdmef@gmx.net>  (22f21b558f57)

	* doc/manual.xml.head: Manual: Add an example of how to manage
	multiple accounts using folder-hook

	* UPDATING, doc/manual.xml.head, mutt.h, pattern.c: Perform case
	insensitive string search if pattern is lower case

	...since we do that for regex patterns already. It doesn't work for
	IMAP server-side searches.

	* doc/manual.xml.head: Manual: Fix markup of ".muttrc"

	* doc/manual.xml.head: Manual: Always spell mutt as "Mutt"

	* doc/manual.xml.head: Manual: Replace netscape with firefox

	* doc/manual.xml.head: Manual: use <quote/> instead of " quotes

	* doc/manual.xml.head: Manual: Lots of minor improvements
	(markup consistency, wording)

2009-03-30 14:58 +0200  Rocco Rutte  <pdmef@gmx.net>  (318748f3962b)

	* doc/manual.xml.head: For mailbox formats, add some more verbose pros
	and cons

	* doc/manual.xml.head: Manual: Add section about zeroprinting format
	strings to format string section

2009-03-28 22:37 +0100  Thomas Roessler  <roessler@does-not-exist.org>  (be9fb07730c6)

	* mutt_idna.c: Make IDNA code more readable

2009-03-28 16:11 +0100  Rocco Rutte  <pdmef@gmx.net>  (77cfe8016930)

	* doc/manual.xml.head: Manual: Add section roughly explaining config
	option types

	* doc/makedoc.c: makedoc: make output slightly more readable

	Add <?dhtml... processing instructions to render <variablelist/>
	using HTML <table/> which save lots of vertical space. Also, drop
	the newline before </screen> to save some space.

2009-03-27 18:02 +0100  Rocco Rutte  <pdmef@gmx.net>  (a06a2a4c5ebc)

	* rfc3676.c: f=f: Fix debug messages

2009-03-19 17:19 +0100  Rocco Rutte  <pdmef@gmx.net>  (754ea0f091fc)

	* doc/manual.xml.head: Improve section on patterns

	* curs_lib.c: Fix progress update debug message

	* doc/manual.xml.head, doc/muttrc.man.head: Document kilo and mega
	suffixes for range patterns

	Document it only for ~z (message size) as they don't make much sense
	for other patterns like message score or number of attachments.

2009-03-18 17:40 +0100  Rocco Rutte  <pdmef@gmx.net>  (8528b8e715da)

	* init.h: Properly initialize more structs

2009-03-19 13:38 +0100  Erik Hovland  <erik@hovland.org>  (a802b5127f09)

	* pgp.c: Remove unused variable

2009-03-19 10:36 +0100  Roman Kraevskiy  <rkraevskiy@gmail.com>  (6fac57b97bf1)

	* mutt_sasl.c: Restore connection polling callback when
	closing SASL connection. Closes #3206.

2009-03-18 14:48 +0100  Erik Hovland  <erik@hovland.org>  (17d770ae41e4)

	* smime.c: S/MIME: Don't leak intermediate cert key

	* buffy.c: Properly initialize struct stats in buffy check

2009-03-17 20:04 +0100  Rocco Rutte  <pdmef@gmx.net>  (903b3cee5485)

	* addrbook.c, browser.c, compose.c, curs_main.c, imap/auth.c, mx.c,
	pattern.c, pop_auth.c, postpone.c, query.c, recvattach.c,
	remailer.c: Fix some warnings with -W about missing initializers in
	structs

2009-03-17 16:44 +0100  Todd Zullinger  <tmz@pobox.com>  (bb9b845800f6)

	* pgp.c: Ensure display is redrawn for application/pgp

	When using gpg-agent, a hard redraw is needed after the pinentry
	program is called. Otherwise, the screen is garbled and key
	bindings are screwed up.

	Closes #3196.

2009-03-15 16:44 +0100  Rocco Rutte  <pdmef@gmx.net>  (bc7c64ff3e48)

	* configure.ac, protos.h, wcscasecmp.c: Add wcscasecmp() compatibility
	function (for OS X)

	* doc/mutt.man: mutt.1: Mention that -a should be last in option
	list. Closes #3202

	* alias.c: Only define min() if not present. Closes #3199

2009-03-15 14:25 +0100  Erik Hovland  <erik@hovland.org>  (3c154fcdad4c)

	* rfc822.c: The assigned value of dom is never used. Remove
	assignment

	* alias.c: The file handle will leak if fread fails

2009-03-12 15:16 -0700  Erik Hovland  <erik@hovland.org>  (53bea026a2a2)

	* curs_main.c: resort_index will use menu->current as a index into an
	array. If menu->current is negative, bad things can happen. So check
	it before calling resort_index

	* recvcmd.c: 'last' is assigned but never used. Remove assignment.

2009-03-15 13:46 +0100  Rocco Rutte  <pdmef@gmx.net>  (1238dff54a15)

	* alias.c, attach.c, buffy.c, check_sec.sh, commands.c, compose.c,
	copy.c, crypt-gpgme.c, crypt.c, edit.c, editmsg.c, gnupgparse.c,
	handler.c, headers.c, help.c, history.c, imap/message.c, init.c,
	lib.c, main.c, mbox.c, mh.c, mutt_ssl.c, mutt_ssl_gnutls.c,
	muttlib.c, pager.c, pattern.c, pgp.c, pgpkey.c, pgppubring.c,
	pop.c, postpone.c, query.c, recvattach.c, recvcmd.c, rfc1524.c,
	rfc3676.c, send.c, sendlib.c, smime.c, smtp.c: Use safe_fclose()
	instead of fclose(), add fclose() to check_sec.sh

2009-03-10 18:39 +0100  NONAKA Kimihiro  <nonakap@gmail.com>  (cc6fede605d4)

	* mh.c: Fix crashes with 64bit time_t. Closes #3184.

2009-03-09 12:04 +0100  Vincent Lefevre  <vincent@vinc17.org>  (4ce562b7f5d7)

	* mbyte.h: Unbreak compilation on OS X with --with-regex/--without-wc-
	funcs. Closes #3149.

2009-03-09 11:58 +0100  Rocco Rutte  <pdmef@gmx.net>  (f3a33b77dc90)

	* mutt.h, regex.c: Unbreak compilation with --without-wc- funcs on
	OS X 10.5.*, see #3149.

	* init.h: Fix 11cd72da743a

	* init.h: Sort SSL-related variables, see #3191.

	* hash.c, hash.h, init.c, mh.c, thread.c: Restore $reverse_alias
	feature by using case-insensitive hash keys

	The fix is implemented as callbacks in the hash table so we can
	avoid working with copies of the mailbox keys but work on the
	originals instead and don't pollute the code with lower-case
	conversions all over the place.

	While I'm at it, turn int hashes into unsigned values since the hash
	function returns unsigned values now, too.

	Closes #3185.

2009-03-07 13:49 +0100  Rocco Rutte  <pdmef@gmx.net>  (ff1906f70b1b)

	* init.h: Sort most variables (except crypto), see #3191.

	* doc/manual.xml.head: Fix typo, see #2430.

2009-02-20 22:14 +0100  Rocco Rutte  <pdmef@gmx.net>  (35fbea209c6e)

	* doc/manual.xml.head: Manual: verbosely document how the
	initial folder is determined, see #3189.

	* doc/manual.xml.head: Document address normalization. Closes #2430.

	* headers.c: Simplify and fix Attach: header parsing

	With ee5e696a9d08 we would skip beyond the filename to look for a
	description. This changeset fixes it.

	* main.c: Set magic from -m before processing queries (-Q) or dumping
	variables (-D)

	* doc/mutt.man, init.h: Better document how the initial folder is
	determined. Closes #3189.

2009-02-15 16:09 +0100  Rocco Rutte  <pdmef@gmx.net>  (ee5e696a9d08)

	* doc/manual.xml.head, headers.c: Support spaces in Attach:
	pseudoheader. Closes #3179.

2009-02-10 13:05 +0100  Rocco Rutte  <pdmef@gmx.net>  (a21f8bf84149)

	* init.h: Fix documentation typos. Closes #3178.

2009-01-27 12:58 -0800  Brendan Cully  <brendan@kublai.com>  (7ddf1d1cc490)

	* imap/imap.c: Move socket close into imap_logout from imap_logout_all

	* imap/imap.c: IMAP: only close socket when not already
	disconnected.

2009-01-27 18:48 +0100  Rocco Rutte  <pdmef@gmx.net>  (d7e44862a08a)

	* help.c, main.c, mh.c: Update copyright years

	* help.c: Fix help alignment for escape sequences at screen
	boundary. Closes #3146.

	* mh.c: Unconditionally inode-sort Maildir and MH folders. Closes
	#3166.

2009-01-26 12:32 -0800  Brendan Cully  <brendan@kublai.com>  (da94a92c3ba0)

	* bcache.c: Remove old bcache tmpfile before trying to create new
	one. Closes #3163.

2009-01-20 12:34 -0800  René Clerc  <rene@clerc.nl>  (2006526d1d26)

	* po/nl.po: Updated Dutch translation

2009-01-19 20:39 -0800  Ivan Vilata i Balaguer  <ivan@selidor.net>  (038f1e5cdaea)

	* po/ca.po: Updated Catalan translation

2009-01-14 20:04 +0000  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (ddf48761aacf)

	* imap/browse.c: Use imap_utf7_encode instead of
	imap_munge_mbox_name+imap_unquote_string.

2009-01-14 11:45 -0800  Brendan Cully  <brendan@kublai.com>  (cd0b17c80372)

	* doc/manual.xml.head: Add missing hooks to manual section 4

2009-01-13 06:51 -0800  Brendan Cully  <brendan@kublai.com>  (10e224e86f0b)

	* hook.c: Do not allow a command in an account-hook to trigger another
	account-hook. Recent changes in the IMAP path canonifier mean that
	account-hooks that set variables to URLs (eg folder, spoolfile) can
	trigger a recursive account-hook. Now we just bail out of account-
	hook early if we are called recursively, but perhaps we should warn
	the user to use a folder-hook instead. Thanks to Kyle Wheeler for
	finding this one.

2009-01-12 10:27 -0800  Brendan Cully  <brendan@kublai.com>  (6976aca75d04)

	* init.h: Correct defaults for new ssl options (fixes manual
	generation)

2009-01-11 21:47 -0800  Brendan Cully  <brendan@kublai.com>  (ff74e612f790)

	* mutt_ssl_gnutls.c: GNUTLS: check all available certs
	noninteractively before presenting any menus

	* UPDATING, init.h, mutt.h, mutt_ssl.c, mutt_ssl_gnutls.c: Add
	$ssl_verify_dates option to relax certificate date validation

	* UPDATING, init.h, mutt.h, mutt_ssl.c, mutt_ssl_gnutls.c: Add
	$ssl_verify_host to allow skipping host name validation

2009-01-10 22:09 -0800  Brendan Cully  <brendan@kublai.com>  (db3a61fcde35)

	* imap/util.c: Assume INBOX for ""/NULL in imap_mxcmp

	* imap/util.c: Use known connection delimiter in imap_expand_path

	* imap/util.c: Guard against NULL pointers in imap_mxcmp

	* imap/imap_private.h, imap/util.c: Canonicalize IMAP mailboxes before
	comparing them.

	* imap/util.c: Fix last commit

	* imap/util.c: Prioritize the entered IMAP folder delimiter. First
	priority is the connection delimiter. Second priority is the user's
	delimiter if it is in imap_delim_chars. We no longer use the first
	character in imap_delim_chars.

2009-01-06 18:34 -0800  Vsevolod Volkov  <vvv@mutt.org.ua>  (4032dfd52118)

	* po/ru.po: Updated Russian translation

2009-01-05 16:43 -0800  Brendan Cully  <brendan@kublai.com>  (0d81ef9d40fd)

	* build-release: Sign tagged revision, not the one after

	* .hgsigs: mutt-1.5.19 signed

	* .hgtags: Added tag mutt-1-5-19-rel for changeset a4b47ac32d32

	* VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po, po/fr.po,
	po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po, po/ja.po,
	po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po, po/ru.po,
	po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po:
	automatic post-release commit for mutt-1.5.19

	* build-release: Fall back to vi if VISUAL is unset in
	build-release

	* UPDATING: Update UPDATING

	* imap/command.c, imap/imap.c, imap/imap_private.h: Report CREATE
	failures

	* browser.c: Style fixes

	* browser.c: Leave error message on screen if imap_mailbox_create
	fails

	* doc/mutt.man: Add pointer to the full manual to the front of mutt.1

2009-01-05 09:16 -0800  Petr Písař  <petr.pisar@atlas.cz>  (990f1e841dd4)

	* po/cs.po: Updated Czech translation

2009-01-04 22:36 -0800  Vincent Lefevre  <vincent@vinc17.org>  (9af288ee9e91)

	* po/fr.po: Updated French translation

2009-01-04 18:32 -0800  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (e47d05dc2633)

	* imap/util.c: Indentation fix

2009-01-04 18:12 -0800  Brendan Cully  <brendan@kublai.com>  (1947c370fcd9)

	* Makefile.am: Remove obsolete make target

	* doc/manual.xml.head: Update copyright in manual

2009-01-04 17:07 -0800  Vincent Lefevre  <vincent@vinc17.org>  (bbe8694acc33)

	* po/fr.po: Updated French translation

2009-01-04 17:04 -0800  Brendan Cully  <brendan@kublai.com>  (d98ab9a591e5)

	* pgpkey.c: Remove dead code. Thanks to Ingo Schwarze.

	* COPYRIGHT: Update copyrights

	* addrbook.c, ascii.h, attach.c, bcache.c, bcache.h, browser.c,
	browser.h, charset.c, charset.h, commands.c, complete.c,
	compose.c, crypt-gpgme.c, crypt.c, curs_main.c, dotlock.c,
	editmsg.c, enter.c, functions.h, gnupgparse.c, handler.c,
	hdrline.c, hook.c, init.h, lib.c, lib.h, menu.c, mh.c,
	mutt_idna.c, mutt_idna.h, mutt_sasl.h, mutt_socket.c, muttlib.c,
	mx.c, pager.c, pattern.c, pgp.c, pgp.h, pgpinvoke.c, pgpkey.c,
	pgplib.c, pgplib.h, pgppacket.c, pgppubring.c, pop.c, postpone.c,
	protos.h, query.c, recvattach.c, recvcmd.c, remailer.c, rfc1524.c,
	rfc2047.c, rfc2231.c, rfc3676.h, send.c, setenv.c, status.c,
	url.c: Update copyrights. Closes #3016. I went through the logs of
	each file with a copyright header and updated the years for the
	authors in the headers for any non-comment changes they
	introduced. What a pain!

	* imap/auth_anon.c, imap/auth_cram.c, imap/auth_login.c,
	imap/auth_sasl.c, imap/browse.c, imap/imap.h, imap/message.h,
	imap/utf7.c: IMAP copyright header updates

	* imap/auth_gss.c, imap/command.c, imap/imap.c, imap/message.c:
	Updated copyrights

	* smtp.c: SMTP: complain when authentication fails. Closes
	#2117. Now each failed attempt emits an error before mutt tries
	the next method. Possibly we should just fail immediately?

	* parse.c, snprintf.c: Use ! instead of testing pointers against 0.
	Closes #3125.

2009-01-04 20:12 +0100  Rocco Rutte  <pdmef@gmx.net>  (33fa1ca4b6af)

	* doc/gen-map-doc, init.h: Documentation: Minor fixes and
	improvements

2009-01-03 21:02 -0800  Brendan Cully  <brendan@kublai.com>  (5a80ee54a05f)

	* imap/command.c, imap/imap.c, init.c, muttlib.c, postpone.c: Raise
	debug level for several messages

	* imap/auth_gss.c: Guard against unused variable warning.  Thanks
	to Ingo Schwarze.

	* doc/Makefile.am: Remove obsolete reference to ChangeLog.old. Thanks
	to Ingo Schwarze.

	* imap/message.c: Ignore unexpected FETCH responses during
	imap_read_headers. Thanks to Chris Li for the excellent bug report
	in #3041. See #2902, #2935, #2985, #3028, #3041, #3143. With luck,
	this may close them. In truth, imap_read_headers is still a horrible
	kludge of duct tape and chicken wire.

	* hash.c, hash.h: Make hash_string work in unsigned domain

	* main.c: Another copyright update

	* main.c, smtp.c: Update some copyrights

2009-01-02 23:13 -0800  Brendan Cully  <brendan@kublai.com>  (87ef3e3550e4)

	* smtp.c: SMTP: Use Hostname if Fqdn is bogus. Closes #3142.

	* init.h: More tyops

	* doc/manual.xml.head: Tyops

	* mutt_ssl_gnutls.c: Add SSL intermediate certificate support for
	gnutls

	* mutt_ssl.c: Simplify intermediate certificate handling.  Return
	immediately if a certificate is interactively accepted.  Display
	index of current certificate in chain in menu title.

2009-01-02 12:46 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (5db868a874b6)

	* globals.h, mutt_ssl.c: Add support for intermediate certificates to
	openssl code. Gnutls support is not included in this patch.

2009-01-01 17:02 -0800  Marcel Telka  <marcel@telka.sk>  (532f695b4352)

	* smtp.c: SMTP: Require SP after AUTH response (strict RFC
	conformance). Closes #3141.

2009-01-01 16:55 -0800  Brendan Cully  <brendan@kublai.com>  (859009a507d8)

	* smtp.c: SMTP: guard against short server responses

2008-12-30 00:58 +0100  Rocco Rutte  <pdmef@gmx.net>  (ac870203179d)

	* doc/manual.xml.head: Manual: Add missing maps to bind command docs

	* doc/TODO: Documentation: Update TODO

2008-12-26 14:36 +0100  Rocco Rutte  <pdmef@gmx.net>  (4917897ac9b1)

	* init.c: Ignore NULL/empty lines in rc parser, fixes mutt -e ''
	crashing

2008-12-20 15:33 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (349986b1af09)

	* po/ja.po: Updated Japanese translation.

2008-12-20 15:31 -0800  Brendan Cully  <brendan@kublai.com>  (a715dca3610c)

	* main.c: Cosmetics for mutt -v

2008-11-26 01:15 +0000  Peter Collingbourne  <peter@pcc.me.uk>  (2fefd56f440c)

	* sendlib.c: Disable line wrapping for Message-ID header

2008-12-16 20:19 -0800  Erik Hovland  <erik@hovland.org>  (f6ae8dc70850)

	* imap/util.c: Remove unused #include directives

	* crypt.c, curs_main.c, flags.c, group.c, hcache.c, mh.c, pager.c,
	pgpmicalg.c, pgppacket.c, postpone.c, query.c, recvattach.c,
	recvcmd.c, send.c: Remove unused #include directives

	* sendlib.c: mutt_gen_msgid() allocates the msgid off of the heap.

	Since mutt_gen_msgid() allocates the msgid string with strdup, it is
	getting it off of the heap.

	When the fprintf writes the msgid, the string is no longer tracked
	and that string is leaked.

	* parse.c: Match variable type to getch return type

	* alias.c: Fix fread rc check

	* hash.c: Remove redundant int clamping

	* smime.c: Remove check that always succeeds

	* pattern.c: fclose correct fp

	* rfc822.c: buflen cannot be 0 here

2008-12-16 12:36 -0800  Brendan Cully  <brendan@kublai.com>  (bbf4dfc2aa41)

	* ChangeLog.old, Makefile.am: Remove ChangeLog.old

	* imap/Makefile.am: Remove imap/BUGS from Makefile.am

2008-12-15 23:45 -0800  Erik Hovland  <erik@hovland.org>  (adaf24e4117d)

	* mh.c: Fix bad parentheses in stat rc

	* bcache.c: snprintf returns int, not size_t

	* muttlib.c: Always va_end(ap_retry) in mutt_buffer_printf

2008-12-15 23:11 -0800  Brendan Cully  <brendan@kublai.com>  (101a8bcba613)

	* imap/BUGS: imap/BUGS is superseded by the BTS

2008-12-10 20:00 +0100  Rocco Rutte  <pdmef@gmx.net>  (817e5987633b)

	* doc/manual.xml.head: Manual: Fix typos found by by Vincent Lefevre,
	see #3109.

	* doc/manual.xml.head: Manual: trim into chapter, add notes about
	contributing

	* doc/mutt.css: Make mutt.css apply for all media types

	* doc/manual.xml.head, doc/mutt.css: Manual: Wrap important notes
	in <note/>

	* doc/Makefile.am, doc/chunk.xsl, doc/html.xsl, doc/mutt.xsl: Move
	common XSLT params to mutt.xsl imported into (chunk|html).xsl

	* doc/gen-map-doc, doc/makedoc.c, doc/manual.xml.head,
	doc/manual.xml.tail, init.h: Manual: Only wrap real text
	paragraphs in <para/>

	Elements such as lists, tables, synopsis don't need it and produce
	hundreds of warnings in tidy because of empty paragraphs.

	With this change, the manual should be fully XHTML 1.0 Transitional
	and validate without warnings and errors.

	* hg-commit: hg-commit: Work even in subdirectories

	* doc/chunk.xsl, doc/html.xsl: Manual: Use right XSLT-way to embed
	CSS to avoid invalid xmlns="" attributes on <style/>

	* doc/devel-notes.txt: devel-notes.txt: add some words about preparing
	& contributing patches

	* doc/manual.xml.head: Manual: Add section about typographical
	conventions, see #3109.

	* doc/manual.xml.head, doc/mutt.css: Manual: Wrap important examples
	in <example/>

2008-12-06 15:06 +0100  Rocco Rutte  <pdmef@gmx.net>  (e13e903af3bf)

	* doc/manual.xml.head, doc/mutt.css: Manual: Fixup configuration
	command synopsis and switch to <cmdsynopsis/>

	* doc/makedoc.c: makedoc: use <quote/> and <literal/> in string
	default values

	The goal is to improve readability of settings where spaces are
	relevant.

	* doc/Makefile.am, doc/chunk.xsl, doc/html.xsl, doc/mutt.css:
	Manual: Add simple and clean stylesheet, see #3109.

2008-12-02 16:10 +0100  Rocco Rutte  <pdmef@gmx.net>  (3a8e5756613c)

	* init.c: Include mutt_menu.h in init.c for mutt_menu_init() prototype

2008-12-01 21:27 +0100  Rocco Rutte  <pdmef@gmx.net>  (1e8252a9e92f)

	* ChangeLog, charset.c, history.c, init.c, init.h, pattern.c: Fix some
	typos to silence compiler warnings

2008-11-30 20:28 +0100  Rocco Rutte  <pdmef@gmx.net>  (cb251bde7fc1)

	* addrbook.c, browser.c, compose.c, crypt-gpgme.c, curs_main.c,
	init.c, menu.c, mutt_menu.h, mutt_ssl.c, mutt_ssl_gnutls.c, pager.c,
	pgpkey.c, postpone.c, query.c, recvattach.c, remailer.c, smime.c:
	Manage last search pattern outside of menu lifecycle

	Previously, the pattern was thrown away during menu destruction. For
	the next search, mutt then can't provide a good suggestion. The new
	behaviour is to manage the pattern outside the lifecyle to always
	provide the last pattern as suggestion.

	* query.c: Start numbering query results with 1 instead of 0

2008-11-24 11:44 -0800  Brendan Cully  <brendan@kublai.com>  (fd555f9fcb03)

	* doc/manual.xml.tail, main.c: Belatedtly acknowledge Rocco's
	significant contributions to mutt

2008-11-24 12:41 +0100  Rocco Rutte  <pdmef@gmx.net>  (dc62594cc9e9)

	* doc/Makefile.am: Manual: Fix lynx call for html to text
	conversion, strip \001 when dumping with elinks

	* doc/manual.xml.head: Manual: Fix/Improve quoting

	* hg-commit: hg-commit: Exit if manual validation fails

	* doc/manual.xml.head, doc/muttrc.man.head: Documentation:
	Consistently use "backtick" for `

	* doc/Makefile.am, doc/manual.xml.head, doc/muttrc.man.head:
	Manual: Add 'spellcheck' target for aspell and fix typos (closes
	#3137)

2008-11-23 18:46 +0100  Rocco Rutte  <pdmef@gmx.net>  (82b4664129cd)

	* doc/Makefile.am: Complete e1304a641938 commit

	* doc/Makefile.am, doc/db-cleanup.xsl: Manual: Convert manual.html
	to manual.txt under C locale

	This ensures manual.txt is always pure ASCII and removes the
	horrible XSLT-based and incomplete hack.

	* doc/manual.xml.head: Manual: Fix wording for simple search

2008-11-22 18:09 +0100  Rocco Rutte  <pdmef@gmx.net>  (0837f7b13990)

	* po/de.po: Fix German translation for what-key

	* UPDATING, functions.h, keymap.c, pager.c: Make what-key function
	available in pager-based menus, too

2008-11-21 11:34 -0800  Petr Písař  <petr.pisar@atlas.cz>  (870b7dfb89ef)

	* po/cs.po: Updated Czech translation.

2008-11-21 11:19 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (34315aab7401)

	* ChangeLog, mbyte.c: Initialize mbstate in mutt_filter_unprintable.
	Closes #3134

2008-11-16 21:01 -0800  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (8199185fa595)

	* snprintf.c: Add support for %ll to the bundled snprintf
	replacement.

	* configure.ac, doc/makedoc-defs.h: Add --disable-full-doc flag to
	only build documentation for enabled features

2008-11-15 20:24 -0800  Brendan Cully  <brendan@kublai.com>  (8087be7178cd)

	* configure.ac: Use with_tokyocabinet exclusively (with_tc is
	undefined). Closes #3131.

2008-11-15 19:51 -0800  Alexey I. Froloff  <raorn@altlinux.org>  (af87aa1846be)

	* md5.c, md5.h: md5.h, md5.c: updated to latest version from gnulib.
	Buggy old md5.h causes problems with gcc 4.3 compiler. In md5.h
	__attribute__ is #define'd to no-op and causes mutt_md5 to enter
	inifinite loop while calling memcpy().

2008-11-15 19:36 -0800  Gary Johnson  <garyjohn@spk.agilent.com>  (01e4deee6827)

	* curs_lib.c, mutt_socket.c, mutt_ssl_gnutls.c, smtp.c: Suppress
	several progress messages in batch mode

2008-11-11 11:41 -0800  Kyle Wheeler  <kyle-mutt-dev@memoryhole.net>  (53ffd34f4de3)

	* smtp.c: Use envfrom instead of recomputing it in mutt_smtp_send.

2008-10-29 20:49 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (c2439fc68cd6)

	* pager.c: Restart pager search from top if called twice.  Do not
	loop infinitely. Closes #3127.

2008-10-30 01:02 +0100  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (6c58b678d360)

	* account.c: Remove unused variable in mutt_account_match and fix
	comment.

	* imap/command.c, imap/imap.h, imap/util.c: Add imap_account_match
	wrapper over mutt_account_match that canonicalizes accounts with
	imap_conn_find so that username comparison always work as expected.

2008-10-28 22:20 +0000  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (caa738600644)

	* enter.c, group.c, handler.c, init.c, lib.c, menu.c, mh.c,
	mutt_idna.c, mutt_ssl.c, mx.c, parse.c, recvattach.c, rfc822.c,
	signal.c, sort.c, thread.c: Make some functions static.

2008-10-20 11:50 -0700  Brendan Cully  <brendan@kublai.com>  (5ea9f336dd60)

	* imap/util.c: Accidentally dropped from d4a9c0a68f2b prior to commit

	* imap/imap.c, imap/message.c: Hack around INBOX.INBOX breakage
	from [5d1cc2f0c1c4]

2008-10-20 18:00 +0100  Vincent Lefevre  <vincent@vinc17.org>  (11d2c6712c88)

	* pattern.c: Make eat_regexp static.

2008-10-20 09:55 -0700  Kyle Wheeler  <kyle@memoryhole.net>  (361b298c9fe2)

	* imap/util.c: Fix #3129

2008-10-20 09:48 -0700  Brendan Cully  <brendan@kublai.com>  (f119005f8169)

	* imap/imap.c, imap/imap_private.h: Call imap_free_idata instead of
	freeing directly in imap_logout

	* imap/browse.c: Fix memory leak in imap_mailbox_state

2008-10-19 16:26 -0700  TAKAHASHI Tamotsu  <tamo@momonga-linux.org>  (e1fc907b2968)

	* imap/browse.c: Fix up destination path when renaming mailbox. Closes
	#2090.

2008-10-19 16:14 -0700  Brendan Cully  <brendan@kublai.com>  (5d1cc2f0c1c4)

	* imap/util.c: Normalize path component of IMAP URLs in
	imap_expand_path (see #2897).

	* mutt_socket.c: Fix buglet in logging from previous commit

	* mutt_socket.c: Handle short writes in mutt_socket_write_d. See
	#3000. Apparently even blocking I/O with signals masked can
	sometimes return early. Based on a patch by Patrick Welche.

2008-10-19 15:14 +0200  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (2f04a811db3f)

	* pattern.c, sendlib.c: Remove unused functions.

	* curs_main.c, init.c, pattern.c, score.c: Make some variables static.

	* configure.ac: Fix logic in [13a831a945be].

2008-10-07 19:22 -0700  Brendan Cully  <brendan@kublai.com>  (10a1f06bc8aa)

	* Makefile.am, configure.ac, mutt_idna.c, mutt_idna.h: Clean up with
	/without-idn handling

2008-10-07 15:58 -0700  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (cd3bd3858c6c)

	* mutt_socket.c: Minor simplification in mutt_socket_readln_d

2008-10-07 15:27 -0700  Brendan Cully  <brendan@kublai.com>  (d13106731007)

	* mutt_idna.c, mutt_idna.h: Build no-op versions of new IDN functions
	if IDN is unavailable. Closes #3122, #3123.

2008-10-01 09:33 -0700  Brendan Cully  <brendan@kublai.com>  (13a831a945be)

	* configure.ac: Clean up autoconf header cache engine selection.

	Any explicit --with-$engine will force that engine to be used or
	make configure fail if the engine is unavailable.

2008-09-29 14:31 -0700  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (ec96c56be182)

	* mutt_socket.c: Simplify host resolution code slightly.

2008-09-26 08:55 +0200  Rocco Rutte  <pdmef@gmx.net>  (9e569296190b)

	* UPDATING, doc/manual.xml.head, init.h: Mention tokyocabinet in
	UPDATING and docs

2008-09-25 15:07 -0700  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (2050b44407bf)

	* configure.ac, hcache.c, init.h, mutt.h: Support tokyocabinet
	(successor to qdbm). Closes #3112

2008-09-24 15:58 +0200  Matthias Andree  <matthias.andree@gmx.de>  (2c8bf79d99b7)

	* ChangeLog, pager.c: Fix compiler warning in dprint() (closes #3120)

2008-09-24 15:53 +0200  Rocco Rutte  <pdmef@gmx.net>  (c842922bea10)

	* doc/manual.xml.head: Manual: Fix typo

	* mbyte.c: Provide legacy implementations for iswalpha() and
	iswupper()

	In mbyte.h and without using wc functions, only the prototypes were
	defined but implementations were missing resulting in build errors.
	These new functions are derived from the iswalnum() and towupper()
	routines which don't provide full unicode coverage.

	* imap/imap.c: Fix an infinite loop for imap searches

	Reported by Emanuele Giaquinta on #mutt.

2008-09-18 08:28 +0200  Rocco Rutte  <pdmef@gmx.net>  (ffefb446142c)

	* alias.c, init.c, muttlib.c, protos.h: Fix compiler warnings

2008-09-17 22:27 +0200  Thomas Roessler  <roessler@does-not-exist.org>  (77e25415a08a)

	* alias.c, globals.h, init.c, mutt_idna.c, muttlib.c, rfc822.h,
	sort.c: sorting efficiency

2008-09-16 17:20 +0200  Rocco Rutte  <pdmef@gmx.net>  (1cb0a127eb3d)

	* UPDATING: UPDATING: $move now defaults to "no"

2008-09-11 09:28 +0200  Rocco Rutte  <pdmef@gmx.net>  (1a6842983357)

	* ChangeLog, keymap.c: Fix IMAP keepalive if $imap_keepalive >=
	$timeout

2008-09-01 18:23 +0200  Rocco Rutte  <pdmef@gmx.net>  (17adea9cdff6)

	* UPDATING: Add note about locale-safe hcaches to UPDATING as it's a
	user-visible change

2008-08-31 23:36 +0200  Rocco Rutte  <pdmef@gmx.net>  (b6d07a662c7f)

	* ChangeLog, init.h, pager.c: Fix pager to respect $wrap_search

2008-08-31 23:28 +0200  Rocco Rutte  <pdmef@gmx.net>  (f4b10e6b415c)

	* doc/chunk.xsl, doc/html.xsl: Backout [e5610347fb3f] for further
	discussion

2008-08-31 21:13 +0200  Rocco Rutte  <pdmef@gmx.net>  (581037c15012)

	* init.h: Manual: Fix trailing \ for $preconnect

2008-08-31 21:12 +0200  Rocco Rutte  <pdmef@gmx.net>  (6d80c3d5b7aa)

	* doc/makedoc.c: makedoc: Fix fall-through in [c11ce7feaa3e]

2008-08-31 20:56 +0200  Rocco Rutte  <pdmef@gmx.net>  (03d1344f7ea2)

	* doc/gen-map-doc: Manual: Harmonize generated function mappings with
	the rest of the manual. This includes named keys such as "<Return>",
	attempts to use CamelCase and leaves the key column for unbound
	functions empty so they're visually easier to spot.

2008-08-31 20:12 +0200  Rocco Rutte  <pdmef@gmx.net>  (937c3976df5a)

	* doc/manual.xml.head, init.h: Manual: Many content+markup
	improvements for option documentation

2008-08-31 19:30 +0200  Rocco Rutte  <pdmef@gmx.net>  (df555876d480)

	* doc/makedoc.c: makedoc: Also replace | and ^ by entities in XML
	output

2008-08-31 18:25 +0200  Rocco Rutte  <pdmef@gmx.net>  (c11ce7feaa3e)

	* doc/makedoc.c: makedoc: Escape <>& in <screen/> environments

2008-08-31 15:27 +0200  Rocco Rutte  <pdmef@gmx.net>  (4cc92c30543b)

	* doc/makedoc.c, doc/manual.xml.head, doc/manual.xml.tail, init.h:
	Manual: Use <quote/> quoting for DocBook rather than ``''. All
	quotes characters are now rendered to Unicode quote chars in the
	HTML output (as <xref/> does, too) but still " for manual.txt.

2008-08-31 14:31 +0200  Rocco Rutte  <pdmef@gmx.net>  (e5610347fb3f)

	* doc/chunk.xsl, doc/html.xsl: Manual: Limit toc section depth to 1
	This only lists sect1 items and prevents variables from being shown
	making it unusable.

2008-08-31 14:25 +0200  Rocco Rutte  <pdmef@gmx.net>  (15a831b84d46)

	* doc/manual.xml.tail: Manual: use itemizedlist for acknowledgements
	DocBook XSL renders simplelist to a html table which is
	inappropriate.

2008-08-30 20:21 -0700  Brendan Cully  <brendan@kublai.com>  (c2af57b1e7ee)

	* ChangeLog, mutt_ssl_gnutls.c: Make gnutls read function more robust
	against interruptions. Signals should be masked off anyway, but see
	#3074.

2008-08-30 23:19 +0200  Rocco Rutte  <pdmef@gmx.net>  (996e4e2d2855)

	* doc/manual.xml.head, init.h: Manual: use $variable syntax, only
	quote non-variable links

	* doc/manual.xml.head: Manual: Various fixes+improvements in chapters
	1+2

	* doc/gen-map-doc, doc/makedoc.c, doc/manual.xml.head, init.h: Manual:
	Layout functions as <function-name>, s/ESC/Esc/ for consistency

	* doc/devel-notes.txt, doc/makedoc.c: makedoc: Add support for
	monospace fonts with \fC...\fP

	* doc/manual.xml.head: Manual: trim trailing whitespace

	* doc/manual.xml.head: Manual: Fix processing warnings by manually
	assigning missing id attributes

	* doc/manual.xml.head: Manual: Add a section on mutt core concepts as
	introduction

2008-08-30 19:59 -0700  Brendan Cully  <brendan@kublai.com>  (12a6de725483)

	* curs_lib.c, enter.c, flags.c, keymap.c, menu.c: Rework timeout
	handling to support keepalive in the line editor. Also allow
	keepalives of less than $timeout without returning before $timeout,
	so people who don't want to be notified of new mail don't have to
	be.

2008-08-29 23:10 -0700  Rado Smiljanic  <regrado@web.de>  (4f67fc336986)

	* curs_main.c, keymap.c, menu.c, pager.c: Make curses timeout the
	minimum of $timeout and $imap_keepalive. Do keepalive in km_dokey
	instead of directly in menu. Closes #2747.

2008-08-29 22:40 -0700  Brendan Cully  <brendan@kublai.com>  (e37ae3f79ec0)

	* imap/imap_private.h: Dead code

	* imap/imap.c: Remove redundant code

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/message.c:
	Use sorted headers in imap_exec_msgset. Fixes [e68f79fef249]. Closes
	#3000 again.

2008-08-29 10:23 +0200  YONETANI Tomokazu  <qhwt+mutt@les.ath.cx>  (78aab353e217)

	* buffy.c: Only consider empty files non-existent for buffy's
	purpose.

	According to SUS, the st_size member of struct stat is undefined for
	directories. In case a system reports 0, the newly_created flag will
	be set for a directory and the magic will be cleared.

	If the folder type is cleared, mutt won't check the folder for new
	mail and thus will ignore MH and Maildir type folders on such a fs
	completely (e.g. the HAMMER fs on DragonFly BSD).

2008-08-28 11:19 -0700  Brendan Cully  <brendan@kublai.com>  (1d94905ad00b)

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/message.c:
	The msgset changes seem buggy. Reverting pending further testing.

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/message.c:
	Split long IMAP commands for the benefit of lazy servers (closes
	#3000). Also touches lots of old, hairy code. Likely to wake
	sleeping dogs.

2008-08-26 23:09 -0700  Brendan Cully  <brendan@kublai.com>  (2731e5174c5a)

	* imap/util.c, mutt_sasl.c, mutt_ssl.c, mutt_ssl_gnutls.c:
	Properly set the SASL external auth name when using SSL client
	certs. Also zero out the account structure before filling it with
	available data. Client certificates + SASL EXTERNAL were only
	working by luck.

	* imap/imap.c: Remove leftover IMAP IDLE handling from before
	[53d9210aa4ee].

2008-08-25 00:52 -0700  Brendan Cully  <brendan@kublai.com>  (36aa1130091a)

	* UPDATING, globals.h, imap/command.c, imap/imap.c,
	imap/imap_private.h, imap/util.c, init.c, init.h: Introduce
	$imap_pipeline_depth. This lets users control the number of
	commands that mutt will queue up before sending them to the
	server. Setting this to 0 disables pipelining, which should close
	#2892.

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/message.c:
	Rework IMAP command queueing to allow pipelining to be disabled.
	IDLE handling has been better abstracted, and there are fewer entry
	points to the IMAP command issuing machinery. Any commands that are
	simply queued may be executed whenever the pipeline fills, instead
	of requiring explicit handling in the caller.

	Tested on my Cyrus server, but I wouldn't be surprise if this causes
	new problems.

2008-08-24 20:01 +0200  Rocco Rutte  <pdmef@gmx.net>  (045c5942e1ad)

	* doc/manual.xml.head: Manual: Fix DTD validation error and
	message header display section

	* doc/manual.xml.head: Manual: Fix typo

	* doc/manual.xml.head: Manual: Fix style and typos. Noted by
	Vincent Lefevre, see #3109.

2008-08-23 15:25 -0700  Brendan Cully  <brendan@kublai.com>  (1f9849496bc2)

	* main.c: Whitespace cleanup

	* main.c: Fix infinite loop with "mutt -", introduced in
	[31c9e9727d42]. Treats - as a non-option argument. It would be
	reasonable to treat it as an error instead.

2008-08-19 16:44 -0400  Aron Griffis  <agriffis@n01se.net>  (31c9e9727d42)

	* main.c: Handle -- correctly with or without -a, closes #3097

	Prefix optstring with "+" to force POSIX behavior on GNU getopt, and
	thereby prevent reordering argv. This allows us to correctly handle
	mixed addresses, attachments, options and the double-dash to signal
	end-of-options.

	Signed-off-by: Aron Griffis <agriffis@n01se.net>

2008-08-22 17:49 +0200  Rocco Rutte  <pdmef@gmx.net>  (6fd1fa2d98bc)

	* doc/manual.xml.head: Manual: fix/improve markup/content, see
	#3109

2008-08-21 10:42 +0200  Rocco Rutte  <pdmef@gmx.net>  (15d93fe50e62)

	* init.h: Clarify documentation for $config_charset. Closes #2021.

	* doc/manual.xml.head: Improve color/mono command synopsis.
	Closes #2630.

	* init.h: Better document the effect of $thorough_search being unset.
	Closes #3104.

	* mutt_ssl.c: Port certificate host checking from msmtp to
	mutt. It supports IDN, wildcards and extracting the hostname from
	subject alternative field as well as common name which should be
	the same gnutls supports. Closes #3087.

2008-08-19 13:17 -0700  Brendan Cully  <brendan@kublai.com>  (573d1aab3c89)

	* init.c: Silence an incorrect uninitialized variable warning.

	* init.h: Better documentation for how quote_regexp determines
	quote level. Closes #1463.

2008-08-19 09:39 +0200  Rocco Rutte  <pdmef@gmx.net>  (3e850c6e43fd)

	* handler.c, mutt.h: Make text/enriched handler multibyte aware.
	Closes #3033.

2008-08-18 13:08 -0700  Vincent Lefevre  <vincent@vinc17.org>  (95a11c7f677d)

	* po/fr.po: Updated French translation.

2008-08-18 10:24 +0200  Rocco Rutte  <pdmef@gmx.net>  (51bd7a47d552)

	* pager.c: Ignore zero width characters U+200B/U+FEFF which may garble
	the display. Closes #3061, #3048.

	* charset.c, charset.h, init.c: Validate charset names for all
	charset options. Validation is either done against mutt's table of
	IANA assigned names or local iconv implementation (based on the
	assumption that iconv_open(charset,charset) fails if charset is
	unknown to the implementation). Closes #1668.

2008-08-15 11:53 -0700  Brendan Cully  <brendan@kublai.com>  (ff3fbb6a92a8)

	* mutt_sasl.c: Fix type-punning warning in sasl_getprop usage

	* parse.c: Fix a couple of compiler warnings introduced in
	[00ce81d778bf]. Make the style of mutt_parse_references more
	pleasing to me.

2008-07-10 09:38 -0400  Aron Griffis  <agriffis@n01se.net>  (d3ee9644765f)

	* copy.c: Fix three bugs handling flags in mutt_copy_header

	1. mutt_copy_header incorrectly tests CH_UPDATE to determine whether
	to write the In-Reply-To and References headers. CH_UPDATE
	refers only to Status: and X-Status:

	2. mutt_copy_header ignores CH_NOSTATUS which is supposed to
	indicate that the mailbox type doesn't use those headers.

	3. mutt_copy_header tests h->env->irt_changed and
	h->env->refs_changed when it should be testing CH_UPDATE_IRT and
	CH_UPDATE_REFS, respectively. Early in the function this
	happens:

	 if (h->env) flags |= (h->env->irt_changed ? CH_UPDATE_IRT
	: 0) | (h->env->refs_changed ? CH_UPDATE_REFS : 0);

	 This means that for most callers, the result is the same, but
	mutt_copy_header should be testing the flags because the caller
	might have set them explicitly without setting
	irt_changed/refs_changed.

	* parse.c, protos.h, send.c: Unify parser for message-ids

	Rewrite mutt_extract_message_id and change mutt_parse_references to
	us it. The parser in mutt_extract_message_id is looser than the old
	one in mutt_parse_references; it just looks for <[^\s>]+> and
	doesn't worry about @-signs. Additionally it doesn't use strtok, so
	the input string can be const.

	Closes #3090, #1935, #1116 (both the stated bug and the conversation
	following).

2008-08-11 16:42 +0200  Rocco Rutte  <pdmef@gmx.net>  (508ffc26dad2)

	* alias.c, doc/manual.xml.head, init.c: Prefer "backtick" over
	"backtic" on comments and docs as it's more common, closes #3101.

2008-07-27 10:48 -0400  Aron Griffis  <agriffis@n01se.net>  (3f595d14a285)

	* doc/manual.xml.head: doc: semi-colon needs quoting too

	If semi-colon is bound or macro'd, it needs to be quoted like space,
	otherwise mutt thinks it's separating commands.

	Signed-off-by: Aron Griffis <agriffis@n01se.net>

2008-07-21 10:24 -0400  Aron Griffis  <agriffis@n01se.net>  (96b0dd25a550)

	* copy.h, mutt.h: noop cleanup: move mutt_copy_header flags to copy.h

	Noticed while reading that these flags are better defined in copy.h
	than mutt.h. Builds without warnings.

	Signed-off-by: Aron Griffis <agriffis@n01se.net>

2008-07-24 16:19 -0400  Brendan Cully  <brendan@kublai.com>  (0e2f9189a1dd)

	* m4/codeset.m4, m4/iconv.m4: Fix m4 serial numbers to avoid
	aclocal 1.10 warnings

2008-07-21 11:42 +0200  Rocco Rutte  <pdmef@gmx.net>  (7e6d98886cce)

	* doc/makedoc.c: makedoc: Add ".ie" and ".il" to support itemized
	lists.

	Some settings docs use verbatim screen environments to print lists
	while support for real lists will make it look nicer: for docbook
	use <itemizedlist/>, \(hy for roff and '-' for text.

	* doc/manual.xml.head: Document that account-hook is intended for
	connection-related settings only

	* doc/manual.xml.head: Manual: Use tables for message flags as it's
	more compact

	* doc/manual.xml.head: Manual: minor formatting tweaks

	* alias.c, init.h: Encode lines written to $alias_file in
	$config_charset if set. Closes #3095

2008-07-10 09:38 -0400  Aron Griffis  <agriffis@n01se.net>  (7729b1ad530c)

	* copy.c, protos.h, sendlib.c: Unify mutt_write_references

	copy.c and sendlib.c have independent and different implementations
	of writing references to a file. Choose the one in sendlib since
	it's conservative with mallocs and supports trimming the list.

	Signed-off-by: Aron Griffis <agriffis@n01se.net>

	* copy.c: Clean up error handling in mutt_copy_header

	mutt_copy_header unnecessarily tests the result of each fputc/fputs
	(well, most of them anyway, it's not consistent). This obfuscates
	the code and hides bugs. Remove these extraneous checks since
	ferror/feof are checked at the bottom of the function, and get rid
	of all the early returns.

	Signed-off-by: Aron Griffis <agriffis@n01se.net>

2008-07-17 19:48 +0200  Rocco Rutte  <pdmef@gmx.net>  (f135d64e0082)

	* query.c: Cleanup unused vars changeset ba0d96408425 didn't
	remove

2008-07-11 11:34 +0200  Rocco Rutte  <pdmef@gmx.net>  (cc67b008038c)

	* doc/manual.xml.head: Mention that @ can be used in usernames in URLs

	* charset.c: Allow UTF-8 charset to be misspelled as "utf8"

	* mutt_ssl.c: Verify hostname in (Open)SSL certificate validation

	This is based on the patch by gkloepfer attached to #3087 but passes
	the proper connection as argument (avoiding adding hostname to
	struct sslsockdata) and validates the hostname even in case OpenSSL
	cannot find the local issuer certificate. GnuTLS already supports
	hostname checking. Closes #3087.

2008-07-10 22:02 +0200  Rocco Rutte  <pdmef@gmx.net>  (b9ac445b035b)

	* hcache.c: Prevent some pointers of 'struct body' being saved to
	hcache

	This addresses the hcache safety issue but maybe doesn't fix it
	completely, see #2942. This also prevents mutt from crashing when
	using a hcache that was synced when syncing the mailbox (updating
	changed and fully-parsed messages).

2008-07-10 21:46 +0200  Aron Griffis  <agriffis@n01se.net>  (6244eefaea64)

	* headers.c: Remove completely wrong comment regarding in-reply-to and
	references

	...plus fix one other comment and some whitespace.

2008-07-09 09:14 +0000  Rocco Rutte  <pdmef@gmx.net>  (2a9e9c487bad)

	* doc/mutt.man, main.c: Document redirection to trigger batch send
	mode in mutt(1) and mutt -h. Closes #2070.

2008-07-04 09:09 +0200  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (74b54f11c919)

	* protos.h: Fix syntax error for strtok_r compatitility prototype

2008-07-02 18:26 +0200  Vladimir Marek  <Vladimir.Marek@Sun.COM>  (f72fce68ca19)

	* lib.c: Use stat() instead of dirent->d_type to test for
	directory. Closes #3089.

2008-07-02 18:23 +0200  Rocco Rutte  <pdmef@gmx.net>  (7783502a04c7)

	* curs_main.c: Calculate menu->max after a possible resort in index
	(maybe changing number of messages). Closes #3088.

	* curs_lib.c: Fix casts for progress update to prevent -ftrapv
	aborts to trigger. Closes #3018.

2008-07-02 08:56 -0700  Brendan Cully  <brendan@kublai.com>  (c51c16db46cc)

	* crypt-gpgme.c: Only make LC_MESSAGES conditional on NLS in GPGME
	locale support.

2008-07-02 11:19 +0200  Rocco Rutte  <pdmef@gmx.net>  (8b783c916893)

	* browser.c, buffy.c, commands.c, compose.c, curs_main.c, enter.c,
	headers.c, hook.c, imap/imap.c, init.c, mbox.c, muttlib.c,
	postpone.c, protos.h, recvattach.c, send.c, status.c: Use
	realpath() in mutt_pretty_mailbox() for paths that may need
	it. This requires to add the buffer size as parameter since the
	result may be longer than the original but still fit in the
	buffer. Closes #2948.

	* hash.c: Use casts to avoid triggering integer overflow detection in
	hash function

2008-07-01 20:06 -0700  Vincent Lefevre  <vincent@vinc17.org>  (fb0df4ae0836)

	* ChangeLog, curs_lib.c: Clamp timeval math to unsigned int to match
	progress timestamps. This is fine since only relative differences
	matter. Closes #3018.

2008-07-01 18:29 -0700  Brendan Cully  <brendan@kublai.com>  (f9af0501d2dd)

	* crypt-gpgme.c: Set GPGME locale on first attempt to create context.
	Closes #2913.

	* crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-gpgme.c: Stub in a
	gpgme version of extract-keys. It doesn't currently work right
	because apparently while gpg on the command line can parse a whole
	message, we'll have to do it for gpgme. I really wonder about the
	'ME' part of GPGME sometimes.

	* crypt-gpgme.c, lib.c, lib.h: Support displaying application/pgp-keys
	with GPGME. This was pretty convoluted because GPGME provides no way
	to examine a key block without importing it. This code creates a
	temporary GPG home in which to import the key in order to display
	it.

	* crypt-gpgme.c, handler.c, pgp.c: Handle DONTHANDLEPGPKEYS in
	handler instead of crypto modules. This lets gpgme and classic pgp
	share a bit of logic, and unbreaks key extraction at least for
	classic PGP.

	* copy.c: Bail out of copy if decryption is requested but the desired
	engine is missing. This closes #2684, but handling of mixed crypto
	in a single message needs more investigation.

2008-07-01 01:10 -0700  rtc  <rtc@gmx.de>  (49fe0292b503)

	* copy.c: When deleting attachments, always print newline
	separating header from body. Closes #3085.

2008-06-29 01:09 -0700  Brendan Cully  <brendan@kublai.com>  (677e7712d735)

	* crypt-gpgme.c: Improve gpgme SMIME uid display: align each line by
	the length of the first.

	* crypt-gpgme.c: Show more information about problematic SMIME
	signatures under gpgme. Also warn if the key is not known to be
	good. For some reason expired keys in my environment are not
	flagged as expired in sig->status or sig->summary.

2008-06-28 20:33 -0700  Brendan Cully  <brendan@kublai.com>  (1492c24f2a4e)

	* mutt_ssl_gnutls.c: Extract CN from client certificate in gnutls.
	Nothing currently uses it, but I suspect we should be using it as
	the external auth name in mutt_sasl_client_new.

	* UPDATING, globals.h, init.h, mutt_sasl.c, mutt_ssl_gnutls.c:
	Basic support for $ssl_client_cert when compiled with
	gnutls. The key must not be encrypted. Closes #2911.

2008-06-27 12:04 -0700  Petr Písař  <petr.pisar@atlas.cz>  (40c6e851bf76)

	* po/cs.po: Updated Czech translation.

2008-06-26 12:52 -0700  Brendan Cully  <brendan@kublai.com>  (c5256c65eedb)

	* handler.c: Mark new error message for translation.

	* curs_lib.c: Force a resize event after calling an external editor.
	Closes #2207

	* lib.c, lib.h, mh.c: fflush before fsync and close. Closes #2962
	again.

	* mh.c: fsync maildir/mh messages on commit. Closes #2962.

2008-06-25 23:40 -0700  Brendan Cully  <brendan@kublai.com>  (32374c911c6c)

	* smime.c: Check S/MIME signing ID exists before attempting to use
	it. Closes #3069. Also make (s)ign automatically ask for a key if
	no default is defined.

	* init.h: Make $move default to no instead of ask-no. Closes #2945.

	* doc/manual.xml.head: Document difference between index and pager
	search. Closes #2886.

	* commands.c, copy.c, crypt-gpgme.c, handler.c, mbox.c, pgp.c: Make
	mutt_copy_message distinguish between fatal and non-fatal errors.
	Non-fatal errors should prevent moving messages, since they indicate
	data loss. But mutt should still attempt to display them, since
	being able to see some attachments is better than nothing. Also stop
	printing out non-PGP material in application/pgp attachments. Closes
	#2545, #2912.

2008-06-24 23:12 -0700  Brendan Cully  <brendan@kublai.com>  (f5fe657f0633)

	* handler.c: Make multipart decoding a little more
	forgiving. First, ignore bad content-transfer-encoding in
	multipart sections. Second, if an attachment fails to decode,
	print a warning and continue instead of giving up on the entire
	message.

1970-01-01 00:00 +0000  Brendan Cully  <brendan@kublai.com>  (a2e8f6fab8d3)

	* smtp.c: Test that envelope from or from is set before attempting
	SMTP delivery. Closes #3079.

2008-06-14 18:23 -0700  Christoph Berg  <cb@df7cb.de>  (4b790909a037)

	* doc/mbox.man: Document that From_ lines use asctime-style dates,
	not RFC2822 dates. Closes #3077.

2008-06-11 22:45 -0700  Alexey I. Froloff  <raorn@altlinux.org>  (1e8ca708a52f)

	* attach.c: Do not attempt to close invalid descriptors. Closes #3075

2008-06-05 13:06 +0200  Vladimir Marek  <Vladimir.Marek@Sun.COM>  (5ab92dd44ce2)

	* alias.c: Wrap Fqdn in NONULL() to prevent crash with -d5 if Fqdn
	is NULL

2008-06-02 09:45 +0200  Rocco Rutte  <pdmef@gmx.net>  (d6d04a7f5aea)

	* init.c: Allow for printing variable values longer than 256
	characters

	* rfc822.c: Allow for mail addresses longer than 256
	characters (closes #3066).

2008-05-30 16:14 +0200  Rocco Rutte  <pdmef@gmx.net>  (2f59be26ad22)

	* protos.h: Define prototypes for compatibility functions in protos.h
	to silence compiler warnings

2008-05-29 14:18 +0200  Rocco Rutte  <pdmef@gmx.net>  (bf74c85070c4)

	* menu.c: Respect $wrap_search in generic menu search (e.g.  for
	browser)

	* doc/Makefile.am: Only install mutt_dotlock(1) if binary is
	installed, too (closes #1601).

2008-05-28 22:22 -0700  Paul Walker  <paul@black-sun.demon.co.uk>  (f4259a92dab6)

	* doc/Muttrc.head: Make default muttrc header weeding
	tidier. Closes #286.

2008-05-23 01:40 -0400  Todd Zullinger  <tmz@pobox.com>  (73a180edce53)

	* pgp.c: Call mutt_need_hard_redraw() in pgp_decrypt_part().

	This change ensures that the screen is redrawn when using gpg-agent.
	Without this, mutt's navigation keybindings are lost after pinentry
	curses prompts for a passphrase to descrypt a message.

2008-05-28 22:16 -0700  Moritz Schulte  <moritz@g10code.com>  (7fd74c40eced)

	* curs_lib.c: Make sure that the redrawing/reinitializing is done
	always, not only when the environment variable DISPLAY is not set.

2008-05-28 22:05 -0700  Vladimir Marek  <Vladimir.Marek@Sun.COM>  (9d0509641865)

	* configure.ac, m4/iconv.m4: Cosmetic fix to configure
	--help. Closes #3060.

2008-05-28 21:44 -0700  Vincent Lefevre  <vincent@vinc17.org>  (7b8ef3b8ff5a)

	* po/fr.po: Updated French translation

2008-05-23 18:39 +0200  Rocco Rutte  <pdmef@gmx.net>  (8a3a037ec6b3)

	* UPDATING: UPDATING: fix 1.5.18 line as noted by Kyle Wheeler

2008-05-22 20:22 -0700  Brendan Cully  <brendan@kublai.com>  (96a01436f88b)

	* imap/command.c: Escape LSUB mailbox names given to
	mutt_parse_rc_line. Handle literals in STATUS responses for Notes
	compatibility.

2008-05-22 17:01 +0200  Rocco Rutte  <pdmef@gmx.net>  (d612ef757ee9)

	* configure.ac, m4/types.m4: Use C99 macros "PRId64"/"PRId32" to
	format file sizes/offsets if available. This fixes warning about
	mismatching int argument sizes on amd64.

	* init.h: Document that $check_mbox_size should be set before
	mailboxes commands

	* UPDATING: Mention requirement to encode X-Label: headers in
	UPDATING

2008-05-21 23:20 -0700  Rocco Rutte  <pdmef@gmx.net>  (bba92e401440)

	* imap/browse.c: Guard idata->mailbox read in imap_mailbox_state.
	Closes #3057.

2008-05-21 22:59 -0700  Piarres Beobide Egaña  <pi@beobide.net>  (51c494a2e735)

	* po/eu.po: Updated Basque translation.

2008-05-21 22:55 -0700  René Clerc  <rene@clerc.nl>  (e95a579cf5e4)

	* po/nl.po: Updated Dutch translation

2008-05-21 20:36 +0200  Rocco Rutte  <pdmef@gmx.net>  (1bdb7a7c3c8f)

	* buffy.c, buffy.h: Fix new mail detection for >2 GB mboxes with
	$check_mbox_size set

	* mbox.c, sendlib.c: Use ftello() instead of ftell() in more places
	that need it (fixes progress updates for >2 GB mbox files)

	* doc/manual.xml.head, init.h: Improve documentation for handling
	multiple folders and new mail detection

2008-05-20 17:08 +0200  Paul Walker  <paul@black-sun.demon.co.uk>  (a4d423798321)

	* parse.c: Fix more compiler warnings on amd64 by use of %p instead of
	%x

2008-05-19 09:52 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net>  (38319cd7d832)

	* po/ca.po: Updated Catalan translation

2008-05-19 18:49 +0200  Vladimir Marek  <Vladimir.Marek@Sun.COM>  (8ac4b70221ee)

	* Makefile.am: Unbreak build with included gettext by explicitly
	removing libs for mutt_md5

2008-05-19 11:14 +0200  Rocco Rutte  <pdmef@gmx.net>  (85654735d27e)

	* UPDATING: Mention mime_lookup change in UPDATING

2008-05-19 10:59 +0200  Paul Walker  <paul@black-sun.demon.co.uk>  (d3fd07d0016c)

	* init.c: Use %p instead of %x to debug-print pointers (fixes warnings
	on 64bit platforms)

2008-05-19 10:56 +0200  Rocco Rutte  <pdmef@gmx.net>  (771276a3bace)

	* Makefile.am: hcversion.h depends on new mutt_md5 tool

2008-05-18 12:42 -0700  Roland Rosenfeld  <roland@spinnaker.de>  (4ef0fc2f8378)

	* po/de.po: Updated German translation

2008-05-17 19:31 -0700  Andreas  <Andreas Jobs>  (aaeee8f868c4)

	* crypt-gpgme.c: Fix GPGME S/MIME micalg generation, broken
	in [e6f958b093b6]. Closes #2994.

2008-05-17 18:34 -0700  Brendan Cully  <brendan@kublai.com>  (f9545d5ec15f)

	* doc/Muttrc.head: Add 'mime_lookup application/octet-stream' to the
	distributed Muttrc. Closes #2984.

	* .hgignore, Makefile.am, configure.ac, hcachever.sh.in,
	md5.c: Build local md5 tool for hcachever.sh. Closes #3025.

2008-05-17 12:39 -0700  Brendan Cully  <brendan@kublai.com>  (692b7c063bf1)

	* .hgsigs: mutt-1.5.18 signed

	* .hgtags: Added tag mutt-1-5-18-rel for changeset ff9e4d0464b1

	* ChangeLog, VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po: automatic post-release commit for mutt-1.5.18

	* UPDATING: Update UPDATING.

	* imap/browse.c: Use context to get IMAP new message count in mailbox
	browser if possible.

2008-05-17 11:08 -0700  Rocco Rutte  <pdmef@gmx.net>  (b341d157ae72)

	* Makefile.am, hcache.c, hcachever.sh.in: When necessary, convert
	strings to utf-8 in the header cache. If iconv is unavailable,
	include the charset in effect as part of the cache file
	name. Closes #3023.

2008-05-16 09:24 +0200  Rocco Rutte  <pdmef@gmx.net>  (001d6be61905)

	* smime_keys.pl: Glob paths derived from mutt -Q output in
	smime_keys.pl. Patch by Fabrice Bellet and Miroslav Lichvar (closes
	#3020).

2008-05-15 17:29 +0200  Rocco Rutte  <pdmef@gmx.net>  (132474d6dd3b)

	* alias.c, protos.h: Make mutt_check_alias_name()
	multibyte-aware (closes #2403).

	* doc/manual.xml.head: Document exact address in the manual (closes
	#3050)

2008-05-14 16:23 -0700  Brendan Cully  <brendan@kublai.com>  (7f4711b9b61f)

	* alias.c: Ensure alias file ends with \n before appending new
	aliases. Closes #1580.

2008-05-14 15:19 +0200  Samuel Tardieu  <sam@rfc1149.net>  (5518355bc6da)

	* curs_main.c: Always update status bar after sorting method changes
	(closes #2120).

2008-05-12 23:15 -0700  Brendan Cully  <brendan@kublai.com>  (97aa20438c47)

	* imap/imap.c: Terminate open IMAP message sets at end of mailbox
	even if the last message is inactive. Closes #3002.

2008-05-11 10:52 +0200  Matthias Andree  <matthias.andree@gmx.de>  (09b0363cdf54)

	* rfc3676.c: In debug output, cast size_t arguments to long for
	consistency with printf %ld argument.

2008-05-11 00:50 -0700  Brendan Cully  <brendan@kublai.com>  (98c39c5187a9)

	* main.c: Update copyright in -vv output. Closes #3042.

2008-05-07 11:54 -0700  Brendan Cully  <brendan@kublai.com>  (385efdbf9423)

	* mutt_sasl.c, mutt_sasl.h: Make SASL support conn_poll method.
        Make SASL IP lookup failure non-fatal. Both are for tunnel support.

2008-05-05 19:32 +0200  Rocco Rutte  <pdmef@gmx.net>  (0eacf5297484)

	* mbyte.c, mbyte.h: Fix some compiler warnings if compiling without
	system wide character functions

	* mbyte.c, protos.h, utf8.c: Pass buffer size to mutt_wctoutf8()
	to prevent crashes if MB_LEN_MAX<6 as pointed out by exg on #mutt.

2008-04-29 10:44 -0700  David Champion  <dgc@uchicago.edu>  (1de934f1d618)

	* muttlib.c: [9414b9dd36db] broke softfill. (closes #3035)

2008-04-29 10:38 -0700  Wilfried Goesgens  <dothebart@uncensored.citadel.org>  (8017c8074f62)

	* imap/auth_gss.c: Print GSSAPI status messages to debug log on
	error.

2008-04-03 17:08 +0200  Miroslav Lichvar  <mlichvar@redhat.com>  (bdd44e92919d)

	* mutt_ssl_gnutls.c: Fix sending long commands when using gnutls.

2008-04-09 15:57 -0700  Dan Fandrich  <dan@coneharvesters.com>  (3b7b3c0e459e)

	* configure.ac, strtok_r.c: Replace strtok_r when it's not
	available. The implementation comes from glibc 2.6.1 (like the
	strsep replacement) and uses the same autoconf hooks.

2008-04-09 18:13 +0200  Christian Ebert  <blacktrash@gmx.net>  (ae90c8e8ea4d)

	* doc/manual.xml.head: manual.xml.head: grammar correction

2008-03-11 17:20 -0700  N.J. Mann  <njm@njm.f2s.com>  (e3bc99a4a6bd)

	* mbox.c, mh.c, pop.c: Respect ctx->quiet when initializing
	progress bar.

2008-03-09 14:01 -0700  Sébastien Hinderer  <Sebastien.Hinderer@ens-lyon.org>  (c4212a17fad6)

	* compose.c, mx.c: Remove pointless NULL checks against
	arrays. This silences a warning on newer GCCs.

2008-03-04 22:00 -0800  Petr Písař  <petr.pisar@atlas.cz>  (fdad7b9fa741)

	* po/cs.po: Updated Czech translation

2008-03-02 21:45 -0800  Vincent Lefevre  <vincent@vinc17.org>  (9a7d802004d3)

	* po/fr.po: Updated French translation.

2008-02-27 14:45 +0100  Rocco Rutte  <pdmef@gmx.net>  (553ae136f20e)

	* COPYRIGHT, main.c: Update copyright years in 'mutt -v' output and
	COPYRIGHT

2008-02-27 13:27 +0100  Anders Helmersson  <anders.helmersson.utsikt@wasadata.net>  (d2eb082fd872)

	* curs_lib.c: Fix progress updates for large messages. Closes #3029.

2008-02-27 09:30 +0100  N.J. Mann  <njm@njm.f2s.com>  (eb4e214c8ced)

	* status.c: Cleanup status_format_str()

2008-02-20 12:02 +0100  Rocco Rutte  <pdmef@gmx.net>  (9414b9dd36db)

	* muttlib.c: Fix truncation logic for soft-padding (Closes #3035).

2008-01-29 21:06 -0800  Brendan Cully  <brendan@kublai.com>  (fd741c1922f3)

	* hg-commit: Fix typo in hg-commit

2008-01-29 21:05 -0800  Benno Schulenberg  <i18n@benno.vertaalt.nl>  (95807c4b824f)

	* po/nl.po: Improvements to the Dutch translation

2008-01-17 17:32 +0100  Rocco Rutte  <pdmef@gmx.net>  (039d939d8c3e)

	* browser.h: Use 'unsigned int' for file browser state to browse huge
	dirs (closes #3017).

2008-01-15 17:46 +0100  Rocco Rutte  <pdmef@gmx.net>  (6e6e6c4bee59)

	* recvattach.c: Fix logic error in b3cde588fe9a commit

2008-01-15 17:34 +0100  Rocco Rutte  <pdmef@gmx.net>  (b3cde588fe9a)

	* recvattach.c: Prepend './' to (some) suggested filenames when saving
	attachments. Attachment filenames may start with characters that are
	special to mutt_expand_path() may cause undesired expansion. Closes
	#1719.

	* INSTALL, README: Update stale INSTALL+README files

	* mh.c: Make maildir_delayed_parsing() more readable

	* init.h: Mention that References: and Date: cannot be
	changed in editor (closes #1234).

	* UPDATING, globals.h, init.h, query.c: Make formatting of query menu
	configurable via $query_format (closes #170).

	* init.h: Link $timeout from $mail_check, see Debian #385456.

2008-01-14 23:00 +0100  Rocco Rutte  <pdmef@gmx.net>  (130aa0517251)

	* mh.c: Fix typo of in dae38f5ab2a5 commit

2008-01-14 22:54 +0100  Rocco Rutte  <pdmef@gmx.net>  (dae38f5ab2a5)

	* ChangeLog, mh.c: hcache: Fetch data for correct message from hcache.
	With $maildir_header_cache_verify set (the default), the list (and
	thus the current) header change after data was fetched from hcache
	making some message appear as duplicate. Now fetch data for the
	correct message after possible in-place inode sorting altering file
	order. See debian bug #459739.

	* hcachever.sh.in: hcache: use HEADER for version calculation too

2008-01-09 13:06 +0100  Rocco Rutte  <pdmef@gmx.net>  (2a5636080210)

	* configure.ac: Fix mutt_dotlock build issue on cygwin
	(closes #3009).

	* init.h: Mention $recall in description for $postpone

2008-01-02 11:47 -0800  Johan Svedberg  <johan@svedberg.com>  (3cf8bc21bc3d)

	* po/sv.po: Updated Swedish translation

2007-12-11 15:22 +0100  Rocco Rutte  <pdmef@gmx.net>  (68a9c3e74f9a)

	* doc/manual.xml.head: Manual: Update caching docs (hcache naming,
	maintenance)

	* pop.c: POP: Name hcache the way IMAP does. Place the file
	under $header_cache/<url>/mutt.hcache. For now ignore that this may
	break if hcache == bcache and a message's uid is "mutt.hcache"
	(extremely unlikely) in which case the user will loose only the
	hcache file.

	* pop.c: POP: Respect $message_cache_clean

	* doc/manual.xml.head: Manual: mention $time_inc in tuning chapter

	* enter.c, history.h: Maintain different history lists for
	files and mailboxes. Closes #2999.

	* history.c: Do not trust history file and mutt code about history
	class. This prevents crashes as result of programming errors and/or
	wrong history file (e.g. negative or too high classes).

2007-12-08 12:54 -0800  Michael Elkins  <me@mutt.org>  (3971bcfd9112)

	* mh.c: Skip over messages which were previously parsed after sorting
	the tail of the list. Avoids a segmentation fault when rescanning
	the new/ subdir of a maildir when messages were left over from a
	previous scan.

2007-12-07 11:38 -0800  Rocco Rutte  <pdmef@gmx.net>  (b891b1736885)

	* lib.c, md5.h: Check definition of ENOTSUP before use
	(closes #2983)

	* mh.c: Sort MH folders into natural order after 2nd pass (closes
	#463).

	* init.h: Mention subscribe and lists commands for
	$ignore_list_reply_to (closes #2996).

	* mx.c: Don't attempt to move messages when $mbox is unset.

2007-12-05 10:03 +0100  Rocco Rutte  <pdmef@gmx.net>  (63c97881cb76)

	* UPDATING, configure.ac, main.c, mh.c: Improve inode sorting,
	enable it by default and add MH support. Sorting is done on-demand
	only before the first stat() or open()
	($maildir_header_cache_verify=yes/hcache miss). Furthermore, only
	a partial list of messages starting from that item is sorted
	reducing sorting overhead in most cases. For a fully hcache'd
	folder with $maildir_header_cache_verify=no, no sorting is needed
	and no sorting will be done. MH parsing is now two-pass, too to
	simplify the code and remove duplication.

2007-11-30 10:29 +0100  Rocco Rutte  <pdmef@gmx.net>  (5c635c9b5982)

	* configure.ac: Add version numbers for bdb 4.6

	* parse.c, sendlib.c: RfC2047 decode/encode X-Label: header
	(Closes #2970).

	* commands.c: Format status line for external and internal pager the
	same way to make %P work

2007-11-29 16:03 +0100  Rocco Rutte  <pdmef@gmx.net>  (4899bcc1c2c3)

	* doc/db-cleanup.xsl: Add ascii-replacements for 0x2dc
	(tilde) and 0x2026 (...) too. The manual cannot be clean us-acii
	but now we should have at least latin1

	* doc/Makefile.am, doc/db-cleanup.xsl: Add a really ugly hack to make
	sure the plain text manual is us-ascii. The hack is filtering
	manual.html to another HTML file but replacing unicode chars by
	their ascii equivalents. The intermediate file is used to dump HTML
	to us-ascii text (and only for that).

	* hcache.c: Fix hcache build issue when building with gdbm if qdbm
	is installed, too

2007-11-21 13:19 +0100  Miroslav Lichvar  <mlichvar@redhat.com>  (9286a76e79a2)

	* send.c: Don't ignore $from in batch send mode.

2007-11-23 15:11 +0100  Rocco Rutte  <pdmef@gmx.net>  (12a1d843c975)

	* curs_lib.c: Don't attempt to print progress if inc is 0, just
	print initial message

2007-11-21 14:14 -0800  Ronny Haryanto  <ronnylist@haryan.to>  (0e99eaaecd67)

	* po/id.po: Updated Indonesian translation

2007-11-21 16:47 +0100  Rocco Rutte  <pdmef@gmx.net>  (309ab3a63d91)

	* UPDATING: Add UPDATING entry for $check_mbox_size

	* init.h: Clarify the description for $timeout

	* UPDATING: Remove raw utf-8 char in UPDATING to make it ascii
	again

2007-11-20 19:46 +0100  Rocco Rutte  <pdmef@gmx.net>  (96f931ae0b22)

	* doc/manual.xml.head, init.h: Document that save-hook/fcc-hook/fcc-
	save-hook use $index_format expandos. Closes #2135.

	* doc/manual.xml.head, pattern.c: Simple search: Allow
	[~+%] to be \-escaped. Closes #2426.

	* configure.ac, strsep.c: Add glibc implementation of strsep() in case
	a system misses it. Closes #2989.

	* lib.h, mbyte.c: Alternate fix for not calling
	bind_textdomain_codeset() to fix Solaris build.

2007-11-19 15:32 +0100  Rocco Rutte  <pdmef@gmx.net>  (033eba2d6834)

	* rfc3676.c: Make f=f handler multibyte-aware by not buffering flowed
	content until it's finished. We now write out content as we read it
	(which simplifies the code quite a bit) and properly flow multibyte
	paragraphs. This should improve DelSp=yes handling where a flowed
	paragraph may not have spaces at all except trailing ones for
	flowable paragraphs (after concatenating lines we didn't have access
	to the original break points any longer). We still split content by
	ASCII space (this should be safe as f=f itself uses ASCII space to
	mark flowable lines (even for languages that aren't expected to use
	spaces, see DelSp). Closes #862.

2007-11-15 13:17 +0100  Rocco Rutte  <pdmef@gmx.net>  (a0161768f631)

	* doc/makedoc-defs.h, doc/makedoc.c: Fix more documentation build
	issues. Define USE_SASL (for $smtp_authenticators) in makedoc-
	defs.h, include it in makedoc.c to force doc rebuild if makedoc-
	defs.h changes.

	* parse.c, protos.h, send.c: Properly parse and validate Message-IDs
	from my_hdrs. Closes #2452.

	* configure.ac: Check for bind_textdomain_codeset() outside libc,
	too.

2007-11-15 11:53 +0100  peb  <peb@mppmu.mpg.de>  (22c68faeec08)

	* lib.h: Don't use bind_textdomain_codeset() if we're not using
	NLS/gettext. Closes #2162.

2007-11-15 11:22 +0100  Rocco Rutte  <pdmef@gmx.net>  (933e57dff004)

	* doc/manual.xml.head: Properly document simple searches and its
	"secret" keywords. Closes #2136.

2007-11-13 13:31 +0100  Rocco Rutte  <pdmef@gmx.net>  (7a4a154eefa5)

	* wcwidth.c: Fix compiler warnings in new wcwidth.c (too large values
	for 'unsigned short')

	* hg-commit: hg-commit: Run 'make validate' in doc/ if manual.xml
	is present

	* doc/manual.xml.head, init.h: Document that %f in $index_format is
	either Return-Path: or From: depending on which parses correctly.
	Also note that alternates' regex should be as precise as possible to
	avoid mismatches. Closes #1894.

	* init.h: Properly document $hostname, link it to $use_domain and
	$hidden_host. Closes #891.

2007-11-07 14:54 +0100  Rocco Rutte  <pdmef@gmx.net>  (84284776659e)

	* Makefile.am, po/Makefile.in.in, po/POTFILES.in: Don't build
	keymap_alldefs.h in srcdir as it may be read-only

	* po/Makefile.in.in: Don't try to build $(PACKAGE).pot in srcdir as it
	may be read-only

2007-11-08 22:13 -0800  Michael Elkins  <me@mutt.org>  (4bba47e6d026)

	* doc/manual.xml.head: Removed the [!] prefix from the usage from the
	usage string for the un/mailboxes command since it has no special
	meaning in this context other than referring to $spoolfile.

2007-11-08 11:48 -0800  Brendan Cully  <brendan@kublai.com>  (daf29fe0ed4c)

	* UPDATING, curs_lib.c, globals.h, init.h: Add $time_inc to
	control progress update frequency. I found 250ms to be noticeably
	different from the old behaviour, and it ruins the rounding of the
	other _inc variables.

	* color.c, copy.c, imap/command.c: Turn down some debug logging
	levels

2007-11-08 09:03 +0100  Rocco Rutte  <pdmef@gmx.net>  (92a6bfbed657)

	* doc/Makefile.am: Add stamp-doc-rc to makedoc-all to build Muttrc
	with fresh checkout

2007-11-07 14:48 -0800  Brendan Cully  <brendan@kublai.com>  (b68ccc2e66e2)

	* curs_lib.c, mutt_curses.h: Suppress progress bar updates less than
	250ms apart. Closes #2899.

2007-11-07 12:12 -0800  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (c62c5495d67c)

	* wcwidth.c: Updated wcwidth to Unicode 5.0

2007-11-07 12:03 +0100  Rocco Rutte  <pdmef@gmx.net>  (fce40f3a1aec)

	* Makefile.am, Muttrc.head, doc/Makefile.am, doc/Muttrc.head, doc
	/makedoc-defs.h, doc/makedoc.c, functions.h, init.h, makedoc-defs.h,
	makedoc.c: Try to fix parallel build problems by moving makedoc to
	doc/. This also requires to move Muttrc into doc/.

2007-11-06 16:34 -0800  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (ac14b76ef8b2)

	* Makefile.am: Remove unnecessary workaround for automake
	dist target

2007-11-06 18:23 +0100  Rocco Rutte  <pdmef@gmx.net>  (1770ab532bfd)

	* curs_lib.c, imap/imap.c, imap/message.c, mbox.c, mh.c,
	mutt_curses.h, pattern.c, pop.c, pop_lib.c, smtp.c: Add
	percentages to progress bar optionally supplied by caller. This is
	necessary to let the mbox driver print useful percentages. If
	there's no percentage given and we have a size, calculate on it on
	our own.  Closes #2929.

	* mh.c: (Re-)Add total msg count to progress for parsing maildirs

2007-11-05 14:24 -0800  Vincent Lefevre  <vincent@vinc17.org>  (ecb694b6176b)

	* po/fr.po: Updated French translation

2007-11-05 17:47 +0100  Rocco Rutte  <pdmef@gmx.net>  (6b9e91edba54)

	* curs_lib.c: Save value of errno across mutt_endwin()
	calls. Mutt_endwin() is sometimes called after noticing an error
	but before printing the message via perror(). Closes #2965.

2007-11-05 15:53 +0100  Emanuele Giaquinta  <e.giaquinta@glauco.it>  (b8dc6926ddf4)

	* doc/manual.xml.head: Manual: Fix typo

2007-11-05 14:53 +0100  Rocco Rutte  <pdmef@gmx.net>  (ad7983699656)

	* doc/manual.xml.head: Manual: Improve [un]mailboxes
	documentation. Closes #2204.

2007-11-05 12:11 +0100  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (645fcdd66828)

	* configure.ac, intl/Makefile.in, po/Makefile.in.in: Optionally define
	$datarootdir on our own for autoconf <2.60 compatibility. While I'm
	at it, fix two warnings in other files about ignoring datarootdir
	with autoconf >2.60. Closes #2905.

2007-11-04 13:19 -0800  Vsevolod Volkov  <vvv@mutt.org.ua>  (dc5ec6dbb278)

	* po/ru.po: Updated Russian translation

2007-11-04 13:17 -0800  Ivan Vilata i Balaguer  <ivan@selidor.net>  (1f72281eb36c)

	* po/ca.po: Updated Catalan translation

2007-11-04 13:16 -0800  Roland Rosenfeld  <roland@spinnaker.de>  (b2f0d89881dd)

	* po/de.po: Updated German translation

2007-11-04 19:10 +0100  Rocco Rutte  <pdmef@gmx.net>  (02e8b9c7bdc6)

	* UPDATING: Fixup UPDATING for 1.5.16/1.5.17

2007-11-04 18:27 +0100  cypher  <cypher@conuropsis.org>  (ab676b9f0c04)

	* url.c: Use strtok_r() to parse mailto: links, not strtok(). In
	case a headers needs to call mutt_parse_references() which uses
	strtok(), too, later headers will be silently discarded.  Closes
	#2968.

2007-11-04 18:14 +0100  Rocco Rutte  <pdmef@gmx.net>  (6248b3c04f61)

	* main.c, url.c: Prevent mailto parsing buffer overflow by ignoring
	too long header. If they're longer than our buffer, we can't turn it
	into a header to be parsed by mutt_parse_rfc822_line() anyway, so we
	bail out in this case. Also make main() catchup mailto parsing
	errors. Closes #2980.

	* UPDATING: Add 1.5.17 to UPDATING

	* doc/manual.xml.head, init.h: Improve DSN docs (require sendmail-
	compatible MTA, add SMTP notes). Closes #2979

2007-11-03 11:12 +0100  Rocco Rutte  <pdmef@gmx.net>  (0c054faeb285)

	* muttlib.c: Check Maildir for not being NULL when expanding
	'='-paths. Closes #2977.

2007-11-02 16:55 -0700  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (cc5de08f4612)

	* po/pl.po: Updated Polish translation.

2007-11-01 20:36 -0700  Petr Pisar  <petr.pisar@atlas.cz>  (0b4bd0452b5a)

	* ChangeLog, po/cs.po: Updated Czech translation.

2007-11-01 15:45 -0700  Brendan Cully  <brendan@kublai.com>  (5123cded9988)

	* configure.ac: Use $datarootdir as default prefix for documentation
	(closes #2905)

2007-11-01 14:07 -0700  Brendan Cully  <brendan@kublai.com>  (cd03dff9b576)

	* VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po,
	po/eo.po, po/es.po, po/et.po, po/eu.po, po/fr.po, po/ga.po,
	po/gl.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po,
	po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po,
	po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po: automatic
	post-release commit for mutt-1.5.17

	* hg-commit: Fix typo in hg-commit

2007-11-01 21:21 +0100  Rocco Rutte  <pdmef@gmx.net>  (4f3814a57eaf)

	* INSTALL, UPDATING, rfc822.c: Unbreak exact address feature. The
	problem was that when reading back tempfiles for pager display,
	trailing \n were not removed from the input so the pager displayed 2
	instead of 1.

2007-11-01 12:13 -0700  Oswald Buddenhagen  <ossi@kde.org>  (8aebd2ea4db8)

	* configure.ac: Detect BDB automatically if --with-bdb is empty

2007-11-01 14:33 +0100  Rocco Rutte  <pdmef@gmx.net>  (80f1331abec2)

	* doc/devel-notes.txt: devel-notes.txt: Mention where hg repo is, how
	to clone and update

	* doc/TODO: Documentation: Add doc/TODO with some items still open

	* doc/manual.xml.head: Manual: s/SMTP support/SMTP Support/ (for
	consitency)

	* doc/manual.xml.head: Manual: Remove 404 link for fetchmail,
	mention getmail, too

	* doc/manual.xml.head: Manual: Add short section on SSL/TLS support
	(needs more details)

	* doc/manual.xml.head: Manual: Document URL syntax in just one place,
	let others refer to it.

	* doc/manual.xml.head: Manual: Document optional SMTP support

	* doc/manual.xml.head: Manual: Add some general notes about optional
	features. Mention 'configure --help' and 'mutt -v' output.

	* doc/Makefile.am, doc/manual.xml.head: Manual: Move POP3, IMAP and
	cache-related sections to their own chapter.

	* doc/manual.xml.head: Manual: Add ids to all tables and use <xref/>
	for reference.

2007-10-31 16:34 -0700  Brendan Cully  <brendan@kublai.com>  (7cebeacc3b83)

	* config.guess, config.sub, depcomp, install-sh, missing: Remove
	autotools support files which autoreconf -i can generate

	* Makefile.am, cvslog2changelog.pl: cvslog2changelog.pl is obsolete

	* doc/muttbug.man: s/Mercurial/hg/

	* doc/muttbug.man: s/cvs/Mercurial/

2007-10-31 14:09 -0700  rea-mutt  <rea-mutt@codelabs.ru>  (c6ce36a67121)

	* lib.c: Fall back to rename for ENOTSUP and EOPNOTSUPP
	too. Closes #2975

2007-10-31 14:04 -0700  Brendan Cully  <brendan@kublai.com>  (51595292e112)

	* imap/imap.c: Fix the test for flushing queued STATUS requests in
	imap_buffy_check. This should fix the bug that caused every other
	IMAP connection to fail to get the new message counts. Thanks to exg
	for his generous help debugging this one.

2007-10-25 17:03 +0200  Rocco Rutte  <pdmef@gmx.net>  (5d96f24efa85)

	* muttlib.c, protos.h: Large file support for mutt_pretty_size().
	Based on a patch by Corinna Vinschen, adjusted for LOFF_T/OFF_T_FMT
	(closes #2191).

	* UPDATING: Add UPDATING entry for %P for $pager_format

2007-10-18 10:20 +0200  Rocco Rutte  <pdmef@gmx.net>  (4e738d998bb3)

	* hdrline.c: Enlarge temporary buffer in hdr_format_str to prevent
	subject truncation. The subject along with the thread tree are
	composed using a SHORT_STRING-sized buffer which may lead to
	truncation even though the destination buffer is large enough.

2007-10-16 11:33 +0200  Rocco Rutte  <pdmef@gmx.net>  (c33f288c3aab)

	* doc/manual.xml.head: Manual: fix typo (closes #2971).

2007-10-15 11:01 +0200  Rocco Rutte  <pdmef@gmx.net>  (35e5c34b7e91)

	* rfc3676.c: f=f: Print standalone fixed lines as-is (closes #2917).

2007-10-11 12:10 +0200  Rocco Rutte  <pdmef@gmx.net>  (c15eeb44f139)

	* UPDATING, doc/manual.xml.head: Document format string
	pipes. This is roughly the commit message only. Add a line to
	UPDATING (mark it as a change rather than a new feature as it may
	break setups).

	* init.h: Document that $indent_string actually is a format string.

	* muttlib.c: Do not consider empty pipes for filtering in format
	strings. This fixes a crash with $indent_string="|" and
	$text_flowed unset.

2007-09-28 11:06 +0200  Rocco Rutte  <pdmef@gmx.net>  (709db707bcdf)

	* curs_lib.c, muttlib.c, protos.h: Make mutt_FormatString()'s string
	truncation multibyte aware

2007-09-19 12:22 +0200  Rocco Rutte  <pdmef@gmx.net>  (c768a1ebf78a)

	* menu.c: Enlarge buffers for printing menu entries from STRING to
	LONG_STRING. Now that multibyte padding works, we may too soon run
	into too short buffers for common terminal widths in graphical
	terminals.

	* compose.c: Use mutt_paddstr() to print compose menu's status line
	rather than printw(). All other menus use mutt_paddstr(): printw()
	prints only N bytes, not N columns.

2007-09-18 11:37 +0200  Rocco Rutte  <pdmef@gmx.net>  (5827331565a2)

	* init.h: Document that $charset is a fallback for $send_charset

2007-09-17 17:32 +0200  Rocco Rutte  <pdmef@gmx.net>  (ae47263fc1b0)

	* muttlib.c: Enable padding with multibyte chars for %>X, %*X and
	%|X

	* hcache.c, hcache.h, main.c: Include hcache backend version info
	in mutt -v output

	* init.c: Use NONULL to ensure we can pretty-print empty paths for
	option queries

2007-09-14 11:35 -0700  Emanuele  <Emanuele Giaquinta>  (c699e5847630)

	* ChangeLog, configure.ac: The new MD5 code needs AC_C_BIGENDIAN on
	big-endian systems

2007-09-13 09:39 -0700  Brendan Cully  <brendan@kublai.com>  (154417d57b9d)

	* configure.ac: Do not clobber --with-bdb argument (closes #2955)

2007-09-11 18:33 +0200  Rocco Rutte  <pdmef@gmx.net>  (785c95c8ff9a)

	* commands.c: Enlarge error buffer in mutt_enter_command() to not
	truncate option queries. The error buffer gets passed down into
	parse_set() using it to report option values. SHORT_STRING is too
	short to even print some defaults (e.g. $status_format).

	* muttlib.c: Let %*X padding share the same code of %>X padding The
	current implementation of %*X was completely multibyte-unaware and
	had buffer overflow issues with large terminals. Now we use the same
	code as %>X has and optionally only truncate left content to make
	sure the right content can be printed entirely.

2007-09-10 11:14 -0700  Vincent Lefevre  <vincent@vinc17.org>  (664c5ec1a727)

	* po/fr.po: Updated French translation.

2007-09-10 08:54 +0200  Rocco Rutte  <pdmef@gmx.net>  (49d69399cf21)

	* curs_lib.c, muttlib.c, protos.h: Make mutt_FormatString() more
	multibyte-aware As default cause, don't copy raw bytes but copy
	multibyte chars instead to ensure column computation is correct
	(needed for padding).

	* init.c: Escape option values for variable queries and completion
	to ensure they're parsable

2007-09-09 15:48 -0700  Andreas Jaggi  (4e9445a06369)

	* imap/imap.c: Let imap_complete_hosts work with the last mailbox
	(closes #2949). This was an off-by-one error in the mailbox loop.

2007-09-09 15:20 -0700  Julien Cristau  (7e60c2515318)

	* ChangeLog, mutt_ssl_gnutls.c: Only check whether GNUTLS error is
	fatal when an error occurs (closes #2954). The API for GNUTLS
	changed to require this in 1.7.18.

2007-09-08 15:30 -0700  Brendan Cully  <brendan@kublai.com>  (1e4a6efddc81)

	* prepare: autoreconf --include doesn't pass its argument to aclocal.
	Let ACLOCAL_AMFLAGS in Makefile.am handle that.

	* configure.ac: Attempt to clean up DB back-end selection

2007-09-06 20:13 +0200  Rocco Rutte  <pdmef@gmx.net>  (648ad3832e82)

	* muttlib.c: Rewrite padding logic for mutt_FormatString()

	Do so by checking columns and bytes individually to make sure we
	really don't write past the end of allocated buffers. This patch
	fixes all my crashes I saw with files attached to/with the settings
	for #2882 and #2900.

2007-09-05 10:52 +0000  Rocco Rutte  <pdmef@gmx.net>  (078744e84667)

	* init.c, pattern.c: Fix/improve intl error messages

	* browser.c: Interpret relative paths in browser relative to shown
	dir, not working dir (closes #2471).

	* help.c, pager.c, pager.h: Teach pager how to ignore $wrap and use it
	for help (closes #2896).

	* doc/manual.xml.head: Manual: make sure <screen/> contents in shorter
	than 80 chars

	Otherwise conversion to plain text may cause line breaks rendering
	examples syntacially invalid (closes #2185).

	* doc/manual.xml.head: Manual: don't use <screen/> to present
	structured data

	* muttlib.c: Fix buffer overflow in mutt_FormatString()

	The variable in question is supposed to track string sizes, not
	string widths (closes #2882 and #2900).

2007-09-04 17:22 -0700  Brendan Cully  <brendan@kublai.com>  (7df563e4b7fd)

	* configure.ac: Add libz to crypto libs if available
	(closes #2303).

2007-09-04 12:06 -0700  Ivan Vilata i Balaguer  <ivan@selidor.net>  (d9a6b3f8a492)

	* po/ca.po: Updated Catalan translation

2007-08-31 10:12 -0700  Gary  <Gary Johnson>  (791bfed8ba62)

	* editmsg.c: Decrement the mtime of the tempfile during
	edit-message to make mutt notice changes taking less than one
	second.

2007-08-28 11:33 -0700  Brendan Cully  <brendan@kublai.com>  (3f8829e739e9)

	* init.h: Insert .pp after .de to fix man page generation (closes
	#2940)

	* imap/imap.c: Check subscriptions after any authentication,
	rather than after fist connection (closes #2908)

	* dotlock.c, lib.h, mutt.h: Use limits.h for PATH_MAX instead of
	posix1_lim.h (closes #2525)

2007-08-27 11:07 -0700  Brendan Cully  <brendan@kublai.com>  (9cfb5ac98e26)

	* imap/auth_cram.c: Update auth_cram for new MD5 code
	(untested).

	* Makefile.am, configure.ac, hcache.c, md5.c, md5.h, md5c.c,
	pgppubring.c, pop_auth.c: Replace RFC md5 implementation with GPL
	version from coreutils

2007-08-16 09:32 -0700  Brendan Cully  <brendan@kublai.com>  (d096219907e7)

	* curs_lib.c: Check for lost tty if getch returns error (closes #1220)
	Great thanks to Vincent Lefevre for tracking this one down.

2007-08-15 20:09 -0700  Michael Vrable  <mvrable@cs.ucsd.edu>  (acd71f2f2555)

	* rfc3676.c: Fix RFC 3676 (format=flowed text) handling.

	The old code would consider a line containing "> " to be flowed, but
	since this is a quoted and space-stuffed line containing no
	additional text, by my reading of RFC 3676 it should be fixed.

	Clean up the handling of format=flowed text. Fix the test to
	determine whether a line is fixed--if a line ends in a space only
	because the last character is a space from space-stuffing, consider
	the line to be a fixed line. This makes the test for ((buf_len -
	buf_off) <= 0) later no longer necessary.

	Also simplify the code by removing checks for curline being non-
	null; it is allocated at the start of the function and never
	reallocated to size zero, so it should never be a null pointer.

2007-08-08 10:49 -0700  Kyle Wheeler  (6d3e90261321)

	* makedoc.c: Trim whitespace in definition lists for man pages (closes
	#2941).

2007-08-02 22:30 -0700  Brendan Cully  <brendan@kublai.com>  (aefdab8fad80)

	* init.h: Clarify the documentation for $use_envelope_from
	(closes #2936). Thanks to Vincent Lefevre for the suggestions.

2007-07-25 11:16 -0700  Vincent Lefevre  <vincent@vinc17.org>  (6bc60516fffa)

	* po/fr.po: Updated French translation.

2007-07-16 10:46 -0700  Brendan Cully  <brendan@kublai.com>  (bd75134a6b65)

	* enter.c: Make is_shell_char static. Closes #2907.

	* init.c: Check that spam expression has enough matches for its
	template. Closes #2927.

2007-07-14 17:26 -0700  Brendan Cully  <brendan@kublai.com>  (f4b2c6eba5fd)

	* crypt-gpgme.c: GPGME: do not attempt to extract signatures
	unless gpgme_op_verify returned success.

2007-07-09 11:32 -0400  Aron Griffis  <agriffis@n01se.net>  (4e8e3db418ea)

	* send.c: Allow send-hooks to effectively change $from and $use_from

	* mx.c: Clean up mx.c: init stat structs to zero

	prev_sb.st_size was initialized to zero if USE_FCNTL but not if
	USE_FLOCK. Silence the gcc warning for both cases by zeroing the
	stat structures on the stack.

	Other minor cleanups:
	- clean up some whitespace
	- convert return (foo) to return foo
	- return r at the bottom of the function instead of testing values and
	returning them explicitly
	- add vim modeline

2007-07-10 14:47 +0200  Thomas Roessler  <roessler@does-not-exist.org>  (c06e39893cce)

	* handler.c: Actually bail out, but wiht an ok return value.

	* handler.c: Don't bail out on a bad message/external-body!

2007-07-08 18:27 -0700  David Champion  <dgc@uchicago.edu>  (6241f5669264)

	* commands.c, curs_lib.c, doc/manual.xml.head, init.h, lib.h, menu.c,
	muttlib.c, query.c, recvcmd.c: This patch implements the "%* "
	notation, which is analogous to "%> " but gives precedence to the
	right side instead of to the left when the fill length is zero. The
	default $pager_format is updated to use it so that %P is always
	available at the edge of the screen.

2007-07-08 15:34 -0700  Edmund GRIMLEY EVANS  <edmund820@rano.org>  (5d74a79deeb3)

	* po/eo.po: Updated Esperanto translation.

2007-07-04 17:36 -0700  Brendan Cully  <brendan@kublai.com>  (f24fa301493f)

	* crypt-gpgme.c: Fix some compiler warnings in GPGME. Closes #2919.

	* crypt-gpgme.c: GPGME: Stop parsing message as soon as PGP header
	is found. Use file_to_data_object to build data for inline
	signature verification instead of doing it by hand. This fixes
	inline verification for me.

	TODO: crypt-gpgme helper functions seem to return lots of pointers
	off the stack in very dubious ways.

2007-06-27 10:38 -0700  Dan Fandrich  <dan@coneharvesters.com>  (3354ac2e79c7)

	* pager.c: Fix %P in pager status for off_t variability.

	* dotlock.c: remove a double inclusion of config.h

2007-06-14 18:17 -0700  Sertaç Ö. Yıldız  (55cd4cb611d9)

	* rfc3676.c: flowed: consider a single space as a hard line break.
	Closes #2906

2007-06-13 10:43 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (8d02c65ed0b5)

	* po/ru.po: Updated Russian translation

2007-06-11 09:27 -0700  René Clerc  <rene@clerc.nl>  (5eaa1cfe80ad)

	* po/nl.po: Updated Dutch translation

2007-06-11 09:19 -0700  Petr Písař  <petr.pisar@atlas.cz>  (b9accd463528)

	* po/cs.po: Updated Czech translation.

2007-06-10 21:30 -0700  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (ef1882fe42f9)

	* po/pl.po: Updated Polish translation.

2007-06-10 21:27 -0700  Vincent Lefevre  <vincent@vinc17.org>  (156ce3622588)

	* po/fr.po: Updated French translation.

2007-06-10 09:55 -0700  Roland Rosenfeld  <roland@spinnaker.de>  (5a61c162b9c0)

	* po/de.po: Updated German translation

2007-06-09 21:08 -0700  Brendan Cully  <brendan@kublai.com>  (50b11beb4265)

	* build-release: Fix quoting for hg sign in build-release

2007-06-09 20:32 -0700  Brendan Cully  <brendan@kublai.com>  (aaf805734d24)

	* VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po, po/fr.po,
	po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po, po/ja.po,
	po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po, po/ru.po,
	po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po:
	automatic post-release commit for mutt-1.5.16

2007-06-09 20:26 -0700  Brendan Cully  <brendan@kublai.com>  (4b5b42ddfe42)

	* ascii.h, crypt-gpgme.c: Make GPGME backend generate a
	RFC3156-compliant micalg parameter (blush). Based on a patch by
	Stefan Haun. Closes #2901.

2007-06-09 01:03 +0200  Thomas Roessler  <roessler@does-not-exist.org>  (53e5e1105fd2)

	* sendlib.c: remove unnecessary dprints

	* sendlib.c: Fix header encoding corner case.

2007-06-05 13:12 -0700  pywatson  <pywatson@gmail.com>  (9e90789518ad)

	* sort.c: Make sort by "To" stable (closes #2515).  compare_to()
	calls mutt_get_name(), which may return a static pointer if it in
	turn calls mutt_addr_for_display(). If this static pointer is used
	for a and b, the result is bad. The fix is to make a copy of the
	first object.

2007-05-17 14:40 +0200  Christoph Berg  <cb@df7cb.de>  (edefe5e1f2b4)

	* Muttrc.head: Temporarily set pipe_decode in the \cb urlview macro.
	(Debian #423640.)

2007-05-28 16:44 -0700  Brendan Cully  <brendan@kublai.com>  (794b039bacaa)

	* Makefile.am, configure.ac, hcachever.sh, hcachever.sh.in:
	Use autoconf instead of "which" to discover MD5 tool

2007-05-20 00:29 -0700  Brendan Cully  <brendan@kublai.com>  (a0e038310f42)

	* smtp.c: Forget SMTP password if authentication fails.  Thanks to
	Gregory Shapiro for the initial patch (I've moved the reset from
	smtp_auth_sasl up to smtp_auth, and used the account API instead
	of twiddling account bits by hand). Closes #2872.

2007-05-15 21:05 +0200  Thomas Roessler  <roessler@does-not-exist.org>  (33af2883d52b)

	* curs_main.c: Jump to the next *sub*-thread when tag-subthread is
	invoked, not to the next thread.

2007-05-08 12:54 -0700  Rocco Rutte  <pdmef@gmx.net>  (763bd781d108)

	* rfc3676.c: f=f: flush buffer contents (if any) after reading input
	Otherwise mutt maybe won't show the last line if it's supposed to
	continue.

2007-05-07 11:50 -0700  Brendan Cully  <brendan@kublai.com>  (89a3e1c5c28b)

	* OPS, UPDATING, curs_main.c, functions.h: Rename next-folder to next-
	unread-mailbox. Remove default binding.

	* muttlib.c: Use signed arithmetic in mutt_gecos_name to avoid an
	overflow. Closes #2885.

2007-05-02 10:50 -0700  N.J. Mann  <njm@njm.f2s.com>  (f6861b85f22b)

	* OPS, curs_main.c, functions.h: Add next-folder command

2007-05-01 10:41 -0700  Brendan Cully  <brendan@kublai.com>  (1ed1cbc7bad4)

	* configure.ac: Make IDN depend on iconv support

2007-04-29 19:10 -0700  Alain Bench  <veronatif@free.fr>  (0e32bd00f341)

	* contrib/smime.rc, smime.c: contrib/smime.rc:
	$smime_verify_opaque_command fallback to -noverify to get signed
	text despite a failed -verify (but send only this first failure
	notice to stderr). smime.c: fflush() before rewind(). Closes #2428.
	Helps Debian Bug 420014

2007-04-24 17:51 -0700  Vincent Lefevre  <vincent@vinc17.org>  (a58527ead950)

	* po/fr.po: Updated French translation.

2007-04-24 14:08 -0700  Michael Elkins  <me@mutt.org>  (21c7e172030f)

	* remailer.c: fixup for mutt_FormatString() changes

2007-04-23 12:12 -0700  Michael Elkins  <me@mutt.org>  (1bae5dcd7292)

	* crypt-gpgme.c: Fix compilation error related to change in
	mutt_FormatString()

2007-04-21 13:05 -0700  Brendan Cully  <brendan@kublai.com>  (4c70812b3104)

	* pgp.c: Use PGP_SECRING to find PGP signing keys. Closes #2878.

2007-04-21 13:00 -0700  Piarres Beobide Egaña  <pi@beobide.net>  (2b97fdbd6ce1)

	* po/eu.po: Updated Basque translation.

2007-04-15 15:43 -0700  Michael Elkins  <me@mutt.org>  (cb9bef17b3a8)

	* hdrline.c, init.h, pager.c, protos.h: Removed hardcoded pager
	progress indicator and add %P format code to $pager_status which
	contains the same information.

	Append "%> -- (%P)" to $pager_status to emulate old behavior.

	Closes #2087.

	* browser.c: merge with tip

2007-04-11 22:36 -0700  Michael Elkins  <me@mutt.org>  (0c47f7b06158)

	* addrbook.c, browser.c, compose.c, hdrline.c, muttlib.c, pgpinvoke.c,
	pgpkey.c, protos.h, recvattach.c, smime.c, status.c: Pass column
	value recursively when expanding format strings (bug #2840).

2007-04-13 14:14 -0700  Brendan Cully  <brendan@kublai.com>  (021f494d5154)

	* browser.c: Strip / from tail of LastDir when copying from
	Maildir (closes #1885)

	* doc/Makefile.am: Allow elinks for building manual.txt (closes #2876)

	* sendlib.c: Even simpler header wrapping fix

	* sendlib.c: Fix header wrapping

2007-04-12 20:11 -0700  Brendan Cully  <brendan@kublai.com>  (c9e92a1d71cf)

	* mh.c: Differentiate between first and second maildir passes in
	progress indicator

	* mh.c: Only call mutt_set_flag when necessary when checking for
	maildir changes (fixes #1216)

	* flags.c: Only update header color in mutt_set_flag if flag has
	changed (see #1216, #1931)

	* init.h: Make $header_cache_compress default to set

	* imap/message.c: Simplify IMAP message fetch loop slightly

	* imap/message.c: Handle a missing or corrupted header cache entry
	(closes #2676) If imap_hcache_get fails, stop parsing the header
	cache and simply refetch from that point on.

2007-04-11 14:19 -0700  Paul Eggert  <eggert@CS.UCLA.EDU>  (ac7355452a60)

	* configure.ac, muttbug.sh.in: Make mutt more posixly-
	correct (closes #1615).

2007-04-11 14:06 -0700  Brendan Cully  <brendan@kublai.com>  (5393c104e08a)

	* mkchangelog.sh: Remove un-POSIX TZ NOOP in mkchangelog.sh (see
	#1615)

	* account.c, globals.h, init.h: Add $smtp_pass (closes #2116)

	* doc/Makefile.am: Explicit -j1 breaks some versions of make (see
	#2538)

	* imap/util.c: Make imap_hcache_open robust against missing
	idata->ctx

	* imap/util.c: Do not attempt to parse idata->ctx->path if an explicit
	path is given

2007-04-10 20:22 -0700  Brendan Cully  <brendan@kublai.com>  (429fb67340cd)

	* UPDATING, imap/imap.c, imap/imap_private.h, imap/message.c,
	init.h, mutt.h: Add $message_cache_clean option to prune message
	cache on sync

	* hcache.c: Try to unlink old header cache if open fails

	* bcache.c, imap/imap.c, imap/util.c, lib.c: Fix some warnings

	* hcache.c: Refactor mutt_hcache_open to share more code

	* hcache.c: Save some stats when header cache already exists

	* hcache.c, imap/imap.c, imap/imap_private.h, imap/message.c,
	imap/util.c: Make IMAP header cache layout match body cache. You can
	now make them point to the same directory. Each folder will have a
	folder.hcache file for the header cache.

	* hcache.c, hcache.h, imap/imap.c, imap/util.c, mh.c, pop.c: Add
	hcache path name hook

	* bcache.c, url.c, url.h: Simplify body cache path creation

	* imap/imap.c, imap/imap_private.h, imap/message.c, imap/util.c:
	Do not hold hcache open while mailbox is open - it can lead to
	lockups

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/util.c: Add
	imap_hcache_del; minor cleanups

	* main.c: Fix a compiler warning

	* rfc3676.c: Don't use $indent_string to quote replies to flowed
	messages (closes #2874).

2007-04-10 10:16 -0700  Petr Písař  <petr.pisar@atlas.cz>  (af01580c9a08)

	* po/cs.po: Updated Czech translation

2007-04-10 10:13 -0700  Brendan Cully  <brendan@kublai.com>  (9bbf304e09bc)

	* rfc3676.c: Wrap flowed lines at no more than FLOWED_MAX in
	replies

2007-04-09 20:36 -0700  Michael Elkins  <me@mutt.org>  (fbe67329e688)

	* main.c: Exit with a nonzero value if sending a message in batch mode
	fails (bug #2709).

	* browser.c: Use mutt_pretty_size() to format '%s' in $folder_format
	so it is similar to '%c' in $hdr_format

2007-04-09 11:32 -0700  Brendan Cully  <brendan@kublai.com>  (df7a0ee95618)

	* imap/TODO: Kill off some IMAP TODO items

	* imap/imap.c: Null out idata->hcache when closing, and remove close
	from open failure (mx_close will handle it).

2007-04-09 08:56 -0700  Vsevolod Volkov  <vvv@mutt.org.ua>  (605c6d60217d)

	* po/ru.po: Updated Russian translation.

2007-04-07 16:22 -0700  Michael Elkins  <me@mutt.org>  (c310dd3d6d73)

	* hook.c, pattern.c: Allow reply-hook to use ~h when replying from the
	index. Fixes regression introduced by fix for bug #2190.
	mutt_pattern_exec() now checks for ctx!=NULL so that Mutt will no
	longer segfault when replying to a message from the attachment menu.

2007-04-07 16:20 -0700  Fabian Groffen  <grobian@gentoo.org>  (1c9db84ed54f)

	* imap/message.c, muttlib.c: Fix compiler aliasing warnings

	* hcache.c: Fix compiler warnings

2007-04-07 16:05 -0700  Jukka Salmi  <jukka@salmi.ch>  (ef35baf2a2d0)

	* configure.ac: Fix BDB autoconf buglet introduced in
	[3638701db407]

2007-04-07 15:21 -0700  Michael Elkins  <me@mutt.org>  (70e637e40943)

	* enter.c: add "|" to the list of shell chars

	* enter.c: "complete" function should consider shell chars to be word
	boundaries when doing filename completion (bug #2871)

	* complete.c, lib.c, lib.h: bug #2871

	Avoid altering the argument to mutt_complete() when completion
	fails. Previously, the trailing component of filename was removed
	each time the user pressed TAB.

2007-04-07 14:32 -0700  Fabian Groffen  <grobian@orakel.ods.org>  (eed43900f612)

	* copy.c: Fix some compiler warnings

2007-04-07 13:40 -0700  Brendan Cully  <brendan@kublai.com>  (980949218b09)

	* regex.c: Fix compiler warnings

	* smtp.c: Mark error message for translation

2007-04-06 18:03 -0700  Vincent Lefevre  <vincent@vinc17.org>  (1ab836e94c70)

	* po/fr.po: Updated French translation

2007-04-06 14:00 -0700  Brendan Cully  <brendan@kublai.com>  (cde224ad2662)

	* UPDATING: Update UPDATING

	* build-release: More build-release fixes

	* .hgsigs: mutt-1.5.15 signed

	* .hgtags: Added tag mutt-1-5-15-rel for changeset 4fd2d768fe5c

	* VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po, po/fr.po,
	po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po, po/ja.po,
	po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po, po/ru.po,
	po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po:
	automatic post-release commit for mutt-1.5.15

	* build-release: More minor build tweaks

	* Makefile.am, build-release, mkchangelog.sh: Fix up release
	scripts for Hg

	* lib.c: safe_rename: fall back to rename on ENOSYS and EPERM as well
	as EXDEV. sshfs returns ENOSYS when attempting cross-directory
	links. vfat returns EPERM.

	* lib.c: Make safe_open with O_EXCL friendlier for NFS. Per #2707,
	when an open file is moved into a different directory over NFS, it
	may leave a .nfsXXX hardlink behind. This causes the rmdir in
	safe_open to fail, leaving tempdir droppings around. This patch
	works around the problem by closing the file after creating it and
	reopening it after rename.

2007-04-05 21:38 -0700  Michael Elkins  <me@mutt.org>  (177c060504bb)

	* configure.ac, hcache.c: Fixup to detect qdbm includes in
	/usr/include/qdbm.

	Remove HAVE_QDBM_VILLA_H because it is redundant.

2007-04-05 19:22 -0700  Brendan Cully  <brendan@kublai.com>  (ee0fabbde466)

	* configure.ac, hcache.c: Fix up QDBM autoconf test for arguments
	and includes in subdirectories

	* imap/message.c: Fix logic error introduced in [efbcef81ac49]

	* hcache.c: Fix typo in 26b19fc9b78c

	* imap/imap_private.h, imap/message.c, imap/util.c: IMAP header cache
	API improvements.

	* imap/imap.c, imap/imap_private.h, imap/message.c, imap/util.c:
	Keep hcache pointer in idata, open and close with mailbox

	* hcache.c: Do not cache some unsafe header fields.

	* imap/message.c, mh.c: Small hcache-related memory leaks

	* hcache.c, mh.c: Fix mh header caching (closes #2472)

	* configure.ac: Teach --with-gdbm to accept a prefix (closes #2413)

	* hcachever.sh: POSIX fixes for hcachever.sh

2007-04-05 13:06 -0700  Jukka Salmi  <j+mutt@2007.salmi.ch>  (3638701db407)

	* configure.ac: Check for BDB4 libs in $lib as well as
	$lib/$ver (fixes pkgsrc BDB4 detection)

2007-04-05 12:55 -0700  Brendan Cully  <brendan@kublai.com>  (4f435337507e)

	* Makefile.am, hcache.c, hcachever.sh: Version header cache against
	MD5 of structures on which it depends

	* UPDATING, globals.h, imap/browse.c, imap/imap_private.h, init.h:
	Remove broken namespace support

2007-04-04 16:31 -0700  Brendan Cully  <brendan@kublai.com>  (e96bd1f85634)

	* imap/command.c: Only reset UIDNEXT if new mail has been detected.
	This prevents mutt from suddenly finding new mail when switching
	from unknown UIDVALIDITY to known.

2007-04-04 09:37 -0700  Fabian Groffen  <grobian@orakel.ods.org>  (330cb15403f0)

	* configure.ac: Check for Berkeley DB versions 4.4 and 4.5

2007-04-04 01:35 +0200  Christoph Berg  <cb@df7cb.de>  (b841df908929)

	* cryptglue.c: Fix typos in CRYPT_BACKEND #ifs.

2007-04-03 14:08 -0700  Christoph Berg  <cb@df7cb.de>  (339fd21bf139)

	* doc/manual.xml.head, doc/mutt.man, main.c: When -- is present in
	the argument list, allow attachment globs. The -- separates file
	names from recipients. Also works for -A and -Q.

2007-04-03 10:54 -0700  Fabian Groffen  <grobian@orakel.ods.org>  (89abe8bd0713)

	* hdrline.c, imap/message.c, mh.c, muttlib.c, regex.c, sendlib.c: Fix
	some warnings.

2007-04-03 08:59 -0700  Brendan Cully  <brendan@kublai.com>  (e363d7a69046)

	* pop_auth.c, rfc822.c, rfc822.h: Validate msgid in APOP
	authentication. Closes #2846

	* hcache.c: Fix DB4 crash introduced in d5ab883ef90a

	* imap/util.c: Add missing hcache.h include

2007-04-02 20:44 -0700  Brendan Cully  <brendan@kublai.com>  (59fcc37f8c75)

	* sendlib.c: Check message for boundary collisions (closes #902)

	* enter.c: Do not clobber string field on keypress when returning
	from file browser (closes #755)

	* browser.c, browser.h, imap/browse.c, imap/imap.h: Add hook for
	proper IMAP unseen count in mailbox browser

2007-04-02 18:41 -0700  David Yitzchak Cohen  <lists+mutt_bugs@bigfatdave.com>  (503c2882d0be)

	* muttbug.sh.in: flea: produce mutt version info in C
	locale (closes #1881)

2007-04-02 18:17 -0700  John Hawkinson  <jhawk@mit.edu>  (a283e5ab5de7)

	* sendlib.c: Write Sender header if specified (closes #2682)

2007-04-02 17:56 -0700  Brendan Cully  <brendan@kublai.com>  (15f8a55220a7)

	* mh.c: Fix off-by-one allocating mh sequences

	* curs_lib.c: Make mutt_edit_file display error if editor return is
	non-zero. (closes #1638)

	* imap/command.c: Reset uidnext unconditionally in IMAP new mail
	check. Reverts a logic error introduced in [0cb476dc70a7]

	* imap/imap.c, imap/imap_private.h, imap/message.c, imap/util.c: Fix a
	segfault in the new mboxcache hcache lookup. idata may not have an
	associated context, so the cache path must use the account info
	instead. For harmony with the other hcache callers, make them all
	canonify the path the same way with imap_hcache_open.

	* imap/imap.c: Fix segfault in new mboxcache hcache check when
	create is 0

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/message.c:
	Add create flag to imap_mboxcache_get

	* imap/command.c, imap/imap.c: Push mbox cache header cache check
	into imap_mboxcache_get

	* imap/imap.c: Cache IMAP access checks

2007-04-01 23:12 -0700  Brendan Cully  <brendan@kublai.com>  (4f598543d7a5)

	* imap/imap.c, imap/message.c: Adjust context->size on IMAP load
	and expunge (closes #2749)

2007-04-01 20:00 -0700  Ambrose Li  <a.c.li@ieee.org>  (38e896c4c192)

	* po/zh_TW.po: Updated Taiwanese translation

2007-04-01 15:40 -0700  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (6dcb53bc679c)

	* crypt-gpgme.c: gpgme: check result for signatures pointer
	(closes: #2199)

2007-04-01 15:33 -0700  Brendan Cully  <brendan@kublai.com>  (3a81b3793f77)

	* doc/muttbug.man: Update flea man page to current addresses

	* muttbug.sh.in: Adjust flea to use new submission address; check
	email for @

	* doc/muttbug.man, muttbug.sh.in: Restore muttbug

2007-03-31 18:50 -0700  Brendan Cully  <brendan@kublai.com>  (f467353f5657)

	* bcache.c, bcache.h, imap/message.c, pop.c, pop.h: Add tmp flag
	to bcache_put, create bcache_commit.

	* imap/command.c, imap/imap.c: Allow IMAP FCC to reconnect if
	append fails (closes: #890)

	* mh.c: Always set up data pointer in mh_read_dir, not just when
	allocating context

2007-03-30 21:26 -0700  Daniel Burrows  <dburrows@debian.org>  (d5ab883ef90a)

	* hcache.c: Fix handling of DB4 hcache open failure. (closes: #2714)

2007-03-30 20:18 -0700  Brendan Cully  <brendan@kublai.com>  (dc54ae48d8c1)

	* mh.c: Set mode of new mh/maildir messages to match parent
	directory.

	* mh.c, mutt.h: Move mtime_cur from CONTEXT to mh_data

	* imap/imap.c, imap/imap.h, mh.c: Add close hook for
	mh/maildir. stat the directory on open. Make IMAP close function
	match prototype.

	* imap/imap.c, mutt.h, mx.c, pop.c: Add function pointer for close
	hook in Context. Slowly inch towards function pointers instead of
	switch statements.

	* imap/command.c, imap/imap.c: Use RECENT for first mailbox
	check if header cache check fails

	* imap/command.c: Consult header cache if available for last known new
	mail count. This prevents mutt from announcing new mail in mailboxes
	that have unseen, but not new, messages, if those mailboxes are in
	the header cache.

2007-03-29 21:08 -0700  Brendan Cully  <brendan@kublai.com>  (359d9fbb5fda)

	* sendlib.c: Do not page sendmail error in batch mode.
	(closes: #2800)

2007-03-29 15:53 -0700  Rocco Rutte  <pdmef@gmx.net>  (798a40b0a9da)

	* rfc3676.c: f=f handler: Re-add space between quotes and text

2007-03-29 15:47 -0700  Brendan Cully  <brendan@kublai.com>  (51d13afbf24b)

	* doc/Makefile.am: Make -j2 in doc work (closes: #2538)

2007-03-29 15:23 -0700  Christoph Berg  <cb@df7cb.de>  (0514e6b5a67a)

	* init.c, init.h: Use ~/.muttrc as the default alias_file if no user
	muttrc exists. Makes the code agree with the documentation. Document
	that default is actually the used muttrc. (Closes Debian #226500.)

2007-03-29 10:30 -0700  Brendan Cully  <brendan@kublai.com>  (034ad0e55397)

	* bcache.c, bcache.h, imap/message.c: Make message cache write to
	temporary location until file is complete. Previously mutt trusted
	the cache file even when it was incomplete, causing permanently
	incorrect message display if the fetch was interrupted for some
	reason.

2007-03-28 09:43 +0200  Thomas Roessler  <roessler@does-not-exist.org>  (25cbd5588d35)

	* alias.c: Fix debug message for mutt_adr_is_user

2007-03-23 10:32 -0700  Brendan Cully  <brendan@kublai.com>  (888a57a2b5f2)

	* imap/browse.c: Reset list.name before each list response in
	folder browser

2007-03-22 14:36 +0100  Thomas Roessler  <roessler@does-not-exist.org>  (68cfab02b411)

	* curs_main.c: Fix update_index().

2007-03-21 11:29 -0700  Brendan Cully  <brendan@kublai.com>  (a6da24788400)

	* .cvsignore, Muttrc.head.in, configure.in, contrib/.cvsignore,
	doc/.cvsignore, imap/.cvsignore, init.h, intl/.cvsignore,
	m4/.cvsignore, mx.c, po/.cvsignore: Merge $umask backout

2007-03-21 11:26 -0700  Brendan Cully  <brendan@kublai.com>  (b9c0a75de5c0)

	* attach.c, globals.h, init.c, init.h, lib.c, mh.c, mx.c: Back out
	$umask.

2007-03-16 15:37 +0100  Christoph Berg  <cb@df7cb.de>  (f806a3eb59a8)

	* sendlib.c: Use execvp to call sendmail, useful for people trying
	sendmail="ssh host sendmail".

2007-03-21 10:08 -0700  Christoph Berg  <cb@df7cb.de>  (92a0a184005d)

	* Makefile.am, doc/Makefile.am, doc/gen-map-doc, doc/manual.xml.tail,
	functions.h, init.h, makedoc-defs.h: Pipe functions.h through cpp -C
	for the manual generation; factor out makedoc-defs.h from init.h for
	use in functions.h.

2007-03-21 09:29 -0700  Rocco Rutte  <pdmef@gmx.net>  (6216dd07b6be)

	* configure.ac: configure.ac: Make SSL tests for OpenSSL and gnutls
	behave the same For both this now mentions SMTP as a possible SSL
	user and also turns the error for configuring with gnutls without
	POP/IMAP/SMTP into a warning as the OpenSSL part does.

2007-03-20 13:39 -0700  Miroslav Lichvar  <mlichvar@redhat.com>  (b0172175cc89)

	* UPDATING, buffy.c, buffy.h, commands.c, configure.ac, init.h,
	main.c, mutt.h, mx.c: Make BUFFY_SIZE a runtime switch
	($check_mbox_size)

2007-03-20 13:17 -0700  Rocco Rutte  <pdmef@gmx.net>  (2fbc65f3feb6)

	* addrbook.c, browser.c, compose.c, crypt-gpgme.c, curs_main.c,
	mutt_ssl.c, mutt_ssl_gnutls.c, pgpkey.c, postpone.c, query.c,
	recvattach.c, remailer.c: Enlarge help string buffers Even on 80x25
	terminals, SHORT_STRING (128 byte) may not be enough so use
	LONG_STRING (1k) as STRING (256 byte) may well be too short for
	wider terminals. Closes debian #4152777.

2007-03-20 09:45 -0700  Antoine Reilles  <tonio@NetBSD.org>  (f0461517fc93)

	* muttlib.c: Remove trailing slash from $folder in
	mutt_expand_path.

2007-03-20 08:20 -0700  Rocco Rutte  <pdmef@gmx.net>  (3122a4a338b1)

	* rfc3676.c: Make f=f handler behave like old f=f handler for quoted
	lines Now lines containing quote characters but no further content
	appear as quoted lines again for making replies. Also, the spaces
	between quotes and text are removed to make output look as it did
	for the old handler.

2007-03-19 08:12 -0700  Rocco Rutte  <pdmef@gmx.net>  (5681216fa395)

	* doc/manual.xml.head: Manual: f=f messages are text/plain, not "plain
	ASCII"

2007-03-16 11:21 -0700  Michael Elkins  <me@mutt.org>  (aa96e6137c69)

	* imap/imap.c: Fixed segfault when attempting to open an imaps mailbox
	when mutt is not configured with SSL support.

2007-03-16 09:39 -0700  Brendan Cully  <brendan@kublai.com>  (08f9bb4b7810)

	* configure.ac, configure.in: Move configure.in to configure.ac

2007-03-15 16:29 -0700  Brendan Cully  <brendan@kublai.com>  (4ade0c9660d5)

	* Makefile.am: Add reldate.h to BUILT_SOURCES

2007-03-15 16:10 +0100  Christoph Berg  <cb@df7cb.de>  (ed804d94676a)

	* Makefile.am: Remove reldate.h from EXTRADIST to fix out-of-tree
	builds from tarballs (and remove some stray tabs).

	* contrib/gpg.rc: Remove absolute paths.

	* doc/Makefile.am: Pull release date directly from Changelog.

2007-03-15 09:23 -0700  Brendan Cully  <brendan@kublai.com>  (e648206c02e2)

	* .cvsignore, contrib/.cvsignore, doc/.cvsignore, imap/.cvsignore,
	intl/.cvsignore, m4/.cvsignore, po/.cvsignore: Remove .cvsignores

2007-03-15 08:48 -0700  Rocco Rutte  <pdmef@gmx.net>  (836822cc1260)

	* doc/manual.xml.head, doc/muttrc.man.head, init.h: Document
	pattern groups in the manual Sync with muttrc. Add some rationale
	for groups. Fix some style issues. Fix quoting issue with
	$smtp_authenticators.

2007-03-14 23:03 -0700  Kyle Wheeler  <kyle@memoryhole.net>  (fa6128cf9cba)

	* doc/muttrc.man.head: Improved pattern documentation
	(group/ungroup)

2007-03-14 22:29 -0700  Brendan Cully  <brendan@kublai.com>  (af1fc17674bc)

	* mbyte.h: Undefine mbyte macros before overriding them (#2820)

	* hg-commit: Let user review ChangeLog after hg-commit writes it

2007-03-15 02:12 +0100  Christoph Berg  <cb@df7cb.de>  (460713774c5b)

	* doc/Makefile.am: Add gen-map-doc to EXTRADIST, call using perl in
	srcdir, fix makedoc rules.

	* doc/Makefile.am, doc/gen-map-doc, doc/manual.xml.tail, functions.h:
	Generate menu binding documentation from functions.h and OPS*.

2007-03-14 14:45 -0700  Brendan Cully  <brendan@kublai.com>  (35b8facdbdda)

	* imap/command.c, mutt.h: Update IMAP ACL parser to recognize RFC
	rights

	* contrib/Makefile.am, contrib/mutt_xtitle, muttlib.c: Add demo
	mutt_xtitle script

	* muttlib.c: Remove trailing newlines from fmtpipe return value.
	Increase fmtpipe logging level to 3.

2007-03-14 13:49 -0700  David Champion  <dgc@uchicago.edu>  (63ad6be01750)

	* mutt.h, muttlib.c: Allow format strings to be filtered. Any format
	string ending in | will be expanded and piped through the first word
	in the string. The string returned will be used for display. If the
	returned string ends in %, it will be passed through the formatter a
	second time. This allows the filter to generate a replacement format
	string including % expandos.

2007-03-14 13:26 -0700  Brendan Cully  <brendan@kublai.com>  (e9203a364537)

	* imap/imap.c: Recheck capabilities after authentication (closes:
	#2837)

2007-03-14 13:09 -0700  Christoph Berg  <cb@df7cb.de>  (cbacb14a837a)

	* doc/mutt.man, main.c: mutt.man and mutt -h updates

	Document mutt --, remove the reference to
	flea, and generally update the mutt.1 manpage.

	(I removed -d from the SYNOPSIS part since it wasn't entirely
	correct syntactically there and putting it elsewhere seems like
	unnecessary clutter.)

2007-03-14 12:58 -0700  Brendan Cully  <brendan@kublai.com>  (f20641ecca59)

	* hcache.c: Always give realpath a shot at the hcache folder name.
	Remove other hacks.

2007-03-14 12:53 -0700  Rocco Rutte  <pdmef@gmx.net>  (18cd9834050d)

	* hcache.c: hcache: prepend current dir to path for local folders If a
	folder is local (i.e. stat() succeeds), prepend the current working
	directory if necessary to always fully qualify the path. Otherwise
	we may end up using different cache files for the same folder when
	given relative paths. This closes #2845.

2007-03-14 12:50 -0700  TAKIZAWA Takashi  <taki@luna.email.ne.jp>  (600b3466489c)

	* help.c: Complete fix for #1503

2007-03-14 12:39 -0700  Rado S  <regrado@web.de>  (ad2172897839)

	* imap/imap.c: Let imap_conn_find have first crack at completion of
	root

2007-03-14 12:23 -0700  Brendan Cully  <brendan@kublai.com>  (bb43900e853f)

	* imap/imap.c: Don't skip the last connection in
	imap_complete_hosts

2007-03-14 11:33 -0700  Rocco Rutte  <pdmef@gmx.net>  (09f73968d97a)

	* rfc822.c: Fix return value for rfc822_write_address() The strcat
	cleanup changed the return type from void to int but didn't provide
	a return value for the case of bogus function arguments.

2007-03-13 12:39 -0700  TAKIZAWA Takashi  <taki@luna.email.ne.jp>  (dc8f0c4a6287)

	* help.c: Use strwidth instead of strlen when generating help strings.
	This fixes word-wrap with multibyte strings (closes: #1503)

2007-03-13 22:40 -0700  Brendan Cully  <brendan@kublai.com>  (61b2845af4da)

	* Makefile.am, Muttrc.head, Muttrc.head.in, configure.in: Fully expand
	$docdir when building Muttrc (closes: #2832)

	* makedoc.c: Make makedoc return 0 on success (be there dragons here?)

2007-03-13 09:22 -0700  Vincent Lefevre  <vincent@vinc17.org>  (7e9c45589254)

	* po/fr.po: Updated French translation.

2007-03-13 10:58 +0100  Thomas Roessler  <roessler@does-not-exist.org>  (f4d3704813fd)

	* charset.c: Clean up the strcat cleanup

2007-03-12 16:26 -0700  Ronny Haryanto  <ronnylist@haryan.to>  (8d956e434fab)

	* po/id.po: Updated Indonesian translation

2007-03-12 12:19 -0700  René Clerc  <rene@clerc.nl>  (162bb5f71a0f)

	* po/nl.po: Updated Dutch translation.

2007-03-12 10:32 -0700  Brendan Cully  <brendan@kublai.com>  (83ca0fb6e36a)

	* imap/util.c: Substitute INBOX for empty mailbox _after_ cleanup
	(closes: #2841)

2007-03-12 10:03 -0700  Sami Farin  <safari-mutt@safari.iki.fi>  (42016ef5ee21)

	* charset.c, copy.c, rfc822.c, rfc822.h: Improve strcat usage
	(#2802).

2007-03-11 11:54 +0100  Thomas Roessler  <roessler@does-not-exist.org>  (8a640badfb60)

	* COPYRIGHT, build-release, crypt-gpgme.c, doc/applying-patches.txt,
	doc/dotlock.man, doc/manual.xml.head, doc/muttrc.man.head,
	muttbug.sh.in, po/bg.po, po/da.po, po/eo.po, po/es.po, po/et.po,
	po/gl.po, po/it.po, po/lt.po, po/pt_BR.po, po/sk.po, po/zh_CN.po,
	po/zh_TW.po: Grabage-collect references to an outdated email
	address.

2007-03-09 10:58 -0800  Rocco Rutte  <pdmef@gmx.net>  (d1122bbaacd8)

	* doc/Makefile.am, doc/manual.xml.head: Make manual validate against
	DocBook 4.2 DTD for "book" This adds a 'validate' target to
	doc/Makefile which uses xmllint(1) to validate manual.xml against
	the DTD given in the doctype (intended for developers only).

	Running it revealed two validation errors which this patch fixes:

	1) We declare 'article' as the doctype but want to use 'book' 2)
	Within a lists's items, we didn't include our text in a paragraph

2007-03-08 21:13 -0800  Michael Elkins  <me@mutt.org>  (0ec4394636c4)

	* init.h: Add `UL' cast for Umask entry in MuttVars to supress
	compiler warning.

2007-03-08 12:19 -0800  Petr Písař  <petr.pisar@atlas.cz>  (d0924f72d2e8)

	* po/cs.po: Czech spelling fixes and new translations

2007-03-07 12:18 -0800  Christoph Berg  <cb@df7cb.de>  (5de130a3cb96)

	* doc/muttrc.man.head: Typos in muttrc.man.head

2007-03-07 12:11 -0800  Michael Tatge  <Michael.Tatge@web.de>  (162f0c127492)

	* doc/mutt.man: Document -d in the man page

2007-03-06 18:13 -0800  Alain Bench  <veronatif@free.fr>  (5fc8c7cee1dd)

	* charset.c, charset.h, crypt-gpgme.c, imap/utf7.c, mbyte.c,
	mutt_idna.c, pgp.c, rfc2047.c, sendlib.c: Remove buggy usage
	of M_ICONV_HOOK_TO flag in mutt_idna.c:mutt_idna_to_local().
	Wipe unwanted code depending on M_ICONV_HOOK_TO in
	charset.c:mutt_iconv_open(). Totally wipe M_ICONV_HOOK_TO symbol.
	Remove misusages of M_ICONV_HOOK_FROM flag in:
	 - crypt-gpgme.c:print_utf8().
	 - mutt_idna.c:mutt_idna_to_local() and mutt_local_to_idna().
	 - pgp.c:pgp_traditional_encryptsign(). Document usage policy of
	M_ICONV_HOOK_FROM flag. Cosmetic downcasing of some constant charset
	names (utf-8, euc-jp) for consistency. Correction of a typo in the
	"iso8859-5" charset name.

2007-03-06 17:59 -0800  Rocco Rutte  <pdmef@gmx.net>  (5e47385893fe)

	* UPDATING, doc/manual.xml.head: Documentation updates for
	format=flowed

2007-03-06 17:45 -0800  Masayuki Moriyama  (78b424bf7c5a)

	* charset.c, hook.c, mbyte.c: Allow iconv-hook to use virtual
	charsets as targets. (closes: #1269)

2007-03-04 19:26 +0100  Alain Bench  <veronatif@free.fr>  (4dc1d87f4c25)

	* doc/manual.xml.head, init.h: Doc fixes and updates concerning hooks

	- Add reply-hooks and send2-hooks in lists they miss.
	- Fix that they all take full patterns, not only regexps.
	- Note interaction with $default_hook.
	- Enumerate them in execution order/increasing priority.
	- Add iconv-hook, remove a duplicate charset-hook.

2007-03-06 15:45 -0800  Brendan Cully  <brendan@kublai.com>  (607688bd77b1)

	* hg-commit: Add check_sec.sh call

	* hg-commit: Make hg commit less clever

	* PATCHES: Undo bad PATCHES commit from f=f

2007-03-06 09:49 -0800  Rocco Rutte  <pdmef@gmx.net>  (2e4e1cc18c22)

	* Makefile.am, PATCHES, doc/manual.xml.head, handler.c, muttlib.c,
	protos.h, rfc3676.c, rfc3676.h, send.c: New format=flowed handler.

2007-03-02 21:12 -0800  Brendan Cully  <brendan@kublai.com>  (537672d8fefb)

	* attach.c, globals.h, init.c, init.h, lib.c, mh.c, mx.c: Add $umask
	for mailboxes and attachments.

	init.c could really use some refactoring.

2007-03-05 14:50 -0800  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (de57c607e9d3)

	* po/pl.po: Updated Polish translation.

2007-03-03 22:09 -0800  Brendan Cully  <brendan@kublai.com>  (08b1fa8cd55e)

	* Makefile.am: Do not append ${prefix}/include to CPPFLAGS. If
	configure didn't see it, neither should make. (closes: #2603)

2007-03-03 21:49 -0800  Rado S  <regrado@web.de>  (d990dcbbf184)

	* color.c: Increase buffer for color-command regular expressions.

2007-03-03 21:26 -0800  Brendan Cully  <brendan@kublai.com>  (574dbb2c6590)

	* init.h: Revise status_format docs for %??&?. (closes: #2805)

2007-03-03 21:24 -0800  Brendan Cully  <brendan@kublai.com>  (2e296bd4cdfb)

	* doc/devel-notes.txt: s/CVS/Mercurial/

2007-03-03 19:04 -0800  Brendan Cully  <brendan@kublai.com>  (efb53c875ed8)

	* .hgignore: More .hgignore fixes

2007-03-03 18:51 -0800  Brendan Cully  <brendan@kublai.com>  (07f01dd033fe)

	* ChangeLog: Remove a couple of extraneous ChangeLog entries

2007-03-03 18:47 -0800  Brendan Cully  <brendan@kublai.com>  (48b17378c20a)

	* UPDATING, copy.c, globals.h, handler.c, init.c, init.h,
	mutt_curses.h, pager.c: Add $wrap, which supersedes $wrapmargin.
	When set to a positive number, wrap at that column. When set to a
	negative number, keep that many characters empty on the right.

2007-03-03 00:35 -0800  Brendan Cully  <brendan@kublai.com>  (3e3d3bf73c9f)

	* hg-changelog-map, hg-commit: Use hg-commit to perform commits
	that also update the ChangeLog.

2007-03-02 21:17 -0800  Brendan Cully  <brendan@kublai.com>  (472e100053ed)

	* .hgignore: Ignore more built files

2007-03-02 11:09 -0800  Brendan Cully  <brendan@kublai.com>  (256c86830a36)

	* .hgignore: Create .hgignore file

2007-03-02 10:29 +0100  Thomas Roessler  <roessler@does-not-exist.org>  (e040b8aba1c4)

	* configure.in: Make --enable-ssl without pop or imap a mere warning.

2007-03-02 01:25 +0000  Petr Pisar  <petr.pisar@atlas.cz>  (f1c800817281)

	* po/cs.po: Updated Czech translation (now in UTF-8).

2007-03-01 06:05 +0000  Brendan Cully  <brendan@kublai.com>  (d0ff524fa461)

	* init.h: Remove $file_charset SYN - it never appeared in an official
	release.

2007-02-28 17:47:13  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/command.c, imap/imap.c, imap/imap_private.h: Add
	imap_close_connection to fully reset IMAP state. (closes: #2717)
	Thanks to Sergey Svishchev for the original patch.

2007-02-28 16:27:47  Vsevolod Volkov  <vvv@mutt.org.ua>  (brendan)

	* po/ru.po: Updated Russian translation.

2007-02-28 07:36:33  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>  (brendan)

	* po/ja.po: Updated Japanese translation.

2007-02-27 20:53:13  Brendan Cully  <brendan@kublai.com>  (brendan)

	* hcache.c: Bump hcache version after $assumed_charset BODY
	change.

	* init.h: Fix init.h preprocessing when USE_SMTP is not set.

2007-02-27 17:44:09  TAKIZAWA Takashi  <taki@luna.email.ne.jp>  (brendan)

	* mutt.h, parse.c, rfc2047.c, rfc2047.h, rfc2231.c, sendlib.c,
	UPDATING, charset.c, charset.h, globals.h, handler.c, init.h:
	Updated $assumed_charset patch (closes: #2218).  Thanks to
	TAKAHASHI Tamotsu for the fixes and for handling patch conflicts.

2007-02-27 01:10:57  Brendan Cully  <brendan@kublai.com>  (brendan)

	* po/POTFILES.in: Add some missing files. This should probably
	be autogenerated somehow.

2007-02-26 18:39:52  Brendan Cully  <brendan@kublai.com>  (brendan)

	* m4/gpgme.m4: Add gpgme.m4 to distribution to avoid an error
	running autoconf on systems that do not have gpgme installed.

2007-02-26 17:27:29  Brendan Cully  <brendan@kublai.com>  (brendan)

	* main.c: Add curses_version to mutt -v output (thanks to Vincent
	Lefevre for the initial patch), and reformat library information.

2007-02-26 17:17:13  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* UPDATING, enter.c, globals.h, history.c, history.h, init.c,
	init.h: Add $history_file and $save_history, for saving command
	history across sessions.

2007-02-26 16:54:26  Roland Rosenfeld  <roland@spinnaker.de>  (brendan)

	* po/de.po: Updated German translation.

2007-02-25 01:32:31  Brendan Cully  <brendan@kublai.com>  (brendan)

	* account.c, account.h, imap/imap.c, imap/message.c, main.c,
	mutt_sasl.c: Update copyrights.

2007-02-24 07:01:24  Takashi TAKIZAWA  <taki@cyber.email.ne.jp>  (brendan)

	* UPDATING, charset.c, charset.h, globals.h, handler.c,
	init.h, mutt.h, parse.c, rfc2047.c, rfc2231.c, sendlib.c: Add
	$assumed_charset, $file_charset and $strict_mime.

2007-02-24 06:37:32  Brendan Cully  <brendan@kublai.com>  (brendan)

	* globals.h, init.h, main.c, mutt_sasl.c, protos.h, send.c,
	sendlib.c, smtp.c, url.c, url.h, Makefile.am, account.c,
	account.h, configure.in: This patch adds ESMTP relay support to
	mutt.  To use, set $smtp_url to the address of your smtp relay,
	in the form:

	smtp[s]://[user[:password]@]host[:port]/

	where port defaults to 25 for smtp and 465 for smtps.

	You can also set $smtp_authenticators to control which
	methods mutt will attempt to use during authentication. See
	$imap_authenticators for details.

2007-02-24 06:12:20  Moritz Schulte  <Moritz.Schulte@ruhr-uni-bochum.de>  (brendan)

	* UPDATING, configure.in, crypt-gpgme.c, crypt-gpgme.h,
	crypt-mod-pgp-classic.c, crypt-mod-pgp-gpgme.c,
	crypt-mod-smime-classic.c, crypt-mod-smime-gpgme.c,
	crypt-mod.h, crypt.c, cryptglue.c, init.h, mutt.h, mutt_crypt.h,
	Makefile.am: PKA signature verification via GPGME, controlled
	by $crypt_use_pka.

2007-02-24 05:47:35  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: Updated French translation.

2007-02-23 17:38:25  brendan  (brendan)

	* po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/pl.po,
	po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/it.po, po/ja.po,
	po/ko.po, po/lt.po, po/nl.po, po/et.po, po/eu.po, po/fr.po,
	po/ga.po, po/gl.po, po/hu.po, po/id.po, po/el.po, po/eo.po,
	po/es.po, VERSION, build-release, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po: automatic post-release commit for mutt-1.5.14

2007-02-12 00:56:36  Kees Cook  <kees@outflux.net>  (brendan)

	* imap/imap.c, thread.c: Full fix for null-pointer dereferences
	on partial opens. Thanks also to Ken Brush.

2007-02-12 00:06:32  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c, imap/message.c: Do not attempt to free NULL IMAP
	headers after a partial mailbox load.

2007-02-07 17:08:51  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c: Sanity-check mailbox name in
	imap_subscribe. (Closes: #2746)

2007-01-26 14:34:11  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* dotlock.c: Fix #2710, of-by-one in dotlock.c.

2007-01-09 10:37:34  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* cvslog2changelog.pl: Change comment convention for
	ChangeLog slightly, from ^# to ^#\ .

2007-01-09 10:31:09  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* pattern.c: #2673: Make mutt_which_case() multi-byte aware.

	* copy.c, protos.h, sendlib.c: Smarter header wrapping --
	different behavior for display purposes and sent messages.

2007-01-08 11:01:24  Rocco Rutte  <pdmef@gmx.net>  (roessler)

	* menu.c: Fix NULL pointer issue in mutt_format_string().

2007-01-02 17:10:34  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* globals.h, lib.c, lib.h, mutt.h, mutt_socket.c, muttlib.c,
	pgppacket.c, protos.h: add debug harness to lib.c functions,
	and a bunch of dprint's to safe_rename().

2006-12-20 08:27:58  René Clerc  <rene@clerc.nl>  (brendan)

	* po/nl.po: Updated Dutch translation.

2006-12-11 02:13:51  Brendan Cully  <brendan@kublai.com>  (brendan)

	* menu.c: Quiet check_sec.sh.

2006-12-11 02:11:35  Ivan Vilata i Balaguer  <ivan@selidor.net>  (brendan)

	* po/ca.po: Updated Catalan translation.

2006-12-07 11:34:35  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* menu.c, commands.c, curs_lib.c, enter.c: - my_mbtowcs didn't
	recover from bad multibyte sequences

	- mutt_format_string was called under the assumption that this
	  function can operate in-place. Unfortunately, that assumption
	  only holds if replacement_char() returns a one-byte character.

2006-12-03 14:07:54  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* account.c: Fix logic error; debian#400831.

2006-11-28 00:22:16  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* curs_lib.c, imap/message.c, mbox.c, mh.c, mutt_curses.h,
	pattern.c, pop.c, pop_lib.c: Rename PROG_(SIZE|MSG) to
	M_PROGRESS_\1.

2006-11-23 23:18:47  Thomas Roessler <roessler@does-not-exist.org>  (roessler)

	* contrib/sample.muttrc-tlr: Remove a display_filter that's
	locale dependent.

2006-11-22 23:08:01  David Champion  <dgc@uchicago.edu>  (brendan)

	* sort.c: Sort spam scores numerically even when they are in
	the form of floats or negative numbers.

2006-11-21 19:06:23  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* mh.c: Teach maildir and MH to use $write_inc.

	* mbox.c: Teach mbox/mmdf to use the new progress update API.

2006-11-21 03:06:03  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/auth_sasl.c: If a method list has been given, fall back
	to the next authenticator whenever an attempt returns NO or BAD.

2006-11-20 17:56:33  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* doc/manual.xml.head: Some notes on the performance of simple
	strings versus regular expressions in searches.

	* init.h: Note that $read_inc also affects search/limit progress
	updates now.

	* mh.c: Port MH/Maildir to new progress update methods.

2006-11-19 05:23:44  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* pop.c: Restore mail fetch count to POP progress bar.

	* buffy.c: Grow buffy notification to 512 bytes, for large
	terminals.

2006-11-15 18:59:27  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* pattern.c: Display progress during searches.

	* curs_lib.c, imap/imap.c, imap/message.c, mutt_curses.h, pop.c,
	pop_lib.c: Unify size and count progress display.

2006-11-14 18:56:29  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (brendan)

	* doc/Makefile.am: Work around pdksh bug in xml doc make target.

2006-11-14 18:52:10  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* pop.c: Make POP respect $read_inc/$write_inc.

	* doc/Makefile.am, doc/manual.xml.head: Add performance tuning
	section to manual.

2006-11-11 03:40:03  Ivan Vilata i Balaguer  <ivan@selidor.net>  (brendan)

	* po/ca.po: Updated Catalan translation.

2006-11-02 01:09:59  Brendan Cully  <brendan@kublai.com>  (brendan)

	* ChangeLog: Undo accidental charset corruption in ChangeLog.

2006-11-01 23:19:03  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: Updated French translation.

2006-10-31 20:29:24  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/TODO: Update TODO

2006-10-31 18:37:14  Kevin Scannell  <kscanne@gmail.com>  (brendan)

	* po/ga.po: Update Irish translation to 1.5.12.

2006-10-30 02:54:12  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mutt_socket.c: Include <sys/time.h> if available, to ensure
	struct timeval is declared in raw_socket_poll.

2006-10-30 02:36:07  David Shaw  <dshaw@jabberwocky.com>  (brendan)

	* pgpmicalg.c: RFC-2440bis adds support for the SHA-224 hash
	algorithm.

2006-10-30 02:32:30  Alain Bench  <veronatif@free.fr>  (brendan)

	* contrib/gpg.rc: Add the usual %?p? condition around the
	--passphrase-fd option in 3 commented-out examples of gpg-2comp
	usage. Also match gpgv in a good_sign pattern commented-out
	example.

2006-10-09 13:39:38  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* lib.c: Even more paranoid temporary file creation.

2006-10-03 16:45:45  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* curs_lib.c: Clear the progress bar when the current operation
	has completed.

2006-10-03 16:40:56  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* hcache.c: Ignore trailing slashes in folder names when mapping
	to header cache.

2006-09-08 18:28:10  Malcolm Parsons  <malcolm.parsons@gmail.com>  (brendan)

	* OPS.PGP, doc/manual.xml.tail, pgpkey.c, OPS: Clean up some
	text. Closes: #2466.

2006-09-08 17:30:33  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mutt_sasl.c, pop_auth.c: Don't send protocol garbage to
	sasl_decode64 during POP authentication.  Also enable SASL
	plaintext: $foo_authenticators is a more general solution.

	* Makefile.am: Remove bogus smtp.c entry from extra sources,
	added by accident on 20060831.

2006-09-05 08:57:37  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* send.c: Fix #2168.

2006-09-01 19:26:39  Lars Hecking  <lhecking@users.sourceforge.net>  (brendan)

	* configure.in: Handle --without-mixmaster properly. (Slightly
	modified.)

2006-08-31 23:49:40  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (brendan)

	* Makefile.am, configure.in: Only build wchar replacement funcs
	when necessary. Add space after mode argument to install-sh.

	* gettext.c: Remove superfluous empty file from CVS.

2006-08-18 10:28:15  Roland Rosenfeld   <roland@spinnaker.de>  (roessler)

	* po/de.po: update

2006-08-16 20:32:23  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* copy.c, protos.h, sendlib.c: Do intelligent things with long
	header lines.

2006-08-16 17:38:57  René Clerc  <rene@clerc.nl>  (brendan)

	* po/nl.po: Updated translation.

2006-08-15 22:40:48  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: Updated translation.

2006-08-15 22:38:19  Vsevolod Volkov  <vvv@mutt.org.ua>  (brendan)

	* po/ru.po: Updated translation.

2006-08-15 22:35:51  Brendan Cully  <brendan@kublai.com>  (brendan)

	* ChangeLog: Fix a few UTF-8 conversions.

2006-08-15 17:08:33  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* imap/command.c, imap/imap.c, imap/imap_private.h, curs_main.c,
	flags.c, mutt.h, mx.c, pager.c, pop.c: Generic ACL support.

2006-08-15 08:42:46  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* doc/devel-notes.txt: Document switch to UTF-8.

	* ChangeLog: Changing ChangeLog to utf-8.

2006-08-14 19:43:10  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* UPDATING: Mention change since 1.5.12.  Ooops.

	* po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po, po/eu.po, po/fr.po, po/ga.po, po/gl.po, po/hu.po,
	po/id.po, po/it.po, po/ca.po, po/cs.po, po/da.po, po/de.po,
	po/el.po, po/eo.po, po/es.po, po/et.po, VERSION, po/bg.po:
	automatic post-release commit for mutt-1.5.13

2006-08-11 16:25:59  Brendan Cully  <brendan@kublai.com>  (brendan)

	* Makefile.am: Include reldate.h in make dist, so docs won't be
	needlessly rebuilt.

2006-08-11 10:54:24  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* contrib/sample.muttrc-tlr: Update example -- it's amazing how
	little I've actually changed over the past couple of years.

2006-08-11 09:32:29  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>  (roessler)

	* doc/manual.xml.head, mutt.h, pattern.c: Mutt-thread patch. Use
	~(PATTERN) to match any threads that contain messages that
	match PATTERN.

2006-08-11 09:08:20  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* init.h, mutt.h: Use #ifdef in some appropriate places.
	(Particularly relevant when building the documentation.)

2006-08-10 22:16:11  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/command.c: Unbreak imap_check_subscribed after command
	data type change.

2006-08-10 21:47:44  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (brendan)

	* doc/PGP-Notes.txt, doc/devel-notes.txt, doc/manual.xml.head,
	doc/smime-notes.txt: Fix some typos; regularise spelling from
	UK to US forms.

2006-08-10 21:43:47  Brendan Cully  <brendan@kublai.com>  (brendan)

	* Makefile.am: Only touch reldate.h if it actually changes.
	It was getting annoying rebuilding the manual after every commit.

2006-08-10 21:25:18  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (brendan)

	* Makefile.am, configure.in, doc/instdoc.sh.in: No need to set
	CPP, OPS manually in Makefile.am.  Include stdlib.h in autoconf
	tests that use exit.

2006-08-10 20:20:28  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap_private.h, imap/browse.c, imap/command.c,
	imap/imap.c: Add type field for IMAP command data structure,
	check it before use.

	* imap/command.c: Handle IMAP out-of-order tagged
	responses. Closes: #2365.

	* imap/command.c, imap/util.c: Handle literal mailbox names
	in LIST responses (for Notes).	We should really have an IMAP
	stream tokenizer.

	* imap/command.c: Notes sometimes sends EXISTS messages for the
	wrong mailbox.

	* imap/message.c: More out-of-order FETCH fixes. This time I wrote
	a replay tool acting as an IMAP server based on a .muttdebug0
	file, and mutt handled the out-of-order responses served by it.

	* imap/command.c, imap/message.c: More fixes for out-of-order
	FETCH responses.

2006-08-09 19:29:22  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* mime.types: Update sample mime.types.

2006-08-09 01:17:48  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/message.c: Untested attempt to handle flag updates during
	mailbox open.

	* imap/message.c: Do not allow IMAP mailbox to be reopened while
	it is being opened.

2006-08-08 23:04:01  Matthias Andree  <matthias.andree@gmx.de>  (brendan)

	* INSTALL, doc/devel-notes.txt: Updated and improved build
	instructions.

2006-08-08 22:49:12  Holger Weiss  <holger@zedat.fu-berlin.de>  (brendan)

	* configure.in, snprintf.c: Check whether v?snprintf is
	C99-compliant, and fix replacement functions to be.

2006-08-08 22:38:29  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c: Finish fixing 2251.

	* imap/imap.c: Handle unknown mailboxes in IMAP buffy check.

2006-08-08 22:05:51  Ronny Haryanto  <ronnylist@haryan.to>  (brendan)

	* po/id.po: Update.

2006-08-08 21:59:37  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: Update.

2006-08-07 19:55:42  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/command.c: Check for CAPABILITY in extended tagged
	responses.

2006-08-05 00:48:16  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* mutt_socket.c: Include FD in socket logging.

2006-08-05 00:19:38  Brendan Cully  <brendan@kublai.com>  (brendan)

	* browser.c: Don't allow user to attempt to delete root IMAP
	folder.

2006-08-05 00:03:22  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* po/Makefile.in.in: Fix po build when builddir != srcdir
	(modified: made simpler).

2006-08-03 23:46:31  ckillian@cs.ucsd.edu  (brendan)

	* doc/manual.xml.head: Fix --enable--hcache typo in the manual.

2006-08-03 23:42:27  Christian Ebert  <blacktrash@gmx.net>  (brendan)

	* doc/manual.xml.head: Minor formatting tweak in the manual.

2006-08-03 23:31:11  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* init.h: Add some missing makedoc defines for hcache DB
	options. Clarify their meanings in the documentation.

2006-07-20 00:57:33  David Champion  <dgc@uchicago.edu>  (brendan)

	* doc/devel-notes.txt: Some notes on setting up a working
	docbook toolchain.

2006-07-20 00:12:52  Alain Bench  <veronatif@free.fr>  (brendan)

	* contrib/Pine.rc, contrib/Tin.rc, contrib/sample.muttrc,
	contrib/sample.muttrc-tlr, doc/muttrc.man.head, Muttrc.head.in,
	contrib/Mush.rc: Clean up a number of examples in the
	documentation.

2006-07-19 23:33:27  Matthias Andree  <matthias.andree@gmx.de>  (brendan)

	* m4/Makefile.am: Clean up some debugging code in the build
	system update.

2006-07-19 23:29:54  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* configure.in: Fix linking for body cache without IMAP support.

2006-07-19 23:17:59  Matthias Andree  <matthias.andree@gmx.de>  (brendan)

	* .cvsignore: Ignore stamp-h1

	* prepare: Update prepare: remove -dev (always enable dependency
	tracking) and use autoreconf -i instead of running tools by hand.

2006-07-18 18:15:30  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/devel-notes.txt: Document which versions of autoconf and
	automake mutt supports.

2006-07-18 18:04:15  Matthias Andree  <matthias.andree@gmx.de>  (brendan)

	* doc/.cvsignore, doc/Makefile.am, doc/Makefile.in,
	imap/Makefile.am, m4/Makefile.am, m4/Makefile.am.in, m4/README,
	po/Makefile.in.in, Makefile.am, build-release, contrib/.cvsignore,
	contrib/Makefile.am, contrib/Makefile.in, prepare: Long-overdue
	build system overhaul.

2006-07-18 16:08:39  Vsevolod Volkov  <vvv@mutt.org.ua>  (brendan)

	* po/ru.po: Update for 1.5.12.

2006-07-17 18:40:26  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* doc/Makefile.in: Some makefile fixes relating to reldate.h.

2006-07-17 18:24:52  Matthias Andree  <matthias.andree@gmx.de>  (brendan)

	* doc/.cvsignore: Tell CVS to ignore generated file mutt.1.

2006-07-17 18:01:58  Christian Ebert  <blacktrash@gmx.net>  (brendan)

	* doc/manual.xml.head: Fix a typo in a macro demonstrating $my_
	variables.

2006-07-17 17:56:37  Adeodato Simó  <dato@net.com.org.es>  (brendan)

	* sendlib.c: Change formate of User-Agent header from
	Mutt/Version-Date to Mutt/Version (Date).

2006-07-14 18:39:14  roessler  (roessler)

	* po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po, VERSION, po/bg.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po, po/eu.po,
	po/fr.po, po/ga.po, po/gl.po, po/hu.po, po/id.po, po/it.po:
	automatic post-release commit for mutt-1.5.12

2006-07-14 18:12:49  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* UPDATING: There's no point in giving a date for each
	incompatible change.

	* UPDATING: Fix UPDATING.

2006-07-14 00:20:05  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* doc/manual.xml.head: Improved history documentation (modified
	for clarity).

	* doc/manual.xml.head: Document $my_ variables and add a section
	about how to calculate the header cache file name for a given
	folder. Modified for clarity.

2006-07-11 23:38:30  Rocco Rutte  <pdmef@gmx.net>  (roessler)

	* main.c, mutt_curses.h: Fix 2305.

2006-07-11 23:34:11  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (roessler)

	* mbyte.c, protos.h, rfc2047.c, rfc2231.c: Fix #2173.

2006-07-09 20:05:02  Kyle Wheeler  <kyle-mutt-dev@memoryhole.net>  (brendan)

	* imap/imap.c: Plug an mbox leak parsing the Postponed folder in
	imap_open_mailbox (slightly modified to prevent bad free calls).

2006-07-07 23:10:51  Johan Svedberg  <johan@svedberg.com>  (brendan)

	* po/sv.po: Update to the Swedish translation.

2006-07-07 18:44:34  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* imap/message.c: Fix a small memory leak in the gap between
	the last cached header and the first uncached. (I've plugged a
	couple of other leaks that happen under error conditions.)

2006-07-07 17:00:05  Kyle Wheeler  <kyle-mutt-dev@memoryhole.net>  (brendan)

	* doc/muttrc.man.head: Fix a small inconsistency documenting
	'reset all.'

2006-07-07 16:21:57  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (brendan)

	* po/pl.po: Update.

2006-07-06 18:18:31  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* imap/command.c: Fix a string leak parsing STATUS responses.

	* score.c: Fix a small memory leak when updating a score pattern.

2006-07-05 00:31:38  Brendan Cully  <brendan@kublai.com>  (brendan)

	* init.c: Reset myvar for each token in parse_set, so that
	things like set my_var=val &my_var ?charset work again. Noted
	by Alain Bench.

	* doc/Makefile.in, init.c: Undo breakage I introduced in VL's
	doc reldate patch.

	* UPDATING, init.h: Remove $imap_cachedir synonym, and update
	some docs.

	* bcache.c: Rename mutt_bcache_path to bcache_path (it's static),
	simplify it a bit, and just strip '/' in the URL portion up
	to path instead of replacing them with '_', for prettier cache
	folder names.

2006-07-04 17:23:16  Alain Bench  <veronatif@free.fr>  (brendan)

	* history.c: Adopt shell convention of omitting from the history
	commands prefixed with a space.

2006-07-04 17:11:04  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* configure.in, doc/manual.xml.head, globals.h, imap/imap.c,
	imap/imap_private.h, imap/message.c, imap/util.c, init.h, mh.c,
	pop.c, pop.h, Makefile.am: pdmef.cache.24: Generalise IMAP body
	caching and add POP support.  $imap_cachedir is now a synonym
	for $message_cachedir, and should be dropped soon since it hasn't
	been in an official release.

2006-07-03 16:19:43  Michael Tatge  <Michael.Tatge@web.de>  (brendan)

	* doc/manual.xml.head: Some commands used a dash in the
	documentation instead of an underscore. Closes: #2270.

2006-06-29 22:14:08  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* UPDATING: Fill in missing entries in UPDATING.

2006-06-25 20:10:24  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* doc/Makefile.in: Add release date to manual version
	information.

2006-06-19 18:14:03  TAKAHASHI Tamotsu  <tamo@momonga-linux.org>  (brendan)

	* imap/browse.c: Fix browse_get_namespace() which could overflow
	ns[LONG_STRING].  (Possible remote vulnerability)

2006-06-19 17:50:10  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: Update to current CVS.

2006-06-13 22:26:18  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* Makefile.am: Run cut under the C locale when parsing ChangeLog
	for reldate.

2006-06-13 07:52:52  René Clerc  <rene@clerc.nl>  (roessler)

	* cryptglue.c: typo

2006-06-08 11:56:05  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* commands.c, curs_main.c, globals.h, muttlib.c, sendlib.c: Clean
	up ReleaseDate mess; include ReleaseDate in User-Agent header.

	* crypt.c: Fix #2272.

2006-06-06 23:58:10  Paul Walker  <paul@black-sun.demon.co.uk>  (brendan)

	* init.c: Remove variable aliases from the output of mutt -D
	(modified for dubious cosmetic reasons). Closes: #2265.

2006-05-26 16:51:48  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* configure.in: When flags are added to CPPFLAGS and LDFLAGS in
	configure.in, this should be done with a consistent
	order. Otherwise, when several versions of a library are
	installed, this could lead to a mismatch between the header and
	the library.

2006-05-26 16:38:18  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (brendan)

	* imap/command.c, imap/message.c, mutt_socket.c, mutt_socket.h,
	pop_lib.c: Add mutt_socket_write_n to write binary data. Use this
	function in imap_append_message. Closes: #2244.

2006-05-21 23:25:48  Brendan Cully  <brendan@kublai.com>  (brendan)

	* .cvsignore, reldate.h: reldate.h is a generated file now: remove
	reldate.h from version control, and add it to .cvsignore.

2006-05-19 20:38:05  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/Makefile.in: Add intro.html to distributed HTML files
	(fallout from conversion from article to book).

	* UPDATING: Use +/-/! instead of N/D/M in UPDATING.
                                 
2006-05-19 18:30:10  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* Makefile.am, README, UPDATING: The UPDATING document is supposed
	(when complete) to provide quick pointers by date to changed
	features (new options/commands, new features, changed defaults,
	etc.)

	* doc/manual.xml.head, init.h: Document speed impact of attachment
	counting. This adds a short paragraph to manual.xml and
	cross-links %X-expandos to it.

2006-05-18 18:35:10  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* hcache.c, hcache.h, imap/imap.c, imap/message.c, mh.c: Use
	header_cache_t* instead of void* for header cache.

	In hcache.c, the header_cache structure is defined to match the
	needs per DB backend used. Thus the interface uses void* abstract
	from it. This patch adds a 'header_cache' forward declaration to
	hcache.h so that we at least get a little more type safety.

	* INSTALL: Note that the DocBook 4.2 DTD should be installed
	locally in order to build the manual.

	* doc/chunk.xsl, doc/manual.xml.head, doc/manual.xml.tail,
	makedoc.c: Properly use tables in manual where appropriate.

	Now, lots of information which really deserves a table is just put
	into <screen/> sections with manual line breaks and things like
	that. This is ugly for several reasons including that the
	information stored there should be accessable straight from the
	table of contents. For the TOC, this patch switches to <book/> for the manual and uses a
        deeper split level so things actually look nicer. The only problem
	are tables which may be not so well supported when dumping the
	HTML to .txt but the DocBook->txt converter with table support is
	work-in-progress...

	* imap/message.c, imap/utf7.c, imap/util.c, mutt_ssl_gnutls.c,
	muttlib.c, mx.c, pager.c, pgplib.c, remailer.c, rfc1524.c,
	rfc2047.c, rfc2231.c, rfc822.c, sendlib.c, buffy.c, charset.c,
	check_sec.sh, color.c, enter.c, group.c, hash.c, init.c, lib.c,
	menu.c, mh.c, mutt_idna.c: Avoid safe_free() usage and add
	security checks.

	Add checks to check_sec.sh for memory functions. These include a
	check for use of safe_free() instead of FREE() and a check whether
	FREE(&...) is used. For the former, __SAFE_FREE_CHECKED__ is to be
	used, for the latter __FREE_CHECKED__ to avoid messages from
	check_sec.sh

2006-05-18 08:53:31  Rocco Rutte  <pdmef@gmx.net>  (roessler)

	* Makefile.am, build-release, reldate.h: Autogenerate reldate.h
	from ChangeLog.

2006-05-17 18:37:33  Rene Clerc  <rene@clerc.nl>  (brendan)

	* po/nl.po: Updated nl.po.

2006-05-16 05:01:02  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: Updated fr.po

2006-05-06 07:42:51  Rocco Rutte  <pdmef@gmx.net>  (roessler)

	* mh.c: Header caching for mh folders.

2006-05-05 17:27:10  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* doc/manual.xml.head: Set system ID to docbook 4.2, in harmony
	with schema URL.

2006-05-02 22:23:35  Rocco Rutte  <pdmef@gmx.net>  (brendan)

	* muttlib.c: Fix an improper dereference in mutt_buffer_init (I think).

2006-04-28 19:52:45  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* mutt.h, parse.c, pattern.c, protos.h, hdrline.c: Cleaning
	up attachment counting.  This takes away some of the worst
	aberrations, but the feature is still a performance hog.

2006-04-28 12:19:20  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (roessler)

	* mutt_socket.h: "could somebody please move this really nasty
	bug fix taken from Brendan's esmtp patch to the mailine code?" --
	"done"

2006-04-28 08:35:03  Rocco Rutte  <pdmef@gmx.net>  (roessler)

	* imap/imap.c, init.h, main.c, mutt.h, mutt_socket.c, mutt_ssl.c,
	mutt_ssl.h, mutt_ssl_gnutls.c, pop_lib.c, buffy.c, configure.in,
	globals.h, init.c: pdmef+fix+sslinterface. Triggered by a warning
	when compiling with POP and GNUTLS, I noticed the SSL interfaces
	for OpenSSL and GNUTLS internally are different which doesn't
	make sense.

	* configure.in, mh.c: pdmef+fix+dino.diff. This fixes mutt/2174.

2006-04-24 19:59:07  exg@gentoo.org  (brendan)

	* configure.in: Don't abort configure if --without-sasl is
	given without any network options. Gentoo's build scripts seem
	to generate this configuration.

2006-04-20 16:46:49  Moritz.Schulte@ruhr-uni-bochum.de  (roessler)

	* headers.c, mutt_crypt.h, postpone.c: Make mutt_parse_crypt_hdr
	more SMIME-aware.

2006-04-18 23:22:30  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/auth_sasl.c: Handle Exchange's bogus short challenge in
	AUTH NTLM (problem debugged by Alexander Gattin).

2006-04-18 15:28:50  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* recvattach.c: Fix saving of attachments.

2006-04-05 17:28:30  Phil Pennock  <mutt-dev@spodhuis.demon.nl>  (brendan)

	* curs_main.c:	(1) OP_MAIN_LINK_THREADS needs to check for
	IMAP_ACL_DELETE permission, since the thread linking involves
	deleting the old email. (2) makes CHECK_IMAP_ACL() a no-op if
	USE_IMAP is not defined; then cleans up a bunch of the #ifdef
	litter.

2006-04-03 20:26:14  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/command.c: Don't pass a null destination to imap_fix_path
	in the default STATUS handler when the mailbox name is implicitly
	INBOX. Thanks to Kai Hendry for the test mailbox and Sami Liedes
	for the backtrace. Closes debian #351337.

	* init.h: Set $record default to ~/sent (closes: #2068).

2006-03-30 19:50:01  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/manual.xml.head: Tighten up lists/subscribe example,
	to close #2198.

2006-03-28 18:04:21  Mike Hallock  <mhallock@scs.uiuc.edu>  (brendan)

	* curs_main.c: imap-fetch-mail should check that there is a
	Context before dereferencing Context->magic to avoid a segfault
	possibility.

2006-03-28 01:08:28  Paul Walker  <paul@black-sun.demon.co.uk>  (brendan)

	* recvattach.c: Sanitize attachment file names (seatbelt for
	inattentive recipients).

2006-03-24 23:15:37  Paul Walker  <paul@black-sun.demon.co.uk>  (brendan)

	* INSTALL: Document the need for a docbook-xsl bundle in order
	to build the docs.

2006-03-15 12:26:00  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/message.c: Don't store UIDNEXT unless we know it.

	* imap/message.c: Only synthesize UIDNEXT if we've fetched
	uncached messages. Fixes a FETCH 1:0 bug Bruno Postle reported and
	helped to debug.

2006-03-13 23:21:51  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/message.c: Courier fails to send UIDNEXT on SELECT
	(a violation of RFC 3501 section 6.3.1) - synthesize it if it
	is missing.

	* init.h: Make imap_idle default to false for 1.5.12.

2006-03-03 10:12:27  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* hook.c: reply-hook is used in contexts where we don't have
	a Context structure available. Hence, it must not require the
	full message.

2006-03-03 09:55:46  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* query.c: Fix mutt/2189; lack of error checking in the query
	code.

2006-02-21 21:52:17  Brendan Cully  <brendan@kublai.com>  (brendan)

	* muttlib.c: Preallocate some buffer space before attempting
	vsnprintf in mutt_buffer_printf (Solaris 9 workaround).

2006-02-21 08:10:15  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* attach.c: Fix mutt/2186.

2006-02-21 00:29:10  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/command.c, muttlib.c: Catch mutt_buffer_printf failures.

2006-01-26 07:13:06  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>  (brendan)

	* contrib/Makefile.in, doc/Makefile.in: Set datarootdir.

2006-01-20 21:21:31  Phil Pennock  <mutt-dev@spodhuis.demon.nl>  (brendan)

	* imap/message.c: Correct a fairly harmless typo parsing message
	\Recent flags.

2006-01-15 21:37:03  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/browse.c, imap/command.c, imap/imap.c, imap/imap.h, main.c,
	pattern.c: A conservative update of copyright years. Some other
	files may need updating too.

2006-01-14 01:16:59  Phil Pennock  <mutt-dev@spodhuis.demon.nl>  (brendan)

	* init.c: Tab-completion for my_ variable names and values.

2006-01-13 09:08:11  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* init.c: More compact code for managing the "my" variables list.

2006-01-12 19:09:28  Phil Pennock  <mutt-dev@spodhuis.demon.nl>  (brendan)

	* init.c: Update MyVars to the next entry when deleting the head
	of the list, instead of leaving it pointing to a freed entry.

2006-01-12 09:36:46  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2006-01-12 06:07:50  Brendan Cully  <brendan@kublai.com>  (brendan)

	* init.c: Teach mutt to expand mutt variables as it does
	environment variables. For example, you might put something like
	this into a hook: set sendmail="mysmtp -f $from". Allow
	user-definable variables starting with my_. Environment variables
	take precedence, and expansion does not occur in shell-escape.

2006-01-11 06:45:23  Recai Oktas  <roktas@omu.edu.tr>  (brendan)

	* po/tr.po: A tr.po update.

2006-01-10 21:06:22  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/browse.c: Sanity-check folder inferiors response. Brian
	Weaver reports that it fixes the extra delimiters bug triggered by
	dbmail's incorrect LIST response.

	* hdrline.c: Don't use uninitialised flags variable when fetching
	attachment count.  Closes: #2153.

2006-01-09 19:43:59  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* imap/imap.c, mutt.h, pattern.c, protos.h, send.c, Makefile.am,
	globals.h, group.c, init.c, init.h: Adding pattern group support;
	see http://does-not-exist.org/mail-archives/mutt-dev/msg05693.html
	for instructions.  The ungroup command is not yet implemented,
	and documentation is lacking.

2006-01-04 17:28:32  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/browse.c: Zero out IMAP_LIST before each imap_cmd_step in
	browser to avoid bogus matches when the untagged response isn't a
	LIST response. Phil Pennock diagnosed and proposed a patch for
	this bug.

2006-01-03 17:35:18  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c: Pipeline CLOSE (it's always followed by a SELECT or
	a LOGOUT).

	* imap/command.c, imap/imap.c: If there is an * OK
	[CAPABILITY... qualifier on connect, parse it and skip the manual
	capability check.

	* imap/imap.h, imap/imap.c, postpone.c: Pipeline postponed mail
	check on mailbox open if appropriate.

2005-12-30 17:34:52  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c: Sort mailbox in SORT_ORDER in imap_sync_mailbox so
	that sync_helper doesn't end up resorting it 10 times.

	* imap/imap.c: Only resort headers in imap_make_msg_set if order
	!= SORT_ORDER. Fix sync_helper to return 1 in case of +FLAGS but
	not -FLAGS.

2005-12-26 23:55:19  Nik A. Melchior  <nam1@cec.wustl.edu>  (brendan)

	* doc/muttrc.man.head: Fix whitespace around ~X in
	muttrc.man.head.

2005-12-23 18:20:02  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap_private.h, imap/message.c: Don't evaluate hcache
	unless uidnext > 0. This shouldn't happen, but it was reported
	to. I probably have to be a lot more careful about the uid
	datatypes but I'm too lazy to clean up right now.

	* imap/imap.c: Always use NOOP when imap_check_mailbox is called
	with force set. Seems to resolve a Cyrus idiosyncracy noted by
	Phil Pennock.

	* imap/imap.c, imap/message.c: IMAP message cache fixes: embed
	UIDVALIDITY in the cache file name, only delete deleted messages
	at sync time. Also use an alias to make the sync code clearer.

2005-12-22 20:14:04  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/command.c: Fix at least Kyle Wheeler's new mail detection
	problems: call imap_fix_path on buffy path.

	* regex.c: Kyle Wheeler noticed a couple of warnings in the
	moribund regex code. One still remains that I'm too lazy to fix
	right now.

	* imap/message.c: Add <errno.h> for msg_cache_put.

	* globals.h, imap/imap.c, imap/imap_private.h, imap/message.c,
	imap/message.h, init.h: Add $imap_cachedir option. If set, mutt
	will keep copies of IMAP messages under this directory.

	* imap/imap.c: Check all connections instead of just the first
	when NONEW is set in imap_conn_find. Wait for root delimiter check
	to complete before SELECTing since we may need it to form the
	mailbox name.

	* imap/command.c: More logging in STATUS parser to track down new
	mail detection problems.

2005-12-21 21:02:50  Brendan Cully  <brendan@kublai.com>  (brendan)

	* hcache.c: Check for NULL data in refactored mutt_hcache_fetch.

	* hcache.c: Unbreak QDBM too.

	* hcache.c, hcache.h: I broke DB4 while refactoring hcache.c.

	* imap/imap.c, imap/imap_private.h, imap/message.c: Cache
	UIDVALIDITY/UIDNEXT as header cache metadata, only attempt to
	fetch up to UIDNEXT from the header cache. Also a cosmetic
	correction: Display the actual first message being fetched (after
	hcache) instead of 1.

	* imap/command.c: Don't run pending IMAP commands until the
	current queue has drained. Many thanks to Vincent Lefevre for his
	patient help debugging.

	* imap/command.c: Compare full mailbox names when doing IMAP buffy
	check, not up to the length of the STATUS response.

2005-12-20 17:50:47  Brendan Cully  <brendan@kublai.com>  (brendan)

	* hcache.c, hcache.h, imap/imap.c, imap/imap_private.h,
	imap/message.c, mh.c, protos.h, Makefile.am: Refactor header cache
	a bit to provide (fetch|store)_raw functions. These will let me
	keep folder metadata (UIDVALIDITY, NEXT, msg count etc) in the
	cache, which will help to sync more quickly.

	* imap/imap.c: Remove deleted entries from header cache on CLOSE.

2005-12-19 18:13:28  Brendan Cully  <brendan@kublai.com>  (brendan)

	* ChangeLog, ChangeLog.old: ChangeLog.old was just old ChangeLog
	entries with different formatting - I think it's time to put it
	out to pasture. I've moved all pre-1.4 entries from ChangeLog into
	ChangeLog.old now. This should have the nice side-effect of making
	the git mirror grow a little more slowly.

	* imap/imap.c: Catch another possible race when starting IDLE.

	* imap/imap.c, imap/imap_private.h, imap/message.c: More IMAP
	header cache cleanup: remove expunged entries from cache, and
	don't bother checking the cache for mail that's arrived since the
	mailbox was opened. TODO: cache UIDNEXT, only check the cache for
	messages up to cached value.

	* imap/imap.c: Avoid a possible race when entering the IDLE
	command - if new mail notification is received before the +
	response, mutt may attempt to send a fetch command before it
	realises it's idling.

	* imap/imap_private.h, imap/message.c, imap/imap.c: Much faster
	IMAP sync code, pipelined and everything. Now batch updates
	changed flags, instead of syncing each changed message
	individually.

	* imap/imap.c: Manually unidle at logout if necessary. Somewhat
	unclean - might be good to have an imap_unidle function...

	* imap/imap.c, imap/message.c, imap/message.h: Cache server-side
	flags, don't send flag updates if mutt's are the same. This can
	happen if a flag is toggled and toggled back, or we receive server
	updates, and the cache will make much faster sync possible later.

	* imap/command.c, imap/imap.c: Pipeline MYRIGHTS, subscribed
	mailbox check and root delimiter check.

	* imap/imap.c: Clear name field from status callback before each
	IMAP completion attempt.

	* imap/message.c: Remove some cut-n-paste garbage from IMAP header
	cache code.

	* mx.c: Only mark unread messages as old when closing mailbox.

	* imap/auth_sasl.c, imap/browse.c, imap/imap.c,
	imap/imap_private.h, imap/message.c, imap/util.c, mx.c: Real
	support for the Old flag on IMAP.

	* imap/imap.c, imap/imap_private.h: Display success message when
	subscription command succeeds.

	* imap/browse.c, imap/command.c, imap/imap.c, imap/imap_private.h:
	Replace imap_parse_list_response with a proper untagged response
	handler.

2005-12-16 18:49:40  Recai Oktas  <roktas@omu.edu.tr>  (brendan)

	* color.c, crypt.c, handler.c, init.c, parse.c, smime.c: Use
	ascii_str* instead of mutt_str* in several places where it's
	needed.

2005-12-16 18:18:52  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/command.c, imap/imap.c, imap/imap_private.h,
	imap/message.c, imap/util.c: New new mail detection code. Now we
	use UIDVALIDITY/UIDNEXT to detect whether a mailbox has been
	changed since we last saw it, rather than the more ephemeral
	RECENT flag. We also keep a cache of mailboxes we've visited or
	called STATUS on, which might eventually make for better
	information in the browser and mailbox views. Big changes,
	probably not stable. IWFM.

2005-12-15 18:59:59  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/message.c: Whitespace shuffling.

	* imap/command.c, imap/imap.c, imap/imap_private.h, imap/util.c:
	Use mutt_buffer_printf in several places instead of a homebrew
	version.

	* configure.in, m4/funcs.m4, muttlib.c, protos.h: Add
	mutt_buffer_printf function, with autoconf test for va_copy.

	* imap/imap.c: IMAP keepalive might have been interacting badly
	with $timeout when IDLE was enabled. Use force option for IDLE too.

2005-12-14 17:29:57  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/auth_sasl.c, imap/command.c, imap/imap_private.h: SASL-IR
	support for IMAP. The RTT was has begun. I had forgotten how
	strangely convoluted auth_sasl has become though...

2005-12-13 23:37:42  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mutt_ssl.c, mutt_ssl_gnutls.c: Add conn_poll (using
	raw_socket_poll) to SSL socket setup functions.

	* buffy.c: Fix recently-broken buffy notification for IMAP.

	* imap/imap_private.h, imap/util.c, imap/command.c, imap/imap.c,
	imap/imap.h, postpone.c: Restore IMAP postponed check in the wake
	of the buffy pipelining patch. Fall back to NOOP if IDLE poll
	fails. Allow for untagged messages when starting IDLE. Free
	idata->cmdbuf in imap_free_idata.

	* imap/TODO, imap/BUGS: Updated todo/bug list for IMAP

2005-12-12 17:24:12  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/command.c, imap/imap.c, init.h, mutt.h: Add $imap_idle
	boolean to disable the IDLE extension (may be needed with some
	servers like the particular version of dovecot I tried
	yesterday). Don't attempt to poll mailboxes with connections that
	haven't yet authenticated. Recognize NO responses again (silly
	typo, spotted by Charlie Allom)

2005-12-12 02:24:43  Brendan Cully  <brendan@kublai.com>  (brendan)

	* configure.in, imap/command.c, imap/imap.c, imap/imap_private.h,
	mutt_socket.c, mutt_socket.h, mutt_tunnel.c: IMAP IDLE support.

	* buffy.c: Whoops, don't break buffy for non-IMAP mailboxes!

	* buffy.c, imap/command.c, imap/imap.c, imap/imap.h,
	imap/imap_private.h, imap/util.c: IMAP command batching code, used
	to pipeline mailbox poll requests. Up to 10 poll commands will be
	sent at a time (tunable in imap_private.h). This is a huge win on
	my currently awful wireless link. It takes a knife to a lot of
	fundamental IMAP code (mostly for the better), so it may have
	destabilised things. Time for some brave (or lazy
	non-Changelog-reading) testers to report... next up, IDLE
	support.
                                 
2005-12-10 07:06:44  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/browse.c, imap/command.c, imap/imap.c, imap/imap_private.h,
	imap/util.c: Set up a command pipeline. Currently everything still
	runs a single command from start to finish before moving on, but
	this creates the infrastructure to pipeline mailbox polling
	calls. Bitter experience at the end of a flaky wireless link
	teaches me that this can be useful.

	* imap/auth_anon.c, imap/auth_cram.c, imap/auth_gss.c,
	imap/auth_sasl.c, imap/browse.c, imap/command.c, imap/imap.c,
	imap/imap_private.h, imap/message.c, imap/util.c: Move IMAP
	response buffer out of command into IMAP_DATA. Ironically this is
	to prepare for pipelined commands.

2005-11-24 12:50:27  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* curs_main.c, pattern.c: mutt/2142 suggests that the change
	from pattern.c,3.14 -> 3.15 causes inconsistency and confusion.
	Reverting the change; adding a helpful message to the status line.

2005-11-22 12:31:58  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* pgp.c: Fix "mixed messages" about the success (or not) of
	decrypting PGP messages.

	* handler.c: Actually, the previous fix for 2139 had a flaw.

	* handler.c: Fix mutt/2139; also Debian #340116.

2005-11-17 18:40:50  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* menu.c: a not entirely sane state of code.

	* menu.c: Another stab at #2019.

2005-11-01 08:42:00  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* menu.c: This should be a better patch for the menu break
	dance. (#2019)

2005-10-31 11:56:58  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>  (roessler)

	* imap/message.c: Fix 2119.

2005-10-31 10:51:54  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* mutt_idna.c: Fix the underlying problem behind mutt/2107.

	* menu.c: Fixing #2019.

	* flags.c: Fix #2123.

2005-10-21 04:35:38  Brendan Cully  <brendan@kublai.com>  (brendan)

	* smime.c, attach.c, buffy.c, copy.c, copy.h, crypt-gpgme.c,
	crypt.c, edit.c, handler.c, mbox.c, mutt.h, pager.c, parse.c,
	pattern.c, pgp.c, pgpmicalg.c, pgppacket.c, pgppubring.c, pop.c,
	postpone.c, protos.h, sendlib.c: Full large file support. Keep a
	close watch on your mailboxes everyone!

2005-10-18 07:04:50  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2005-10-17 09:14:58  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (roessler)

	* smime.c: Fix S/MIME algorithm choice.

2005-10-14 09:30:11  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* imap/imap.c: Fix imap/2112.

2005-10-10 18:26:31  Brendan Cully  <brendan@kublai.com>  (brendan)

	* pgp.c: Make PGP decode failure non-fatal when displaying
	messages (as opposed to decode-saving them). I think it would be
	nicer to include the original text when decryption fails
	though...

	* imap/command.c, setenv.c: Accept + as IMAP continuation, not
	just + . May close #2106. Feed check_sec candy in setenv.c.

2005-10-09 20:53:21  Brendan Cully  <brendan@kublai.com>  (brendan)

	* configure.in: Now that we always check for ncurses/ncurses.h,
	remove /usr special case.

	* configure.in, mutt_curses.h: Tweak ncurses autoconflation to
	check for ncurses/ncurses.h everywhere, not just in /usr. With
	--with-curses=/usr/local, should Close: #2095.

	* configure.in, setenv.c: Add Russ Allbery's setenv replacement
	function.

	* init.h: Correct doc nit for $meta_key, noted by Mark
	Weyer. Closes: #2105.

2005-10-06 06:15:00  Brendan Cully  <brendan@kublai.com>  (brendan)

	* browser.c: Sort browser entries after every IMAP browsing
	operation instead of just when explicitly requested. Closes:
	#2089.

2005-10-06 05:13:55  Jeff Ito  <jeffi@rcn.com>  (brendan)

	* smime.c: Add AES ciphers to S/MIME encryption options. Closes:
	#2103.

2005-10-05 19:24:40  David Champion  <dgc@uchicago.edu>  (brendan)

	* doc/manual.xml.head, init.c: Fix 'unattachments'. Closes: #2102.

2005-10-05 19:20:22  Jeff Ito  <jeffi@rcn.com>  (brendan)

	* smime.c: S/MIME key selection truncates the last character of
	the selected key for no apparent reason. Removed until someone
	can justify it. Closes: #2081.

2005-10-04 19:00:05  Brendan Cully  <brendan@kublai.com>  (brendan)

	* init.h: Tweak description of pop_checkinterval slightly. Closes:
	#2074.

	* hcache.c: Bump hcache Id for attachment counting patch.

2005-10-04 06:05:39  David Champion  <dgc@uchicago.edu>  (brendan)

	* Muttrc.head.in, doc/manual.xml.head, doc/muttrc.man.head,
	globals.h, hdrline.c, init.c, init.h, mime.h, mutt.h, parse.c,
	pattern.c, protos.h, recvattach.c: Attachment counting for index
	display (patch-1.5.11.dgc.attach.6). Modifications: attach_recurse
	and attach_ignore_fundamental stripped, some debugging code
	removed, some bones thrown to check_sec.sh.

2005-10-04 05:24:00  Sébastien Hinderer  <Sebastien.Hinderer@libertysurf.fr>  (brendan)

	* pager.c: The following patch has an effect only when the
	braille_friendly variable is set. When this is the case, the
	cursor is put on the first line of the message body, when viewing
	it with the pager.

2005-10-04 04:29:09  Alain Bench  <veronatif@free.fr>  (brendan)

	* curs_main.c: Piping and printing in IMAP folder index with
	imap_peek=no marks message read immediately.

2005-10-03 07:52:00  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (roessler)

	* curs_lib.c, send.c: fix a problem that appears with signatures
	without newline.

2005-09-30 18:24:17  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/devel-notes.txt: Change manual.sgml to manual.xml (noted
	by Alain Bench).

2005-09-30 01:42:50  Roland Rosenfeld  <roland@spinnaker.de>  (brendan)

	* po/de.po: Update.

2005-09-29 23:57:07  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: Update.

2005-09-29 23:52:16  pi  <pi@beobide.net>  (brendan)

	* configure.in, po/eu.po: Basque translation.

2005-09-29 23:02:49  Brendan Cully  <brendan@kublai.com>  (brendan)

	* configure.in, copy.c, sendlib.c: Ensure that Content-Length
	printf format specifier matches off_t size, to avoid mail-losing
	Content-Length: 0 (bug introduced by large file patch a couple
	of days ago). Closes: #2096.

2005-09-27 03:43:24  Johan Svedberg  <johan@svedberg.com>  (brendan)

	* po/sv.po: Update.

2005-09-24 20:03:04  Brendan Cully  <brendan@kublai.com>  (brendan)

	* edit.c: Inflict more needless pain on translators by splitting
	EditorHelp to satisfy -pedantic.

	* mbox.c, mutt.h, configure.in: Use fseeko/ftello when available
	while opening mbox/mmdf. Closes: #2084.

2005-09-24 19:36:35  Alain Bench  <veronatif@free.fr>  (brendan)

	* copy.c, mutt.h, parse.c, sendlib.c, thread.c: Cosmetic fixes to
	MIME headers. Closes: #2086.

2005-09-24 17:51:17  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (brendan)

	* po/ja.po: Update to HEAD.

2005-09-23 18:38:36  TAKAHASHI Tamotsu  <ttakah@lapis.plala.or.jp>  (brendan)

	* configure.in: Quote an error message.

2005-09-22 16:38:08  Takahashi Tamotsu  <ttakah@lapis.plala.or.jp>  (brendan)

	* configure.in, globals.h, hcache.c, init.h: Update QDBM patch to
	the current state of the art. Closes: #2003 (again).

2005-09-22 09:06:13  Thomas Roessler  <roessler@does-not-exist.org>  (roessler)

	* send.c: When composing a reply, there might be degenerate cases
	in which a CC header is created, but no To header.  In this case,
	we now use the auto-generated CC header as the To header.

2005-09-22 04:05:49  Brendan Cully  <brendan@kublai.com>  (brendan)

	* init.c: Refactor mutt var completion so it can be used for
	inline expansions (eg $from). Actual expansion not committed yet.

	* send.c: If ContentType is null, assume text/plain. Stopgap; a
	better mechanism would sanity-check MuttVars assignments before
	allowing them. Closes: #2080.

	* imap/util.c, imap/imap.c: Don't allow imap URLs with empty
	hosts. Also don't attempt to complete on open connections when
	there aren't any (diagnosed by Nico Golde). Closes: #2079.

	* pattern.c: Use ctx instead of Context when checking whether or
	not to do IMAP search. Resolves a possible segfault in color index
	~b operations. I can't remember whether Context vs ctx was
	intentional - I doubt it.

2005-09-21 14:17:14  Adeodato Simo  <asp16@alu.ua.es>  (brendan)

	* curs_main.c: Check for sigwinch in index before calling
	km_dokey, since for unknown reasons km_dokey seems to eat the
	signal in some cases. [Not reproducible in my ncurses environments
	- Brendan]. Closes: #1907.

2005-09-21 13:23:43  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c, pattern.c: Catch empty substring/regexp search
	arguments (precludes a segfault from dereferencing a null string
	pointer later).

2005-09-21 06:04:37  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>  (roessler)

	* init.h, mutt.h, configure.in, hcache.c: QDBM support for the
	header cache.

2005-09-21 04:50:31  Adeodato Simo  <asp16@alu.ua.es>  (brendan)

	* pgp.c: When using GPG agent in classic mode, set GPG_TTY if it
	isn't already set instead of bailing out. Closes: #2072.

2005-09-21 03:48:38  Takahashi Tamotsu  <ttakah@lapis.plala.or.jp>  (brendan)

	* init.c: Ensure that set doesn't change variables from within the
	help screen. I think this is a gross approach, and probably
	overkill, but it's the fault of the original code design, not
	Tamo's patch. Until a better way falls from the sky, this Closes:
	#2011.

2005-09-21 02:58:07  Brendan Cully  <brendan@kublai.com>  (brendan)

	* curs_main.c: Cancelling <change-folder> from within the pager
	will now keep you in the pager rather than kicking you back to the
	index. Closes: #2075.

2005-09-20 23:41:21  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* muttlib.c: Slight improvement on dgc's warning fix in edge cases.

2005-09-20 06:43:39  David Champion  <dgc@uchicago.edu>  (brendan)

	* init.c: Fix a null-pointer-dereference parsing aliases with
	-d3+.

	* muttlib.c: Clear a compiler warning.

2005-09-20 03:56:25  Gero Treuner  <gerotick@faveve.uni-stuttgart.de>  (brendan)

	* contrib/gpg.rc, doc/manual.xml.tail: Update locations of
	gpg-2comp, Gero Treuner.

2005-09-19 06:14:27  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mkchangelog.sh: I just realised what's been happening to the
	changelog: I recently got a new version of 'head' that refuses
	to accept -1 instead of -n 1, but doesn't actually return
	failure. So mkchangelog was feeding nothing to the cvs date
	argument, and instead merrily snarfing down the entire changelog
	every time. I've put in a simple $date != "" check. Thanks,
	textutils!  Thanks for ushering in the future! I'd like to shake
	your hand. Hard.

2005-09-19 05:12:29  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/manual.xml.head: Remove mention of obsolete
	--enable-imap-edit-threads configure option.

2005-09-18 17:49:33  Brendan Cully  <brendan@kublai.com>  (brendan)

	* ChangeLog: Somehow the changelog got mangled (multiple copies
	of large parts).

2005-09-18 08:22:49  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* po/ru.po: update

2005-09-18 02:53:18  brendan  (brendan)

	* doc/Makefile.in: More cleanups, slightly better dependencies.

2005-09-18 02:35:10  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/Makefile.in: Stupid hack to synchronise on makedoc for
	parallel builds. Only works when entered via make all. make
	stamp-doc-xml directly can fail in pathological conditions.

	* doc/Makefile.in: Attempt to work around make -j2
	breakage. Dependencies are still wrong, but I don't have
	the brainpower right now to get it right. People talk about
	imperative, functional, and logic programming, but no one ever
	mentions make programming.

2005-09-17 20:46:14  Brendan Cully  <brendan@kublai.com>  (brendan)

	* po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po, po/zh_CN.po, po/zh_TW.po, po/ga.po, po/gl.po,
	po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/lt.po,
	po/nl.po, po/pl.po, intl/plural.y, intl/ref-add.sin,
	intl/ref-del.sin, intl/textdomain.c, po/bg.po, po/ca.po,
	po/cs.po, po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po,
	po/et.po, po/fr.po, doc/dotlock.man, doc/manual.xml.head,
	doc/mutt.man, doc/muttbug.man, doc/muttrc.man.head,
	imap/auth.c, imap/auth.h, imap/auth_anon.c, imap/auth_cram.c,
	imap/auth_gss.c, imap/auth_login.c, imap/auth_sasl.c,
	imap/browse.c, imap/command.c, imap/imap.c, imap/imap.h,
	imap/imap_private.h, imap/message.c, imap/message.h, imap/utf7.c,
	imap/util.c, intl/COPYING.LIB-2, intl/COPYING.LIB-2.1,
	intl/Makefile.in, intl/bindtextdom.c, intl/config.charset,
	intl/dcgettext.c, intl/dcigettext.c, intl/dcngettext.c,
	intl/dgettext.c, intl/dngettext.c, intl/explodename.c,
	intl/finddomain.c, intl/gettext.c, intl/gettext.h,
	intl/gettextP.h, intl/hash-string.h, intl/intl-compat.c,
	intl/l10nflist.c, intl/libgettext.h, intl/libgnuintl.h,
	intl/libintl.glibc, intl/loadinfo.h, intl/loadmsgcat.c,
	intl/localcharset.c, intl/locale.alias, intl/localealias.c,
	intl/ngettext.c, intl/plural.c, pgpkey.c, pgplib.c, pgplib.h,
	pgpmicalg.c, pgppacket.c, pgppacket.h, pgppubring.c, pop.c,
	pop.h, pop_auth.c, pop_lib.c, postpone.c, protos.h, query.c,
	recvattach.c, recvcmd.c, regex.c, remailer.c, remailer.h,
	resize.c, rfc1524.c, rfc1524.h, rfc2047.c, rfc2047.h, rfc2231.c,
	rfc2231.h, rfc822.c, rfc822.h, score.c, send.c, sendlib.c,
	signal.c, smime.c, smime.h, smime_keys.pl, sort.c, sort.h,
	status.c, system.c, thread.c, url.c, browser.h, buffy.c, buffy.h,
	charset.c, charset.h, color.c, commands.c, complete.c, compose.c,
	config.guess, config.sub, copy.c, copy.h, crypt-gpgme.c,
	crypt-gpgme.h, crypt-mod-pgp-classic.c, crypt-mod-pgp-gpgme.c,
	crypt-mod-smime-classic.c, crypt-mod-smime-gpgme.c, crypt-mod.c,
	crypt-mod.h, crypt.c, cryptglue.c, curs_lib.c, curs_main.c,
	date.c, depcomp, dotlock.c, dotlock.h, edit.c, editmsg.c,
	enter.c, extlib.c, filter.c, flags.c, from.c, functions.h,
	globals.h, gnupgparse.c, handler.c, hash.c, hash.h, hcache.c,
	hdrline.c, headers.c, help.c, history.c, history.h, hook.c,
	init.c, init.h, keymap.c, keymap.h, lib.c, lib.h, mailbox.h,
	main.c, makedoc.c, mapping.h, mbox.c, mbyte.c, menu.c,
	mh.c, mime.h, missing, mutt.h, mutt_crypt.h, mutt_curses.h,
	mutt_idna.c, mutt_idna.h, mutt_menu.h, mutt_regex.h, mutt_sasl.c,
	mutt_sasl.h, mutt_socket.c, mutt_socket.h, mutt_ssl.c, mutt_ssl.h,
	mutt_ssl_gnutls.c, mutt_tunnel.c, mutt_tunnel.h, muttbug.sh.in,
	muttlib.c, mx.c, mx.h, pager.c, pager.h, parse.c, pattern.c,
	pgp.c, pgp.h, pgpinvoke.c, COPYRIGHT, _regex.h, account.c,
	account.h, addrbook.c, alias.c, ascii.c, ascii.h, attach.c,
	attach.h, base64.c, browser.c: Gah, forgot the zip code when
	updating the FSF address...

	* po/zh_CN.po, po/zh_TW.po, po/tr.po, po/uk.po, po/sk.po,
	po/sv.po, po/ru.po, po/pt_BR.po, po/nl.po, po/pl.po, po/ko.po,
	po/lt.po, po/ja.po, po/id.po, po/it.po, po/ga.po, po/gl.po,
	po/hu.po, po/et.po, po/fr.po, po/eo.po, po/es.po, po/de.po,
	po/el.po, po/da.po, imap/imap.h, imap/imap_private.h,
	imap/message.c, imap/message.h, imap/utf7.c, imap/util.c,
	intl/COPYING.LIB-2, intl/Makefile.in, intl/bindtextdom.c,
	intl/config.charset, intl/dcgettext.c, intl/dcigettext.c,
	intl/dcngettext.c, intl/dgettext.c, intl/dngettext.c,
	intl/explodename.c, intl/finddomain.c, intl/gettext.c,
	intl/gettext.h, intl/gettextP.h, intl/hash-string.h,
	intl/intl-compat.c, intl/l10nflist.c, intl/libgettext.h,
	intl/libgnuintl.h, intl/libintl.glibc, intl/loadinfo.h,
	intl/loadmsgcat.c, intl/localcharset.c, intl/locale.alias,
	intl/localealias.c, intl/ngettext.c, intl/plural.c, intl/plural.y,
	intl/ref-add.sin, intl/ref-del.sin, intl/textdomain.c, po/bg.po,
	po/ca.po, po/cs.po, doc/dotlock.man, doc/manual.xml.head,
	doc/mutt.man, doc/muttbug.man, doc/muttrc.man.head, imap/auth.c,
	imap/auth.h, imap/auth_anon.c, imap/auth_cram.c, imap/auth_gss.c,
	imap/auth_login.c, imap/auth_sasl.c, imap/browse.c,
	imap/command.c, imap/imap.c, rfc2047.h, rfc2231.c, rfc2231.h,
	rfc822.c, rfc822.h, score.c, send.c, sendlib.c, signal.c,
	smime.c, smime.h, smime_keys.pl, sort.c, sort.h, status.c,
	system.c, thread.c, url.c, query.c, recvattach.c, recvcmd.c,
	regex.c, remailer.c, remailer.h, resize.c, rfc1524.c,
	rfc1524.h, rfc2047.c, pager.h, parse.c, pattern.c, pgp.c,
	pgp.h, pgpinvoke.c, pgpkey.c, pgplib.c, pgplib.h, pgpmicalg.c,
	pgppacket.c, pgppacket.h, pgppubring.c, pop.c, pop.h,
	pop_auth.c, pop_lib.c, postpone.c, protos.h, mbyte.c, menu.c,
	mh.c, mime.h, missing, mutt.h, mutt_crypt.h, mutt_curses.h,
	mutt_idna.c, mutt_idna.h, mutt_menu.h, mutt_regex.h, mutt_sasl.c,
	mutt_sasl.h, mutt_socket.c, mutt_socket.h, mutt_ssl.c, mutt_ssl.h,
	mutt_ssl_gnutls.c, mutt_tunnel.c, mutt_tunnel.h, muttbug.sh.in,
	muttlib.c, mx.c, mx.h, pager.c, extlib.c, filter.c, flags.c,
	from.c, functions.h, globals.h, gnupgparse.c, handler.c, hash.c,
	hash.h, hcache.c, hdrline.c, headers.c, help.c, history.c,
	history.h, hook.c, init.c, init.h, keymap.c, keymap.h, lib.c,
	lib.h, mailbox.h, main.c, makedoc.c, mapping.h, mbox.c,
	dotlock.h, edit.c, editmsg.c, enter.c, copy.h, crypt-gpgme.c,
	crypt-gpgme.h, crypt-mod-pgp-classic.c, crypt-mod-pgp-gpgme.c,
	crypt-mod-smime-classic.c, crypt-mod-smime-gpgme.c, crypt-mod.c,
	crypt-mod.h, crypt.c, cryptglue.c, curs_lib.c, curs_main.c,
	date.c, depcomp, dotlock.c, COPYRIGHT, GPL, _regex.h, account.c,
	account.h, addrbook.c, alias.c, ascii.c, ascii.h, attach.c,
	attach.h, base64.c, browser.c, browser.h, buffy.c, buffy.h,
	charset.c, charset.h, color.c, commands.c, complete.c, compose.c,
	config.guess, config.sub, copy.c: Update FSF address (via sed,
	I hope nothing got mangled). Closes: #2071.

2005-09-17 17:39:18  Alain Bench  <veronatif@free.fr>  (brendan)

	* Muttrc.head.in: Clean up some Muttrc macros, and add macro
	'y' to jump to the mailboxes view. Closes: #2069.

2005-09-17 17:27:54  Brendan Cully  <brendan@kublai.com>  (brendan)

	* main.c: Some minor cleanups: tell users to go to bugs.mutt.org
	instead of using flea; update copyright year in mutt -v;
	reorganise USE opts a little; break long strings so that -pedantic
	stops complaining. Not sure that last one is worth the trouble
	it causes the po team...

2005-09-17 01:07:54  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: Update.

2005-09-16 23:09:12  Kevin Scannell  <scannell@slu.edu>  (brendan)

	* configure.in, po/ga.po: Irish translation.

2005-09-16 15:20:59  Brendan Cully  <brendan@kublai.com>  (brendan)

	* build-release, po/Makefile.in.in: Move update-po out of make
	dist, into build-release. It seems to me that make dist should do
	as little as possible beyond putting the right files in a tarball.

2005-09-16 13:43:58  Ronny Haryanto  <ronnylist@haryan.to>  (roessler)

	* po/id.po: update

2005-09-16 11:02:00  Ivan Vilata i Balaguer  <ivan@selidor.net>
(roessler)

	* po/ca.po: update

2005-09-16 10:20:20  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* po/ja.po: update

2005-09-16 10:19:46  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update

2005-09-16 02:15:45  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/Makefile.in: Add stamp-doc-xml to "all".

	* doc/Makefile.in: stamp-doc-man is pointless as far as I can
	tell. Removed.

	* doc/Makefile.in: Tweak makefile so that the dist tarball
	doesn't always try to build docs.

	* configure.in: VERSION should go into CONFIG_STATUS_DEPENDENCIES,
	not CONFIGURE_DEPENDENCIES. Slap ma fro.

2005-09-15 23:18:48  Brendan Cully  <brendan@kublai.com>  (brendan)

	* Makefile.am, build-release: Move changelog target to
	update-changelog so that dist won't automatically invoke it,
	and have commit and build-release call it.

	* build-release: Now that 1.5.11 is out, previous versions won't
	be x.y.zi: adjust diff.

2005-09-15 14:24:39  roessler  (roessler)

	* po/zh_TW.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po,
	po/eo.po, po/es.po, po/et.po, po/fr.po, po/gl.po, po/hu.po,
	po/id.po, po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po,
	po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po, po/zh_CN.po, VERSION, po/bg.po, reldate.h: automatic
	post-release commit for mutt-1.5.11

2005-09-14 14:15:06  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* init.h: Refer to $use_envelope_from rather than old
	$envelope_from in description of $envelope_from_address.

2005-09-14 02:45:44  Brendan Cully  <brendan@kublai.com>  (brendan)

	* globals.h, init.h, sendlib.c: Add new $envelope_from_address
	variable for manually specifying the envelope sender. Rename (with
	compatibility synonym) $envelope_from to $use_envelope_from. Make
	$envelope_from subordinate to $use_e_f, as $from is to
	$use_from. From a discussion with TLR.

2005-09-13 20:36:17  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/Makefile.in: Put chunked HTML manual in top doc directory
	instead of HTML subdirectory.  Solves a weird $distdir
	absolute/relative path nuisance.

2005-09-12 06:22:21  Brendan Cully  <brendan@kublai.com>  (brendan)

	* curs_lib.c, pop.c, pop.h, pop_lib.c: Teach pop driver about
	mutt_progress_bar. Allow progress bar to omit total size if zero
	(=unknown).

2005-09-10 18:47:17  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* menu.c: Correct some inconsistencies introduced by
	$menu_context. Closes: #2019?

2005-09-10 06:02:04  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c, curs_lib.c: A pair of small optimisations to the
	progress bar.

2005-09-08 16:37:59  Brendan Cully  <brendan@kublai.com>  (brendan)

	* pager.c: Revert bogus change to last message detection in
	mutt_pager.

	* pager.c: Forget line number when resolving in pager. This
	is beginning to get messy - maybe it would be better to only
	remember on specific operations like sync.

	* mutt_socket.c: Set CLOEXEC on sockets in IPv4 code path like
	we do in IPv6.

	* pattern.c: Make stringmatch pattern detection stateless.

	* curs_lib.c: ifdef USE_SOCKET around mutt_progress_bar.

2005-09-08 07:09:46  Bernd Ahlers  <bernd@ba-net.org>  (brendan)

	* po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po, po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po,
	po/pl.po, po/pt_BR.po, po/ru.po, po/da.po, po/de.po, po/el.po,
	po/eo.po, po/es.po, po/et.po, po/fr.po, po/gl.po, po/hu.po,
	po/id.po, po/ca.po, po/cs.po: Correct some S/MIME po entries.

2005-09-07 08:01:59  Brendan Cully  <brendan@kublai.com>  (brendan)

	* curs_lib.c: Ensure progress bar rounds to $net_inc.

	* curs_lib.c, globals.h, imap/imap.c, imap/imap_private.h,
	imap/message.c, init.h, mutt_curses.h: Display progress meter
	when uploading/fetching IMAP data. Closes: #1772.

	* pager.c: Adjust gross hack to return to the same line in the
	pager after an index operation so that it doesn't shoot past the
	end of the file if there are fewer lines on return (eg when weed
	is set).

	* mx.c, pgp.c: Silence some GCC warnings about uninitialized
	variables.

	* build-release, configure.in, mutt.h: Remove international
	vs. U.S. distribution distinction. build-release expects the
	previous version to be x.y.zi and should be updated again
	for 1.5.12.

2005-09-06 16:46:44  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/manual.xml.head: More documentation cosmetics (newlines
	between Usage: lines).

	* pager.c: Gross hack to return to the same line in the pager
	after executing an index function. Closes: #1210.

	* doc/manual.xml.head, imap/command.c, imap/imap.c, imap/imap.h,
	init.c, mutt.h, pattern.c: Extend pattern language to do simple
	string matches as well as regular expressions when the pattern
	is invoked with = instead of ~. And, when possible, perform
	full body searches on the IMAP server instead of locally, for
	an enormous speed boost.

	* imap/utf7.c, init.c, main.c, protos.h: Fix a memory leak in
	imap_utf7_decode and do a little cleanup on shutdown.  Get a
	high five from valgrind.

	* curs_main.c, main.c: Move SASL and IMAP shutdown hooks into
	main where they belong.

	* init.c: Release pwent after extracting data from it.

	* mutt_sasl.h, curs_main.c, mutt_sasl.c: Release global SASL
	state when quitting.

2005-09-05 04:22:45  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/manual.xml.head: Documentation cosmetics (add some line
	breaks).

2005-09-04 20:10:25  Brendan Cully  <brendan@kublai.com>  (brendan)

	* init.h: Point $hide_top_limited to $hide_limited instead of
	$hide_missing. Likewise for $hide_top_missing. Closes: #2039.

	* init.h: Mention $sort_re in $strict_threads
	documentation. Closes: #2052.

	* doc/manual.xml.head: Add a push example. Closes: #1591.

2005-09-04 19:46:26  Rupert Levene  <rupert@levene.dyndns.org>	(brendan)

	* doc/manual.xml.head: Mention $include when describing how mutt
	prepares message replies. Closes: #1471.

2005-09-04 19:28:19  Dale Woolridge  (brendan)

	* pattern.c, protos.h, parse.c: Unfold message headers before
	performing ~h search. Closes: #1865.

2005-09-04 18:01:57  Zardoz@users.sourceforge.net  (brendan)

	* keymap.c: Teach keymap.c about KEY_NEXT. Closes: #1588.

2005-09-04 06:57:04  Alain Bench  <veronatif@free.fr>  (brendan)

	* doc/manual.xml.head, doc/manual.xml.tail: Note that <Tab>
	is bound to next-new-then-unread by default, rather than
	next-new. Closes: #1637.

	* curs_main.c, pattern.c: Allow empty limits, and limits in
	empty mailboxes. Closes: #1853, #1906.

2005-09-03 23:22:31  Brendan Cully  <brendan@kublai.com>  (brendan)

	* send.c, attach.c: Note when mutt_edit_attachment fails and
	display error instead of prompting to abort an unmodified
	file. Closes: #2051.

2005-09-03 19:41:53  Alain Bench  <veronatif@free.fr>  (brendan)

	* contrib/gpg.rc: One should let GnuPG charset be automatically
	infered from whatever current locale, without hardcoding.

2005-09-03 04:34:25  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/manual.xml.head: Just use EXPR as a place holder for regular
	expressions, instead of any of EXPR, USER, ID and SUBJECT. Noted
	by Vincent Lefevre.

2005-09-02 18:50:34  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/manual.sgml.head, doc/manual.sgml.tail, doc/manual.xml.head,
	doc/manual.xml.tail, doc/Makefile.in: Rename manual.sgml.*
	to manual.xml.*.

2005-09-02 18:18:19  Alain Bench  <veronatif@free.fr>  (brendan)

	* keymap.c: Allow non-ascii characters in push arguments. Closes:
	#2023.

	* doc/manual.sgml.head, doc/muttrc.man.head, mutt.h, pattern.c:
	Adjust ~l to match all known lists, add ~u to match only
	subscribed lists.  Normalise pattern ordering in docs. Closes:
	#2050.

2005-09-01 17:07:14  Brendan Cully  <brendan@kublai.com>  (brendan)

	* configure.in, imap/auth_sasl.c, main.c, mutt_sasl.c,
	mutt_sasl.h, pop_auth.c: Remove obsolete Cyrus SASL 1.5 support.

	* doc/chunk.xsl, doc/html.xsl: Docbook support files, dropped
	in the initial commit.

	* doc/manual.sgml.tail, configure.in, doc/Makefile.in,
	doc/manual.sgml.head, makedoc.c: Convert documentation from
	linuxdoc to docbook format. Let the bug avalanche begin.

2005-08-30 21:34:36  Lars Hecking  <lhecking@users.sourceforge.net>
(brendan)

	* configure.in: Don't define domain="no" when configured
	--without-domain. Closes: #2046.

2005-08-24 15:17:43  Brendan Cully  <brendan@kublai.com>  (brendan)

	* pgp.c: Don't treat PGP inline signature verification errors
	as fatal.

2005-08-22 20:30:11  Brendan Cully  <brendan@kublai.com>  (brendan)

	* pgp.c: Pause after error message if PGP decode fails, in case
	mutt_copy_message overwrites.  Real error handling cleanup will
	have to wait...

	* pgp.c: Don't attempt to manipulate null pgp output file handles.

2005-08-16 18:10:11  Paul Walker  <paul@black-sun.demon.co.uk>	(brendan)

	* doc/manual.sgml.head, doc/mutt.man, main.c: -D dumps to stdout,
	not stderr.

2005-08-15 08:10:48  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* po/id.po: Fix \n mismatch.

2005-08-15 08:07:36  Ronny Haryanto  <ronnylist@haryan.to>  (roessler)

	* po/id.po: update

2005-08-15 08:06:40  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* po/ru.po: update

2005-08-14 21:32:17  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* attach.c, send.c: Don't pass an empty filename to the default
	text editor when editing non-plain text. Also don't clobber
	$content_type when parsing it.	Closes: #2038.

2005-08-14 12:28:52  Roland Rosenfeld  <roland@spinnaker.de>  (roessler)

	* po/de.po: update

2005-08-14 02:22:47  Bernd Ahlers  <bernd@ba-net.org>  (brendan)

	* cryptglue.c, mutt_sasl.c, smime.c: Fix some S/MIME spelling
	inconsistencies.

2005-08-12 23:06:25  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mutt_ssl_gnutls.c: Turn off input buffering for gnutls SSL
	certificate menu, as we do in the openssl version.

	* imap/auth_sasl.c: Override SASL initial response if the server
	spoke first in its continuation response. Closes: #2034.

	* doc/Makefile.in: Degnuify mutt.1 make rule. Imagining a world
	in which gnu documentation flagged any extensions to standard
	utilities almost makes me cry.

2005-08-12 12:52:11  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* po/ja.po: update

2005-08-12 07:49:37  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: Update.

2005-08-12 03:57:16  Brendan Cully  <brendan@kublai.com>  (brendan)

	* configure.in: Force configure to depend on VERSION. That's
	been bugging me for a while.

2005-08-11 21:46:26  roessler  (roessler)

	* po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po, po/zh_CN.po, po/zh_TW.po, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/fr.po, po/gl.po, po/hu.po, po/id.po, po/it.po, po/ja.po,
	po/ko.po, po/lt.po, po/nl.po: automatic post-release commit
	for mutt-1.5.10

2005-08-11 21:22:41  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am, VERSION, reldate.h: Fix Makefile.am.

2005-08-11 21:16:38  Brendan Cully  <brendan@kublai.com>  (brendan)

	* copy.c, crypt-gpgme.c, crypt-gpgme.h, crypt-mod-pgp-classic.c,
	crypt-mod-pgp-gpgme.c, crypt-mod-smime-classic.c,
	crypt-mod-smime-gpgme.c, crypt-mod.h, crypt.c, cryptglue.c,
	handler.c, mutt_crypt.h, pgp.c, pgp.h, protos.h, smime.c, smime.h:
	Add error results to mutt_body_handlers, and check them when
	doing decode-save. Closes: #1919.

2005-08-11 21:08:55  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Fix verification of clearsigned PGP messages.
	(debugged on IRC, mostly by Brendan)

2005-08-11 02:15:14  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(brendan)

	* configure.in: Don't test against nonexistent cache
	variable. Spotted by Torsten Veller.

2005-08-11 01:44:49  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mutt_sasl.c: Silence some compiler warnings.

2005-08-09 20:13:03  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/Makefile.in, doc/manual.sgml.tail: Replace raw latin1
	characters with entities, and enable latin output for
	manual.txt. I'm not sure this is ideal for non-latin (eg
	utf8) environments, but hopefully docbook will resolve this
	anyway. Closes: #2029.

	* doc/manual.sgml.head: Replace free ~ with &tilde;. Closes:
	#2030.

	* pgp.c: Move pgp failure check inside the if (invoke pgp)
	block. Should really Close: 2032.

	* pgp.c: Don't ftell pgp output file if there isn't one. Closes:
	#2032.

2005-08-09 16:24:15  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* crypt-gpgme.c: Improve translatability of crypt-gpgme. Closes:
	#2020.

2005-08-09 16:10:40  Mads Martin Joergensen  <mmj@suse.de>  (brendan)

	* copy.c: Remove an unneeded cast, which introduces
	type-punning. Modified to use FREE instead of safe_free, since
	that seems to be the convention. I personally don't see the point.

2005-08-08 18:59:43  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mutt_socket.c: Pause for a moment when a hostname fails to
	resolve. Closes #1942.	There are a number of cases where mutt
	cascades error messages. It might be nice if there were an error
	stack so that low level functions could push_error instead of
	displaying it right away, and the higher level ones could eg
	mutt_message(_("Failed to write FCC: %s"), pop_error ())...

	* main.c: Document -d option in mutt -h output. Closes #2027.

	* init.h: Remove undefined reference to unmailboxes
	command. Closes #2028.

	* imap/imap.c: Fix edge case where we might have to wait two
	timeouts to check for IMAP mail.

	* imap/command.c, imap/imap.c, init.h: Fix bug just introduced
	in lsub parsing that could cause mutt to loop indefinitely.
	Don't recheck subscriptions at every mailbox change, just the
	initial connection.

	* imap/imap.c: If imap_check_subscribed is set, mailbox or
	unmailbox folders in response to subscribe/unsubscribe commands
	in the browser.

2005-08-07 23:52:08  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/browse.c, imap/command.c, imap/imap.c, init.h, mutt.h:
	New option: $imap_check_subscribed. If set, mutt will fetch the
	set of subscribed mailboxes from the server and add them to the
	buffy list.

	* browser.c: Avoid a segfault attempting to browse an invalid
	IMAP URL.

	* imap/imap.c: Extend IMAP host completion to complete over open
	connections. Next up: account and folder hooks.

	* imap/imap.c: Allow IMAP tab-completion to complete over
	defined mailboxes, saving a bunch of typing for the hostname
	part of the URL. Should probably be extended to complete over
	open connections and possibly also folder/account hooks.

	* account.c, curs_lib.c, protos.h: Reuse mutt_get_field for
	mutt_get_field_unbuffered.

2005-08-07 06:20:37  Anders Helmersson
<anders.helmersson.utsikt@wasadata.net>  (brendan)

	* pager.c: Certain versions of libc may segfault during regex
	processing if given incomplete multibyte characters. Work around
	this by manually trimming the display buffer. I modified it
	somewhat to only check when the situation is most likely to occur:
	fgets has read all the way to the capacity of the buffer. Thanks
	also to Tamo for his comments.

2005-08-07 04:58:12  Brendan Cully  <brendan@kublai.com>  (brendan)

	* account.c, curs_lib.c, protos.h: Make username prompts
	unbuffered like password prompts are (no more folder-hook push
	garbage)

2005-08-06 22:20:55  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c, lib.c, lib.h, mutt.h, mutt_tunnel.c, sendlib.c:
	Report non-zero exit status of tunnel command. Closes: #1749.

	* imap/imap.c, imap/util.c, init.h, mutt.h, pop_lib.c: Replace
	pointless imap_force_ssl option with ssl_force_tls, which
	requires any connection (POP or IMAP) to a remote server to
	be encrypted, and attempts to negotiate encryption even if the
	capability isn't advertised (this last bit is of dubious utility,
	but essentially harmless since the connection would otherwise
	fail anyway). Closes: #1284.

	* imap/browse.c: Kill a warning.

	* init.c: Use isalnum instead of isalpha when parsing unbraced
	environment variable names, per tamo's suggestion. Closes #2022.

2005-08-05 02:16:46  Brendan Cully  <brendan@kublai.com>  (brendan)

	* attach.c, attach.h, browser.c, curs_main.c, mutt.h, mutt_menu.h,
	pager.h, protos.h: Move some attachment-related prototypes and
	structures into attach.h from the global headers. A small step
	towards sane dependency tracking and code cleanliness.

2005-08-04 01:15:52  brendan  (brendan)

	* compose.c: Don't unlink non-mutt files that would have been
	unlinked on send if the message is cancelled.

2005-08-03 15:34:14  Brendan Cully  <brendan@kublai.com>  (brendan)

	* account.c: Fix C precedence buglet in getlogin preventing it
	from actually calling getuser.

	* mutt_ssl.c: Don't double-free X509 certificates. This patch
	looks wrong, but it isn't.

2005-08-02 18:15:33  Brendan Cully  <brendan@kublai.com>  (brendan)

	* Makefile.am, po/Makefile.in.in, po/POTFILES.in: Remove
	mutt_ssl_nss.c from POTFILES.in. Also hack the makefiles to build
	keymap_alldefs.h in $(top_srcdir), since that's where xgettext
	looks. Not super clean I guess - the other alternative is to
	sed POTFILES.

	* globals.h, init.c, init.h, mutt.h, mutt_sasl.c, mutt_socket.c,
	mutt_ssl.h, mutt_ssl_nss.c, pop_lib.c, configure.in: Put moribund
	NSS support out to pasture.

	* compose.c, mutt.h: In compose menu, detach should be able to
	unlink files generated by mutt, but not files that existed before.

	* commands.c, pgp.c: More fiddling with PGP results. When
	rerunning PGP on a message, clear old security result bits to
	avoid confusing messages like 'decrypt failed; PGP signature
	successfully verified'.

	* pgp.c: Forget passphrase on PGP/inline decryption error,
	and improve status line messages.

	* configure.in: Make $docdir relative to $prefix, like the
	other prefixes.

	* contrib/Makefile.in, doc/Makefile.in: Be more selective about
	what to remove during uninstall. (closes #1625)

	* pgp.c: Also forget passphrase when encrypt fails, if
	signing. (closes #1025 again)

	* imap/message.c: Check that the entire message downloaded
	successfully on fetch, and don't treat a disappearing cache file
	as fatal. (closes #1483)

	* compose.c: Don't unlink attachments that you've decided not
	to send. (closes #1328)

	* pgp.c: Bump up size of PgpPass to 1024 from 256. Seems crazy,
	but it's harmless and it (closes #1207).

	* account.c: Fix password prompt for POP (more authentication
	ID fallout).

2005-08-01 22:37:22  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/manual.sgml.head: Document <backtab> key.

	* pgp.c: Automatically forget PGP passphrase on sign or decrypt
	error. (closes #1025)

	* pgp.c: Display "successfully decrypted" message instead of
	nothing. Superseded by signature verification.

	* commands.c, pgp.c: Don't report PGP signature could not be
	verified unless there really is a signature verification problem
	(not some other PGP error).

	* Makefile.am: Install system muttrc from the build directory,
	not the source directory.

	* mbox.c: Restore Sort immediately after sorting by mailbox
	order in mbox_sync_mailbox.  (closes #972)

	* doc/Makefile.in, doc/mutt.man: Insert compile-time paths to
	system resources into mutt.man. (closes #854)

	* commands.c, protos.h: Report errors occuring in
	_mutt_save_message. (closes #847)

	* globals.h, mutt.h, mutt_ssl.c, muttlib.c: Cache SSL certificates
	that have been accepted but not saved until mutt exits. (closes
	#643).	Create mutt_add_list_n for adding non-character data to
	lists, have mutt_add_list call it.

	* mx.c: Report error creating FCC when writing to IMAP
	server. Addresses #423.

	* init.c: complete :set mbox_type=<tab>. (closes #1649)

2005-07-30 04:40:45  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* pager.c: The builtin pager tries to wrap a line for ever if:
	0) the line contains a space or a tab character
	 followed by a very long word, and 1) M_PAGER_NSKIP flag is
	passed to it, and 2) $smart_wrap is set. (default)

2005-07-30 04:13:07  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* curs_main.c, pager.c: When using colors, the status line of
	the index is displayed in a >bright color, even when the prefix
	"bright" is *not* given in the foreground color. The problem
	occurs when I have the following additional line:
	  color normal brightwhite black The problem is that BKGDSET's
	are missing.

2005-07-30 03:59:04  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* recvattach.c: Don't refuse to delete attachments just because a
	message has been checked for "traditional" PGP encoding. (closes
	#2013)

2005-07-29 18:05:50  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* init.c: "nospam foo" causes a segv if you have not set any
	"spam", because of a null pointer dereference.

2005-07-29 06:45:14  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mutt_ssl_gnutls.c: Tweak a poorly-worded error message in the
	gnutls glue, pointed out by Vincent Lefevre.

	* imap/imap.c: Fix bug added in revision 3.26, where
	imap_sync_mailbox failed to check whether it was supposed to
	expunge before issuing a CLOSE.

2005-07-28 20:42:45  ttakah@lapis.plala.or.jp  (roessler)

	* crypt-gpgme.c: Fix mutt/2004; S/MIME user interface differences
	between GPGME and classic.

2005-07-28 19:47:40  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/auth_cram.c, imap/auth_login.c: Use mutt_account_getlogin
	instead of getuser for authentication methods that only support
	an authentication ID. As a side-effect, don't display a dangling
	authentication name pointer in getpass.

2005-07-27 15:08:43  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* crypt-gpgme.c: Correct two typos in GPGME error messages.

2005-07-27 05:53:27  Brendan Cully  <brendan@kublai.com>  (brendan)

	* po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/es.po,
	po/et.po, po/gl.po, po/lt.po, po/pt_BR.po, po/sk.po: Update
	Thomas' address in several out-of-date PO files. (closes #990)

	* mutt_ssl_gnutls.c: Silence some harmless warnings. Also,
	one day -pedantic is going to get held up on the causeway.

	* imap/command.c: More fiddling with fatal state handling. Not
	tested, and probably as wrong as what was already there.

	* muttlib.c: Rework mutt_save_confirm to support confirmappend
	with IMAP mailboxes.  I hope I got all cases right.

2005-07-26 23:57:38  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c: Adjust imap_access so that it doesn't issue STATUS
	on the selected mailbox, and have imap_open_mailbox_append use
	imap_access instead of rolling its own.

2005-07-26 18:45:01  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* crypt-gpgme.c, mutt_ssl_gnutls.c, po/POTFILES.in: Partial
	application of Tamo's translation patch for gpgme and gnutls.

2005-07-26 16:44:20  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/imap.c: Don't check for the existence of a mailbox we're
	already in when appending.  (closes #1842)

2005-07-26 16:40:16  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* init.h: Return $menu_move_off default to status quo ante.

	* init.h: hcache spelling fixes

2005-07-26 16:37:28  Tamotsu Takahashi	<ttakah@lapis.plala.or.jp>
(roessler)

	* enter.c: Introduce fall-back from complete-query to complete
	for the edit menu, so 'bind editor <tab> complete-query'
	becomes possible.

2005-07-26 06:14:34  "Brent J. Nordquist"  <brent@nordist.net>	(brendan)

	* doc/manual.sgml.head: Correct a couple of typos (and change
	&hyphen; to -: although the text version of the manual renders
	&hyphen;, the web version does not).

2005-07-26 05:58:29  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* pattern.c: Interpret an empty limit as a request to cancel
	the current limit.  (Closes #1854)

2005-07-26 05:28:02  Brendan Cully  <brendan@kublai.com>  (brendan)

	* mutt_ssl.c: Don't offer to save expired or not-yet-valid
	certificates. Closes #1943 as a side-effect.

	* imap/imap.c, imap/imap_private.h: Rework IMAP CLOSE handling
	to avoid expunging messages when exiting without saving
	changes. (closes #1899)

2005-07-26 03:09:55  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>
(brendan)

	* mbyte.c, mutt_socket.c: There are some functions without ANSI
	prototypes left in mutt-owned sources.

2005-07-25 20:07:23  Brendan Cully  <brendan@kublai.com>  (brendan)

	* init.h: Update _MAKEDOC macro so that the documentation includes
	all variables.

2005-07-25 15:48:36  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* copy.c, imap/imap.c, mh.c, mutt.h, muttlib.c, thread.c: Get rid
	of IMAP-related special casing all over the thread editing code.

2005-07-25 04:56:38  brendan  (brendan)

	* imap/message.c: Indentation, mostly

2005-07-25 04:37:20  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/message.c: Minor cosmetic cleanup (fewer #ifdef HCACHE
	blocks)

2005-07-25 04:31:51  brendan  (brendan)

	* muttlib.c: Suppress a printf format warning

2005-07-24 18:33:31  Brendan Cully  <brendan@kublai.com>  (brendan)

	* muttlib.c: Typo in last commit.

	* imap/message.c, muttlib.c, protos.h: Merge full envelope from
	message fetch into original sparse envelope, instead of replacing
	it. This should be gentler on the various threading hashes and may
	(knock on wood) fix the threading segfault. Threading behaviour
	is observably better.

2005-07-24 18:18:29  brendan  (brendan)

	* imap/util.c: Revert Glanzmann's imap_parse_mailbox patch.

2005-07-24 16:53:59  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* thread.c: Try to fix threading bug triggered by duplicate
	references.

2005-07-24 16:51:38  Cedric Duval  <cedricduval+web@free.fr>  (brendan)

	* OPS, copy.c, curs_main.c, doc/manual.sgml.head, functions.h,
	imap/imap.c, mh.c, mutt.h, mx.c, pager.c, protos.h, thread.c:
	Add thread editing commands.

2005-07-24 16:12:12  Paul Walker  <paul@black-sun.demon.co.uk>	(roessler)

	* doc/manual.sgml.head, main.c, protos.h, init.c: This patch
	adds an option -D to dump mutt's configuration after all
	configuration files have been read.  Changes against PW's version:
	(1) curses isn't initialized; (2) variables are dumped to stdout,
	not to stderr.

2005-07-24 15:46:26  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* hash.c, imap/message.c, imap/util.c: This patch includes (1)
	a rewrite of hash_delete_hash, and (2) some changes to the IMAP
	code that Thomas Glanzmann made during an attempt to squash some
	segmentation fault in May.  There is no guarantee that this patch
	doesn't break things.  If it does, please complain to mutt-dev.

	* recvattach.c, smime.c: Fix S/MIME segmentation fault.  Bug
	reported by Mads Martin Joergensen; part fixed by Brendan Cully.

2005-07-24 08:59:44  Brendan Cully  <brendan@kublai.com>  (brendan)

	* copy.c: Don't assume messages in MMDF mailboxes have From
	separators when copying them.  Spotted by William Lovas. Initial
	patch by TAKAHASHI Tamotsu.

2005-07-23 23:35:17  Byrial Jensen  <byrial@image.dk>  (brendan)

	* curs_main.c, doc/manual.sgml.head, globals.h, main.c, muttlib.c:
	This is the current shortcut patch patch by Byrial Ole Jensen
	<byrial@image.dk>, updated by Christoph Berg <cb@df7cb.de>.

2005-07-17 00:43:05  Brendan Cully  <brendan@kublai.com>  (brendan)

	* account.c: Don't dereference null ImapUser in new getlogin
	function.

2005-07-15 07:29:37  Vincent Lefevre  <vincent@vinc17.org>  (brendan)

	* po/fr.po: PO update 20050613.

2005-07-06 23:49:08  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(brendan)

	* BEWARE: this fixes a little typo.

2005-07-06 21:03:00  Brendan Cully  <brendan@kublai.com>  (brendan)

	* hcache.c: Apply Aaron Crane's function pointer bandaid to the
	db4 open calls.

2005-06-28 19:26:54  Brendan Cully  <brendan@kublai.com>  (brendan)

	* account.c, account.h, globals.h, init.h, mutt_sasl.c: Add
	$imap_login variable to specify which user to authenticate as
	($imap_user controls which user's mail gets accessed). Currently
	this can't be specified interactively, since I can't think of
	a way to do it that wouldn't annoy users where login == user
	(the default value of $imap_login).

2005-06-24 22:32:38  Sébastien Hinderer  <Sebastien.Hinderer@libertysurf.fr>  (brendan)

	* crypt.c: Remove a warning about unused variable 'now' in
	crypt_valid_passphrase

2005-06-22 01:46:49  Sébastien Hinderer  <Sebastien.Hinderer@libertysurf.fr>  (brendan)

	* doc/devel-notes.txt: This patch fixes two small typos in
	dev notes.

2005-06-18 04:54:39  Brendan Cully  <brendan@kublai.com>  (brendan)

	* main.c: Update copyright dates according to latest activity
	in ChangeLog.

2005-06-12 18:28:29  Tamotsu Takahashi	<ttakah@lapis.plala.or.jp>
(roessler)

	* menu.c: Fix background colors for $arrow_cursor.

2005-06-12 18:24:31  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* curs_main.c, init.h, menu.c, mutt.h: Add $braille_friendly.
	Behavior originally suggested by Sébastien Hinderer
	<Sebastien.Hinderer@libertysurf.fr>.

2005-04-10 09:37:51  Johan Svedberg  <johan@svedberg.pp.se>  (roessler)

	* po/sv.po: update

2005-04-03 00:14:51  Daniel Jacobowitz	<dan@debian.org>  (brendan)

	* imap/imap.c, imap/imap_private.h, imap/message.c: Synchronise
	message flags before moving messages.

2005-03-31 04:55:09  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(brendan)

	* mh.c: Another hcache cygwin portability fix.

2005-03-23 10:51:11  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* init.h, mh.c, mutt.h: Maildir header cache.

2005-03-22 19:58:15  Horst Schirmeier  <horst@schirmeier.com>  (roessler)

	* Makefile.am: Use install-exec-hook install of
	install-exec-local.

2005-03-22 19:53:49  Ronny Haryanto  <ronnylist@haryan.to>  (roessler)

	* po/id.po: update

2005-03-22 19:49:31  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update

2005-03-22 19:48:35  Roland Rosenfeld  <roland@spinnaker.de>  (roessler)

	* po/de.po: update

2005-03-22 19:46:59  Paul Walker  <paul@black-sun.demon.co.uk>	(roessler)

	* init.c, init.h: remove some unused functions.

2005-03-22 19:43:13  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* po/ru.po: update

2005-03-22 03:40:54  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(brendan)

	* hcache.c, imap/imap.c, imap/imap_private.h, imap/message.c,
	protos.h: Thomas graces us with this patch that resolves a
	type-size inconsistency in the UIDVALIDITY parser.

	Edited for correctness.

2005-03-17 09:30:06  Pawel Dziekonski  <pawel.dziekonski@pwr.wroc.pl>
(roessler)

	* po/pl.po: update

2005-03-16 07:01:59  Brendan Cully  <brendan@kublai.com>  (brendan)

	* doc/Makefile.in: As Ralf Wildenhues noted, the cygwin EXEEXT
	patch was incomplete. Note to self: avoid patching on short
	sleep. Starting tomorrow.

	* configure.in, doc/Makefile.in, hcache.c, Makefile.am: Various
	cygwin portability fixes

2005-03-15 04:40:40  Brendan Cully  <brendan@kublai.com>  (brendan)

	* crypthash.h: Don't define uint32_t anywhere but in
	config.h. Spotted by Alain Bench.

2005-03-13 16:35:35  roessler  (roessler)

	* po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po,
	po/id.po, po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po,
	po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po, VERSION, po/bg.po,
	po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/eo.po,
	po/es.po, po/et.po, po/fr.po, po/gl.po, po/hu.po, reldate.h:
	automatic post-release commit for mutt-1.5.9

2005-03-13 16:29:09  Morten Bo Johansen  <mojo@mbjnet.dk>  (roessler)

	* po/da.po: update

2005-03-05 18:15:20  Christoph Ludwig
<cludwig@cdc.informatik.tu-darmstadt.de>  (roessler)

	* crypt.c: The attached patch fixes a segfault I observed
	today: mutt failed to check for a possible null pointer in
	mutt_is_application_smime(Body*).

2005-03-05 07:10:57  brendan  (brendan)

	* mutt_sasl.c, mutt_sasl.h, mutt_socket.c, mutt_socket.h,
	mutt_ssl.c, mutt_ssl_gnutls.c, mutt_ssl_nss.c, mutt_tunnel.c:
	Rename open/close/read/write function pointers to avoid problems
	with systems where standard open/close/read/write functions are
	implemented with macros.  Thanks to Aaron Crane and others for
	their input about the problem.

2005-03-01 15:53:25  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* po/ru.po: update

2005-03-01 15:52:33  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* init.h: This is a spelling fix supplied by Cameron Simpson.

2005-02-28 18:33:45  Mads Martin Joergensen  <mmj@suse.de>  (roessler)

	* curs_main.c: Fix a crash.

2005-02-28 15:15:23  Christoph Berg  <cb@df7cb.de>  (roessler)

	* init.h, menu.c, mutt.h: I've updated the menu_context patch to
	reintroduce the menu_move_off variable that hasn't made it into
	1.5.8. The patch fixes menu_prev_line and menu_next_line which
	didn't work with menu_context > 0 and also makes <current-middle>
	work even if there are less messages than screen lines (thanks
	to René Clerc and Vincent Lefevre for spotting these issues).

2005-02-28 14:37:09  Udo Schweigert  <mutt@cert.siemens.de>  (roessler)

	* smime.c: As pointed out in a separate thread, here is a patch
	which fixes the problem of a failing openssl after interactively
	selecting a recipient's key.

2005-02-27 03:18:23  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/message.c: Turn brain back on before committing patches
	(that modification I made to APPEND was bogus).

2005-02-27 02:44:45  Dan Hopper  <ku4nf@austin.rr.com>	(brendan)

	* imap/message.c: Don't lose N flag when uploading a message to
	an IMAP mailbox.  (Slightly modified from the original patch to
	prevent spurious space characters).

2005-02-21 04:42:34  Alain Bench  <messtic@oreka.com>  (roessler)

	* parse.c, pgp.c, sendlib.c: Bcc should be RFC2047-encoded, too.

2005-02-19 16:00:24  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* sendlib.c: Fix Debian 295528.

2005-02-17 03:33:00  Brendan Cully  <brendan@kublai.com>  (brendan)

	* OPS, browser.c, doc/manual.sgml.head, functions.h,
	imap/browse.c, imap/imap.c, imap/imap.h, imap/imap_private.h:
	New function: rename-mailbox (bound to 'r' by default).

	The lack of a rename-mailbox command for IMAP finally got too
	annoying.  It's a bit of a cut-and-paste job, but I've put my
	dreams of cleaning up the IMAP codebase on hold. Gotta grow up
	some time.

2005-02-16 09:34:06  ta_panta_rei  <7vvtch802@sneakemail.com>  (roessler)

	* po/el.po: update

2005-02-16 08:48:41  Ronny Haryanto  <ronnylist@haryan.to>  (roessler)

	* po/id.po: update

2005-02-15 19:28:24  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/Makefile.in: Fix linuxdoc invocation.  Thanks to
	Tamotsu Takahashi for tracking this down to an idiotic
	non-backwards-compatible change to the way groff works.

2005-02-15 19:03:51  Ivan Vilata i Balaguer  <ivan@selidor.net>
(roessler)

	* po/ca.po: update

2005-02-14 08:48:43  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2005-02-13 17:37:31  Roland Rosenfeld  <roland@spinnaker.de>  (roessler)

	* po/de.po: update

2005-02-13 09:53:07  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: Include crypt-gpgme.h with the distribution.

2005-02-13 00:25:37  Brendan Cully  <brendan@kublai.com>  (brendan)

	* configure.in, m4/gettext.m4, m4/iconv.m4: Use AC_HELP_STRING
	to pretty print configure --help screen, with mixed results.

2005-02-12 21:04:22  Brendan Cully  <brendan@kublai.com>  (brendan)

	* Makefile.am, imap/Makefile.am: Require at least automake 1.6

2005-02-12 20:56:36  roessler  (roessler)

	* po/zh_TW.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/pt_BR.po, po/ru.po, po/lt.po, po/nl.po, po/pl.po,
	po/et.po, po/fr.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/da.po, po/de.po, po/el.po, po/eo.po,
	po/es.po, Makefile.am, VERSION, po/bg.po, po/ca.po, po/cs.po,
	reldate.h: automatic post-release commit for mutt-1.5.8

2005-02-12 20:46:48  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2005-02-12 20:45:36  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* po/ru.po: update

2005-02-12 20:20:42  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* configure.in: Give people more time to profile the inode
	sorting code; disabled by default for now.

	* globals.h, init.h, menu.c: Christoph Berg's menu_context,
	and a version of menu_move_off where that's not optional,
	but where mutt will just try to avoid moving off the bottom.
	Complain to mutt-dev if you want this to be optional.

2005-02-12 19:54:51  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(brendan)

	* imap/message.c, imap/util.c: Fix debian bug #275060 (editing
	on an imap server loses its flags).  Remove trailing delimiter
	from IMAP folder names.

2005-02-12 19:52:28  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* charset.c, mbyte.c: Recognize euc-jp-ms.  MORIYAMA Masayuki
	by way of TAKAHASHI Tamotsu.

2005-02-12 19:38:14  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* doc/manual.sgml.head, doc/manual.sgml.tail, init.h, main.c:
	Trivial documentation fixes (TAKAHASHI Tamotsu, Brendan Cully,
	Paul Walker, Derek Martin).

	* editmsg.c: Partially fix debian bug #275060 (editing a message
	in a mbox loses its flags).

	* TODO: We have $include_onlyfirst.

2005-02-12 19:28:26  TAKIZAWA Takashi  <taki@luna.email.ne.jp>	(roessler)

	* muttlib.c, pager.c: column-length and byte-length are different

2005-02-12 19:19:25  Derek Martin  <invalid@pizzashack.org>  (roessler)

	* mutt.h, commands.c, curs_main.c, init.h: pgp-auto-decode: When
	$pgp_auto_decode is set, then mutt will check for traditional
	pgp on certain operations.  This is similar (but NOT identical)
	to the behavior known from PGP/MIME messages.

2005-02-12 19:12:40  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* alias.c, doc/manual.sgml.head, globals.h, hdrline.c, init.c,
	init.h: unalternates now also adds to a list of exceptions;
	same behavior for unlists, and unsubscribe.  With some changes
	from tlr.

2005-02-11 04:12:03  Brendan Cully  <brendan@kublai.com>  (brendan)

	* configure.in, m4/libgnutls.m4, mutt_ssl_gnutls.c: autoconf
	support for gnutls using a slightly modified version of gnutls'
	own libgnutls.m4

	* globals.h, init.h: Only enable ssl_client_cert for openssl
	(spotted by Adeodato).

2005-02-09 09:05:38  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pattern.c: Don't crash in mutt_pattern_exec when h->env is NULL.

2005-02-08 17:23:50  TAKAHASHI Tamotsu	<tamo@momonga-linux.org>
(roessler)

	* init.h, mutt.h, mutt_idna.c: Make IDN decoding optional.

2005-02-05 14:11:36  Thomas Roessler   <roessler@does-not-exist.org>
(roessler)

	* crypthash.h, imap/util.c, lib.h, mbyte.h, mutt_idna.h,
	patchlist.sh, remailer.h, rfc822.h: Remove a number of unnecessary
	config.h includes, and add some missing ones.  May fix some bugs.

2005-02-04 16:54:13  Brendan Cully  <brendan@kublai.com>  (brendan)

	* Makefile.am: Add smime_keys to EXTRA_SCRIPTS (for make dist).

2005-02-04 12:56:28  Tamotsu Takahashi	<ttakah@lapis.plala.or.jp>
(roessler)

	* Makefile.am: http://bugs.guug.de/db/17/1769.html This is
	necessary for FreeBSD.

2005-02-03 19:46:53  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* hcache.c: this is a fix for hcache.c infrastructure which is
	about wrongly calculate unique id

2005-02-03 18:44:27  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Fix PGP clear signature handling.

2005-02-03 17:01:44  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/auth.c, imap/auth_anon.c, imap/auth_cram.c,
	imap/auth_gss.c, imap/auth_login.c, imap/auth_sasl.c,
	imap/browse.c, imap/command.c, imap/imap.c, imap/message.c,
	imap/utf7.c, pgpkey.c, pgplib.c, pgpmicalg.c, pgppacket.c,
	pgppubring.c, pop.c, pop_auth.c, pop_lib.c, postpone.c,
	query.c, recvattach.c, recvcmd.c, regex.c, remailer.c,
	resize.c, rfc1524.c, rfc2047.c, rfc2231.c, rfc822.c, score.c,
	send.c, sendlib.c, sha1.c, signal.c, smime.c, snprintf.c,
	sort.c, status.c, system.c, thread.c, url.c, utf8.c,
	wcwidth.c, crypt-mod-pgp-classic.c, crypt-mod-pgp-gpgme.c,
	crypt-mod-smime-classic.c, crypt-mod-smime-gpgme.c, crypt-mod.c,
	crypt.c, cryptglue.c, curs_lib.c, curs_main.c, date.c,
	dotlock.c, edit.c, editmsg.c, enter.c, extlib.c, filter.c,
	flags.c, from.c, getdomain.c, gnupgparse.c, handler.c, hash.c,
	hdrline.c, headers.c, help.c, history.c, hook.c, init.c, keymap.c,
	lib.c, main.c, makedoc.c, mbox.c, mbyte.c, md5c.c, menu.c, mh.c,
	mutt.h, mutt_idna.c, mutt_sasl.c, mutt_socket.c, mutt_ssl.c,
	mutt_ssl_gnutls.c, mutt_ssl_nss.c, mutt_tunnel.c, muttlib.c,
	mx.c, pager.c, parse.c, pattern.c, pgp.c, pgpinvoke.c, account.c,
	addrbook.c, alias.c, ascii.c, attach.c, base64.c, browser.c,
	buffy.c, charset.c, color.c, commands.c, complete.c, compose.c,
	copy.c, crypt-gpgme.c: Add config.h to the top of every C file
	that could possibly want it.  Remove it from mutt.h

2005-02-01 03:36:39  Brendan Cully  <brendan@kublai.com>  (brendan)

	* imap/auth.c, imap/auth_anon.c, imap/auth_cram.c,
	imap/auth_gss.c, imap/auth_login.c, imap/auth_sasl.c,
	imap/browse.c, imap/command.c, imap/imap.c, imap/message.c,
	imap/utf7.c, protos.h: Pull config.h out of protos.h, add to
	top of every IMAP C file. This should probably be done to every
	C file, but the results need testing in case some files depend
	on the current (broken) includes.

2005-01-31 02:40:14  brendan  (brendan)

	* acconfig.h, configure.in, hcache.c, imap/imap_private.h,
	imap/message.c, m4/types.m4, protos.h: Begin removing deprecated
	autoconf 2.13 backward compatibility code.  Add AC_CHECK_TYPES
	macros for uin32/64 types, use uint64_t instead of long long in
	hcache code.

2005-01-29 19:15:07  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* hcache.c: - make hcache.c conform to mutt codingstyle - use $Id$
	CVS keyword instead of %K% BitKeeper keyword

2005-01-28 16:40:33  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Adeotato points out that feof() only works after a read.
	So, we now check for an unsuccessful fgetc().

2005-01-28 14:50:31  Paul Walker  <paul@black-sun.demon.co.uk>	(roessler)

	* signal.c: Trigger window resizing code when waking up from
	suspension.

2005-01-28 14:09:08  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update

2005-01-28 13:17:22  Werner Koch  <wk@gnupg.org>  (roessler)

	* Makefile.am, configure.in, crypt-gpgme.c, crypt-gpgme.h,
	crypt-mod-pgp-gpgme.c, crypt-mod-smime-gpgme.c, cryptglue.c,
	functions.h: gpgme integration.  See documentation for
	$crypt_use_gpgme, and http://www.gnupg.org/aegypten2/.

2005-01-28 13:00:36  Adeodato Simó  <asp16@alu.ua.es>  (roessler)

	* mutt_ssl_gnutls.c: The attached mini-patch from David Mosberger
	<davidm@napali.hpl.hp.com> seems to fix a segfault in the ia64
	architecture. Via Debian Bug#285001.

2005-01-28 10:01:30  roessler  (roessler)

	* po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/lt.po,
	po/nl.po, po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po,
	po/el.po, po/eo.po, po/es.po, po/et.po, po/fr.po, po/gl.po,
	po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, VERSION,
	po/bg.po, po/ca.po, po/cs.po, po/da.po, po/de.po, reldate.h:
	automatic post-release commit for mutt-1.5.7

2005-01-27 20:52:13  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* main.c: Add USE_INODESORT to main.c's option dump.

2005-01-27 20:38:02  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* commands.c: 0. In compose mode, press Ctrl-t to change
	Content-Type.  1. Type "application/octet-stream" for example.
	2. Press Ctrl-t again.	3. Type "text/plain; charset=us-ascii"
	4. You will be asked "Convert to us-ascii upon sending?"
	5. Press y or n.  6. You will see a strange message:
	 "Content-Type changed to Convert to us-ascii upon sending?."

2005-01-27 20:26:52  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Return an error in pgp_decrypt_part when the PGP output
	file is empty.

2005-01-27 20:17:46  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* curs_main.c: this patch doesn't raise an error if you try
	to sync an empty mailbox which makes it possible to use such a
	macro as this on an empty mailbox:

	macro index y "<sync-mailbox><change-folder>?"	macro pager y
	"<sync-mailbox><change-folder>?"

2005-01-27 19:34:50  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* pgp.c: Detect end of PGP armor header when a line is
	whitespace-only.

2005-01-27 19:18:15  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* smime.c: Void the S/MIME passphrase before prompting
	the user to re-enter it.  Noted by TAKAHASHI Tamotsu
	<ttakah@lapis.plala.or.jp>, but with memset replaced by
	smime_void_passphrase().

2005-01-27 19:00:59  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* curs_lib.c: Add terminal newline when it lacks after editing
	a message.  Originally from TAKIZAWA Takashi.

2005-01-27 18:58:14  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: Include mutt_ssl_gnutls.c with the distribution.

2005-01-27 18:54:24  Marco d'Itri  <md@Linux.IT>  (roessler)

	* globals.h, imap/imap.c, imap/util.c, init.c, init.h, main.c,
	mutt.h, mutt_sasl.c, mutt_socket.c, mutt_ssl.h, mutt_ssl_gnutls.c,
	pop_lib.c: GNUTLS support.  Used in Debian since Nov. 2001.

2005-01-27 18:48:41  Bill Nottingham  <notting@redhat.com>  (roessler)

	* mutt_sasl.c: With SASL, expect the server to prompt for
	additional auth data if we have some to send (#129961, upstream
	#1845)

	* contrib/sample.muttrc: Changes the sample.muttrc highlight to
	catch https URLs as well.

	* color.c, main.c: Support for the "default" color in Slang.

2005-01-27 18:45:37  Florian Weimer   <fw@deneb.enyo.de>  (roessler)

	* mh.c, configure.in: Read files in maildir folders in inode
	order; this seems to reduce seek overhead on Linux.  Enabled by
	default; to disable, run configure with --disable-inodesort.
	(By way of Mario d'Itri.)

2005-01-27 18:28:42  Marco d'Itri  <md@Linux.IT>  (roessler)

	* pgp.c: Improved good signature check.

	* contrib/gpg.rc, pgpinvoke.c: Make the default Muttrc work
	out the box for people using gnupg-agent.  Wrote and applied a
	one-line patch to make the %?p? conditional escape work correctly,
	patch forwarded upstream. (Closes: #277646)

	* pgpewrap.c: Don't segfault when invoked without any arguments.

	* contrib/gpg.rc, pgp.c: Evaluate gpg's machine-parseable status
	messages.

	* smime_keys.pl: Add some sanity checks to smime_keys.pl.

	* contrib/gpg.rc: A gpg command line contains both --verbose
	and --no-verbose, remove the first.

2005-01-26 14:33:08  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* status.c: And, thinking about it further, this should just be
	an empty string, not "(null)".

	* status.c: The last Context->pattern fix was still crap.
	Ooooops. (Thanks Ralf.)

2005-01-26 13:36:44  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* Makefile.am, configure.in, globals.h, hcache.c, imap/imap.c,
	imap/imap_private.h, imap/message.c, init.h, main.c, protos.h:
	IMAP header cache.

2005-01-26 12:37:38  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>
(roessler)

	* addrbook.c, browser.c, commands.c, compose.c, imap/utf7.c:
	Make some functions static.

	* imap/command.c, imap/message.c: Fix some printf arguments.

2005-01-26 12:21:46  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* status.c: * status.c: A variant of
	<http://marc.theaimsgroup.com/?l=mutt-dev&m=110053165002362&w=2>.
	Spotted by Ralf Wildenhues <wildenhues@ins.uni-bonn.de>.

2005-01-17 02:24:49  Brendan Cully  <brendan@kublai.com>  (brendan)

	* cvslog2changelog.pl: cvs log emits a timezone after the hour,
	at least here. Adjust date regexp to handle that case.

2005-01-15 17:45:01  Adeodato Simó   <asp16@alu.ua.es>  (brendan)

	* po/cs.po: Major translation updates forgotten in mutt-po.
	(I missed cs in the last commit).

2005-01-15 08:01:35  Brendan Cully  <brendan@kublai.com>  (brendan)

	* Makefile.am: Update commit targets to work when builddir !=
	srcdir.

2005-01-15 07:43:30  Adeodato Simó  <asp16@alu.ua.es>	(brendan)

	* po/sv.po, po/ca.po, po/de.po, po/it.po: i18n updates.

	* doc/manual.sgml.head, doc/mutt.man, doc/muttrc.man.head,
	init.h: Sundry documentation nits fixed.  Debian #210679, #254294,
	#258621, #272579

2005-01-11 12:15:13  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/manual.sgml.head, doc/muttrc.man.head: Document send2-hook.

	* send.c: send2-hook should also be executed after the first
	time the message is edited by the user.

2005-01-09 15:35:51  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/muttbug.man, muttbug.sh.in: Replace muttbug and its
	documentation by a note that acknowledges the shut down of the
	bug tracking system.

2004-12-21 09:46:24  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Fix Debian #275188.

2004-12-07 19:50:04  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* compose.c, hook.c, init.c, init.h, mutt.h, send.c: Add
	send2-hook and fix alternates handling.

2004-11-19 16:16:51  René Clerc  <rene@clerc.nl>  (roessler)

	* doc/manual.sgml.tail, doc/manual.sgml.head: Document
	tag-prefix-cond.

2004-11-08 08:43:17  Ralf Wildenhues  <wildenhues@ins.uni-bonn.de>
(roessler)

	* imap/imap_private.h: Having a signed one-bit bitfield is quite
	odd -- its value is either 0 or -1.  Although the current code
	is not broken because it doesn't test equality to 1, IMHO it's
	better not to use that.

	* imap/message.c: There's a size_t in imap_append_message not
	printed out portably.

2004-11-02 13:30:58  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* copy.h: Fix flag confusion.  Noted by Vincent Lefevre.

2004-10-30 21:59:00  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* browser.c, buffy.c, check_sec.sh, commands.c, edit.c,
	imap/auth_cram.c, imap/auth_gss.c, imap/imap.c, imap/message.c,
	lib.c, lib.h, mutt_ssl.c, muttlib.c, recvcmd.c, url.c:
	safe_strcat, safe_strncat.  Thanks to Ulf H. for noting the
	wrong use of strncat in part of the mutt code base.

	* smime.c: Fix bad code in smime_get_field_from_db.  Problem noted
	by Ulf Härnhammar <Ulf.Harnhammar.9485@student.uu.se>.

2004-09-29 11:27:33  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* lib.c: Fix mutt_unlink race condition for systems without
	O_NOFOLLOW.  Noted by Jarno Huuskonen <Jarno.Huuskonen@uku.fi>.

2004-09-07 08:09:39  Matthias Andree  <matthias.andree@gmx.de>	(roessler)

	* prepare: Fix parameter passing.

2004-08-31 15:41:03  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* configure.in: Add AC_GNU_SOURCE.

	* recvattach.c: Remove *two* layers of S/MIME from messages
	before building the attachment tree.  A generic solution would
	remove intransparent encodings all the way down the tree.

2004-08-30 20:10:10  Brendan Cully  <brendan@kublai.com>  (roessler)

	* compose.c: Only print additional information related to PGP
	in case the current message is indeed to be encrypted/signed
	with PGP.

	* globals.h, init.h, mutt_sasl.c, mutt_ssl.c: Here's a patch
	to allow mutt to use SSL client certificates to authenticate
	itself. To use, set ssl_client_cert to the path to your
	certificate file (containing both the certificate and the private
	key). It works with the SASL EXTERNAL authentication mechanism,
	so you'll need to have SASL enabled as well.

2004-08-30 20:03:35  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* init.c: Fix a memory leak in the generic spam detection code.

	* muttlib.c, protos.h: This wipes duplicated code, which I
	introduced a while ago.

2004-08-30 19:47:47  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* po/ja.po: update

2004-08-21 07:35:16  Ivan Vilata i Balaguer  <ivan@selidor.net>
(roessler)

	* po/ca.po: update

2004-08-17 16:06:48  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update

2004-08-17 15:56:23  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* configure.in, configure.in: Check for ssize_t.

2004-08-17 15:25:31  Ronny Haryanto  <ronnylist@haryan.to>  (roessler)

	* po/id.po: Corrected update.

	* po/id.po: update

2004-08-17 15:22:25  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2004-08-17 13:42:01  Johan Svedberg  <johan@svedberg.pp.se>  (roessler)

	* po/sv.po: update

2004-08-16 21:37:43  Adeodato Simó  <asp16@alu.ua.es>  (roessler)

	* headers.c: as of current cvs, setting "PGP: E" (or similar)
	when header-editing a message does not work. the OP is set
	(ENCRYPT, SIGN, whatever) but APPLICATION_PGP is missing.

2004-08-16 21:36:38  Brendan Cully  <brendan@kublai.com>  (roessler)

	* imap/imap.c: If STARTTLS fails to complete the SSL handshake,
	the error is not propagated and mutt will attempt to log in
	anyway, probably causing an infinite block on read. The attached
	patch closes the socket in this case, and propagates the error
	properly.

	* imap/auth_sasl.c: The attached patch causes mutt to attempt
	the next method in imap_authenticators if the previous method
	failed, even if the server reported that the method was
	available. Previously mutt would give up if any authentication
	method failed.

2004-08-16 21:34:22  Moritz Schulte   <moritz@g10code.com>  (roessler)

	* compose.c: Only print "Encrypt with" field in case the used
	S/MIME modules supports this feature.

2004-08-16 21:33:35  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (roessler)

	* po/pl.po: update

2004-08-11 12:31:21  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* imap/imap.c: Fix two IMAP memory leaks.

	* imap/imap.c, imap/imap.h: Remove imap_close_connection.

	* menu.c: Fix a memory leak in mutt_menuDestroy.

2004-08-08 16:21:16  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* ChangeLog, muttlib.c, protos.h: Fix a memory leak.

2004-08-08 16:19:15  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c, smime.c: Fix the PGP and S/MIME menus. Complaints
	and suggestions of many lead to these changes.	See mutt-dev
	discussions around this time for details.

	* Makefile.am, crypthash.h, md5.h, sha1.h: Fix uint32_t
	portability problem. Reported by Steve Kennedy.

2004-08-07 05:23:33  Johan Svedberg  <johan@svedberg.pp.se>  (roessler)

	* po/sv.po: update

2004-08-02 08:03:46  Nathan Dushman  <nhd+mutt@andrew.cmu.edu>	(roessler)

	* imap/command.c: Fix the improvement to address #1655.

2004-07-22 01:10:55  Brendan Cully  <brendan@kublai.com>  (roessler)

	* imap/message.c: Quick fix for IMAP breakage.

2004-07-21 22:15:40  Nathan Dushman  <nhd+mutt@andrew.cmu.edu>	(roessler)

	* imap/command.c: This is a one-line patch that increases the
	speed at which mutt opens IMAP mailboxes, and addresses bug #1655.

2004-07-20 09:00:50  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (roessler)

	* po/pl.po: update

2004-07-20 08:17:21  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* imap/message.c, mutt.h, parse.c, send.c, url.c: Use List-Post
	headers when doing list-reply.

2004-07-19 21:44:23  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* globals.h, imap/message.c, init.h: Fix #1548.  (The first
	variant, with $imap_headers specifying headers that are downloaded
	in addition to the set required for mutt to work properly.)

2004-07-19 21:41:43  David Champion  <dgc@uchicago.edu>  (roessler)

	* mbox.c, mh.c, pgp.c, sendlib.c: Fix some compiler warnings.

2004-07-19 21:39:28  Adeodato Simó  <asp16@alu.ua.es>  (roessler)

	* doc/manual.sgml.head: Fixing a missing newline.

2004-07-19 21:36:46  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* Makefile.am: Fix IMAP breakage.

2004-07-15 08:08:32  David Champion  <dgc@uchicago.edu>  (roessler)

	* doc/manual.sgml.head, init.c, init.h, mutt.h: v3 of the generic
	spam detection patch.

2004-07-14 05:58:30  Moritz Schulte   <moritz@g10code.com>  (roessler)

	* pgp.c: Do not forget to handle special-case for gpg-agent.

2004-07-14 05:55:40  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* ChangeLog: Fix an earlier commit message.

2004-07-14 05:45:18  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* browser.c: Fix Debian#237426.  (Experimental.)

2004-07-14 05:39:23  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* compose.c: Don't invoke "builtin" as an external editor.  Note:
	It's not clear to me that this is really the right approach.
	Revisit Editor/Visual some time.

2004-07-14 05:19:15  Elmar Hoffmann  <mutt-dev-ml@elho.net>  (roessler)

	* init.h, mutt.h, thread.c: By default Mutt hides the subject
	of messages in the thread tree that have the same subject as
	their parent or closest previously displayed sibling. This patch
	makes this optional, introducing the hide_thread_subject boolean
	setting which defaults to the old behaviour.

2004-07-14 05:07:18  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* mh.c: Some eye-candy during the delayed parsing of maildir
	folders.

2004-07-14 04:50:19  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* init.h, sort.h: Hack to fix $sort_browser documentation.

	* copy.c, copy.h, handler.c, init.h, mutt.h, send.c:
	$include_onlyfirst, again.

2004-07-14 04:34:07  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* copy.c, copy.h, handler.c, init.h, mutt.h, send.c: Fix a cvs
	commit SNAFU: This commit undoes the include_onlyfirst patch,
	but leaves the generic spam detection by David Champion in place
	(which, erroneously, hadn't been committed automatically).

2004-07-14 04:16:58  ttakah@lapis.plala.or.jp  (roessler)

	* commands.c, copy.c, copy.h, doc/manual.sgml.head,
	doc/muttrc.man.head, globals.h, handler.c, hdrline.c, init.c,
	init.h, mutt.h, muttlib.c, parse.c, pattern.c, protos.h, send.c,
	sort.c, sort.h: Introduce $include_onlyfirst.

2004-07-12 13:35:27  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pager.c: The limitations for OP_MAIL and OP_RECALL should
	be identical.

	* init.c, sendlib.c: Add some debugging code, and rewrite the
	previously-ununderstandable mutt_remove_duplicates.  (All this
	done on the search for a problem that ultimately turned out to
	be a configuration issue. Still, the changed code could come in
	handy some day.)

2004-07-11 16:25:00  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* pager.c: Fix #1882.

2004-06-27 13:54:51  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* postpone.c: Experimental code for #1910.

2004-06-26 08:45:29  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* commands.c: Fix #1909.

2004-06-23 08:09:43  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Zero out the PGP passphrase before asking for a new one.

2004-06-17 20:39:20  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* smime.c: Change S/MIME send menu behavior to xor instead of or,
	so it behaves the same way as the PGP send menu.

2004-06-17 20:36:13  Moritz Schulte  <moritz@g10code.com>  (roessler)

	* Makefile.am, compose.c, configure.in, crypt-mod-pgp-classic.c,
	crypt-mod-smime-classic.c, crypt-mod.c, crypt-mod.h, crypt.c,
	cryptglue.c, curs_lib.c, init.h, keymap.c, keymap.h, main.c,
	mutt.h, mutt_crypt.h, mutt_curses.h, pgp.c, pgp.h, smime.c,
	smime.h: This is the sequel to the crypto modularization changes
	I did on 2003-01-21.  Moritz added another abstraction layer
	which cleans up the code and allows the crypto modules to use
	their own option menu.	Everything should work as it used to
	but is now in a really good shape for part III, the Return of
	the GnuPG Easy Makers. -wk

	* crypt-mod-pgp-classic.c, crypt-mod-smime-classic.c, crypt-mod.c,
	crypt-mod.h: New files.

	* smime.c (smime_valid_passphrase, smime_send_menu): New
	functions.  * smime.h: Removed macro: smime_valid_passphrase.
	Declared: smime_valid_passphrase, smime_send_menu.  * pgp.c:
	Include "mutt_menu.h".	(pgp_valid_passphrase, pgp_send_menu):
	New functions.	* pgp.h: Removed macro: pgp_valid_passphrase.
	Declared: pgp_valid_passphrase, pgp_send_menu.	*
	mutt_curses.h: Declare: mutt_need_hard_redraw.	* mutt_crypt.h:
	Declare: crypt_pgp_valid_passphrase, crypt_pgp_send_menu,
	crypt_smime_valid_passphrase, crypt_smime_send_menu, crypt_init.
	Adjust WithCrypto definition since the GPGME backend does not
	exclude anymore the other `classic' backends.  (KEYFLAG_ISX509):
	New symbol.  * mutt.h (enum): New symbol: OPTCRYPTUSEGPGME.
	(struct body): New member: is_signed_data, warnsig.  * main.c
	(main): Call crypt_init.  * keymap.c (km_get_table): Support for
	MENU_KEY_SELECT_PGP and MENU_KEY_SELECT_SMIME.	(Menus): Added
	entries fuer MENU_KEY_SELECT_PGP and MENU_KEY_SELECT_SMIME.
	(km_init): Create bindings for MENU_KEY_SELECT_PGP and
	MENU_KEY_SELECT_SMIME.	* keymap.h (enum): New enum symbols:
	MENU_KEY_SELECT_PGP, MENU_KEY_SELECT_SMIME.  * init.h:
	New configuration variable: crypt_use_gpgme.  * compose.c
	(pgp_send_menu, smime_send_menu): Removed functions, they are now
	contained in the crypto backend modules.  (mutt_compose_menu):
	Use crypt_pgp_send_menu and crypt_smime_send_menu instead
	pgp_send_menu and smime_send_menu.  * cryptglue.c: Slightly
	rewritten in order to make use of the module mechanism used to
	access crypto backends.  * curs_lib.c (mutt_need_hard_redraw):
	New function.  * crypt.c (crypt_forget_passphrase): Adjust
	for new crypto backend interface.  (crypt_valid_passphrase):
	Stripped, use calls to crypt_pgp_valid_passphrase and
	crypt_smime_valid_passphrase.

2004-06-02 17:55:34  Alain Bench  <veronatif@free.fr>  (roessler)

	* parse.c: Fix #1759.

2004-04-30 06:49:37  Urs Janßen  <urs@tin.org>	(roessler)

	* doc/Makefile.in, doc/mbox.man, doc/mmdf.man: mmdf(5), new mbox
	(5).  (These changes have been sitting in my inbox for ages, tlr.)

2004-04-13 15:10:38  Brendan Cully  <brendan@kublai.com>  (roessler)

	* imap/message.c: Fix #1795

2004-04-13 08:02:12  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* crypt.c, init.h, mutt.h: Rename pgp_mime_ask to pgp_mime_auto;
	change the default; change the error message given if that
	variable is set to "no."

2004-04-12 21:43:33  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* lib.c, attach.c: Don't open a file for writing that we have
	unlinked before. Reported embarassingly long ago by Jarno
	Huuskonen <Jarno.Huuskonen@uku.fi>.

2004-04-12 21:19:31  Dale Woolridge  <dale-list-mutt-dev-2@woolridge.org>
(roessler)

	* po/uk.po, po/zh_CN.po, po/zh_TW.po, po/pt_BR.po, po/ru.po,
	po/sk.po, po/sv.po, po/tr.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po,
	po/cs.po, po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po,
	po/et.po, po/fr.po, compose.c, crypt.c, init.h, mutt.h,
	mutt_crypt.h, po/ca.po, postpone.c, send.c, sendlib.c: See:
	http://does-not-exist.org/mail-archives/mutt-dev/msg00843.html

2004-04-12 20:37:19  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* copy.c: Fix #1804.

	* commands.c, curs_main.c, mutt.h, mutt_crypt.h, pager.c,
	recvattach.c: A belated fix for #1808 (Debian #233106): Make
	sure check-traditional-pgp doesn't leave the pager context
	unnecessarily.	This makes message-hooks like this one safe:

	  message-hook '!(~g|~G) ~b"^-----BEGIN\ PGP\ (SIGNED\ )?MESSAGE"'
		\ "exec check-traditional-pgp"

2004-04-12 19:53:29  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* doc/manual.sgml.head, init.h: Various documentation fixes,
	#1790.

2004-04-12 19:47:59  Alain Bench  <veronatif@free.fr>  (roessler)

	* doc/mbox.man, doc/muttbug.man: Fix #1831, Debian#237827.

2004-04-12 19:42:10  Joël Riou	<joel.riou@normalesup.org>  (roessler)

	* globals.h, init.c, init.h: Introduce config_charset.

2004-04-12 19:37:59  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* po/ru.po: update

2004-04-12 19:37:23  Im Eunjea	<eunjea@koru.org>  (roessler)

	* po/ko.po: update

2004-04-12 19:34:45  Holger Weiss  <lists@jhweiss.de>  (roessler)

	* doc/manual.sgml.head, doc/muttrc.man.head, mutt.h, pattern.c:
	Unreferenced messages pattern: ~$

2004-04-12 19:20:13  Paul WALKER  <paul.walker@st.com>	(roessler)

	* mutt_sasl.c: SASL2 needs errno.h.

2004-04-12 19:17:32  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* muttlib.c: Include the user ID with temporary file names.
	Suggested by eravin@panix.com in #1833.

	* doc/Makefile.in: Fix #1708 the brutal way, by installing
	multiple copies of the muttbug (pardon, flea) manual page.

2004-04-12 18:56:18  Neil Brown  <neilb@cse.unsw.edu.au>  (roessler)

	* imap/auth_sasl.c: Fix Debian #206078, #214758; patch submitted
	by Artur Czechowski as #1845.

2004-03-21 16:02:10  Ivan Vilata i Balaguer  <ivan@selidor.net>
(roessler)

	* po/ca.po: update

2004-02-12 08:51:07  roessler  (roessler)

	* po/uk.po, po/zh_CN.po, po/zh_TW.po, po/sk.po, po/sv.po,
	po/tr.po, po/pt_BR.po, po/ru.po, po/nl.po, po/pl.po, po/ja.po,
	po/ko.po, po/lt.po, po/id.po, po/it.po, po/gl.po, po/hu.po,
	po/es.po, po/et.po, po/fr.po, po/el.po, po/eo.po, po/da.po,
	po/de.po, VERSION, po/bg.po, po/ca.po, po/cs.po, reldate.h,
	ChangeLog: automatic post-release commit for mutt-1.4.2.1

2004-02-12 08:46:17  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: (stable) Include regex.c and snprintf.c with
	the distribution.

2004-02-11 14:03:38  roessler  (roessler)

	* po/zh_TW.po, po/uk.po, po/zh_CN.po, po/tr.po, po/sv.po,
	po/ru.po, po/sk.po, po/pt_BR.po, po/pl.po, po/nl.po, po/ko.po,
	po/lt.po, po/ja.po, po/it.po, po/id.po, po/hu.po, po/gl.po,
	po/et.po, po/fr.po, po/eo.po, po/es.po, po/el.po, po/de.po,
	po/cs.po, po/da.po, po/ca.po, VERSION, po/bg.po, reldate.h,
	ChangeLog: automatic post-release commit for mutt-1.4.2

2004-02-11 10:07:17  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* configure.in, menu.c: Backport an old bug fix, and make sure
	configure can be created on recent systems.

2004-02-11 08:20:25  Mads Martin Joergensen  <mmj@suse.de>  (roessler)

	* init.c: Fix some warnings.

2004-02-08 11:41:31  Edmund GRIMLEY EVANS  <edmundo@rano.org>  (roessler)

	* charset.c: Fix a CP1255/8-related problem that's caused by a
	glibc/iconv bug.

2004-02-08 09:38:38  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* muttlib.c: Change the logic in mutt_open_read to only
	catch directories -- mutt may legitimately read devices (think
	/dev/null) or named pipes. Also delegate error reporting to the
	calling function by setting errno.

2004-02-07 21:40:11  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* po/ja.po: update

2004-02-07 21:38:32  Juan Altmayer Pizzorno  <juan@altmayer.com>
(roessler)

	* mbox.c: Hi, off_t is a 64-bit number (like on Mac OS X/darwin),
	the percentages don't show right while mutt is reading/parsing
	a mailbox.  Here's a patch (against 1.5.6i) to fix that.

2004-02-07 21:36:41  David Yitzchak Cohen
<lists+mutt_devs@bigfatdave.com>  (roessler)

	* init.c, muttlib.c: Looking at the code, the problem is pretty
	obvious.  A recent patch to init.c (the one that was supposed
	to prevent Mutt from silently failing to read nonexistant RC
	files, IIRC) changed source_rc() to stat(2) the RC "file" before
	trying to mutt_open_read() it.	There's only one problem here:
	source_rc() has no way of knowing whether or not its "file"
	is a file or a command.  I'm attaching a patch that fixes the
	problem in what I believe is the right way.

2004-02-05 14:17:25  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* menu.c: Back out the patch for #1697.

2004-02-02 18:17:46  Roland Rosenfeld  <roland@spinnaker.de>  (roessler)

	* po/de.po: update

2004-02-02 10:26:14  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (roessler)

	* po/pl.po: update

2004-02-02 10:24:32  Im Eunjea	<eunjea@koru.org>  (roessler)

	* po/ko.po: update

2004-02-02 10:22:56  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2004-02-01 18:26:13  roessler  (roessler)

	* po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po, po/id.po, po/it.po, po/ja.po, po/ko.po,
	po/lt.po, po/nl.po, po/pl.po, VERSION, po/bg.po, po/ca.po,
	po/cs.po, po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po,
	po/et.po, po/fr.po, po/gl.po, po/hu.po, reldate.h: automatic
	post-release commit for mutt-1.5.6

2004-02-01 18:00:16  Mike Schiraldi  <1074468571@schiraldi.org>
(roessler)

	* init.c: As you all know, running "mutt -F foo.rc" will have
	mutt read foo.rc as its config file. However, there is a bug --
	if you specify a directory (like accidentally typing "mutt -F
	/etc/mutt") mutt will silently ignore the flag and leave you
	wondering why it isn't working.

	Emil Sit posted a patch for this in March of 2002, but it seems
	to have slipped through the cracks. Here's the patch again;
	please consider it for inclusion.

2004-02-01 17:50:43  Luke Mewburn  <luke@mewburn.net>  (roessler)

	* buffy.c: Put a zero byte into the string, not into the pointer.

2004-02-01 17:48:25  Dan Ohnesorg  <Dan@ohnesorg.cz>  (roessler)

	* po/cs.po: update

2004-02-01 17:45:33  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/manual.sgml.head: A cross-reference was missing.

	* doc/manual.sgml.head: Improve documentation of alterantes.

	* alias.c, doc/manual.sgml.head, doc/muttrc.man.head, globals.h,
	hdrline.c, init.c, init.h, mutt.h, mutt_regex.h, muttlib.c,
	protos.h: Turn alternates, lists, and subscribe into regular
	expression lists.

2004-01-12 22:56:58  Christoph Ludwig
<cludwig@cdc.informatik.tu-darmstadt.de>  (roessler)

	* smime_keys.pl: Avoid a Perl warning.

2004-01-12 20:24:09  Matt Kraai  <kraai@ftbfs.org>  (roessler)

	* doc/manual.sgml.head: Thanks.  The patch is committed to
	the CVS.

2004-01-12 19:59:38  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* crypt.c: Retainable PGP signatures were broken badly.  #1757.

2004-01-05 11:55:14  Robert Schiele  <robert.schiele@t-online.de>
(roessler)

	* mutt_sasl.c: Back out part of the previous SASL/IPv6 patch
	due to portability issues.

2004-01-04 11:10:21  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* init.c: Strike that.

	* init.c: Fix a memory management error.  Ouch.

2004-01-04 10:55:20  René Clerc  <rene@clerc.nl>  (roessler)

	* init.h: Fix hide_missing / hide_limited documentation.

2004-01-04 10:51:49  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* hdrline.c: Permit list patterns that match the domain name of
	an address; these patterns begin with '@'.  Example:  subscribe
	@bugs.guug.de matches all messages sent to the bug tracking
	system.

	* po/ru.po: Argh, I shouldn't replace files by patches.

2004-01-04 10:25:13  Cameron Patrick  <cameron@patrick.wattle.id.au>
(roessler)

	* menu.c: Fix #1697 (Debian  #219594.)

2004-01-04 10:21:19  Roland Rosenfeld  <roland@spinnaker.de>  (roessler)

	* po/de.po: update

2004-01-04 10:19:45  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* po/ja.po: update

2004-01-04 10:08:02  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (roessler)

	* po/pl.po: update

2004-01-04 10:03:46  Michael Elkins  <me@sigpipe.org>  (roessler)

	* send.c: Fix #1488 (Debian#1882526): Honor Reply-To while
	generating Mail-Followup-To headers.

2004-01-04 09:59:42  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* init.h: Fix #1738; documentation issue re $from, $use_from.

2004-01-04 09:52:55  Michael Elkins  <me@sigpipe.org>  (roessler)

	* hook.c, send.c: Fix #1724, cannot use ~h pattern match with
	reply-hook.

2004-01-04 09:49:23  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* pop.h, pop_lib.c: Attached patch provides support of STLS
	(STARTTLS) command in POP3 protocol.

	* po/ru.po: update

2004-01-04 09:45:05  Brendan Cully  <brendan@kublai.com>  (roessler)

	* imap/imap.c: Fix #1703.

2004-01-04 09:42:35  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* smime.c: Fix a NULL pointer deference noted by Will Fiveash
	<william.fiveash@sun.com>.

2003-12-30 13:04:20  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* commands.c, crypt.c, mutt.h, mutt_crypt.h, smime.c: Handle
	partially signed messages more reasonably.  See #1743.

2003-12-29 11:44:35  Alain Bench  <veronatif@free.fr>  (roessler)

	* commands.c: Fix #844.

2003-12-29 11:37:41  Patrick Welche  <prlw1@newn.cam.ac.uk>  (roessler)

	* m4/gssapi.m4, mutt_sasl.c: A while ago I posted a similar
	patch which is necessary as when mutt tries to connect to an
	imap server over ipv6 it stores the address in a sockaddr which
	may not be large enough to hold the ipv6 address.

2003-12-17 17:42:02  Scott Koranda  <skoranda@gravity.phys.uwm.edu>
(roessler)

	* crypt.c: pkcs7-signature wasn't recognized properly in one
	more place.

2003-12-17 08:46:50  Michael Elkins  <me@sigpipe.org>  (roessler)

	* rfc1524.c: Fix possible core dump in mailcap nametemplate
	handling.

2003-12-10 00:48:57  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* thread.c: Avoid NULL pointer deference in threading code.

2003-12-03 08:19:11  Alain Bench  <veronatif@free.fr>  (roessler)

	* pager.c: Fix 1716.

2003-11-15 09:32:30  Velko Hristov  <hristov@informatik.hu-berlin.de>
(roessler)

	* po/bg.po: updat

2003-11-12 22:31:51  Edmund GRIMLEY EVANS  <edmundo@rano.org>  (roessler)

	* po/eo.po: update

2003-11-12 14:01:03  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update

2003-11-12 13:49:32  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* configure.in, mutt_idna.c, mutt_idna.h, mutt_socket.c: Fix
	IDN API incompatibility problems.

2003-11-12 11:47:46  duvall@emufarm.org  (roessler)

	* configure.in: Fix 1515, 1693.

2003-11-12 11:40:27  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* mh.c, sort.c: Fix dangling pointer problems in threading code.
	Noted and tracked down by q4xk3j002@sneakemail.com who also
	provided the initial fix.

2003-11-11 10:19:22  Ronny Haryanto  <ronnylist@haryan.to>  (roessler)

	* po/id.po: update

2003-11-10 18:02:26  Rudy Taraschi  <rudy@cae.com>  (roessler)

	* mutt_socket.c: Fix double-free problems related to IDN support.

2003-11-10 10:37:10  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2003-11-09 21:41:28  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* mh.c: Fix #1692.

	* send.c: Commit the fix for #1509. This must have been lost
	earlier this year.

2003-11-05 20:09:36  roessler  (roessler)

	* po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po, ChangeLog, VERSION, po/bg.po, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, po/es.po, po/et.po,
	po/fr.po, po/gl.po, po/hu.po, po/id.po, po/it.po: automatic
	post-release commit for mutt-1.5.5.1

2003-11-05 12:17:10  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: Include regex.c and snprintf.c with the
	distribution.  Noted by Lars Hecking.

	* build-release: Ups, we don't upload the CVS any more.

2003-11-05 09:51:10  roessler  (roessler)

	* po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po, po/zh_CN.po, po/zh_TW.po, ChangeLog, VERSION, po/bg.po,
	po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/eo.po,
	po/es.po, po/et.po, po/fr.po, po/gl.po, po/hu.po, po/id.po,
	po/it.po, po/ja.po, po/ko.po, po/lt.po, po/nl.po, reldate.h:
	automatic post-release commit for mutt-1.5.5

2003-11-05 09:27:43  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* build-release: Use gpg for signing releases.

2003-11-03 10:30:58  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* attach.c: Fix a logic flaw in attachment saving.

2003-10-08 19:55:39  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgpkey.c: KeyTable is pgp_uid_t **, not pgp_key_t *.	Fix some
	sizeof statements accordingly.	Note that pgp_key_t is also a
	pointer, though, so this should not have broken things.

2003-10-06 09:58:35  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* query.c: Fiy memory corruption. (# 1659)

2003-10-04 22:12:10  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* lib.c: mutt_basename() was garbage.

	* doc/manual.sgml.head: Fix some tags.	Noted by Todd
	<Freedom_Lover@pobox.com>.

	* recvattach.c, attach.h, commands.c, compose.c, keymap.h, lib.c,
	lib.h, menu.c, mutt.h, mutt_menu.h, muttlib.c, pager.c, protos.h:
	This patch fixes various aspects of the attachment-saving user
	interface.  Changes include:

	* When tagging and saving multiple attachments, you can now use
	  the same target directory for multiple attachments.

	* When you can't save an attachment, you get an opportunity to
	  enter a new file name.

	* The menu cursor will highlight the attachment that you are
	  currently discussing with mutt.

	* Various bug fixes.

	This does, in particular, address #1619 (Debian#208430).

	* menu.c: Fix #1656.

2003-09-29 16:34:32  René Clerc  <rene@clerc.nl>  (roessler)

	* doc/muttrc.man.head: Fix typo.

2003-09-29 15:05:52  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/dotlock.man, doc/mutt.man, doc/muttrc.man.head: Fix #1652
	(Debian #213007), noted by Jens Seidel <tux-master@web.de>.

2003-09-20 06:24:10  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* muttbug.sh.in: Adapt to new GNU coreutils by not using head (1).

2003-09-19 13:09:59  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update

2003-09-19 13:05:13  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* imap/utf7.c: Fix remaining (void **) casts.

2003-09-19 13:03:26  Mads Martin Joergensen  <mmj@suse.de>  (roessler)

	* imap/browse.c, imap/command.c, parse.c, pgp.c, pgpkey.c,
	pop_lib.c, query.c, recvattach.c, remailer.c, rfc1524.c,
	rfc2047.c, rfc2231.c, sendlib.c, smime.c, thread.c, addrbook.c,
	browser.c, color.c, compose.c, copy.c, crypt.c, curs_lib.c,
	edit.c, enter.c, handler.c, lib.c, lib.h, mh.c, mutt_idna.c, mx.c,
	pager.c: As the ones of you who compile with new gcc's probably
	have noticed, there's a lot of type-punning in Mutt. With help
	from Philipp Thomas, I've fixed all I could find in CVS (please
	double-check, one might have slipped through the cracks), I can
	make one for 1.4 CVS branch as well if wanted.

2003-09-19 12:56:49  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* send.c: Change abort_unmodified so it doesn't abort a message
	that has an attachment.  Catches the "send a file from the
	command line, quickly" case.

2003-09-11 16:59:54  Brendan Cully  <brendan@kublai.com>  (roessler)

	* mutt_sasl.c: This trivial patch closes #1516 (NI_WITHSCOPEID
	undefined). Thanks to Mads for the initial patch.

2003-09-11 07:27:23  Velko Hristov  <hristov@informatik.hu-berlin.de>
(roessler)

	* po/bg.po: Bulgarian translation.  (Seems like I screwed up an
	earlier commit.  -tlr)

2003-09-10 13:20:49  Jon Miles	<jon@zetnet.net>  (roessler)

	* pop_auth.c: In pop_auth.c:pop_auth_sasl(), if the main loop
	received anything back from the server that didnt begin with '+
	', it was bailing out and skipping the checks to see if there
	was a +OK response.

2003-09-07 10:11:49  Im Eunjea	<eunjea@koru.org>  (roessler)

	* po/ko.po: update.

2003-09-04 15:10:09  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* init.h: Fix some formatting glitches that lead to error messages
	when viewing the muttrc(5) manual page.

2003-09-04 14:59:57  Christoph Ludwig
<cludwig@cdc.informatik.tu-darmstadt.de>  (roessler)

	* smime.c: Fix verification bug when messages are S/MIME signed
	& encrypted.

2003-09-03 17:22:09  Dan Born  <dan@danborn.net>  (roessler)

	* postpone.c: I've attached a patch for bug number 1036, as
	reported at http://bugs.guug.de/db/pa/lmutt.html ("segfault
	when more than one msg is postponed").	This is a patch against
	mutt 1.4.1.

	As it was previously left, no one could reproduce it.  The problem
	occurs because sorting is disabled when opening the postponed
	folder, but the Sort global variable still tells mutt to use
	whatever sorting algorithm the $sort config option indicates.
	Eventually, the code would get to mutt_messages_in_thread and
	try to dereference a NULL thread object, causing the segfault.

2003-09-03 17:20:56  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (roessler)

	* po/pl.po: update.

2003-09-03 17:15:20  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* po/ja.po: New ja.po.

2003-09-03 17:12:52  Velko Hristov  <hristov@informatik.hu-berlin.de>
(roessler)

	* configure.in: Bulgarian translation.

2003-09-03 17:10:37  Brendan Cully  <brendan@kublai.com>  (roessler)

	* mutt_ssl.c: Fix a segmentation fault which occurs
	when a certificate is rejected.  Bug noted by Rob Latham
	<rob@terizla.org>.

2003-09-03 17:09:09  Anatoly Vorobey  <mellon@pobox.com>  (roessler)

	* curs_main.c: The commands "read-thread" (^R) and
	"read-subthread" (Esc-R) do not honor the resolve variable (don't
	advance cursor after marking the thread/subthread as read),
	which, to me at least, is a nuisance.

2003-08-11 14:06:08  Brendan Cully  <brendan@kublai.com>  (roessler)

	* imap/imap.c: 1595: My guess is this bug is caused by
	mlarson@verisign.com's patch to check for UNSEEN rather than
	RECENT messages. This means that as long as there are messages
	in a mailbox either new or old, mutt will think it has new mail.

	The attached patch reverts that change. Let me know if it solves
	the problem.

2003-08-11 14:05:13  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/muttrc.man.head: Fix a formatting bug.

2003-08-05 13:55:47  Brendan Cully  <brendan@kublai.com>  (roessler)

	* attach.c, buffy.c, commands.c, copy.c, editmsg.c, init.c,
	mbox.c, mx.c, mx.h, sendlib.c: This patch removes the Kendra
	format from mutt.  (The support was broken anyways.)

2003-08-02 11:01:09  Horvath Szabolcs  <horvaths@fi.inf.elte.hu>
(roessler)

	* po/hu.po: update

2003-07-29 10:11:05  Edmund GRIMLEY EVANS  <edmundo@rano.org>  (roessler)

	* pager.c: It seems that Solaris has an incorrect implementation
	of mbrtowc: when there is an encoding error and mbrtowc returns
	(size_t)(-1) no value should be stored in *pwc (the first
	argument), as I understand it, but here mbrtowc is storing 8
	when presented with the bytes "\xc8\x4d".

	However, relying on mbrtowc not to store anything in *pwc when
	there is an error is a bit silly; it makes sense to look at
	the return value. So, the following patch should be applied if
	Pawel can confirm that it fixes the problem. I've tested it and
	it worked for me with glibc's mbrtowc.

2003-07-24 18:40:50  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* alias.c, copy.c, handler.c, imap/command.c, imap/imap.c,
	imap/message.c, imap/util.c, init.c, intl/l10nflist.c,
	intl/loadmsgcat.c, intl/localealias.c, keymap.c, lib.c,
	makedoc.c, muttlib.c, pattern.c, rfc2047.c, rfc2231.c, rfc822.c,
	strcasecmp.c, url.c: Some functions/macros like isspace take an
	int and require the argument to have the value of an unsigned char
	(or EOF). Under Solaris, gcc complains when the argument is a char
	(as this is a possible bug, on platforms where char is signed,
	like Solaris). The attached patch fixes such problems (well,
	perhaps I've changed more than necessary, but this doesn't hurt).

2003-07-22 12:56:38  dshaw@jabberwocky.com  (roessler)

	* gnupgparse.c: When encrypting a message to a user that has more
	than one subkey, at least one of which is revoked or expired,
	mutt treats the entire key as unusable rather than just the
	subkey(s) in question.

2003-07-16 11:18:12  Brendan Cully  <brendan@kublai.com>  (roessler)

	* account.c, account.h, imap/auth_sasl.c, imap/imap.c: I noticed
	that my mutt hung when I tried SASL DIGEST-MD5 authentication
	(I'm not sure when this started). I believe this patch should
	solve that problem in a reliable way.

	This patch also attempts to reuse connections even when
	authentication fails, instead of just throwing away a perfectly
	good socket.

	* curs_lib.c, enter.c, keymap.c, keymap.h, mutt.h, mutt_curses.h,
	mutt_ssl.c: This patch redoes yesterday's unbuffered input
	patch. Now it uses a pseudo-option, which means less mess to carry
	down the call stack.  It also made it much easier to have the SSL
	certificate menu be unbuffered, which it is now. So push commands
	won't annoy you when entering passwords or accepting certificates.

2003-07-15 11:41:32  Brendan Cully  <brendan@kublai.com>  (roessler)

	* curs_main.c, globals.h, imap/command.c, imap/imap.c,
	imap/imap.h, imap/imap_private.h, imap/util.c, mx.c: The attached
	patch should keep all opened IMAP connections alive, no matter
	what mailbox you are currently in. With the patch that got
	committed yesterday, this should close bug 1523.

	(There was a typo in that patch. This one supersedes it.)

	* configure.in, .cvsignore: autoconf 2.5 compatibility.

2003-07-14 12:40:03  Hugo Haas	<hugo@larve.net>  (roessler)

	* send.c: Fix #1520.

2003-07-14 12:20:27  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (roessler)

	* po/pl.po: small fix.

2003-07-14 12:19:07  Brendan Cully  <brendan@kublai.com>  (roessler)

	* imap/command.c, imap/imap.c: On Sunday, 13 July 2003 at 18:09,
	Brendan Cully wrote:

	> The attached patch should help when the connection to your
	postponed > folder times out and you can't reconnect without
	restarting mutt. I'd > like anyone who has that problem to try
	it and let me know how it > works.

	I dug a little deeper. The attached patch seems to work better. It
	complains the first time you try to recall a message, but works
	the second.

	* account.c, curs_lib.c, enter.c, keymap.c, keymap.h, mutt.h,
	mutt_curses.h: The attached patch prevents mutt from reading the
	push buffer when asking for passwords. This is a proper fix for
	bug 1312. I think it's uncontroversial.

2003-07-04 17:15:34  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* imap/auth_sasl.c: Increase a buffer's size.

2003-07-04 17:07:22  Nicolas Rachinsky	<nr@rachinsky.de>  (roessler)

	* OPS, curs_lib.c, curs_main.c, functions.h, menu.c: Introduce
	tag-prefix-cond and end-cond.  This makes simple conditional
	execution of parts of macros possible.

2003-07-04 17:03:51  Bruno Postle  <bruno@postle.net>  (roessler)

	* curs_main.c, pattern.c: Display an empty index when no messages
	match search criteria.

2003-07-04 16:57:56  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* init.h, muttlib.c: Add a ':' flag to % expandos.  This will
	make sure that any dots are converted into underscores.  (_
	is already used for lowercasing the result of an expando.)

2003-06-04 14:01:39  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* muttlib.c: Don't colorize empty lines generated with
	state_attach_puts();

2003-05-29 17:48:28  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* imap/imap.c, pgp.c, po/eo.po, po/id.po: Fix part of #1564.

2003-05-29 17:47:10  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* init.c: Fix a segmentation fault which would occur when
	pgp_sort_keys is set in a configuration file, but mutt is compiled
	without PGP support.

	* gnupgparse.c: Fix PGP subkey handling when looking at key
	capabilities.  This should take care of the recent "mutt does
	not see all keys" problems.

2003-05-13 13:06:16  Dale Woolridge  <dale-list-mutt-dev-2@woolridge.org>
(roessler)

	* crypt.c: Fix gpg-agent use.

2003-05-13 12:53:20  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/manual.sgml.head: Remove useless examples about treating
	text/enriched externally.  #1549; Debian #190309.

2003-05-13 12:50:04  Juan Altmayer Pizzorno  <juan@altmayer.com>
(roessler)

	* recvattach.c: view-attachments does not extract the message
	within a x-pkcs7-mime if it's only signed, but not encrypted.
	Such a message results, for example, from a decrypt-save if the
	message was previously encrypted and signed.

2003-05-13 12:45:35  Thomas Glanzmann  <sithglan@stud.uni-erlangen.de>
(roessler)

	* doc/manual.sgml.head: Fix an inconsistency between manual
	and code.

2003-05-13 12:43:45  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* gnupgparse.c, pgppubring.c: Currently, mutt uses the OpenPGP key
	algorithm to determine the capabilities of the key.  For example,
	in mutt, a key of type 1 (RSA) can both encrypt & sign.  This is
	not correct as per OpenPGP, however, where the capabilities of
	the key are determined by both the algorithm and key capability
	flags that are set on the key.	This can lead to user confusion
	when their RSA encrypt-only or sign-only key is listed for both
	signing and encryption in mutt.

	GnuPG lists these flags in key listings, so it is easy to take
	advantage of them.  Here is a patch to use the flags, as well
	as provide the flags in pgpring.  Note that the pgp+pgpring
	users won't see any change since the flags there are based on
	the key algorithm as they are now, but the GnuPG users will see
	an improvement.

2003-05-12 16:21:26  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* enter.c: Fix alias completion when the alias is entered as
	part of a group.  (E.g., The Tea Party: alias1, alias2, alias3;)

2003-05-03 20:07:40  Dan Nelson  <dnelson@allantgroup.com>  (roessler)

	* mutt.h, muttlib.c: Fix #1558.  (mutt_expand_fmt rewrite;
	OPT_MAX wasn't maximal.)

2003-04-15 13:17:05  René Clerc  <rene@clerc.nl>  (roessler)

	* compose.c: Fix two more cases in which ctrl-G is interpreted
	as M_YES.

2003-04-15 09:52:06  Dale Woolridge  <dale-flea-mutt-bug@woolridge.org>
(roessler)

	* compose.c: The "sign (a)s" code strips the pgp application
	bit causing drawing issues in redraw_crypt_lines().  Other bits
	(well bit = encrypt) are ignored as a result.  I've only tested
	with pgp, but the same problem exists in the smime code too.
	This inline patch (against cvs head revision) fixes the problem.

2003-04-14 09:09:53  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* init.h, mutt.h, send.c: Fix the PGP / S/MIME selection mess
	in send.c.  This patch adds two new configuration variables,
	$crypt_autopgp and $crypt_autsmime.  Both are set to "yes"
	by default.  By turning them off, you can disable the automatic
	selection of one or both mechanisms.  (Useful when your mutt is
	PGP- and S/MIME enabled, but you only use, say S/MIME.)

2003-04-11 15:15:04  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* send.c: Backing out the previous change. It was nonsense.

2003-04-11 11:56:58  Lars Hecking  <lhecking@nmrc.ucc.ie>  (roessler)

	* config.guess, config.sub, depcomp, install-sh, missing,
	mkinstalldirs: updates.

2003-04-11 11:56:22  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* send.c: Try to fix a PGP / S/MIME-related problem.  Found by
	Matt Larson <mlarson@verisign.com>, tracekd down by René Clerc
	<rene@clerc.nl>.

	* thread.c: Fix a segmentation fault.

2003-04-09 08:21:59  Zardoz@users.sourceforge.net  (roessler)

	* recvcmd.c: Fix #1531.  (recvcmd.c duplicate of #1528)

2003-04-08 22:32:56  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* lib.c: Avoid a division by zero.

	* color.c: Make sure has_colors() is only invoked when OPTNOCURSES
	is unset.  This fixes a segmentation fault on RH 8.0 which was
	observed by Matt Larson <mlarson@verisign.com>.

	* browser.c, enter.c, imap/imap.c, lib.c, mutt_idna.c, mx.c,
	sendlib.c, smime.c, thread.c: Try to catch a couple of cases
	in which parameters for malloc calls could overflow.  Thanks to
	Timo Sirainen for the heads-up.

	* po/es.po: Mark a translation as fuzzy in order to fix #1522.

2003-04-07 20:08:10  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* commands.c: Fix #1528.

2003-04-07 07:57:49  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update

2003-04-06 11:00:59  Ivan Vilata i Balaguer  <ivan@selidor.net>
(roessler)

	* po/ca.po: update

2003-04-02 09:05:19  Bjoern Jacke  <muttbug@j3e.de>  (roessler)

	* smime_keys.pl: - add a missing filehandle closure - some
	cleanups of unused/bogous code

2003-04-02 08:47:28  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* contrib/Makefile.in, contrib/colors.default,
	contrib/colors.linux: sample.muttrc-tlr would try to include
	my color configurations, which weren't distrubted.  Fix that.
	(Bug noted while helping someone else to configure mutt during
	a conference.)

	* contrib/sample.muttrc: Fix sample.muttrc.

2003-04-02 08:40:50  Gary Johnson  <garyjohn@spk.agilent.com>  (roessler)

	* curs_main.c: Here is the patch to fix the bug I reported
	earlier in this thread, that sometimes when changing folders,
	mutt would generate an error message and stop the further
	processing of folder-hooks.

2003-04-02 08:38:13  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2003-04-02 08:34:49  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* po/ja.po: update

2003-04-02 08:31:00  Roland Rosenfeld  <roland@spinnaker.de>  (roessler)

	* po/de.po: update

2003-04-02 08:28:24  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* init.h, mutt.h, pgp.c: Here is the pgp_check_exit patch
	updated for 1.5.4.  This patch adds the pgp_check_exit option
	(enabled by default) that causes mutt to check the exit code
	of the PGP subprocess.	A non-zero exit code means that the
	subprocess failed and mutt will not continue to send the message.

	This is needed as in certain cases, PGP or GnuPG can fail to
	completely process a document (say, if the gpg.conf file is
	mangled, which is how I discovered the problem).  Without an
	exit code check, mutt will continue anyway and send the half
	processed file.

2003-04-02 08:21:09  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* po/ru.po: update.

2003-03-19 22:43:08  roessler  (roessler)

	* po/pl.po, po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po,
	po/uk.po, po/zh_CN.po, po/zh_TW.po, po/et.po, po/fr.po, po/gl.po,
	po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po, po/lt.po,
	po/nl.po, ChangeLog, Makefile.am, VERSION, po/Makefile.in.in,
	po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po, po/eo.po,
	po/es.po, reldate.h: automatic post-release commit for mutt-1.5.4

	* po/tr.po, po/uk.po, po/zh_CN.po, po/zh_TW.po, po/sk.po,
	po/sv.po, po/pl.po, po/pt_BR.po, po/ru.po, po/ja.po, po/ko.po,
	po/lt.po, po/nl.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/et.po, po/fr.po, po/da.po, po/de.po, po/el.po, po/eo.po,
	po/es.po, VERSION, po/bg.po, po/ca.po, po/cs.po, reldate.h,
	ChangeLog: automatic post-release commit for mutt-1.4.1

2003-03-19 21:56:29  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgppubring.c: Fix some memory management calls. (Stable branch.)

2003-03-19 21:33:30  Edmund GRIMLEY EVANS  <edmundo@rano.org>  (roessler)

	* imap/utf7.c: Fix a buffer overflow in utf8_to_utf7. (Stable
	branch.)

	* imap/utf7.c: Fix a buffer overflow in utf8_to_utf7.

2003-03-18 14:51:52  Andrew W. Nosenko	<awn@bcs.zp.ua>  (roessler)

	* buffy.c, parse.c: - buffy.c (test_last_status_new): Fix memory
	  leak.  Envelope structure allocated by mutt_read_rfc822_header()
	  was never deallocated.

	- parse.c (mutt_read_rfc822_header): Comment added about
	  needing deallocate envelope structure returned by
	  mutt_read_rfc822_header().

	* mutt_idna.c: (mutt_addr_for_display): Fix memory leak.  `user'
	and `domain' buffers was never deallocated.

	(mbox_to_udomain): Fix memory leak.  `scratch' buffer was not
	deallocated when `mbx' doesn't contain '@'. Also rewritten for
	allocating memory only when needed and only how many as needed.

2003-03-12 13:00:03  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* copy.c, sendlib.c: We need to re-format address headers instead
	of just decoding them.

2003-03-07 14:55:53  Brendan Cully  <brendan@kublai.com>  (roessler)

	* mutt_sasl.c: The global callbacks set up in sasl_client_init
	are not copied by the SASL library, so they can't be allocated
	on the stack. This is the case with both versions of the SASL
	library, and I frankly don't understand why it hasn't caused
	problems before. Since it segfaults reliably on OS X for me now,
	I thought a patch would be in order.

2003-03-07 08:23:27  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* crypt.c, pgp.h: Don't use functions without importing the
	corresponding prototype.

	* mutt_idna.c: It seems like libidn doesn't like to translate
	NULL pointers.

2003-03-07 07:52:49  Jim Mock  <mij@soupnazi.org>  (roessler)

	* globals.h: globals.h is looking for crypt.h instead of
	mutt_crypt.h.

2003-03-06 21:23:53  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* send.c: Fixing a segmentation fault.	Here's how to reproduce
	it: Start mutt.  Compose a new message, with an attachment.
	Turn on PGP signing.  Press C-G on the pass phrase prompt.
	Turn off PGP signing.  Try to send the message.

2003-03-05 21:18:24  Andrew W. Nosenko	<awn@bcs.zp.ua>  (roessler)

	* protos.h, sort.c: Fix a warning.

	* mutt_idna.c: Fix tlr's pre-processor screw-up.

2003-03-04 09:51:07  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* mutt_idna.c, mutt_socket.c: Unset UseSTD3ASCIIRules, and set
	AllowUnassigned.  (Just reading some standards.)

2003-03-04 09:31:19  Edmund GRIMLEY EVANS  <edmundo@rano.org>  (roessler)

	* handler.c: Be more friendly about bad multipart/alternative
	bodies; #1478. Note that the relevant standards explicitly
	*forbid* nested MIME encodings.

2003-03-04 09:27:21  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* copy.c: Fix another stupid error, and decode IDNs in the
	CC header.

	* init.h: Fix two typos in one line.  Noted by Thomas Glanzmann
	and Steve Kennedy.

	* addrbook.c, alias.c, send.c: Fixing more IDN bugs.

2003-03-03 14:25:14  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* copy.c, sort.c: Fixing some nits.

	* mutt_socket.c: IDNA support for the socket back-end.

	* Makefile.am, addrbook.c, alias.c, charset.h, commands.c,
	compose.c, configure.in, copy.c, edit.c, hdrline.c, headers.c,
	init.c, main.c, mutt_idna.c, mutt_idna.h, pgpinvoke.c,
	protos.h, query.c, recvcmd.c, rfc822.c, rfc822.h, send.c,
	sendlib.c: IDN support for e-mail messages.  Things should work
	automagically once you have the GNU IDN library available from
	ftp://alpha.gnu.org/pub/gnu/libidn/ installed.	For IDN's which
	can't be losslessly recoded to your local character set, mutt
	should automatically fall back to using the ASCII representation.
	There's probably a considerable number of bugs in this, and the
	code may, at this point, not even compile on machines without
	libidn.  Will start working on that ASAP.

	* contrib/sample.muttrc, doc/manual.sgml.head, recvcmd.c,
	commands.c, init.h, mutt.h: Introduce a new option named
	$bounce, and fix some inconsistencies in the messages created
	when bouncing.	Based on work done by Thomas Glanzmann
	<sithglan@stud.uni-erlangen.de>.

2003-02-25 22:00:38  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* commands.c, recvcmd.c: Fix some (too lazy and tired to do all)
	of the inconsistencies between message and attachment bouncing.

	* crypt.c: I should test-compile things before committing.
	Stupid typo.

2003-02-25 21:41:32  Michael Elkins  <me@sigpipe.org>  (roessler)

	* query.c: Use mutt_strwidth for query response formatting.
	(#1477)

2003-02-25 21:37:59  Christian Vogel  <vogelchr@vogel.cx>  (roessler)

	* mx.c: Recognize MH folders used by sylpheed.

2003-02-25 21:35:24  jesus.climent@hispalinux.es  (roessler)

	* po/es.po: Fix a typo. (#1482)

2003-02-25 21:33:16  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/manual.sgml.head: Remove some ftp.guug.de URLs from the
	manual. (#1485)

	* crypt.c: Fix #1486; noted by Jeroen Coekaerts
	<jeroen@coekaerts.be>.

2003-02-19 21:33:43  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* pgpmicalg.c: 3156 defined several micalg values (pgp-md5,
	pgp-sha1, etc.)  Since then, three more hashes have been assigned
	numbers in 2440bis.  Here is a patch to add values for pgp-sha256,
	pgp-sha384, and pgp-sha512 so mutt can properly handle them.

2003-02-19 21:31:19  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* parse.c: Fix a memory leak observed by Vineet Kumar
	<mutt-dev@virtual.doorstop.net>.

2003-02-13 09:55:02  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* init.h: Here are some updates to the muttrc docs (spell check,
	language tweaks, etc).	No functional changes - this is just
	language stuff.

2003-02-13 09:50:00  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Fix #1444, Debian #178563.  The details of this problem
	were tracked down by Steven Barker <steve@blckknght.org>.

2003-01-31 00:15:03  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* init.h: Change the default for crypt_replyencrypt back to "yes".
	Noted by Thomas Poindessous in Debian bug #178899; also #1448.

	* pgp.c: Fix #1442 (thanks, Dale); properly initialize some
	pointers which could otherwise lead to crashes.

2003-01-30 23:54:30  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* crypt.c, init.h, mutt.h, mutt_crypt.h, send.c: Introduce
	$pgp_auto_traditional.

2003-01-30 23:48:36  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* flags.c: The IMAP ACL patch broke things.

2003-01-23 22:05:02  Nathan Dushman  <nhd+mutt@andrew.cmu.edu>	(roessler)

	* pop_auth.c: SASL2 support for popo_auth.c.

	* curs_main.c, flags.c, imap/imap.c, pager.c: The attached
	patch provides improved support for IMAP ACLs (on servers that
	support them).	This means that mutt will now write the Seen
	flag in mailboxes that allow it, even if the mailbox doesn't
	allow other changes.

2003-01-23 22:01:03  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* handler.c: Automatically use the text/plain handler for text/*
	body parts which don't have a handler of their own.

2003-01-21 18:56:10  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* cryptglue.c: Fix a typo which broke pgp-extract-traditional.

	* mutt_crypt.h: Fix an #ifdef.

2003-01-21 12:33:41  Werner Koch  <wk@gnupg.org>  (roessler)

	* Makefile.am, acconfig.h, attach.c, commands.c, compose.c,
	 configure.in, copy.c, copy.h, crypt.c, cryptglue.c, curs_main.c,
	 functions.h, globals.h, gnupgparse.c, handler.c, hdrline.c,
	 headers.c, hook.c, init.c, init.h, keymap.c, keymap.h,
	 main.c, mutt.h, mutt_crypt.h, muttlib.c, mx.c, pager.c,
	 parse.c, pattern.c, pgp.c, pgp.h, pgpkey.c, pgplib.c, pgplib.h,
	 pgppubring.c, pop.c, postpone.c, protos.h, recvattach.c, send.c,
	 sendlib.c, smime.c, smime.h, sort.h:  - To cleanup the pgp/smime
	 code and prepare for other backends.  - Support gpg-agent by
	 not asking for a passphrase - autconf cleanups.

	This is just a start and probably we need a couple of other things
	to do. One drawback is that the help menu does always list all
	crypto realted stuff even when configured for no crypto at all.
	Same goes for the configure options but I consider thsi a feature:
	It allows to use the same .muttrc for different versions of mutt -
	at least during development, this is an advantage.  This all might
	be fixed but requires some changes to the configuration system.

	Note, the use of the WithCrypto macro - it enables the compiler
	to do dead-code-elimination depending on the configured backend.
	This is better readable than all the nested ifdefs.  I did some
	short tests and it seems to work, althoug mutt's size does not
	change largely when compiled w/o crypto.

	cryptglue.c is new as a warpper to all crypto calls; some are
	still in crypt.c but they should eventually also be wrapped.
	We don't use function pointers to keep a path to use dlopen or
	runtime configured backends.  crypt.h is also new and replaces
	pgp.h and smime.h in most files (except for the backend).



	2003-01-06  Werner Koch  <wk@gnupg.org>

		* crypt.c (crypt_valid_passphrase): Detect gpg-agent and
		don't ask for the passphrase.  * pgp.c (pgp_decrypt_part,
		pgp_application_pgp_handler) (pgp_sign_message,
		pgp_encrypt_message) (pgp_traditional_encryptsign):
		Make sure that we never ever send the passphrase if the
		gpg-agent has been detected.  Likewise.

		* acconfig.h: Removed all remaining stuff as AC_TEMPLATEs
		to configure.in. BTW, we should consider to rename
		configure.in to configure.ac.

	2003-01-04  Werner Koch  <wk@gnupg.org>

		Replaced the use of HAVE_PGP and HAVE_SMIME by a more
		readable and extendable solution.

		* pgplib.h: Moved enum pgp_ring and KEYFLAGS_* to *
		crypt.h: here.	* smime.c (mutt_is_application_smime):
		Moved to * crypt.c (mutt_is_application_smime):
		here.  * pgp.c (mutt_is_application_pgp): Moved to
		* crypt.c (mutt_is_application_pgp): here.  * pgp.c
		(pgp_is_multipart_encrypted): Removed. Merged code with *
		crypt.c (mutt_is_multipart_encrypted): this.

		* mutt.h: Protect against double inclusion.

		* pgplib.h (struct pgp_keyinfo): Remove the typedef to
		pgp_key_t.  * crypt.h (pgp_key_t): Declare the typedef
		here.  NOTE:  This is now a pointer.  Changed all usages
		accordingly.

		* configure.in: Replace HAVE_PGP and HAVE_SMIME by the
		new CRYPT_BACKEND macros.  Always include all OPS.*.
		(LIBOBJ): Replaced by AC_LIBOBJ as required by newer
		autoconfs.  * Makefile.am (EXTRA_mutt_SOURCES): Move
		crypt.c to mutt_SOURCES.  (mutt_SOURCES): Add cryptglue.c
		(EXTRA_DIST): Add crypt.h

		* pgp.h, pgplib.h, smime.h: Use the header only
		when the approriate backend has been configured.  *
		pgp.c, pgpkey.c, smime.c: Build only if the approriate
		CRYPT_BACKEND_ macro is defined.  * pgp.h, smime.h,
		global.h: Moved all variable declarations to global.h
		because they are now always defined.

		* sort.h: Always define PgpSortKey, although it does
		not belong to here.

		* keymap.h: Unconditionally include all PGP and SMIME
		stuff.	* mutt.h: Ditto.  * protos.h: Ditto.

		* init.h (HAVE_SMIME): Unconditionally include all
		crypto related definitions.  Mark the doc entries with
		"(Crypto/PGP/SMIME only)".

		* globals.h: Replace gpg.h and smime.h by crypt.h.

		* functions.h: Always include all crypto commands.

		* copy.h: Unconditionally define the crypto related M_CM_

		* pgplib.h: Move APPLICATION_PGP and PGP* to crypt.h
		and include it.  * smime.h: Move APPLICATION_SMIME
		and SMIME* to crypt.h and include it.  * mutt_crypt.h
		(ENCRYPT,SIGN,GOODSIGN, BADSIGN): Move to crypt.h.

		* crypt.c: Replaced pgp.h and smime.h header by crypt.h.
		Always include all functions but shortcut them depending
		on WITHCRYPTO.	All over the place use WITHCRYPTO
		instead of ifdefs.  Replaced all direct calls of the
		backend fucntions by twrapper functions defined in
		cryptglue.c (crypt_get_keys): Removed prototypes.
		* pgp.h (pgp_findKeys): New prototype.	* smime.h
		(smime_findKeys): New prototype.  * cryptglue.c: New.
		* crypt.h: New.  * mutt_crypt.h: Moved all crypt_*
		prototypes to gcrypt.h.  Unconditionally use this file.

		* init.c: Replaced pgp.h and smime.h header by crypt.h.
		(parse_set): Use WITHCRYPTO instead of ifdefs.
		(mutt_var_value_complete): Ditto.

		* sendlib.c: Replaced pgp.h and smime.h header by crypt.h.
		(write_as_text_part): Now one macro using WITHCRYPTO.
		(mutt_write_mime_body): Use WITHCRYPTO instead of ifdefs.
		(mutt_make_message_attach): Ditto.  (mutt_write_fcc):
		Ditto.

		* send.c: Replaced pgp.h and smime.h header by crypt.h.
		(include_forward): Use WITHCRYPTO and validate
		passphrases for pgp and smime.	(include_reply): Ditto.
		(generate_body): Use WITHCRYPTO instead of ifdefs.
		(ci_send_message): Ditto.

		* recvattach.c: Replaced pgp.h and smime.h header
		by crypt.h.  (mutt_gen_attach_list): Use WITHCRYPTO
		instead of ifdefs.  (mutt_attach_display_loop): Ditto
		(mutt_view_attachments): Ditto.

		* postpone.c: Replaced pgp.h and smime.h header by
		crypt.h.  (mutt_get_postponed): Use WITHCRYPTO instead
		of ifdefs.  (mutt_parse_crypt_hdr): Always include and use
		WITHCRYPTO instead of ifdefs.  (mutt_prepare_template):
		Use WITHCRYPTO instead of ifdefs.

		* pop.c: Removed pgp.h and smime.h.  (pop_fetch_message):
		Use WITHCRYPTO instead of ifdefs.

		* pattern.c: Replaced pgp.h and smime.h header by crypt.h.
		(Flags): Always include the crypto flags.  (msg_search):
		Use WITHCRYPTO instead of ifdefs.  (mutt_pattern_exec):
		Ditto.

		* parse.c: Removed pgp.h and smime.h.
		(mutt_parse_mime_message): Use WITHCRYPTO instead
		of ifdefs.

		* pager.c: Replaced pgp.h and smime.h header by crypt.h.
		(mutt_pager): Use WITHCRYPTO instead of ifdefs.

		* mx.c: Removed smime.h and pgp.h.  (mx_update_context):
		Use WITHCRYPTO instead of ifdefs.

		* muttlib.c: Replaced pgp.h and smime.h header by crypt.h.
		(mutt_needs_mailcap): Use WITHCRYPTO. Note, that there
		used to be an error when PGP was not configured so
		that TYPEAPPLICATION was not recognized for SMIME.
		(mutt_is_text_part): Use WITHCRYPTO instead of ifdefs.

		* main.c: Include crypt.h.  (show_version): Remove
		HAVE_PGP and HAVE_SMIME.  Add CRYPT_BACKEND_CLASSIC_PGP,
		CRYPT_BACKEND_CLASSIC_SMIME.

		* keymap.c: Include crypt.h so that we can test
		WITHCRYPTO.  (Menus): Always include pgp and smime.
		(km_init): Create smime and pgp bindings depending
		on WITHCRYPTO.	(km_get_table): Return OpPgp depending
		on WITHCRYPTO.

		* hook.c (mutt_parse_hook): Use WITHCRYPTO instead
		of ifdefs.  (mutt_crypt_hook): Always include.

		* headers.c: Replaced pgp.h and smime.h header by crypt.h.
		(mutt_edit_headers): Use WITHCRYPTO instead of ifdefs

		* hdrline.c: Replaced pgp.h and smime.h header by crypt.h.
		(hdr_format_str): Use WITHCRYPTO.

		* handler.c: Replaced pgp.h and smime.h header by crypt.h.
		(mutt_can_decode): Use WITHCRYPTO instead of ifdefs.
		(mutt_can_decode): Application/smime is now also checked
		when PGP support is not configured.  (mutt_body_handler):
		Use WITHCRYPTO

		* curs_main.c: Replaced pgp.h and smime.h header
		by crypt.h.  (mutt_index_menu): Shortcut crypto only
		operations depending on WITHCRYPTO.

		* copy.c: Replaced pgp.h and smime.h header by crypt.h.
		(_mutt_copy_message):

		* compose.c: Replaced pgp.h and smime.h header by crypt.h.
		(enum): Always include HDR_CRYPT and HDR_CRYPTINFO.
		(redraw_crypt_lines): Always include this fnc but shortcut
		it depending on WITHCRYPT.  Draw lines depending on
		the configured crypto support.	(pgp_send_menu):
		Always include this one.  Call wrapper functions.
		(smime_send_menu): Likewise.  (draw_envelope): Use
		WITHCRYPTO instead of ifdefs.  (mutt_compose_menu):
		Allow pgp/smime commands only when configured.

		* commands.c: Replaced pgp.h and smime.h header
		by crypt.h.  (mutt_display_message,pipe_msg,
		_mutt_pipe_message) (set_copy_flags, mutt_save_message,
		mutt_edit_content_type) (_mutt_check_traditional_pgp):
		Use pgp wrapper.

		* attach.c (mutt_view_attachment): Removed HAVE_GPG and
		HAVE_SMIME and replaced by global variable WITHCRYPTO.
		Replaced pgp and smime header by crypt.h.x

2003-01-09 17:27:25  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgppubring.c: Don't make a "hard" transition to the new GnuPG
	syntax in pgpring.  This change undoes one of David Shaw's
	changes which were just committed.

2003-01-09 17:24:41  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* gnupgparse.c, pgppubring.c: The latest GnuPG has new abilities
	to work with disabled keys.  Part of this change will eventually
	involve moving the 'd' that indicates a disabled key to a
	different part of the key listing.

	To smooth this transition, as of version 1.2.2, GnuPG will
	start giving the 'd' in both places (and will do this for a good
	long time).

	Here is a patch so mutt will accept either the old or new syntax.

2003-01-09 17:23:23  dshaw@jabberwocky.com  (roessler)

	* curs_lib.c: A recent change causes all mutt_yesorno prompts
	to come out as [yes]/yes or [no]/no.  Here's a fix.

2003-01-05 22:16:02  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* smime_keys.pl: Error checking for the creation of the temporary
	directory; also, use file mode 0700.

2003-01-05 22:08:25  Bjoern Jacke  <bjoern@j3e.de>  (roessler)

	* smime_keys.pl: Improve temporary file handling.

2003-01-05 22:02:37  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* commands.c: Another mutt_yesorno() change, in order to correctly
	interpret a C-g.

2003-01-05 22:00:00  Armin Wolfermann  <aw@osn.de>  (roessler)

	* recvcmd.c, send.c, alias.c, attach.c, commands.c, curs_lib.c,
	main.c, muttlib.c, mx.c, pgpkey.c: Fix a number of invocations
	of mutt_yesorno(): Always explicitly use the M_YES and M_NO
	constants.  Fixes a couple of cases in which C-g would be
	mis-interpreted.

2003-01-03 18:07:36  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Detect in-line key material when checking for traditional
	PGP messages.

2002-12-22 20:04:51  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update

2002-12-22 20:01:32  Bjoern Jacke  <bjoern@j3e.de>  (roessler)

	* smime_keys.pl: Remove an unnecessary invocation of "cat";
	call openssl with the full path.

2002-12-22 11:20:00  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: Another fr.po update for the CVS (taking into account
	the change in pgpkey.c:486)...

2002-12-22 11:17:24  Martin Michlmayr  <tbm@cyrius.com>  (roessler)

	* hdrline.c, init.h: Add %A to the format strings, which expands
	to the reply-to address (if present) or to the author's address
	when there's no Reply-To header.

2002-12-21 20:32:13  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* ChangeLog: ok, gotos suck.

	* curs_main.c: OK, Michael is right: Gotos suck. ;-)

2002-12-21 13:25:11  Vsevolod Volkov  <vvv@mutt.org.ua>  (roessler)

	* po/ru.po: update

2002-12-20 09:37:59  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* pgpkey.c: Minor tweak to an error message.

2002-12-20 09:29:12  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (roessler)

	* po/pl.po: update

2002-12-19 11:48:58  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/manual.sgml.head, doc/muttrc.man.head: Improve the
	documentation of pgp-hook/crypt-hook.

	* pgpkey.c: Don't bother the user with weak keys when there's
	a strong one.  Experimental, based on discussions on mutt-dev.

	* cvslog2changelog.pl: Identify both the author of a change and
	the one who committed it to the CVS in the changelog.

2002-12-19 07:42:36  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2002-12-19 07:37:01  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: Michael doesn't have $VISUAL set.

2002-12-18 17:29:56  Sahil Tandon  <sahil@brandeis.edu>  (me)

	* init.h:	I found a small typo in the manual, specifically
		at this[1] URL.  The description of the smart_wrap
		variable reads: "Controls the display of lines longer
		then the screen width in the internal pager."  The word
		_then_ should be _than_ if I'm not mistaken.

2002-12-18 10:26:35  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po, po/ca.po, po/cs.po, po/da.po, po/de.po, po/el.po,
	po/eo.po, po/es.po, po/et.po, po/fr.po, po/gl.po, po/hu.po,
	po/id.po, po/it.po: make update-po

	* mkchangelog.sh: Turn on compression when getting log messages
	from the CVS server.  (Now that I don't have the server locally,
	bandwidth is expensive...  ;-)

	* keymap.c: Make the messages from the what-key function
	internationalizable.

	* crypt.c, crypt.h, mutt_crypt.h, pgp.c, pgp.h, smime.c, smime.h:
	Rename crypt.h to mutt_crypt.h.

	* Makefile.am: cvs update ChangeLog before trying to update
	it locally.

2002-12-18 07:37:56  Roland Rosenfeld  <roland@spinnaker.de>  (roessler)

	* po/de.po: update

2002-12-17 13:45:16  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update fr.po

2002-12-17 13:04:29  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* .cvsignore: Ignore some more files.

	* Makefile.am, mkjtags.c: Remve that jed tags generator.  I don't
	use it anyway.

	* cvslog2changelog.pl: Adding Michael's address to the changelog
	generator.

	* build-release: Adopting the release-building script to the
	new changelog process.

2002-12-17 10:37:24  roessler  (roessler)

	* po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po, po/zh_CN.po,
	po/zh_TW.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po,
	po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po, po/es.po, po/et.po,
	po/fr.po, po/gl.po, VERSION, build-release, po/ca.po, po/cs.po,
	po/da.po, po/de.po, po/el.po, po/eo.po, reldate.h: automatic
	post-release commit for mutt-1.5.3

2002-12-17 09:50:26  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* OPS, curs_main.c, functions.h: Experimental: Introduce
	{next,previous}-new-then-unread.  These functions behave
	like {next,previous}-new as long as new messages are visible.
	When no new messages are visibuel any more, there's a fall-back
	to {next,prev}-unread.

	Memo to self: Impose a weekly quota on the use of goto statements.

2002-12-16 20:28:46  Edmund GRIMLEY EVANS  <edmundo@rano.org>  (roessler)

	* handler.c, rfc2047.c, url.c: Fix #1424.

2002-12-16 17:59:51  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* pgp.c: Experimental short-cut code if the "image" of an address
	under a pgp-hook looks like a hexadecimal key id.

2002-12-13 15:53:36  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* lib.c: Fixing Thomas' screw-up in mutt_concat_path.

2002-12-13 11:00:44  René Clerc  <rene@clerc.nl>  (roessler)

	* po/nl.po: update.

2002-12-11 22:47:57  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* muttlib.c, pgp.c, protos.h, send.c: Fix #1417; thanks to
	Derek D. Martin <ddm@sophic.org> for the excellent observation.
	(In addition to the fix proper, some tracking of temporary files
	is added to mutt's debugging output.)

	* crypt.c: Call endwin() before calling PGP for traditional
	encryption.

2002-12-11 15:51:57  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update.

2002-12-11 15:20:21  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* browser.c, complete.c, hook.c, init.c, lib.c, lib.h: Herbert
	Martin Dietze <herbert@the-little-red-haired-girl.org> notes that
	mutt may currently build IMAP URLs like imap://exchange//herbert
	for FCCs.  The fix in this patch is to include a function named
	mutt_concat_path which concatenates path elements, but avoids
	the creation of double slashes.  (These don't create problems
	when you're just accessing the file system, but apparently thy
	do cause problems with IMAP.)

	* imap/auth.c, imap/command.c, imap/imap.c, imap/imap.h,
	imap/util.c, date.c, dotlock.c, dotlock.h, edit.c, editmsg.c,
	enter.c, extlib.c, flags.c, from.c, functions.h, gnupgparse.c,
	handler.c, hash.c, hash.h, headers.c, help.c, history.c,
	history.h, keymap.c, keymap.h, lib.c, lib.h, main.c, makedoc.c,
	mapping.h, menu.c, mh.c, mime.h, mkjtags.c, mutt_curses.h,
	mutt_menu.h, mutt_regex.h, mutt_socket.c, muttlib.c, mx.c, mx.h,
	pager.h, parse.c, pattern.c, pgp.c, pgp.h, pgpinvoke.c, pgpkey.c,
	pgplib.c, pgplib.h, postpone.c, protos.h, query.c, recvattach.c,
	recvcmd.c, remailer.c, remailer.h, resize.c, rfc1524.c, rfc1524.h,
	rfc2047.c, rfc2047.h, rfc2231.c, rfc2231.h, rfc822.c, rfc822.h,
	score.c, signal.c, snprintf.c, sort.c, sort.h, status.c,
	system.c, thread.c, url.c, addrbook.c, alias.c, attach.c,
	attach.h, browser.c, browser.h, buffy.c, buffy.h, charset.c,
	charset.h, commands.c, complete.c, compose.c, copy.h, crypt.c,
	crypt.h, curs_main.c: Fix Mike's and my e-mail addresses in
	copyright lines.

	* muttbug.sh.in: Ask for the user's e-mail address.

	* pager.c: Try to make search-next behave more closely to what
	people are used to, again.  The behaviour introduced by this
	patch will give you the previous search string as the default,
	but will search-next when you just press enter without changing
	the search string.

2002-12-10 20:56:52  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* imap/command.c, imap/imap.c, imap/message.c, imap/utf7.c,
	imap/util.c, score.c, send.c, sendlib.c, smime.c, thread.c, url.c,
	addrbook.c, alias.c, attach.c, browser.c, buffy.c, charset.c,
	color.c, compose.c, copy.c, crypt.c, curs_main.c, enter.c,
	gnupgparse.c, hash.c, history.c, hook.c, init.c, lib.c, main.c,
	mbox.c, menu.c, mh.c, mutt_ssl.c, mutt_ssl_nss.c, muttlib.c,
	mx.c, pager.c, parse.c, pattern.c, pgp.c, pgpkey.c, pgplib.c,
	pgppacket.c, pgppubring.c, pop.c, pop_auth.c, postpone.c,
	query.c, recvattach.c, remailer.c, rfc1524.c, rfc2047.c,
	rfc2231.c, rfc822.c: Replace safe_free calls by the FREE macro.

2002-12-09 19:06:40  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: Minor formatting fix.

	* cvslog2changelog.pl: Change the ChangeLog format as suggested
	by  Martin Michlmayer.

	* send.c: Try to fix another obscure error in S/MIME auto-signing
	upon reply.

	* rfc822.c: Experimental patch to fix #1318.

2002-12-09 18:09:49  David Jardine  <david@jardine.de>	(roessler)

	* init.h: Documentation fix concerning %L in index_format.  #1313.

2002-12-09 18:05:54  David Shaw  <dshaw@jabberwocky.com>  (roessler)

	* mh.c, parse.c: Reduce the meaning of the mark_old option so
	it only controls whether new messages are marked as old when
	leaving the mailbox.

2002-12-09 17:54:25  Jesus Climent  <jesus.climent@hispalinux.es>
(roessler)

	* po/es.po: Fix a typo.  (#1392)

2002-12-09 17:52:50  Anders Helmersson	<anders.helmersson@telia.com>
(roessler)

	* addrbook.c, curs_lib.c, protos.h, query.c: Fix #1390.  Based on
	a patch submitted earlier by Edmund Grimley Evans.

2002-12-09 17:44:54  roessler  (roessler)

	* PATCHES: Ups.

2002-12-09 17:44:28  Michael Elkins  <me@sigpipe.org>  (roessler)

	* OPS, PATCHES, curs_main.c, functions.h, keymap.c, keymap.h,
	menu.c: This patch adds two features to mutt:

	- you can now specify the octal code of a key in a bind or
	  macro function, using the syntax <NNN>.  Eg, bind index <541>
	  show-version This allows you to bind to a function key for
	  which Mutt doesn't have a friendly name associated with it.

	- adds a what-key function which allows you to press a key and
	  have mutt show you the decimal/octal value.  (not bound to
	  anything by default)

2002-12-09 16:07:24  Toomas Soome  <tsoome@muhv.pri.ee>  (roessler)

	* po/et.po: update.

2002-12-09 13:30:02  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* po/pt_BR.po, po/ru.po, po/sk.po, po/sv.po, po/tr.po, po/uk.po,
	po/zh_CN.po, po/zh_TW.po, po/gl.po, po/hu.po, po/id.po, po/it.po,
	po/ja.po, po/ko.po, po/lt.po, po/nl.po, po/pl.po, po/eo.po,
	po/es.po, po/et.po, po/fr.po, po/ca.po, po/cs.po, po/da.po,
	po/de.po, po/el.po, compose.c: Try to fix a localization issue
	identified by Pawel Dzienkonski (#1410).  Side effect: All
	translations will need an update of the S/MIME key translations.

2002-12-09 11:20:14  Pawel Dziekonski  <dzieko@pwr.wroc.pl>  (roessler)

	* po/pl.po: update.

2002-12-08 23:14:43  ph04169@cc.uoi.gr	(roessler)

	* po/el.po: update.

2002-12-08 16:11:35  TAKAHASHI Tamotsu	<ttakah@lapis.plala.or.jp>
(roessler)

	* po/ja.po: update.

2002-12-08 15:10:59  Roland Rosenfeld  <roland@spinnaker.de>  (roessler)

	* po/de.po: Update.

2002-12-07 19:19:34  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: yet another one.

	* Makefile.am: Another changelog-related change.

	* ChangeLog, Makefile.am, cvslog2changelog.pl: Automatically
	update ChangeLog as part of the commit process.

	* doc/Makefile.in, ChangeLog, ChangeLog.old, Makefile.am,
	cvslog2changelog.pl, mkchangelog.sh: Change the style
	of ChangeLog: Now, the actual patch submitter's name is
	extracted from the commit message and used for the change log.
	For the moment, the date format doesn't match the one in the
	old changelog.	If you want to fix this, submit a patch to
	cvslog2changelog.pl. ;-)

2002-12-07 08:55:59  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update

2002-12-07 08:55:23  Paul Walker  <paul@black-sun.demon.co.uk>	(roessler)

	* pgppubring.c: Fix a compilation warning.

2002-12-07 08:53:21  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* mh.c, mutt.h, muttlib.c: Gracefully handle unknown maildir
	flags.

2002-12-06 11:30:08  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: Run check_sec.sh before committing.

2002-12-06 11:28:30  Brendan Cully  <brendan@kublai.com>  (roessler)

	* m4/gettext.m4, m4/iconv.m4, build-release, configure.in:
	autoconf cleanup.

2002-12-06 11:14:13  roessler  (roessler)

	* po/zh_CN.po, po/zh_TW.po, po/uk.po, po/ru.po, po/sk.po,
	po/sv.po, po/tr.po, po/lt.po, po/nl.po, po/pl.po, po/pt_BR.po,
	po/gl.po, po/hu.po, po/id.po, po/it.po, po/ja.po, po/ko.po,
	po/el.po, po/eo.po, po/es.po, po/et.po, po/fr.po, po/da.po,
	po/de.po, VERSION, po/ca.po, po/cs.po, reldate.h, ChangeLog:
	automatic post-release commit for mutt-1.5.2

2002-12-06 10:56:30  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* curs_lib.c, pgppubring.c: Fixing a number of traditional malloc
	calls which have made their way into the code.

	* build-release: Don't post announcements automatically for
	the moment.

2002-12-05 22:30:02  Michael Elkins  <me@sigpipe.org>  (roessler)

	* doc/manual.sgml.head: Fix #1398.

2002-11-25 14:16:47  Lars Hecking  <lhecking@nmrc.ucc.ie>  (roessler)

	* sendlib.c, ChangeLog, INSTALL, charset.h, configure.in: The
	noiconv patch.

2002-11-14 08:12:30  Michael Elkins  <me@sigpipe.org>  (roessler)

	* curs_lib.c: Fix #1388.

2002-11-13 10:10:52  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* main.c: A description of -A was lacking from the help string.

	* doc/manual.sgml.head, doc/mutt.man, main.c, protos.h: Add a
	new command line option -A which is used to expand aliases.

	* keymap.c: Add a safeguard #ifdef for the KEY_BTAB entry.
	Suggested by Thomas Dickey.

2002-11-12 09:20:30  Michael Elkins  <me@sigpipe.org>  (roessler)

	* keymap.c: Tell mutt about the back-tab key (shift tab).

2002-11-12 09:20:09  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* Makefile.am: ups.

	* Makefile.am: Add "make pclean" in order to clean up PATCHES.

2002-11-12 08:55:57  TAKAHASHI Tamotsu	<arms405@jade.dti.ne.jp>
(roessler)

	* po/ja.po: update

2002-11-12 08:41:18  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* README: Add an explicit note that CVS doesn't work from
	ftp.mutt.org any more.

2002-11-12 08:35:34  "Yasuhiro Matsumoto"  <mattn_jp@hotmail.com>
(roessler)

	* mbyte.c: cp932 should be treated like shift_jis.

2002-11-12 08:20:11  Nathan Dushman  <nhd+mutt@andrew.cmu.edu>	(roessler)

	* imap/auth_gss.c, imap/auth_sasl.c, configure.in, main.c,
	mutt_sasl.c, mutt_sasl.h: Hi - this is a patch against mutt-1.4
	to use version 2 of the Cyrus SASL library; all changes are
	ifdef'd so as not to break SASLv1 support. This includes a patch
	to configure.in to allow the choice between v1 and v2, but someone
	with a better understanding of autoconf should double-check it.

2002-11-12 08:00:51  Michael Elkins  <me@sigpipe.org>  (roessler)

	* handler.c: Actually commit patch-1.5.1.me.long_qp.2.

	* mailbox.h, mh.c, mx.c: The maildir_time patch.

2002-11-11 21:17:25  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* muttbug.sh.in: You shall not use CVS to distribute test
	versions.

	* muttbug.sh.in: more fixes.

	* muttbug.sh.in: Add some rpm-related intelligence to flea.

	* muttbug.sh.in: Fix flea's interaction with bug(1) on Debian
	systems.

	* PATCHES: Clean up the patch list.

2002-11-11 20:32:30  Michael Elkins  <me@sigpipe.org>  (roessler)

	* PATCHES, hdrline.c: Fix #485: Make %z work like %Z inside of
	%{} in $index_format.

	* PATCHES, copy.c: Fix #1379 - update the total mailbox size
	when an attachment is deleted.

	* PATCHES, curs_main.c, menu.c, pager.c: Fix #1310; redraw
	problems.

	* doc/manual.sgml.head, init.h: Fix #1306.

	* send.c: Fix #1364.

2002-11-11 19:50:23  Steve Kennedy  <steve-md@gbnet.net>  (roessler)

	* pgp.c: Fix memory leak in the PGP code.

2002-11-11 19:46:29  Paul Walker  <paul@black-sun.demon.co.uk>	(roessler)

	* commands.c, protos.h, sendlib.c: Fix #718.

2002-11-11 19:38:30  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* sendlib.c: Fix #1366.

2002-11-11 19:24:24  Martin Siegert  <siegert@sfu.ca>  (roessler)

	* mx.c: Fix IMAP moving; #1367.

2002-11-11 19:22:17  rene@clerc.nl  (roessler)

	* send.c: Another S/MIME ifdef misses and causes compilation
	problems.

2002-11-11 19:21:24  Michael Elkins  <me@sigpipe.org>  (roessler)

	* init.h: patch-1.5.1-me.status_doc.2

2002-11-11 19:16:11  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* alias.c, init.c, protos.h: patch-1.5-tlr.alias-parse.1 -
	extension of patch-1.5.1-me.aliascheck.1

	This patch catches the same kind of bad alias names caught by
	Michael's patch.  There are some extensions:

	1. Mutt makes sure that it doesn't _suggest_ bad names to
	the user.  2. If a name is bad, the user is informed, and may
	elect to fix the
	   name.  In this case, mutt will automatically suggest a fixed
	   version.
	3. If the user insists in the bad name, it's written into the
	   aliases file with proper quoting.
	4. When mutt parses the aliases file, it now uses the normal
	   tokenizer routines in order to properly handle quoted alias
	   names.

2002-11-11 18:36:25  Michael Elkins  <me@sigpipe.org>  (roessler)

	* handler.c: patch-1.5-me.long_qp.2 (#1371) - fix truncation
	with overly long Q-P encoded lines.

2002-10-22 21:24:07  René Clerc  <rene@clerc.nl>  (roessler)

	* commands.c: Add some missing #ifdefs.

2002-10-22 21:23:20  Michael Elkins  <me@sigpipe.org>  (roessler)

	* init.h, recvattach.c: Documentation fix; #1326

2002-10-22 21:22:45  René Clerc  <rene@clerc.nl>  (roessler)

	* send.c: Another crypt_reply fix.

2002-10-10 09:50:03  René Clerc  <rene@clerc.nl>  (roessler)

	* send.c: Make sure that crypt_reply replies with the same type,
	despite a possible S/MIME default.

2002-10-10 09:43:29  Michael Elkins  <me@sigpipe.org>  (roessler)

	* doc/manual.sgml.head, doc/manual.sgml.head: Document escaping
	rules for regular expressions (#1351).

	* pager.c: Fix header coloring, so there is no difference between
	ncurses and slang.

	* init.h: PGP documentation glitch.

2002-10-10 09:33:33  Paul Walker  <paul@black-sun.demon.co.uk>	(roessler)

	* doc/manual.sgml.head: Fix #1340 (documentation)

2002-10-10 09:33:05  Michael Elkins  <me@sigpipe.org>  (roessler)

	* pager.c: Jeremy Lin wrote: > When I search with / and get
	a match, doing '/\r' doesn't move to the next > match. This
	behavior is unlike the less pager, and is rather useless, IMHO.

	Try the attached patch.

2002-09-23 12:08:43  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* buffy.c: A variant of buffy notification.  Note:  If you folks
	don't like this, we can return to the old version.

2002-09-09 21:48:19  Rudi Chiarito  <nutello@sweetness.com>  (roessler)

	* OPS, browser.c, buffy.c, curs_main.c, functions.h, pager.c,
	protos.h: Add a buffy-list function, and display more information
	when new mail arrives.	With some modifications from tlr.

2002-09-09 21:19:08  Michael Elkins  <me@sigpipe.org>  (roessler)

	* mh.c: Fix #1321.

	* mh.c: [STABLE] Fix #1321.

2002-09-09 21:04:03  Tony Leneis  <tony@cvr.ds.adp.com>  (roessler)

	* signal.c: Tru64 Unix portability patch.

	* signal.c: [STABLE] Tru64 Unix portability patch.

2002-09-09 21:02:05  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* doc/manual.sgml.head: Fixing a typo.

2002-09-09 20:53:46  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* postpone.c: Fixing #1300.  Noted by David Shaw
	<dshaw@jabberwocky.com>.

	* postpone.c: Fix #1299; noted by David Shaw
	<dshaw@jabberwocky.com>.

2002-09-09 20:20:20  Michael Elkins  <me@sigpipe.org>  (roessler)

	* init.h, mutt.h, send.c: Introducing $forward_edit.

	* globals.h, init.h, send.c: Introduce $content_type.  There's
	one change against Michael's patch, in how the "format=flowed"
	parameter is used.

2002-09-09 20:04:45  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* history.c: [STABLE] Fixing history classes.

	* history.c: Fixing history classes.

2002-09-09 19:56:25  Armin Wolfermann  <aw@osn.de>  (roessler)

	* mh.c: when doing the second parsing pass on a maildir,
	mutt doesn't delete the fake HEADER struct if the file is
	unreadable. With this fix unreadable files get silently ignored
	(like in the MH case).

2002-09-09 19:55:01  "TAKAHASHI, Tamotsu"  <arms405@jade.dti.ne.jp>
(roessler)

	* po/ja.po: Update.

2002-09-09 19:53:24  Michael Elkins  <me@sigpipe.org>  (roessler)

	* editmsg.c: Fixing #1149:  Truncate files used for editing
	messages.

2002-09-09 19:29:26  Nicolas Rachinsky	<nicolas@dauerreden.de>
(roessler)

	* doc/manual.sgml.head, doc/muttrc.man.head, buffy.c, buffy.h,
	init.h: An unmailboxes command.  #1311.

2002-09-09 19:24:54  Michael Elkins  <me@sigpipe.org>  (roessler)

	* attach.c: Fixing #1330.

	* attach.c: [STABLE] Fixing #1330.

2002-08-09 07:01:11  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* doc/muttrc.man.head: Document unalternative_order in the
	manual page.

2002-08-09 06:58:37  Michael Elkins  <me@sigpipe.org>  (roessler)

	* doc/manual.sgml.head, init.c, init.h: The following patch
	adds the `unalternative_order' command.  It also allows using
	"*" more generically in un-commands which use parse_unlists().

2002-08-05 17:25:05  Michael Elkins  <me@sigpipe.org>  (roessler)

	* pgpewrap.c, pgppubring.c, pgpewrap.c, pgppubring.c: Error
	handling fixes.

2002-07-26 08:24:01  Michael Elkins  <me@sigpipe.org>  (roessler)

	* doc/manual.sgml.head: Documentation for reply-hook.  Another
	patch (for the manual page) would be most welcome. ;-))

	* curs_lib.c: The attached patch fixes mutt_yesorno() so that the
	question will be truncated enough to always fit in the default
	answer string.	The size is calculated on the fly so that there
	is no artificial truncation.

2002-07-24 09:46:58  TAKIZAWA Takashi  <taki@luna.email.ne.jp>	(roessler)

	* mutt.h, mutt.h: The attached patch sets MB_LEN_MAX to 16,
	which is MB_LEN_MAX value on glibc-2.2. It works only with
	--without-wc-funcs switch. It may be applied to mutt-1.4 and
	mutt-1.5.1.

2002-07-24 09:37:41  Lars Hecking  <lhecking@nmrc.ie>  (roessler)

	* configure.in, configure.in: Fix a quoting sloppiness.  Noted by
	Vincent Lefevre.

2002-07-24 09:33:59  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* browser.c, browser.c: Fixing #1282.  An off-by-one error. :-/

2002-07-24 09:20:22  Michael Elkins  <me@sigpipe.org>  (roessler)

	* mutt.h, send.c, hook.c, init.h: reply-hook.  Documentation
	still needed.

2002-07-24 09:06:06  Vincent Lefevre  <vincent@vinc17.org>  (roessler)

	* po/fr.po: update.

2002-07-24 08:41:31  Michael Elkins  <me@sigpipe.org>  (roessler)

	* doc/mutt.man, compose.c, editmsg.c, init.c, init.h, attach.c,
	doc/mutt.man, compose.c, editmsg.c, init.c, init.h, attach.c:
	Fix $editor and $visual.  Based on an earlier patch from Edmund
	Grimley Evans.

2002-07-19 19:23:21  Michael Elkins  <me@sigpipe.org>  (roessler)

	* doc/manual.sgml.head: Another documentation patch.

2002-07-17 12:48:38  Rocco Rutte  <s1118644@mail.inf.tu-dresden.de>
(roessler)

	* sendlib.c: * Thomas Roessler [02-07-08 10:14:53 +0200]
	wrote: >  * sendlib.c, 3.12 -> 3.13 >	 From: Rocco Rutte
	<s1118644@mail.inf.tu-dresden.de>

	>    Make encode_from a bit more aggressive, by also catching a
	'f' in >    the beginning of a line.

	'Catch' is good but also to encode it is better. It may have
	been too late (sorry for that) so I fixed it. I don't know why
	the current source only escapes lines that actually begin with
	'from' or 'From' followed by some text. I think that escaping
	'from' or 'From' on a single line should be done, too.

	Not a big deal, anyways.

2002-07-16 07:28:11  Michael Elkins  <me@sigpipe.org>  (roessler)

	* main.c, main.c: Update copyright notices.

2002-07-07 19:33:50  Cedric Duval  <cedricduval@free.fr>  (roessler)

	* doc/manual.sgml.head, doc/mutt.man, init.h: Documentation fixes.

2002-07-07 19:29:05  "TAKAHASHI, Tamotsu"  <arms405@jade.dti.ne.jp>
(roessler)

	* doc/manual.sgml.head: Dcumentation fixes.

2002-07-07 19:23:22  Cedric Duval  <cedricduval@free.fr>  (roessler)

	* doc/manual.sgml.head, doc/mutt.man, init.h: Documentation fixes.

2002-07-07 19:22:19  Rocco Rutte  <s1118644@mail.inf.tu-dresden.de>
(roessler)

	* sendlib.c: Make encode_from a bit more aggressive, by also
	catching a 'f' in the beginning of a line.

2002-07-07 19:13:03  Velko Hristov  <hristov@informatik.hu-berlin.de>
(roessler)

	* po/bg.po: Update.

2002-07-07 19:11:15  Jeremy Blosser  <jblosser-mutt@firinn.org>
(roessler)

	* init.h: Add unauto_view to the stable branch.  A one-liner.

2002-06-28 19:52:31  Michael Elkins  <me@sigpipe.org>  (roessler)

	* doc/manual.sgml.head, doc/manual.sgml.head: Documentation fix
	(#271).

2002-06-18 10:03:52  (automatic)  (roessler)

	* po/zh_TW.po, po/tr.po, po/uk.po, po/zh_CN.po, po/sv.po,
	po/sk.po, po/ru.po, po/pt_BR.po, po/nl.po, po/pl.po, po/ja.po,
	po/ko.po, po/lt.po, po/it.po, po/gl.po, po/hu.po, po/id.po,
	po/eo.po, po/es.po, po/et.po, po/fr.po, po/el.po, po/da.po,
	po/de.po, po/ca.po, po/cs.po: "make update-po"

2002-06-18 10:02:44  several submitters  (roessler)

	* po/ca.po: Adding a BG translation.  Update for CA.

2002-06-18 10:02:43  roessler  (roessler)

	* po/bg.po: branches:  1.1.2; file bg.po was initially added on
	branch mutt-1-4-stable.

2002-06-18 10:02:43  several submitters  (roessler)

	* po/bg.po: Adding a BG translation.  Update for CA.

	* configure.in: Adding a BG translation.

2002-06-18 09:53:12  Michael Elkins  <me@sigpipe.org>  (roessler)

	* init.c, init.c: The string used to store the commmand for a
	backtic expansion in the muttrc was not free'd if the command
	failed for some reason.

2002-06-18 09:52:13  David Champion  <dgc@uchicago.edu>  (roessler)

	* m4/gssapi.m4: Okay, two bugs here. One's an oversight of mine
	in my previous patch, where I tried to use "[hH]" as Bourne code
	while m4 had quoting set to ([, ]) -- this probably makes mutt
	mis-detect Heimdal after all.

	The other is not mine (i.e., it's in cvs now) and it makes mutt
	overstrike $LIBS if Heimdal or MIT Kerberos is detected. This is
	a problem for anyone who needs -lnsl -lsocket, in particular. I
	was fixing this by hand during late 1.3.x releases, as I didn't
	have time to track it down....

	Here's a patch against the current (unpatched) 1.5 cvs copy of
	m4/gssapi.m4. It probably should go into both branches. Sorry
	for the repeats.

2002-06-06 23:13:54  Michael Elkins  <me@sigpipe.org>  (roessler)

	* color.c: Fix #1230.

2002-06-06 12:22:05  Will Fiveash  <william.fiveash@sun.com>  (roessler)

	* init.h, init.h: Fix a couple of compile-time warnings.

2002-05-31 16:59:39  Edmund GRIMLEY EVANS  <edmundo@rano.org>  (roessler)

	* charset.c, charset.h, sendlib.c, charset.c, charset.h,
	sendlib.c: Fix charset-hook.

2002-05-31 16:45:49  Lars Hecking  <lhecking@nmrc.ucc.ie>  (roessler)

	* m4/iconv.m4, INSTALL, charset.h, configure.in: The noiconv
	patch.	Should probably have been in 1.4.

2002-05-30 12:15:02  Thomas Roessler  <roessler@does-not-exist.org>
(roessler)

	* rfc822.c: Properly handle empty addresses (<>) when they show
	up in mail headers.  The approach taken is to store this address
	as <@>, and to check this special case when printing an address.

2002-05-29 09:31:51  roessler  (roessler)

	* po/zh_CN.po, po/zh_TW.po, po/uk.po, po/tr.po, po/sk.po,
	po/sv.po, po/pl.po, po/pt_BR.po, po/ru.po, po/ko.po, po/lt.po,
	po/nl.po, po/it.po, po/ja.po, po/fr.po, po/gl.po, po/hu.po,
	po/id.po, po/eo.po, po/es.po, po/et.po, po/da.po, po/de.po,
	po/el.po, VERSION, po/ca.po, po/cs.po, reldate.h, ChangeLog:
	automatic post-release commit for mutt-1.4
