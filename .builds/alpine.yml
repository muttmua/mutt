image: alpine/edge
packages:
- autoconf
- automake
- cyrus-sasl-dev
- gdbm-dev
- gettext-dev
- gpgme-dev
- libidn2-dev
- ncurses-dev
- openssl-dev
- perl
- tcc
- tcc-libs-static
sources:
- https://git.sr.ht/~mutt/mutt
tasks:
- default: |
    cd mutt
    autoreconf -if
    ./configure
    make -j4 CFLAGS='-Wall -Werror'

- without-wc-funcs: |
    cd mutt
    autoreconf -if
    ./configure \
        --without-wc-funcs
    make -j4 CFLAGS='-Wall -Werror'

- original: |
    cd mutt
    autoreconf -if
    ./configure \
        --enable-gpgme \
        --enable-pop \
        --enable-imap \
        --enable-smtp \
        --enable-hcache \
        --enable-sidebar \
        --without-included-gettext \
        --with-mailpath=/var/spool/mail \
        --with-curses \
        --with-ssl \
        --with-sasl \
        --with-idn2
    make -j4 CFLAGS='-Wall -Werror'

- tcc: |
    cd mutt
    autoreconf -if
    CC=tcc ./configure
    make -j4 CFLAGS='-Wall -Werror'
