image: debian/stable
packages:
- autoconf
- automake
- gettext
- libgdbm-dev
- libgpgme-dev
- libidn2-dev
- libncurses-dev
- libsasl2-dev
- libssl-dev
- tcc
sources:
- https://git.sr.ht/~mutt/mutt
tasks:
- default: |
    cd mutt
    autoreconf -if
    ./configure
    make -j4 CFLAGS='-Wall -Werror'

- without-wc-funcs: |
    cd mutt
    autoreconf -if
    ./configure \
        --without-wc-funcs
    make -j4 CFLAGS='-Wall -Werror'

- original: |
    cd mutt
    autoreconf -if
    ./configure \
        --enable-gpgme \
        --enable-pop \
        --enable-imap \
        --enable-smtp \
        --enable-hcache \
        --enable-sidebar \
        --without-included-gettext \
        --with-mailpath=/var/spool/mail \
        --with-curses \
        --with-ssl \
        --with-sasl
    make -j4 CFLAGS='-Wall -Werror'

- tcc: |
    cd mutt
    autoreconf -if
    CC=tcc ./configure
    make -j4 CFLAGS='-Wall -Werror'
